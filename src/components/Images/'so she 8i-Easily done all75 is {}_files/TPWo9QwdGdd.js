if (self.CavalryLogger) { CavalryLogger.start_js(["HEhyo"]); }

__d("WorkContentActivityTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$1={}}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:WorkContentActivityLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:WorkContentActivityLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:WorkContentActivityLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAdditionalData=function(a){this.$1.additional_data=b("GeneratedLoggerUtils").serializeMap(a);return this};a.prototype.setAppContentID=function(a){this.$1.app_content_id=a;return this};a.prototype.setAppID=function(a){this.$1.app_id=a;return this};a.prototype.setAppVersion=function(a){this.$1.app_version=a;return this};a.prototype.setAssociatedPostID=function(a){this.$1.associated_post_id=a;return this};a.prototype.setAttachmentFileType=function(a){this.$1.attachment_file_type=a;return this};a.prototype.setContentID=function(a){this.$1.content_id=a;return this};a.prototype.setContentType=function(a){this.$1.content_type=a;return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setParentContentID=function(a){this.$1.parent_content_id=a;return this};a.prototype.setParentContentType=function(a){this.$1.parent_content_type=a;return this};a.prototype.setSurfaceType=function(a){this.$1.surface_type=a;return this};a.prototype.setTargetID=function(a){this.$1.target_id=a;return this};a.prototype.setTime=function(a){this.$1.time=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.setWeight=function(a){this.$1.weight=a;return this};c={additional_data:!0,app_content_id:!0,app_id:!0,app_version:!0,associated_post_id:!0,attachment_file_type:!0,content_id:!0,content_type:!0,event:!0,parent_content_id:!0,parent_content_type:!0,surface_type:!0,target_id:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("FantaTypeFileUploaderFile",["immutable"],(function(a,b,c,d,e,f){"use strict";var g;c={file:{},id:"",startTime:0,type:null,uploadedID:null};g=babelHelpers.inherits(a,b("immutable").Record(c));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("WorkContentActivityEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CLICK_FILE_DOWNLOAD:"CLICK_FILE_DOWNLOAD",CLICK_FILE_PREVIEW:"CLICK_FILE_PREVIEW",CLICK_FILE_IMAGE:"CLICK_FILE_IMAGE",CLICK_FILE_TITLE:"CLICK_FILE_TITLE",CLICK_VIEW_POST:"CLICK_VIEW_POST",CLICK_SEE_ALL:"CLICK_SEE_ALL",SELECT_FILE_TOO_BIG:"SELECT_FILE_TOO_BIG",UPLOAD_FILE:"UPLOAD_FILE",UPLOAD_FILE_REVISION:"UPLOAD_FILE_REVISION",CHAT_FILE_UPLOAD:"CHAT_FILE_UPLOAD"})}),null);
__d("WorkContentActivitySurface",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({GROUP_FEED:"GROUP_FEED",NEWS_FEED:"NEWS_FEED",RHC:"RHC",FILES_TAB:"FILES_TAB",FILES_COMPOSER:"FILES_COMPOSER",STATUS_COMPOSER:"STATUS_COMPOSER",CHAT_MAIN:"CHAT_MAIN",CHAT_TAB:"CHAT_TAB"})}),null);
__d("ChatFileUploadLoggingUtils",["CurrentUser","WorkContentActivityEvent","WorkContentActivitySurface","WorkContentActivityTypedLogger"],(function(a,b,c,d,e,f){"use strict";a={log:function(a,c){c===void 0&&(c=b("WorkContentActivitySurface").CHAT_MAIN),b("CurrentUser").isWorkUser()&&new(b("WorkContentActivityTypedLogger"))().setSurfaceType(c).setEvent(b("WorkContentActivityEvent").CHAT_FILE_UPLOAD).setAdditionalData({file_size:a.size.toString(),file_type:a.type}).log()}};e.exports=a}),null);
__d("MessengerUploadFilesStore",["fbt","ChatFileUploadLoggingUtils","Dialog","FantaTypeFileUploader","FantaTypeFileUploaderFile","FBLogger","LogHistory","MercuryConstants","MessengerActions","MessengerStore","PhotosUploadID","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("LogHistory").getInstance("messenger_share_file_preview");c=babelHelpers.inherits(a,b("MessengerStore"));h=c&&c.prototype;function a(){h.constructor.call(this),this.$MessengerUploadFilesStore1=b("immutable").Map({})}a.prototype.getState=function(){return this.$MessengerUploadFilesStore1};a.prototype.__onDispatch=function(a){__p&&__p();var c,d=a.threadID,e=a.uploadID;switch(a.type){case b("MessengerActions").Types.PREPARE_FILES_FOR_SEND:i.log("Add files "+d,JSON.stringify(a));var f=a.files;this.$MessengerUploadFilesStore1=j(this.$MessengerUploadFilesStore1,d,f);this.emitChange();break;case b("MessengerActions").Types.CANCEL_FILE_UPLOAD:i.debug("Remove file "+d,JSON.stringify(a));f=this.$MessengerUploadFilesStore1.get(d);c=f.get("uploadingFiles").get(e);c?this.$MessengerUploadFilesStore1=this.$MessengerUploadFilesStore1.deleteIn([d,"uploadingFiles",e]):(c=f.get("uploadedFiles").get(e),c&&(this.$MessengerUploadFilesStore1=this.$MessengerUploadFilesStore1.deleteIn([d,"uploadedFiles",e])));this.emitChange();break;case b("MessengerActions").Types.EMPTY_FILES:i.debug("Empty files "+d,JSON.stringify(a));this.$MessengerUploadFilesStore1=this.$MessengerUploadFilesStore1.withMutations(function(a){a.get(d)&&a.set(d,new(b("FantaTypeFileUploader"))())});this.emitChange();break}};function j(a,c,d){__p&&__p();for(var e=0;e<d.length;e++){var f=d[e];b("ChatFileUploadLoggingUtils").log(f);if(f.size>b("MercuryConstants").AttachmentMaxSize){new(b("Dialog"))().setTitle(g._("The file you have selected is too large")).setBody(g._("The file you have selected is too large. The maximum size is 25MB.")).setButtons(b("Dialog").OK).setSemiModal(!0).show();b("FBLogger")("messenger_upload_file").warn("Uploading file is too large");return a}}for(var f=0;f<d.length;f++){e=d[f];var h=l();a=k(a,c,h,e)}return a}function k(a,c,d,e){return a.withMutations(function(a){a.get(c)||a.set(c,new(b("FantaTypeFileUploader"))());var f=a.get(c);a.set(c,f.setIn(["uploadedFiles",d],new(b("FantaTypeFileUploaderFile"))({file:e,id:d,startTime:Date.now()})))})}function l(){return"upload_"+b("PhotosUploadID").getNewID()}e.exports=new a()}),null);