if (self.CavalryLogger) { CavalryLogger.start_js(["vaYO8"]); }

__d("ChatEmojiButton.react",["cx","fbt","AutoFocusableLink.react","ChatFlyoutPlaceholder.react","JSResource","React","ReactComponentWithPureRenderMixin","XUIContextualDialog.react","gkx","joinClasses","lazyLoadComponent"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("lazyLoadComponent")(b("JSResource")("EmojiPicker.react").__setRef("ChatEmojiButton.react")),j=b("lazyLoadComponent")(b("JSResource")("ChatEmojiFlyout.react").__setRef("ChatEmojiButton.react"));a=b("React").PropTypes;var k=278;c=b("React").createClass({displayName:"ChatEmojiButton",_clickGuard:!1,mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{autoFocus:a.bool,clicked:a.bool,ContextualDialogClass:a.func.isRequired,flyoutAlignment:a.oneOf(["left","right"]),fromChatTab:a.bool,onMount:a.func,onSelect:a.func,sendCustomEmoji:a.func,threadID:a.string},getDefaultProps:function(){return{ContextualDialogClass:b("XUIContextualDialog.react"),flyoutAlignment:"left"}},getInitialState:function(){return{shown:!!this.props.clicked}},componentDidMount:function(){this.props.onMount&&this.props.onMount(this)},hideFlyout:function(){this.setState(this.getInitialState()),this.props.getInput&&this.props.getInput().focus()},render:function(){return b("React").createElement(b("AutoFocusableLink.react"),{autoFocus:this.props.autoFocus,className:b("joinClasses")(this.props.className,this.state.shown?"open":""),href:"#",onMouseDown:this._handleMouseDown,onClick:this._handleClick,role:"button",title:h._("Choose an emoji"),ref:"link"},this.renderLayers())},renderLayers:function(){if(!this.state.shown)return null;if(b("gkx")("842182"))return b("React").createElement(b("React").Suspense,{fallback:b("React").createElement(b("ChatFlyoutPlaceholder.react"),null)},b("React").createElement(i,{context:this.refs.link,onToggle:this._handleContextualDialogToggle,shown:this.state.shown&&!!this.refs.link,onSelect:this._handleSelect,isVariationsShown:!0}));var a=this.props.ContextualDialogClass;return b("React").createElement(a,{alignment:this.props.flyoutAlignment,contextRef:function(){return this.refs.link}.bind(this),offsetY:this.props.fromChatTab?-20:10,onBlur:this.hideFlyout,onToggle:this._handleContextualDialogToggle,shown:this.state.shown&&!!this.refs.link,width:k,key:"contextualDialog"},b("React").createElement(b("React").Suspense,{fallback:b("React").createElement(b("ChatFlyoutPlaceholder.react"),null)},b("React").createElement(j,{onCategorySelect:this._focusInput,onEscKeyDown:this.hideFlyout,onSelect:this._handleSelect,sendCustomEmoji:this.props.sendCustomEmoji,threadID:this.props.threadID,width:k})))},_focusInput:function(){this.props.getInput&&this.props.getInput().focus()},_handleMouseDown:function(){this._clickGuard=this.state.shown},_handleClick:function(a){a.stopPropagation();if(this._clickGuard){this._clickGuard=!1;return}a=this.state.shown;this.setState({shown:!a});this._focusInput()},_handleSelect:function(a){this.props.onSelect&&this.props.onSelect(a)},_handleContextualDialogToggle:function(a){this.setState({shown:a})}});e.exports=c}),null);