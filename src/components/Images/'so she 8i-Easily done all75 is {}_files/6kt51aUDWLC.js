if (self.CavalryLogger) { CavalryLogger.start_js(["E5voT"]); }

__d("FBRTCRingType",[],(function(a,b,c,d,e,f){e.exports={GROUP_AUDIO_CALL:0,PEER_VIDEO_CALL:1,PEER_AUDIO_CALL:2,GROUP_VIDEO_CALL:3,LIVE_STREAM:4,PEER_ESCALATED_VIDEO_CALL:5,PEER_ESCALATED_AUDIO_CALL:6}}),null);
__d("SimpleNUXMessageTypes",[],(function(a,b,c,d,e,f){e.exports={ACTION_POST_SPROUT:"201891520417101",AD_BREAK_BACKFILL_NUX:"216758452274152",AD_BREAK_PORTAL_DISABLE_NUX:"1293579247404404",AD_BREAK_PORTAL_ENABLE_NUX:"1487233744681276",AD_BREAK_PREREVIEW_BUTTON:"201947367207528",AD_BREAK_PREREVIEW_DIALOG:"1453283214801217",AD_BREAKS_NOTICE_NUX:"518404145186372",AD_CANVAS_EDITOR_SWIPE_TO_OPEN:"1088399387945919",AD_CANVAS_EDITOR_TOOLBAR_NUX:"1733450480268575",AD_CANVAS_INLINE_BUILDER_ACQUISITION_TOUR:"175599466304273",AD_CANVAS_INLINE_BUILDER_BRAND_RETAIL_TOUR:"727232757449618",AD_CANVAS_INLINE_CREATION_FINISH_NUX:"177120099488520",AD_CANVAS_INLINE_MERGED_SHOPPING_TYPE_SWITCH_NUX:"2073342292910976",AD_CANVAS_WEB_PARSING_PREVIEW_BUTTON_NUX:"113392532512232",AD_MARKETPLACE_BOOSTED_LISITING_NO_WWW_NUX:"1970086756357493",AD_STUDY_POWER_CALCULATOR_V2_NUX:"902884353135091",ADLITMUS_CONTEXTUAL_FILTER:"1241923179228807",ADLITMUS_CONTEXTUAL_FILTER_2:"960324240770046",ADLITMUS_DISAPPROVAL_CHART:"669286016585000",ADLITMUS_METRIC_SELECTOR:"995282707283022",ADLITMUS_OVERVIEW_BUTTONS:"1470674259618716",ADLITMUS_OVERVIEW_COLUMN_BUTTON:"978496702250952",ADLITMUS_OVERVIEW_COLUMN_BUTTON_2:"1170176333079647",ADLITMUS_POCILY_DOCUMENT:"1869055203378228",ADS_AUDIENCE_ECA_NUX:"116870535620102",ADS_CANVAS_INLINE_RICH_FORM_TEMPLATE_NUX:"256844444893983",ADS_CF_PPE_CTA_EXISTING_POST_NUX:"342824272805137",ADS_DELIVERY_GROWTH_CBO_OPT_OUT_SURVEY:"2152920788075037",ADS_GUIDE_AD_FORMAT_NUX:"174587579760406",ADS_GUIDE_PLACEMENT_NUX:"1971344056440935",ADS_INSIGHTS_PREDICTED_EARL_UPDATE_NUX:"826955334159872",ADS_LWI_AD_PREVIEW_DROPDOWN_NUX:"280345886149166",ADS_LWI_BOOSTED_REAL_ESTATE_LISTING_CREATIVE_NUX:"658161361201146",ADS_LWI_DCO_CREATIVE_NUX:"1684011881716127",ADS_LWI_DUPLICATE_BUTTON_NEW_USER_NUX:"263464760889654",ADS_LWI_FB_IG_MEDIA_NUX:"204392073709141",ADS_LWI_FREE_STOCK_IMAGE_BUTTON_NUX:"385710681948361",ADS_LWI_PROMOTION_HUB_POST_CREATION_NUX_NEW:"201541873991679",ADS_LWI_WELCOME_MESSAGE_PREVIEW_BACK_NUX:"726672891012332",ADS_LWI_WELCOME_MESSAGE_SETUP_NUX:"2126685270916450",ADS_MGMT_DRAFT_RETURNING:"1449576008464524",ADS_PAYMENTS_BILLING_PAYMENT_SETTINGS:"431533470581332",ADS_PROBABILISTIC_PACER_NUX:"590450231150410",ADS_RACK_QRT_SCHEDULE_RACK:"461806427649606",ADS_RACK_QRT_USE_SPECIAL_DEDICATED_RACK:"291206234801946",ADS_RECOMMENDATION_ONBOARDING_NUX:"2212760302298019",ADS_REPORTING_DATE_COMPARISON_EXPORT_NUX:"301296300267531",ADS_REPORTING_DATE_COMPARISON_TABLE_NUX:"940995439364307",ADS_ROAS_UPSELL_FOR_PURCHASE_EVENT_NUX:"256432508156448",ADS_TAL_TEST_LANDING_VIDEO_NUX:"321865108584009",ADS_TARGETING_BEST_PERFORMING_DESCRIPTOR:"627419454089322",ADS_TARGETING_CUSTOM_AUDIENCE_CREATION_MENU:"951445441641663",ADS_TARGETING_DEPRECATION_GLOBAL_BANNER_PC_ANNOUNCEMENT:"265551210704758",ADS_TARGETING_DEPRECATION_GLOBAL_BANNER_PC_DEPRECATION:"263815490911060",ADS_TARGETING_FB_ENGAGEMENT_CUSTOM_AUDIENCE_NUX:"703640899836073",ADS_WCA_ADVANCED_NUX:"499230403617848",ADVERTISER_ISSUE_SLA_UI_NUX:"361588404614116",AHC_BREADCRUMB_NUX:"777525089119168",AIP_CALENDAR_MEETING_LOCATION:"803596233333718",AIP_INTERN_ACTIVITY_NUX:"2066216847011691",AIP_PHABRICATOR_FILTER_FIELDS_NUX:"2201516583502304",AIP_REVIEWER_DECISION_LOCATION:"233625057521286",AIP_SAVED_SEARCH_NUX:"2469586709721722",ALBUMSV2_ANY_POST_TYPE_WWW:"1219379658190068",ALBUMSV2_FEED_VIEW_SWITCHER:"810166682493534",ALOHA_DEVICE_TOOL_PII:"144685186364858",ANALYTICS_AI_POWER_SEARCH:"434795240282386",ANALYTICS_CUSTOM_DASHBOARDS_PIN_NUX:"1867718276817428",ANALYTICS_ESG_SEGMENT_SELECTOR_NUX:"186171265442742",ANALYTICS_JOURNEY_FIRST_TIME_TOUR:"227141734534393",ANALYTICS_NEW_PRECONFIGURED_FUNNEL_CHART:"178702279493884",ANALYTICS_NOTEBOOK_PORTAL_BENTO_CLONE_BUTTON:"245027882983481",ANALYTICS_OVERLAP_IN_OVERVIEW:"1937298586554814",ANALYTICS_UNIVERSAL_BUILDER_BREAKDOWN_SECTION_CONTROLS:"213464796173524",ANALYTICS_UNIVERSAL_BUILDER_BREAKDOWN_SECTION_OPTION_MENU:"421394331695654",ANALYTICS_UNIVERSAL_BUILDER_DASHBOARD_SECTION_OPTION_MENU:"860151250838796",ANOMALY_ADVANCED_OPTION:"470693536696968",ANOMALY_AUTOTUNE:"2219668948289591",ANOMALY_CURRENT_VERSION_CARD:"560675801035565",ANOMALY_DELETE_BUTTON_MOVED:"2410553782293741",ANOMALY_DETECTION_MISSING_ALERT:"181109869263945",ANOMALY_DIMENSIONAL_VISUALIZATION:"1923138054443366",ANOMALY_EDIT_OBSERVER_SOURCE:"330993577635345",ANOMALY_HOMEPAGE_BULK_EDIT:"2049949735048906",ANOMALY_RATIO_METRICS:"448399118955285",APERTURE_LIVE_DIFF_NUX:"295806684407990",APP_BUTTON_INDEXING_NUX:"492588661150295",APP_CODELESS_NUX:"1791020150944600",APP_EM_UPSELL_NUX:"667048750360569",APP_EVENT_RELABELING_REPORTING_NUX:"386738931761148",APP_EVENT_SETUP_NUX:"172802323409235",APP_SDK_SETUP_NUX:"1704132219649488",APP_SDK_SETUP_WIZARD_OPEN:"2052213545041577",ARP_CLOSE_AUTOUPGRADED_EFFECTS_ANNOUNCEMENT:"1773108326127856",ARP_CLOSE_CATEGORY_ANNOUNCEMENT:"239782710230841",ARP_CLOSE_FRAMESTUDIO_DEPRECATION:"478146249320747",ARP_CLOSE_PERMISSION_ANNOUNCEMENT:"2082520885149708",ARP_CLOSE_PERMISSION_AR_MANAGER_NOTICE:"2268571136734629",ARP_CLOSE_REJECTED_EFFECTS_ANNOUNCEMENT:"2368374376527623",ARP_DEMO_VIDEO_ANNOUNCEMENT:"692113094519574",ARP_EFFECT_FILES_INFO_BANNER:"256600998367293",AUDIENCE_INLINE_SAVE_NUX:"387683724758581",AUDIENCE_NETWORK_AD_SPACES_NUX:"402522293481325",AUTHOR_PUBLISHER_SETTINGS_NUX:"279509335883553",AUTHOR_PUBLISHER_SETTINGS_PENDING_NUX:"1321307767997459",BCMP_BRAND_NEW_FILTERS:"532092247215428",BCMP_BRAND_PROJECT_BRIEFS:"278306636203144",BCMP_BRAND_WELCOME_MODAL:"2133051246927387",BCMP_CREATOR_PROJECT_BRIEFS:"252805988710802",BCMP_VIEW_AS_ADVERTISER:"310969229428588",BM_ADMIN_TRANSPARENCY_MODAL:"699101503824970",BM_APP_DEV_PROFILE_NUX:"185534978945122",BM_NOTIFICATION_AD_ACCOUNT_PREFERENCE:"2209370209344832",BM_NOTIFICATION_PAGE_PREFERENCE:"335385157026175",BM_SETTINGS_NOTIFICATION:"2151192025129300",BM_VERIFY_DOMAINS_EDU_CARD:"339586689840276",BOOST_POST_ADD_WHATSAPP_CTA_NUX:"1641164055995051",BOOST_POST_DELIVERY_TYPE_NUX:"1123576301036863",BOOST_POST_MESSAGE_OBJECTIVE_WHATSAPP_DESTINATION:"291441848369900",BOOST_POST_SHOW_REQUIRE_WHATSAPP_BUSINESS_NUMBER_NOTICE:"576628766128868",BOOSTED_COMPONENT_CTA_SELECTOR_NUX:"149361148834083",BOOSTED_COMPONENT_INSTAGRAM_LIBRARY:"1109521299111498",BOOSTED_COMPONENT_POLITICAL_AD_NUX:"189586748439386",BOOSTED_COMPONENT_WHATSAPP_CTA_NUX:"118992258780777",BOOSTED_LOCAL_AWARENESS_SAVE_CTA_NUX:"176805122743554",BOOSTED_POST_GET_TICKETS_CTA_NUX:"566131753767601",BRANDED_CONTENT_SPONSORSHIP_USE_CASE_NUX:"2157250547838660",BUSINESS_MANAGER_INACTIVE_ADMIN_NUX:"2227251294171800",BUSINESS_MANAGER_INACTIVE_EMPLOYEE_NUX:"1881956528774494",BUSINESS_MANAGER_INVALID_EMAIL_NUX:"1908135579490567",BUY_AT_INSIGHTS_NAV_ITEM_NUX:"604910773237636",BUY_AT_INSIGHTS_PURCHASE_REQUEST_LINE_ACTION_NUX:"2229110023977706",C3_CREATE_CONVERSATION_BTN:"282053395769104",CALENDAR_AUTO_DELETE_CANCELED_MEETINGS_NUX:"2031285777128123",CALENDAR_BOOKING_INVITEES_NUX:"1641508702614049",CALENDAR_DETECT_CANCELED_MEETING_NUX:"424634948008023",CALENDAR_GOOGLE_CALENDAR:"432793830478407",CALENDAR_ONE_ON_ONE_MEETING_NUX:"1905436429481352",CALENDAR_PTO_WARNING_NUX:"1817395141900067",CALENDAR_RECURRING_MEETING_NUX:"331797243912023",CALENDAR_WAITLIST_FILTER_NUX:"110490779666789",CALENDAR_WAITLIST_SUGGESTED_NUX:"485952911766371",CANDIDATE_REVIEW_MINIMAP_NUX:"176496689750253",CANVAS_DRAGGABLE_COMPONENTS:"788423921300532",CAREER_GROWTH_PRE_PRODUCT_SURVEY_COMPLETED:"311391929586658",CAREER_JOURNEYS_INTRODUCTION:"1430821403720099",CASUAL_GROUP_TAB:"1434164043346540",CATALYST_BOOST_CONTENT_NUX:"1891422247647618",CEP_INTERN_PROFILE_CAREER_TAB_INTRO_GUIDE:"298911160622975",CEP_INTERNSHIP_IM_SIGNUP_FALL_2018_NEW_SKILL_OPTION:"2094019837540126",CEP_INTERNSHIP_IM_SIGNUP_FALL_2018_PROGRAMS:"599382973760492",CEP_PROFILE_EXPERIENCE_SECTION_CHECKLIST_ITEM:"482607872139050",CEP_PROFILE_OVERALL_WELCOME:"221370871964289",CEP_PROFILE_PRIVACY_REMOVED_INFORMATION:"2316910275033784",CEP_PROFILE_SEARCH_BOOTCAMP_TAB:"1728896537166892",CEP_PROFILE_SEARCH_DRAWER_REACHOUTS_TAB:"534980843528468",CEP_PROFILE_SEARCH_UNSEEN_FIRST_SORT_OPTION:"277571796322505",CEP_PROFILE_SEARCH_VIEW_STATE_TOGGLE_BAR:"203165910341361",CEP_PROFILE_SKILLS_SECTION_CHECKLIST_ITEM:"1869426150052875",CEP_PROFILE_STATUS_SECTION_CHECKLIST_ITEM:"520137911672179",CEP_PROFILE_SUMMARY_SECTION_CHECKLIST_ITEM:"168654350379562",CEP_PROFILE_SURVEY_SECTION_CHECKLIST_ITEM:"1810528908987809",CF_DEFAULT_MPA_NUX:"1630553150535001",CF_SLIDESHOW_OBJECTIVE_NUX:"707154356087550",CIC_CAROUSEL_CARD:"762809470522872",CIVIC_PROPOSAL_PERMALINK:"350244605723574",CMS_EDITOR_LOCALE_SWITCHER_NUX:"392206391156099",CMS_EDITOR_MEDIA_GROUP_MANAGER_BUTTON:"1204201476282432",CMS_EDITOR_V3_INTRO_DIALOG:"403928113338093",CMS_HISTORY_REVERT_LINK_NUX:"651145288381986",CMS_RIGHT_SIDEBAR_NUX:"760443084289468",CMS_SEARCH_AND_REPLACE_IGNORE_CASE_CHECKBOX:"407488016284957",CMS_SEARCH_COMPONENT_NUX:"1765875226969195",CMS_SEARCH_NUX_TOUR:"587356531436785",CMS_SNIPPETS_BUTTON_NUX:"314858175560645",CMS_TAG_EXPLORER_NUX_TOUR:"1064871376962611",CODE_QUALITY_CONTRIBUTIONS_PAGE:"481030302424584",CODE_QUALITY_SUGGESTIONS_FILTER_SEARCH:"706699023041475",CODESEARCH_ALL_TAB_NUX:"1137028176444156",CODESEARCH_CTRLF:"573118176465873",CODESEARCH_TOUR:"2237050553198915",COMMERCE_MN_BOT_NUX:"313627252311314",COMPOSER_SHARESHEET:"1848515345468781",COMPOSER_VIDEO_LENGTH_SHORT_LAUNCHPAD_BONUS_NUX:"337723460395191",COMPOSER_VIDEO_LENGTH_SHORT_NUX:"267500327210608",CONNECTIONS_SECTION:"434002046758336",CONNECTIONS_SECTION_WITHOUT_VIDEO:"1540728442877433",CONSIDERATION_SIGNALS_SCORE_EXPLAINER_ADMIN_FEEDBACK:"121649038700818",CORE_DATA_UI_CONSOLE_NUX:"264833204325937",CORE_DATA_UI_NAV_NUX:"228057951079376",COUPON_MAKE_PAGE_POST_AND_BOOST_OFFER_TRACKING_NUX:"2594973670522055",COUPON_OBJECTIVE_PICKER_NUX:"1320503514759301",COUPON_SPEND_TRACKING_NUX:"262407744411928",CREATE_CUSTOM_GROUP_NUX:"505933046503690",CREATE_HOUSEHOLD_AUDIENCE_NUX:"759881217528254",CREATE_SLIDESHOW_ADS_NUX:"886513371441875",CREATOR_STUDIO_AGGREGATION_TYPE_PICKER:"242110650007676",CREATOR_STUDIO_BULK_VIDEO_UPLOAD:"229837601031836",CREATOR_STUDIO_HOME_SEARCH:"2109343185990590",CREATOR_STUDIO_MULTIPOST_NUX:"707527709627103",CREATOR_STUDIO_MULTIPOST_UPSELL_NUX_ON_PAGES_COMPOSER:"1975930816042991",CREATOR_STUDIO_MULTIPOST_UPSELL_NUX_ON_VIDEO_COMPOSER:"581171062316449",CREATOR_STUDIO_MULTIPOST_UPSELL_PAGE_BANNER:"450921588770771",CREATOR_STUDIO_PLAYLISTS_NUX:"1183215328519870",CREATOR_STUDIO_SAVED_COLLECTIONS:"1504843486283386",CREDIT_AT_ACCOUNT_SEARCH_NUX:"259264261419173",CREDIT_AT_ADD_CREDIT_CHILD_NUX:"482796872211460",CREDIT_AT_KPI_NUX:"568676553557487",CREDIT_AT_NAV_BACK_NUX:"2206747559538161",CREDIT_AT_PARENT_CHILD_REALLOCATE_NUX:"583495615441460",CREDIT_AT_PCI_SCORE_NUX:"2223192987939178",CRISIS_UPSELL_DISMISS:"229521604669786",CRISIS_UPSELL_POST_SHARE:"1151859458321782",CRM_ACCOUNT_PLAN_2:"2234503603539405",CRM_BOB2_PHASE2_VIEWS:"115658465686242",CRM_CONTACTS_IMPORT_EXPORT_NUX:"258871664612559",CRM_EMAIL_SIGNATURE_UPDATE:"182426375619911",CRM_FEED_ACTIONS_NUX:"310049402756165",CRM_FEED_ORG_PAGE:"1790788867842141",CRM_FEED_PLAN_PAGE:"138431499974519",CRM_FEED_RECS:"1770321323216424",CRM_HV_PLAYBOOKS:"882735018588225",CRM_NEW_GSO_GOALS:"2223395624561736",CRM_NEW_SMB_GOALS:"1546056892163070",CRM_OPTIMAL_SOLUTIONS_EXPORT:"235062870566848",CRM_ORG_FINANCIALS:"279531125724087",CRM_PERFORMANCE_NUX:"325220368047612",CRM_SETTINGS_AD_SET_NOTIFICATION:"2095742720668939",CRM_SETTINGS_NOTIFICATION_OPT_OUT:"1352729128172034",CRM_SPLIT_TEST_ACCOUNTS_TABLE:"2131231500460722",CRST_ACTIVATE_DELIVERY:"379466019116547",CRST_COLLABORATION_AD_ACCOUNT_SELECTOR:"1962905610616960",CRST_COLLABORATION_BM_UPSELL:"677366185785209",CRST_COLLABORATION_CREATE_PROJECT:"393093704439360",CRST_COLLABORATION_MULTI_STEP_DIALOG:"125455191444648",CRST_COLLABORATION_ON_AD_ACCOUNTS_PER_USER:"495125194240549",CRST_DELIVER_AD_MANAGE_MOCKUPS_BUTTON:"1346563065437380",CRST_DELIVER_AD_MULTI_STEP_DIALOG:"285052618622049",CRST_GRID_UI_GRID_VIEW_BUTTON:"2229903497236974",CRST_GRID_UI_INTRO_DIALOG:"2032911540264858",CRST_GRID_UI_MORE_ACTIONS:"183444695832620",CRST_INSPIRE_SHORT_VIDEO:"255866331566255",CRST_MIGRATE_TO_BUSINESS_BUTTON:"1686331124782399",CRST_MIGRATE_TO_BUSINESS_DIALOG:"166447457306163",CRST_MIGRATE_TO_BUSINESS_UPSELL:"135323193980326",CRST_MOBILE_PREVIEW:"1747146378889382",CRST_MOBILE_PREVIEW_INTRO:"904117749711668",CRST_MOBILE_PREVIEW_SHARED:"502885896576282",CUSTOM_PROFILE_VIDEO_THUMBNAILS_NUX:"858089674339212",CV2_FOCUS_ANCHOR_NEIGHBORHOOD:"1047975512006804",CV2_FOCUS_ANCHOR_NEIGHBORHOOD_EXPAND:"477930239310694",CV2_GRAPH_OPERATIONS_LIST:"1799574900112183",CV2_TABLE_SEARCH_REGEX_NUX:"1522202831224786",CV2_TIMESERIES_AUTO_VERTICAL_SCALE:"2188315558115278",DAILY_SHOW_NUX_TOUR:"128345940926172",DAIQUERY_BASIC_MACRO_MYSQL:"1534997283286436",DAIQUERY_BASIC_MACRO_PRESTOHIVE:"424073578049411",DAIQUERY_BASIC_MACRO_RAPTOR:"217085242179149",DAIQUERY_BASIC_MACRO_SCUBASQL:"178206836293460",DAIQUERY_EXPORT_CHART_OPTIONS:"602587306747349",DAIQUERY_NEW_VISUALIZATION:"1452036998249042",DAIQUERY_RUN_AS_NEW_QUERY:"175905129651258",DAIQUERY_SETTINGS_RELOCATION_MYSQL:"154399021854035",DAIQUERY_SETTINGS_RELOCATION_PRESTOHIVE:"1948123992171681",DAIQUERY_SHARE_CHART_TO_WORKPLACE_MSG:"223288001660920",DAIQUERY_SHARE_TABLE_TO_WORKPLACE_MSG:"279526905954254",DAIQUERY_SUBMIT_BUTTON_FEATURES:"381401432693878",DBPORTAL_CREATE_REPLICASET_BUTTON:"128261877878541",DBPORTAL_CREATE_SHARDMAP_BUTTON:"1834965906533194",DDT_SCHEDULED_DASHBOARD:"2108760072726030",DEVELOPER_COMMUNITY_POST_ACTION_MENU:"2107239542921335",DEVELOPER_COMMUNITY_THREAD_SUBSCRIBE_BUTTON:"357223241693846",DEVICE_LOGIN_CLOSE_BUTTON_NUX:"772951722838986",DEVSITE_ADNW_BUNDLE:"646184548874131",DEVSITE_APP_APPEAL_LOCALIZED:"1907978229256239",DEVSITE_APP_DASHBOARD_ADD_PRODUCT_NUX:"490448847821290",DEVSITE_APP_DASHBOARD_FB_ANALYTICS_NUX:"545627442289387",DEVSITE_BUGS_DETAILS_SUBSCRIBE_BUTTON:"1103088809711938",DEVSITE_BUGS_HOME_CREATE_LOCALIZED:"190127184825967",DEVSITE_BUGS_HOME_SEARCH_APPS:"810965742370194",DEVSITE_BUGS_HOME_SEARCH_PRESELECT_APP:"254472424907417",DEVSITE_BUGS_HOME_SEARCH_TAGS:"988491391232062",DEVSITE_BUGS_HOME_SELECT_TAGS:"1174329739252695",DEVSITE_BUGS_INPAGE_SUBMIT_SHORTCUT_NUX:"1814715518773401",DEVSITE_BUGS_SUBSCRIBE_MESSENGER:"289329894751031",DEVSITE_PURCHASE_AUTO_LOGGING_FEATURE_NUX:"452091918521208",DIA_PLUGIN_INTRODUCTION:"274822676191082",DIFF_TOOL_APPROVE_DESIGN:"291736234959459",DIFF_TOOL_COMMENT_BOX:"574518246254400",DIFF_TOOL_COMMENT_MIGRATION:"249897165903750",DIFF_TOOL_FIELD_VISIBILITY:"2106638592899546",DIFF_TOOL_FIELDS:"304449580087616",DIFF_TOOL_FILEPATH_FILTER:"184077332236407",DIFF_TOOL_OPTIONS:"364801854022012",DIFF_TOOL_PIXELCLOUD_SPECS:"279974206169693",DIFF_TOOL_STACKS:"2028591067181562",DIFF_TOOL_VERSION_COMPARISON:"1744261648968701",DIFFS_UNREAD_NUX:"278192215961935",DIGITAL_CONTENT_WALLET_PROMOTION_SPEND_MATCH:"277442986297498",DIGITAL_CONTENT_WALLET_PROMOTION_SPEND_MATCH_DISCLAIMER:"2210110582583556",DIRECT_SUPPORT_SUBSCRIBE_MESSENGER:"301320016925123",DISCOVERY_DEAL_DESK_UX_CHANGES:"1050667288437442",DISCOVERY_INSTANT_INSIGHTS_LIQUIDITY_TAB:"549248252187195",DISCOVERY_INSTANT_INSIGHTS_TABS:"1736053493184534",DOGFOODING_FOR_GOOD:"2128673340683350",DR_RUNBOOK_NUX:"386619794795638",DVC_CALL_SETTINGS:"585103995246149",DYNAMIC_CATEGORY_ADS_GUIDANCE_TOUR:"1104047426393891",EMPLOYEE_CHECKUP_ADD_EMPLOYEES:"2081043575281367",EMPLOYEE_CHECKUP_ADMIN_ADD_OPERATORS:"253402595374685",EMPLOYEE_CHECKUP_ADMIN_GET_STARTED:"1915182295449706",EMPLOYEE_CHECKUP_AFFECTED_CITIES:"272463313372973",EMPLOYEE_CHECKUP_CREATE_CRISIS:"252784712091279",EMPLOYEE_CHECKUP_CRISIS_LEVEL:"478220969329488",EMPLOYEE_CHECKUP_CRISIS_TITLE:"303147487080920",EMPLOYEE_CHECKUP_CUSTOM_INFORMATION:"336827213733890",EMPLOYEE_CHECKUP_EVENT_INFORMATION:"2228614710750674",EMPLOYEE_CHECKUP_INTRO_SCREEN:"425042034566623",EMPLOYEE_CHECKUP_OPERATOR_BANNER:"178253259717494",EMPLOYEE_CHECKUP_PREVIEW_BUTTON:"475065869664179",EMPLOYEE_CHECKUP_PREVIEW_TAB:"1462950340474063",EMPLOYEE_CHECKUP_SEND_NOTIFICATION:"342370829664638",ENT_MUTATOR_DEBUGGER_CORE_DATA_MENU:"2171369422884597",ENT_MUTATOR_DEBUGGER_ENT_UI_MUTATOR:"2008493722520365",ENT_MUTATOR_DEBUGGER_ENT_UI_NOTICE:"240683390177603",EVENT_LINEUPS:"1709997575716187",EVENT_PLAN_ENTRY_POINT_NUX:"118809038721180",EVENTS_COHOST_NUX:"437219733299406",EVENTS_IN_PUBTOOLS:"684033921782380",EVENTS_IN_PUBTOOLS_UPSELL:"483287258698911",EVENTS_REGISTRATION_ADMIN_TOOLBAR:"216949355491766",EVENTS_REGISTRATION_NUX:"1745687688806863",EVENTS_TICKET_LINK_ON_SALE:"1438688649581020",EVENTS_TOUR_ADS_IN_PERMALINK:"190245358351840",EVENTS_TOUR_CREATE:"1499876763428847",EVENTS_UPLOAD_VIDEO:"472683263095412",EVENTS_VMS_ADD_ATTENDEE:"280666819328942",EXPERIMENT_DIGEST_DELTOID1_NUX:"207987726448712",EXPERIMENT_SHARE_TO_WORKPLACE:"290337278257571",EXPERIMENT_STORE_MTHLY_CHART:"314142482662882",FACET_DIVE_GROUP:"114560222574855",FAME_DEEPLINKING_IMPROVEMENT:"157023091672336",FAME_UPSELL_ADS_MANAGER_V1:"663318960534100",FAS_DEEP_ANALYSIS:"569720380152818",FAS_DEEP_ANALYSIS_TOUR:"2204231816491660",FAS_DISTINCT_USER:"310022602865782",FAS_INSIGHTS:"477163859461367",FAS_PREINSTRUMENTED_CUSTOM_QL_TOUR:"587807211690959",FAS_VALIDATION:"469128783560926",FB_CONNECTIONS_AMBASSADOR_PORTAL:"963813333792343",FB_CONNECTIONS_AMBASSADOR_SIGNUP:"198220147429706",FB_DIRECT_WEB_EPHEMERALITY:"443405482682394",FBFIDDLE_BETA_WELCOME:"887881681422274",FBLEARNER_CLONE_HISTORY:"874591682650805",FBLEARNER_DAG:"1555701701416433",FBLEARNER_RECURRING_JOB_EDITOR:"1031446560269781",FBLN_ACARD_HOME:"1037460092995696",FBLN_BATCH:"1190201994365649",FBLN_BETTER_POWERSEARCH:"612422352445135",FBLN_BUG_BUTTON:"298123270679872",FBLN_CARD:"1771536866409625",FBLN_CHILDREN_SEARCH:"247925048905303",FBLN_COMPOSITION:"1535579660071386",FBLN_CUSTOM_FIELDS:"1729257784010524",FBLN_MODEL_TYPE:"1036165669806999",FBLN_MY_DAY:"1883488105200146",FBLN_OPERATOR_FILTER:"133504727315128",FBLN_OPERATOR_GROUPING:"198931380674409",FBLN_PROGRESS:"1711182809156646",FBLN_RECURRING:"1554116508221625",FBLN_RECURRING_DURATION:"253510125104293",FBLN_RECURRING_DURATION_TYPE:"1275284069191480",FBLN_RECURRING_HEALTH:"369557563426687",FBLN_RECURRING_HOME:"378188762567288",FBLN_RECURRING_JOB_DETAILS:"271011959998196",FBLN_RECURRING_JOB_LINK:"1638041579545299",FBLN_RECURRING_LOAD_MORE:"186324198522086",FBLN_RESUME_BUTTON:"211921519225088",FBLN_RESUME_CHECK:"1696859960638051",FBLN_RUN_STATUS_UPDATE:"164036084194275",FBLN_SEARCH:"1720975784858689",FBLN_SIDEBAR:"1530641490579146",FBLN_TABBED_DETAILS:"1150719571744245",FBLN_TASKS:"877963632364796",FBLN_UNSEEN:"474252306099876",FBR_FULLSCREEN_NUX:"1344564208895744",FBR_METRICS_ACTIVE_CANDIDATES_NUX:"222285851609893",FBR_METRICS_ACTIVE_CANDIDATES_NUX_DRILL_DOWN_HOVERCARD:"1947329892179101",FBR_METRICS_ACTIVE_CANDIDATES_NUX_DUE_SOON:"380497695678181",FBR_METRICS_ACTIVE_CANDIDATES_NUX_FILTER:"539978063057735",FBR_METRICS_ACTIVE_CANDIDATES_NUX_FULL_LOOP:"1714543698840222",FBR_METRICS_ACTIVE_CANDIDATES_NUX_INTRO:"861067310725054",FBR_METRICS_ACTIVE_CANDIDATES_NUX_OFFER_DRAFT:"300361150415866",FBR_METRICS_ACTIVE_CANDIDATES_NUX_PRESCREEN:"202845123913801",FBR_METRICS_ACTIVE_CANDIDATES_NUX_SCREEN:"785318974964959",FBR_METRICS_CIP_SAVED_REPORT:"2008250132723562",FBR_METRICS_HUB_NUX:"423419834843891",FBR_METRICS_SAVED_FILTERS:"776345999202269",FBR_SEARCH_SIMILAR_CANDIDATES:"300410590558397",FBSLA_MANAGEMENT_TOOL_ANCHOR_FILTER:"351138152253861",FEED_FRTP_WWW_NUX:"935531106642600",FIM_AYEPATCH_ACTIVE_ACTIVE_SOLO_MODE:"1941702112718388",FIM_AYEPATCH_DEVICE_OVERVIEW_TABLE:"139617969915868",FIM_SCANNER_RACK_TYPEAHEAD:"109858466399371",FLEX_SCHEDULER_HELP_LINK:"915622738633335",FLEX_SCHEDULER_TOOLTIP:"225389458066616",FLEXIBLE_TARGETING_PRESENTER_TIP:"833032883476599",FUNDRAISER_CHECKOUT_SHOW_NOTICE_FOR_EXPOSING_DONATION_AMOUNT:"423446794853910",FUNDRAISER_UPSELL:"2045579005504101",FUNDRAISER_UPSELL_DISMISS:"967459770042560",GAMEROOM_GO_LIVE_BUTTON:"328285377646159",GAMEROOM_VIDEO_TAB_UPSELL:"155162605217118",GAMES_CREATE_SHORTCUT:"190501704786642",GAMES_CUSTOM_STICKERS_WWW_V2:"402095057265193",GAMES_FLEXIBLE_STARS_WWW_NUX:"385999885267351",GAMES_LEVEL_UP_REFERRAL:"239846266720558",GAMES_LUP_AFFILIATE_ELIGIBILITY_NUX:"182793675708745",GAMES_LUP_FREE_STARS_ELIGIBILITY_NUX:"262060611282151",GAMES_NATIVE_SUPPORT_GLYPH:"231341290763954",GAMES_SCHEDULE_EVENTS_NUX:"191550845077999",GAMES_STREAM_CUSTOM_STICKER:"158921861418938",GAMES_STREAMER_DASHBOARD_AD_BREAKS_MODAL_NUX:"2020292038033607",GAMES_STREAMER_DASHBOARD_AD_BREAKS_MODULE_NUX:"187272322150496",GAMES_STREAMER_DASHBOARD_CHAT_COMMANDS_NUX:"328245484432277",GAMES_STREAMER_DASHBOARD_CLIP_MANAGER_BUTTON_NUX:"2208479726079574",GAMES_STREAMER_DASHBOARD_GOALS_PANEL_NUX:"826090861115369",GAMES_STREAMER_DASHBOARD_GOALS_THANKS_MESSAGE_NUX:"2271556623101317",GAMES_STREAMER_DASHBOARD_SETUP_STARS_NUX:"2085300685040993",GAMES_TAKE_SCREENSHOT:"1813645665328527",GEO_TARGETING_BULK_INPUT:"523608931147539",GEO_TARGETING_V2:"771095616319245",GIFT_MONEY_COMPOSER_SPROUT_SELECTOR_NUX:"219955418578068",GMS_HUB_EDUCATIONAL_MODAL:"521823824901070",GMS_HUB_EXTERNAL_MESSAGING_ADMIN_BODY:"106411973368671",GMS_HUB_EXTERNAL_MESSAGING_ADMIN_TITLE:"368261210256099",GMS_HUB_EXTERNAL_MESSAGING_INTRO:"2046212742268868",GMS_HUB_EXTERNAL_MESSAGING_SECTION:"1150000685100247",GMS_HUB_EXTERNAL_MESSAGING_SHARE_DIALOG:"116933658950734",GMS_HUB_EXTERNAL_MESSAGING_SHARING:"1950410301867612",GMS_HUB_FEEDBACK_ANNOUNCEMENT:"264598944196551",GMS_HUB_FEEDBACK_CASE_STUDY:"349455435627699",GMS_HUB_FEEDBACK_COLLATERAL:"516787952127971",GMS_HUB_FEEDBACK_FAQ:"920587088146042",GMS_HUB_FEEDBACK_RESOURCE:"265187651007208",GMS_HUB_MYHUB_LINK:"271427796936350",GMS_HUB_NUX_SPLASH:"1920905558175558",GMS_HUB_PERMALINKS:"373890962970878",GMS_HUB_PREVIEW_DIALOG:"344774935943243",GMS_HUB_USER_PREFERENCES_DIALOG:"1925194137802542",GMS_SRT_MJV_ON_BOARDING:"1487762467999170",GMS_SRT_TOGGLE_LEFT_PANE:"2078708742342315",GRAPH_API_EXPLORER_APP:"555160114885271",GRAPH_API_EXPLORER_DRAGGABLE_COLUMN:"1676117929104313",GRAPH_API_EXPLORER_JSON:"236632393736996",GRAPH_API_EXPLORER_PERMISSIONS:"222028981859968",GRAPH_API_EXPLORER_TOKEN:"2104933793124521",GROUPS_GAMES_NUX:"595721780628097",HAS_MIGRATED_SAVED_AUDIENCE_NUX:"1522284001343972",HEALTHCOMPASS_ONBOARD_SAMPLE_SELECTION_FILTERS:"413759316035147",HELP_AT_PORTAL_HOME_WELCOME_NUX:"250488712353769",HELP_CENTER_SEARCH_LANGUAGE_DIALOG:"431186250559929",HIRING_HUB_MY_POSITIONS_BETA_SURVEY_COMPLETED:"251432705810771",HIRING_HUB_REACHOUT_TRACKER_V1_PULSATING_NUX:"333062114180764",HIRING_SEARCH_ADD_FILTERS_GEAR:"2145237272373577",HIRING_SEARCH_V3_ADD_FILTERS:"167996477113618",HIRING_SEARCH_V3_BOOLEAN_SEARCH:"177901579443986",HIRING_SEARCH_V3_INCLUDE_CLAIMED:"1560192630704546",HIRING_SEARCH_V3_INTRO:"1466602646750566",HIRING_SEARCH_V3_NEW_NAV:"1943114869295128",HIRING_SEARCH_V3_RECOMMENDED_CANDIDATES_CARD:"145930532655335",HIRING_SEARCH_V3_RECOMMENDED_CANDIDATES_CATEGORY:"136757703660806",HIRING_SEARCH_V3_RECOMMENDED_CANDIDATES_PIPELINE_DROPDOWN:"534269380271800",HIRING_SEARCH_V3_REORDER_CATEGORIES:"1977885665823190",HIRING_SEARCH_V3_SAVED_SEARCHES:"840782216098644",HIRING_SEARCH_V3_SENIORITY_LEVEL:"1965037957082195",HIT_HACKAMONTH_INTRO_GUIDE:"1203581919741285",HIT_HIERARCHY:"104061010140073",IG_AUDIENCE_INSIGHTS_CITIES_TOGGLE:"675352559307348",IG_AUDIENCE_INSIGHTS_EXCLUDE_POST:"1739956989579937",IG_AUDIENCE_INSIGHTS_GENERIC_PDF:"1065168483565624",IG_AUDIENCE_INSIGHTS_POST:"272479649752150",IG_AUDIENCE_INSIGHTS_TIME_ONLINE:"187516358318534",IG_AUDIENCE_INSIGHTS_TIME_SPENT:"1288695684498584",INSTALL_BASE_POWERSEARCH_NUX:"275294532983711",INSTANT_ARTICLE_PRIVACY_BANNER:"195902777697354",INSTANT_ARTICLES_TRAFFIC_LIFT_MODAL:"247720875717948",INSTANT_GAMES_WWW_ENTRY_NUX:"388393761540878",INSTANT_GAMES_WWW_FIRST_TIME_NUX:"866642326880177",INSTANT_GAMES_WWW_GAMES_COMPOSER:"2012987658947660",INSTREAM_RESERVED_BUYING:"295905730937567",INTERN_AUTH_ONBOARD_FLOW_CHROME_LINUX:"969876123176639",INTERN_AUTH_ONBOARD_FLOW_CHROME_MACOS:"146844139321667",INTERN_AUTH_ONBOARD_FLOW_CHROME_WINDOWS:"349668788873212",INTERN_AUTH_ONBOARD_FLOW_EDGE_WINDOWS:"1819461345021379",INTERN_AUTH_ONBOARD_FLOW_NOTIFICATION_SENT:"2017262281679704",INTERN_AUTH_ONBOARD_FLOW_SAFARI_IOS:"412180929222408",INTERN_AUTH_ONBOARD_FLOW_SAFARI_MACOS:"2031276373819089",INTERN_AUTH_ONBOARD_FLOW_UNKNOWN_CLIENT:"2005402193047653",INTERN_AUTH_ONBOARD_FLOW_UNSUPPORTED_CLIENT:"128328721352244",INTERN_CHROME_SEARCH_TO_DISCOVERABILITY_JEWEL:"356374501618562",INTERN_JS_GRAPH_TABLE_VIEW_LEGEND_NUX:"385164378914425",INTERN_MCOMPASS_BETA_ACCURACY:"1388791921223025",INTERN_MCOMPASS_METRIC_MORE_LINK:"1701393593284270",INTERN_MCOMPASS_TREE_VIEW:"233842490751959",INTERN_MCOMPASS_UNIDASH_EXPORT:"201312687186140",INTERN_MCOMPASS_VERSION_MORE_LINK:"908093112695893",INTERN_NOTIFY_JEWEL_CONFIG:"1093629470775946",INTERN_NOTIFY_JEWEL_NUX_TO_SETTINGS:"154976265117505",INTERN_NOTIFY_MOVE_ALL_TOAST:"265694430730215",INTERN_NOTIFY_RECOMMENDED_MODE:"153950908676025",INTERN_PARTNER_PLATFORM_DAR_RESULTS:"2302052616479320",INTERN_QA_ANSWER_ACCEPT:"584087252061309",INTERN_QA_ANSWER_VOTE:"304213867089327",INTERN_SEARCH_PINNING_TOP_RESULTS_NUX:"310178109505906",INTERN_TASKS_BULK_EDIT:"252597939008908",INTERN_TASKS_DEFAULT_VIEW:"282886302233190",INTERN_TASKS_FOLDER_PRIVACY_TYPE:"221941735309995",INTERN_TASKS_PROGRESS_GROUP_BY_TOGGLE:"270861233789145",INTERN_TASKS_PROGRESS_TASK_DETAIL_SELECTOR:"199211987354899",INTERN_TASKS_SEARCH_SECTIONS:"1041445629341980",INTERN_TASKS_WORKSPACES:"360355661406634",INTERNAL_FEEDBACK_SURVEY:"1368283853185346",INTERNSHIP_AVAILABLE_INTERNS_TAB:"172667400201574",INTERNSHIP_AVAILABLE_INTERNS_TABLE_ROW:"415683605568950",INTERNSHIP_INTERN_PAIRINGS_TABLE_INTERN:"479266189141998",INTERVIEW_FEEDBACK_REDESIGN:"1912056325761215",INTERVIEW_STATS_REMOTE_PREFERENCES_NUX:"201372377284721",INTERVIEW_TAGS_AUTOMATION_RESULTS_MEGAPHONE:"243275582902630",INTERVIEW_TRACKER_EXPORT:"327122534320675",INTL_BUGNUB_PROMPT:"587470081668772",INTL_HELP_HOME_WELCOME_NUX:"287962258543641",INTL_LOCPLAT_RELEASE_NOTES:"238243580201206",IX_IG_COLLECTION_PREVIEW_NOTICE:"170559627181036",JOB_COMPOSER_UPSELL_HEADER:"363611600712479",JOBS_UNIFIED_SEARCH_UNSEEN_FIRST_SORT_OPTION_NUX:"2162043344016782",JOBS_UNIFIED_SEARCH_VIEW_STATE_TOGGLE_BAR_NUX:"232193894089810",LANDING_PAGE_VIEWS_UPSELL_NUX:"103263950430513",LEAD_GEN_FORM_ARCHIVING_NOW_AVAILABLE_NUX:"1660354914292411",LEAD_GEN_FORM_EDITOR_FORM_GOAL_NUX:"311054742694569",LEAD_GEN_WITH_IX_FORMS_TAB_NUX:"285902312043489",LETTERBOX_WORKPLACE_DESKTOP_BOOKMARK_NUX:"301931860399086",LIVE_JOIN_GROUP_CTA_COMPOSER_TAGGER_NUX:"333005774099369",LIVE_PRODUCER_LAYOUT_EDITOR_LABEL_NUX:"468466780263922",LIVE_VIDEO_COMPOSER_POLLS_TAB_NUX:"694696114228657",LIVE_VIDEO_PERSISTENT_STREAM_KEY:"109990646237903",LIVE_VIDEO_RESET_PERSISTENT_STREAM_KEY:"262516160911120",LIVE_VIDEO_SECURE_SERVER_URL_FORCE:"755953231444512",LIVE_VIDEO_TAB_MOVED:"314764125770491",LIVING_ROOM_PUB_TOOLS_MEGAPHONE:"148399912782128",LM_EDIT_BUTTON_NUX:"1803266369965541",LM_JOB_STATUS_INDICATOR_NUX:"133083510632974",LOCPLAT_T4_HIDE_TASK:"125028131434198",LOGGING_MIGRATOR_OUTPUT_METADATA_BOX:"219702288655895",LOGGING_MIGRATOR_OUTPUT_SCHEMA_BOX:"1347300185411833",LOGGING_MIGRATOR_SEARCH_BAR:"193189781331106",LOGGING_WIZARD_FIELDS_STRUCTURED_LOGGING:"715980878744255",LOMO_EVENT_ADS_PERMALINK_NUX:"945149918980527",M_ADS_MANAGER_SPLASH:"1499779126920941",MDF_DAG_CARD_TOGGLE_LINEAGE_VIEW:"214290855937191",MDF_EDITOR_CREATE_EDIT_NODES:"211946356164815",MDF_EDITOR_DRAFT_ITEM_ACTION_MENU:"193149634891034",MDF_EDITOR_PUBLISH_NODES:"1972867019418404",MDF_EDITOR_SESSION_MANAGEMENT:"498111373970053",MDF_METRICS_EDITOR_TOUR:"1138417882962001",MEDIA_EFFECT_HUB_EFFECT_DEPRECATION_WARNING:"1618714901587652",MEDIA_EFFECT_HUB_EFFECT_DISABLED_TAKEN_DOWN_WARNING:"525399791236358",MEDIA_TOOL_MEDIA_GROUP_TAG_SEARCH:"617490258375842",MEDIA_TOOL_MEDIA_GROUP_TAGGING_NUX:"1142685795860507",MERGE_INPUT_COMPOSER_NUX:"124366828363268",METRIC_MONITOR_ANNOTATION:"1646569935396322",METRIC_OPERATION_ACTION_ITEM_TASK_INTEGRATION_NUX:"204946630375098",METRIK_SCUBA_IMPORT:"499402760430895",MFS_CASH_IN_NUX:"1592285397563516",MFS_FH_TOPUP_JEWEL:"2450102985019048",MFS_QR_SHORTCUT:"404505000087710",MID_ROLL_OPT_OUT_COMPOSER_NUX:"289715175040867",MJV_AS_DEFAULT_EXPERIMENT:"1366145386820746",MLEX_ADVERTISER_DASHBOARD_CUSTOMER_ISSUE_NUX:"1015241501982956",MOBILE_CONFIG_ACTUALIZER:"262352731093405",MOBILE_CONFIG_CLIENT_CONFIG_UI:"2216768161683024",MOBILE_CONFIG_EDIT_QUICK_CHECK:"236775410426129",MONETIZATION_STATUS_ICONS_V2_CREATOR_STUDIO:"350961945511729",MONETIZATION_STATUS_ICONS_V2_PUB_TOOLS_AYMT:"2274838502547159",MOVIE_TICKETING_NO_FEE_INTERSTITIAL:"347663302474177",MPP_SUPPORT_VIDEO_CALL_BUTTON_NUX:"572669026227273",MUFFIN_NUX_TOUR:"2181519208781248",MULTI_CITY_LOCATION_TARGETING_NUX:"1885486965052432",MULTIKEY_CUSTOM_AUDIENCE_UPLOADER_DATA_FORMATTING_GUIDE_NUX:"1641614852827045",MULTILINGUAL_COMPOSER_NUX:"1752411864808289",MULTIMEDIA_ATTACHMENTS_NUX:"1269425486404153",NLP_CONSOLE_PARSE_NUX:"2065290257066750",NOTIF_MANAGER_GENERIC_CLASS:"571379316635601",NOTIF_MANAGER_TOUR:"515046942302088",ONAVO_CONFIDENTIALITY_WARNING:"1903356583252389",ONAVO_POWER_SEARCH_MSG:"712997825562767",ONAVO_QUALITY_THEATRE_MODE:"673650362824096",ONAVO_SEGMENTS_DROPDOWN_MSG:"1272891486178221",OPENSOURCE_PRCC_ACTIVE_REPO_NUX:"2166185670300012",OPENSOURCE_PRCC_FILTER_NUX:"740109506327103",OPENSOURCE_PRCC_REFRESH_NUX:"312013156277196",OPTIMAL_SOLUTION_NUX:"1227619203963447",ORG_TOOL_MANAGER_SELF_SERVICE_FRONT_LINE_NUX:"106360933271644",ORG_TOOL_MANAGER_SELF_SERVICE_INFERRED_FIELD_NUX:"1324906240971336",ORG_TOOL_MANAGER_SELF_SERVICE_SKIP_LEVEL_FOR_FRONT_LINE_NUX:"1951810298477163",ORG_TOOL_MANAGER_SELF_SERVICE_SKIP_LEVEL_NUX:"180680439152853",ORG_TOOL_SEARCH_TABLE_COLUMNS:"1532819326808018",ORG_TOOL_SEARCH_VIEWS:"1851509711846207",OXSIGHTS_GRANULAR_METRICS_NUX:"2133800810205850",OXSIGHTS_HIGHLIGHTS_NUX:"185406645361985",OXSIGHTS_NEW_UI:"1035521976533597",OXSIGHTS_NI_DATA_BREAK:"169409537259913",OXSIGHTS_QOE_ALERT_NUX:"613093149109981",OXSIGHTS_SEGMENT_MANAGER_NUX:"189148565012484",OXSIGHTS_TRANSLATION_IN_PROGRESS_NUX:"1050775328433798",PAGE_CTA_STICKY_SETTING_NUX:"1978855879079002",PAGE_QR_CODE_ADMIN_SETTING_TAB_NUX:"153852418589016",PAGES_ASSIGN_BROADCASTER_ROLE_NUX:"241186616320377",PAGES_COMMERCE_BUYER_NUX:"1142866742508388",PAGES_COMPOSER_MENTIONS_INPUT_NUX:"173356680049758",PAGES_COVER_DESCRIPTION_CREATION_NUX:"312563085834620",PAGES_COVER_VIDEO_CREATION_NUX:"427445517648121",PAGES_INBOX_CONTENT_SEARCH:"713244912340514",PAGES_MARK_AS_PAID_BUTTON:"1450808308305735",PAGES_MESSAGING_ADOPTION_PUBLISHING_PROMOTION:"294574371369697",PAGES_MESSAGING_DRAGDROP:"1598865370326347",PAGES_MESSAGING_PERSONAS_FOR_VIEWER:"990494057798876",PAGES_ORGANIC_PIXEL_NUX:"264900604144339",PAGES_SHARING_LINK_POST_WARNING_NUX:"1770605273025714",PAGES_SHARING_SHARE_DIALOG_EMPTY_TEXT_WARNING_NUX:"739814036376969",PE_BACKGROUND_PUBLISHING_NUX:"351999345165168",PE_SLIDESHOW_NUX:"1010972272292143",PEOPLE_PORTAL_NUX:"105154133552066",PIE_SLR_TAG_HOVERCARD_NUX:"1144712235713431",PIXELCLOUD_DESIGNER_DIFF_REVIEW_FIRST_TIME:"1400590933405257",PIXELCLOUD_DESIGNER_DIFF_REVIEW_INTRO:"327038544755995",PIXELCLOUD_MOBILE_APP_UPSELL_DESKTOP:"148326645789809",PIXELCLOUD_MOBILE_APP_UPSELL_MOBILE:"1022168231258570",PIXELCLOUD_NOTIFICATION_MOBILE_ADVERT:"1604975216281641",PIXELCLOUD_OPEN_IN_SKETCH_NUX:"1053089388134096",PIXELCLOUD_POST_COMMENTS_NUX:"535936853422624",PIXELCLOUD_POST_STATUS:"2111653145734461",PIXELCLOUD_PROJECT_CREATE_NUX:"167386373758657",PIXELCLOUD_PROJECT_PAGE_NUX:"1540799555938315",PIXELCLOUD_PROJECT_PRESENTATION_NUX:"372856169793929",PIXELCLOUD_PROJECT_PRESENTATION_SEMAPHORE_NUX:"293073621216697",PIXELCLOUD_REVIEWERS:"391348961366158",PIXELCLOUD_SEND_TO_MESSENGER_NUX:"242731852952364",PMP_DESIGN_V2:"2255002161208239",PMP_HOLIDAY_NUX:"466881293806574",PMT_ADHOC_REQUEST_SHARED_NUX:"359372174464547",PMT_CALIBRATION_BOARD_NUX:"1037667402955195",PMT_CALIBRATION_NOTES_SUMMARY_NUX:"1755450391176049",PMT_CALIBRATION_NOTES_TEMPLATE_NUX:"1876581722653502",PMT_CALIBRATION_PERFORMANCE_EQUITY_NOTICE:"355592314990950",PMT_CALIBRATION_SAVE_SET_NUX:"260695617974974",PMT_CALIBRATION_SIDEBAR_ADD_PEOPLE_NUX:"237239656854869",PMT_CALIBRATION_SIDEBAR_CREATE_MEETING_NUX:"199962163981178",PMT_CALIBRATION_SIDEBAR_LOAD_SETS_NUX:"2136286193052153",PMT_CALIBRATION_SUMMARY_CREATE_MEETING_NUX:"221474408455364",PMT_COMP_LETTERS:"118174892160610",PMT_COMPLETED_FEEDBACK_FOCUS_MODE:"542823792725544",PMT_DOWNWARD_FEEDBACK_CALIBRATION_NOTES_EXPORT_NUX:"1085309591648910",PMT_EMAIL_AND_BOT_NOTIFICATION:"148319142515514",PMT_FEEDBACK_ACTION_MENU_NUX:"2183487518567271",PMT_FEEDBACK_UPDATED_QUESTIONS:"156229068324686",PMT_LANDING_REQUEST_FEEDBACK_BUTTON:"469873363355823",PMT_LEFT_NAV:"965490263624800",PMT_MANAGE_FEEDBACK_CONTEXT:"105271666714735",PMT_PENDING_FEEDBACK_SIDE_BY_SIDE_FOCUS_MODE:"1846207915677004",PMT_PERFORMANCE_EQUITY_NOTICE:"1956814034414602",PMT_ROLLING_FEEDBACK_BOT_NUX:"528736177462179",PMT_VERSION_HISTORY:"630322520659458",POLITICAL_DISTRICT_TARGETING_COMPOSER_OPTION:"1905539216397834",PREMIERE_NOW_UPSELL_DIALOG:"2123065707942682",PRESENCE_AND_CONVERSATION_NUX:"344736316291381",PRESTOSCOPE_HOST_CLICK_HINT:"2547430168814773",PROFILE_FUN_FACTS_ASK_NUX:"252349521992495",PROVISIONING_NEW_UI_ALPHA_NUX:"367806360703152",PUB_TOOLS_SEASONS_NUX:"1353326994736969",PULSE_ACTION_PLAN_NUX:"721101558067772",PULSE_IMPORTANCE_NUX:"1474606375947450",PULSE_SUMMARY_NUX:"176677976190423",PULSE_V1_NUX_IMPORTANCE_TAB:"2720514431307277",PULSE_V2_ACTION_PLAN_ADD_TO_DO:"566123800472630",PULSE_V2_ACTION_PLAN_IMPROVE_SELECTOR:"623031881432342",PULSE_V2_ACTION_PLAN_QUIP_BUTTON:"618726901858471",PULSE_V2_ACTION_PLAN_REENGAGEMENT_BUTTON:"2083801801932396",PULSE_V2_ACTION_PLAN_SHARE_WITH_BUTTON:"169744780576855",PULSE_V2_NUX_SUMMARY_BENCHMARK_SELECTOR:"250509482331321",PULSE_V2_NUX_SUMMARY_DIMENSION_HEADER:"2206584639621921",PULSE_V2_NUX_SUMMARY_FOCUS_AREA:"293635604575719",PULSE_V2_NUX_SUMMARY_MODAL:"403063400225770",PULSE_V2_NUX_SUMMARY_NAVIGATION_RESULTS_SELECTOR:"329640784252169",PULSE_V2_NUX_SUMMARY_PRESENTATION_ENTRY_POINT:"1889194911170774",PUMA_WIZARD_DIALOG:"123521224904410",QRT_POOL_CONTROL:"914261515440516",QRT_QRTV2_LAUNCH_TOOL:"368910843941597",QUEUE_MANAGER_SIDEBAR:"309358913121457",RABBIT_DEPRECATION_MODAL:"235779886998516",RABBIT_EXPLORER_NUX:"430269537352505",RABBIT_SEARCH_NUX_TOUR:"248205238986090",RAPIDO_SHARE_CHART_TO_WORKPLACE_MSG:"412779679460154",RECRUITING_AUTO_CANDIDATE_AVAILABILITY_SLR:"517677442011482",RECRUITING_AUTO_PRESCREEN_BADGE_FIFTY:"119382518633735",RECRUITING_AUTO_PRESCREEN_BADGE_FIRST:"1701185006576449",RECRUITING_AUTO_PRESCREEN_BADGE_HUNDRED:"169123143616062",RECRUITING_AUTO_PRESCREEN_BADGE_TEN:"415401932164940",RECRUITING_AUTO_PRESCREEN_CALENDAR_PREVIEW:"1262439603879573",RECRUITING_AUTO_PRESCREEN_EDIT_CALENDAR:"161190864420934",RECRUITING_AUTO_PRESCREEN_NOTES_PREVIEW:"1379930508757433",RECRUITING_AUTO_PRESCREEN_STATUS:"462273320775070",RECRUITING_AUTO_PRESCREEN_TABS:"323114158124641",RECRUITING_AUTO_PRESCREEN_TIMESLOT:"1860716067522409",RECRUITING_AUTO_PRESCREEN_TIMEZONES:"1458069300925009",RECRUITING_EMPLOYEE_OUTREACH:"574882689339635",RECRUITING_HIRING_CONSIDERATION_ACTION_MENU:"736653343179938",RECRUITING_HIRING_PERFORMANCE_GOALS:"2323206727911230",RECRUITING_INTERVIEW_FEEDBACK_V3:"359350694783307",RECRUITING_LOOP_APPROVAL_FOF_PROVIDE_INLINE_FEEDBACK:"319926505189352",RECRUITING_LOOP_APPROVAL_FOF_RATING_BUTTON_BAR:"1520344364701340",RECRUITING_LOOP_APPROVAL_MOBILE:"366824097396567",RECRUITING_MORE_RECOMMENDATIONS:"231451864265165",RECRUITING_PRESCREEN_PANEL_MEETING_TYPES:"288980201656367",RECRUITING_RC_EDIT_REQUISITION:"427069161077000",RECRUITING_RC_PIPELINE:"2057283117818715",RECRUITING_RC_REQUISITION_EXAMPLE:"1270824933050938",RECRUITING_SOURCING_CONSIDERATION_STATUS:"208084653034264",RECRUITING_SOURCING_LAST_ENGAGED:"1331181873664675",RECRUITING_SOURCING_RECOMMENDED_CANDIDATES:"1524511284306648",REGRESSION_SOURCE_FOR_AUTO_TRIAGE:"136147913815277",REGRESSION_SUGGEST_POC:"915719878617816",RIGHTS_MANAGER_BULK_WHITELIST_NUX:"575946632598813",RIGHTS_MANAGER_CHANGE_LOG:"421523984890906",RIGHTS_MANAGER_CONTACT_NUX:"1852082035116349",RIGHTS_MANAGER_EXPORT_DATA_WITH_FILTERS:"1418097434948708",RIGHTS_MANAGER_LITE_TOUR:"147171505967594",RIGHTS_MANAGER_REFERENCE_FILE_PAGE_TAB:"676974362491931",RTC_CALL_DIVE_V2:"1189695011208017",SALES_PROMO_MULTIPHOTO_COMPOSER:"137448690188542",SCHEDULE_RECOVERY_MODE:"346540509113231",SCHEDULED_LIVE_SUBSCRIBE_NUX:"1500727363389786",SCRIBE_ENTITLEMENT_DASHBOARD_NUX:"1124466511060164",SCUBA_MODERN_UI_NUX:"511142306023984",SCUBA_REACT_VIEWS_NUX:"1747252342174304",SEARCH_NLP_CONSOLE_NUX:"469576190048926",SECRT_DECISION_CLOSE:"316416682434999",SECRT_DECISION_MULTI:"226593651381309",SECRT_DECISION_NEXT:"1067658760064981",SECRT_DECISION_SINGLE:"263991807541857",SECRT_DECISION_VIEWER:"274444210016750",SERVICE_CONSOLE_CONVEYOR_CONFIG_EDIT_TOGGLE:"270025857133834",SERVICE_CONSOLE_PUSH_ACTIONS:"502028686955724",SERVICE_CONSOLE_PUSH_LOG_FILTER:"392283368176091",SERVICE_CONSOLE_PUSH_PLAN_TAB:"202427597361676",SERVICE_CONSOLE_PUSH_UNIT_FILTER:"312517189591951",SERVICE_CONSOLE_PUSH_UNIT_HEALTHCHECKS:"373688140054040",SEV_INVESTIGATOR_PANEL_NUX:"317710085718437",SHADOWDB_CANARY_PHABRICATOR_NUX:"347114529394900",SHOWMARK_CREATION_TOOL_NUX:"1908984722461582",SHUTTLE_POWERSEARCH:"274106430013396",SIGNALS_DS_CREATE_AUDIENCE_RETENTION_DAYS_INPUT:"507242976336251",SIGNALS_EM_APP_EVENTS_REMAPPING_BLUECLUE:"1592575160781837",SIGNALS_EM_APP_EVENTS_REMAPPING_NUX:"344353266026522",SIGNALS_EM_APP_VERIFICATION_TAB_NUX:"341155789765748",SIGNALS_EM_CALIBRATION_TOOL_NUX:"125231661477462",SIGNALS_EM_DELAYED_EVENTS_NUX:"497549687425034",SIGNALS_EM_KPI_DETAILS_BUTTON_DS:"109908416310495",SIGNALS_EM_KPI_DETAILS_BUTTON_PIXEL:"1863199647279159",SIGNALS_EM_LISTING_SCREEN_APP:"387538365035788",SIGNALS_EM_LISTING_SCREEN_DS:"100655320575883",SIGNALS_EM_LISTING_SCREEN_PIXEL:"1716940381939245",SIGNALS_EM_PIXEL_CALIBRATION_TOOL_NUX:"887324391432541",SIGNALS_EM_PIXEL_POST_CALIBRATION_TOOL_NUX:"181949155719943",SIGNALS_EM_PIXEL_VERIFICATION_TAB_NUX:"1986942061363968",SIGNALS_EM_UPLOADER_MAPPER_HEADER:"165462870722150",SIGNALS_OEM_ANALYTICS_BUTTON:"1051737174957203",SIGNALS_OEM_AUDIENCE_CREATION_BUTTON:"1705925373060918",SIGNALS_OEM_CUSTOM_CONVERSION_CREATION_BUTTON:"350476588659935",SIGNALS_OEM_GET_STARTED:"114819065646369",SIGNALS_OEM_LOOKALIKE_AUDIENCE_CREATION_BUTTON:"1255766841175871",SIGNALS_PIXEL_CALIBRATION_TOOL_SUGGESTION_EVENT_NUX:"2046428095632261",SLIDESHOW_FRAMES_TAB_NUX:"827618977337954",SLIDESHOW_MUSIC_TAB_NUX:"1800156596939976",SMC_HOSTS_TABLE_COLUMN:"130361454297638",SMC_HOSTS_UI:"245195412720807",SOCIAL_LEARNING_DONE_NUX:"499940380366067",SOCIAL_LEARNING_GROUP_SYNC:"583761348625668",SOCIAL_LEARNING_INSIGHTS_TOOLTIP:"376261689505910",SOCIAL_LEARNING_UNIT_TOOLTIP:"1890026654581366",SOUND_COLLECTION_CARD_PAGES_MANAGER:"1004531363062075",SOUND_COLLECTION_NEW_CONTENT_NUX:"143886896286763",SOURCING_TOOL_SEARCH_EXPAND:"111408876035743",SPHERICAL_SINGLETON_NUX:"1622419514744181",SPHERICAL_VIDEO_DETECTOR_EDIT_VIDEO_CHECKBOX_OPT_IN:"120791645176236",SPHERICAL_VIDEO_DETECTOR_EDIT_VIDEO_CHECKBOX_OPT_OUT:"160665517821724",SRT_BUG_NUB_INTRODUCTION:"1739478522971904",SRT_CHS_DEFAULT_FOLDER_NUX:"954114138092095",SRT_CORE_HELP_ME_OPTION_SELECTOR_NUX:"2133394933543521",SRT_FEEDBACK:"217753298661464",SRT_INFO_FIRST_BLAST:"302923597150649",SRT_LIVE_COUNTER_INTRODUCTION:"158683444572274",SRT_REVIEW_QUEUE_ACTIONED_JOB_STATUS:"191254837978371",STORY_SEEN_HERE_WWW:"353912888472519",SUPPORT_NOW_CTA_NUX:"324996658094884",SUPPORT_NOW_CTA_SPROUT_NUX:"2203013776686305",SVC_CH_LAST_BUNDLE_CELL:"489747788202116",SVC_CH_NODE_CELL:"621076594988817",SVC_CH_POWERSEARCH:"1968693903424197",SVC_CH_RUN_CELL:"217440735800919",TASKS_PROJECT_OVERVIEW_SELECTOR:"775072102675938",TEAM_INSIGHTS_OUTREACH:"262581201177936",TEST_MESSAGE:"443509369110145",THUMBNAIL_SCRUBBER_NUX:"474546222905917",TOUCHSTONE_AD_ACCOUNT:"224502567921015",TOUCHSTONE_RECOMMENDATION_NUX:"1546296168996500",TOUCHSTONE_SCHEDULE:"479311678938767",TOUCHSTONE_VERTICALS:"509312249256844",TRAJECTORY_INTRO_NUX:"1931893877132925",TRAJECTORY_INTRO_PT2_NUX:"583035538726803",TRAJECTORY_TAB_NUX:"470392853464237",UICE_FDS_NUCLIDE_OPEN:"2140384822857527",UICE_TYPEAHEAD_SEARCH:"394099847665207",UIDOCS_SAVED_SEARCH:"382387875897012",UIDOCS_SEARCH_FILTERS:"463083667558104",UIDOCS_SET_HOME_SEARCH:"452421395292311",UNIDASH_ADMIN_HUB_NUX:"288536141620960",UNIDASH_ARGUS_MIGRATED_WIDGET:"311842869400476",UNIDASH_METRIC_BOX_POPOVER:"497676214024497",UNIDASH_PUBLISH_BUTTON_NUX:"225178694727764",UNIDASH_TAB_TEMPLATES:"1010645769142851",USE_EXISTING_AUDIENCE:"481639071983177",USER_SCHEDULE_POST:"1849324512025217",VIDEO_COMPOSER_MATURE_CONTENT_RATING:"1904366399862572",VIDEO_COMPOSER_MULTIPOST_ENTRY:"304853473452106",VIDEO_COMPOSER_NEXT_BUTTON:"252728462103566",VIDEO_COMPOSER_POLLS_NUX:"1156499197838441",VIDEO_COMPOSER_POLLS_SCRUBBER_NUX:"410772869466154",VIDEO_COMPOSER_TRIMMING_BUTTON_NUX:"2171834006400720",VIDEO_COPYRIGHT_ATTRIBUTION:"510112456027051",VIDEO_COPYRIGHT_ATTRIBUTION_BANNER:"1931842533799417",VIDEO_COPYRIGHT_AUTO_BLOCK:"210695056081827",VIDEO_COPYRIGHT_AUTO_MONETIZE:"664681487071414",VIDEO_COPYRIGHT_BULK_DELETION:"718938144973535",VIDEO_COPYRIGHT_CONTENT_CATEGORY:"108929459724596",VIDEO_COPYRIGHT_KEYBOARD_SHORTCUTS:"763227730504481",VIDEO_COPYRIGHT_MANUAL_BLOCK:"1611149752230319",VIDEO_COPYRIGHT_MANUAL_CLAIM:"1468124473223979",VIDEO_COPYRIGHT_MANUAL_MONETIZE:"1685669605061064",VIDEO_REMOTE_UPLOAD:"1435659519793420",VIDEO_SOUND_COLLECTION_NUX:"389317764855224",VIDPRESSO_IN_CREATOR_STUDIO_NUX:"226568681596631",WAS_LIVE_VOTING_TOGGLE:"280060962569148",WHATSAPP_BUSINESS_ACCOUNT_MANAGER_ANALYTICS_CSV_DOWNLOAD:"1186947608121192",WHATSAPP_BUSINESS_ACCOUNT_MANAGER_ANALYTICS_PRODUCT_TYPE_FILTER:"543730909413917",WHATSAPP_BUSINESS_ACCOUNT_MANAGER_DOWNLOAD_CERTIFICATE:"1964410266971937",WORK_ACTIVATION_POST_TEMPLATE_UNIT:"208795083341725",WORK_ADMIN_PANEL_PEOPLE_SETS_BANNER_NUX:"242590609746958",WORK_ADMIN_PANEL_RESELLER_DESCRIPTION_BANNER_NUX:"581587928939380",WORK_CHAT_PINNING_THREADS_INFO_PANEL:"589233264795079",WORK_COMMUNITY_CENTER:"886330728179119",WORK_DIRECT_SUPPORT_SET_EXPECTATIONS:"1454348691285259",WORK_GOOGLE_PIXEL_MAIN_NAV:"2097970883624394",WORK_GROUP_POST_TO_GROUP_NUX:"1864896927100725",WORK_GROUP_TASK_FEATURE:"838617199631108",WORK_GROUPS_LANDING_CREATE_GROUP_NUX:"1298052276948758",WORK_GROUPS_LANDING_PAGE_NUX:"318596698538485",WORK_IDP_INVITE_NUX:"1375991899154373",WORK_PEOPLE_DIRECTORY_ADMINS:"2180484525295999",WORK_PP_ADMIN_REPORTING_CONTENT:"546897555746263",WORK_PREMIUM_UPGRADE_NUX:"2035437590024582",WORK_PROMOTED_POSTS_USER_NUX:"874169989441253",WORK_SMB_HELP_SIDEBAR_UNIT:"2166504533638674",WORKFORCE_BULK_EDITS:"677404869290175",WORKFORCE_FRICTIONLESS_EDITING_SUMMARY:"332300300692157",WORKFORCE_INSTANT_UPDATE:"397111454151708",WORKFORCE_MANAGE_ORG:"719675325086271",WORKFORCE_OVERVIEW:"365572497325067",XWF_XPP_APPLY_SAVE_SEGMENT:"424831474592979",XWF_XPP_CREATE_EDIT_HOTSPOT_SEGMENT:"1811187075642486",XWF_XPP_CUSTOMERS_LIKELY_TO_CHURN_LIST:"1412598362204782",XWF_XPP_HOTSPOT_SEGMENT_FILTER_DESC:"697140330629640",XWF_XPP_INSIGHT_MAP_COVERAGE_NUX:"755454598126108",XWF_XPP_INSIGHT_PLANNED_HOTSPOTS_NUX:"285117762006282",XWF_XPP_LIVE_HOTSPOTS_SHOW_ON_MAP:"1347395392079689",XWF_XPP_LOCAIONS_INSIGHTS_TABLE:"313485895923610",XWF_XPP_MAPS_SEARCH:"833551093663564",XWF_XPP_NEW_MAPS_TAB:"846979895633077",XWF_XPP_PREDEFINED_SEGMENTS_DESC:"656214811428218",ZIPPYDB_ERROR_DEBUGGING_NUX:"2140756722902407",ZIPPYDB_ERROR_DEBUGGING_TUTORIAL_NUX:"2714861381872254",ZIPPYDB_LATENCY_DEBUGGING_NUX:"1992636947706728",ZIPPYDB_LATENCY_DEBUGGING_TUTORIAL_NUX:"1981255745276281"}}),null);
__d("intlSummarizeNumber",["FbtNumberType","IntlCompactDecimalNumberFormatConfig","IntlVariations","intlNumUtils"],(function(a,b,c,d,e,f){__p&&__p();var g=3,h=14,i={ROUND:"ROUND",TRUNCATE:"TRUNCATE"},j={SHORT:"SHORT",LONG:"LONG"};function a(a,c,d,e){__p&&__p();d===void 0&&(d=j.SHORT);e===void 0&&(e=i.ROUND);d=b("IntlCompactDecimalNumberFormatConfig")[d==j.SHORT?"short_patterns":"long_patterns"];var f=a===0?0:Math.floor(Math.log10(Math.abs(a)));f>h&&(f=h);var l=k(a,f,c,e,d),m=l[0],n=l[1];l=l[2];if(l){f+=1;l=k(a,f,c,e,d);m=l[0];n=l[1];l[2]}e=b("FbtNumberType").getVariation(m)||b("IntlVariations").NUMBER_OTHER;l=f.toString();l=(d=d)!=null?(d=d[l])!=null?d[e.toString()]:d:d;if(!l||f<g||l.positive_prefix_pattern===""&&l.positive_suffix_pattern===""){e=c===void 0?0:c;return b("intlNumUtils").formatNumberWithThousandDelimiters(a,e)}return l&&l.min_integer_digits===0&&m===1?l.positive_prefix_pattern+l.positive_suffix_pattern:(l&&l.positive_prefix_pattern||"")+b("intlNumUtils").formatNumberWithThousandDelimiters(m,n)+(l&&l.positive_suffix_pattern||"")}function k(a,c,d,e,f){__p&&__p();var g=c.toString();g=(f=f)!=null?(f=f[g])!=null?f[b("IntlVariations").NUMBER_OTHER.toString()]:f:f;f=g&&g.min_integer_digits||c+1;var j=c-f+1;j=Math.abs(a)/Math.pow(10,j);var k=d!=null;d=k?d:g&&g.min_fraction_digits;d==null&&(d=c>2?1:0);g=e==i.TRUNCATE?b("intlNumUtils").truncateLongNumber(j.toString(),d):j.toFixed(d);e=parseFloat(g)*(a<0?-1:1);return[e,e%1===0&&!k?0:d,g.length>f+(d>0?d+1:0)+(j>=0?0:1)&&c<h]}e.exports=a}),null);
__d("Facepile.react",["cx","fbt","ix","HovercardLink","Image.react","Link.react","List.react","React","intlSummarizeNumber","joinClasses"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();a=b("React").PropTypes;var j={small:24,medium:32,large:50};c=b("React").createClass({displayName:"Facepile",defaultProps:{moreColor:"blue",moreCount:0,showHovercard:!1,tooltipPosition:"above",showToolTip:!0,spacing:"none"},propTypes:{className:a.string,moreColor:a.oneOf(["blue","gray"]),moreCount:a.number,moreDialogLink:a.string,morePageLink:a.string,numFaces:a.number,onFaceClick:a.func,onComponentDidMount:a.func,profiles:a.arrayOf(a.shape({URL:a.any,name:a.node.isRequired,uniqueID:a.any.isRequired,profilePicURI:a.any.isRequired})).isRequired,showHovercard:a.bool,size:a.oneOf([28,"small","medium","large"]).isRequired,spacing:a.oneOf(["none","small","medium","large"]),showToolTip:a.bool,tooltipPosition:a.oneOf(["above","below","left","right"])},_onFaceClick:function(a,b){this.props.onFaceClick&&this.props.onFaceClick(a,b)},componentDidMount:function(){this.props.onComponentDidMount&&this.props.onComponentDidMount()},getPicSize:function(){return j[this.props.size]||this.props.size},renderFace:function(a,c){var d=this.getPicSize(),e=b("HovercardLink").constructEndpoint({id:a.uniqueID}).toString();return b("React").createElement("li",{className:"_43q7",key:a.uniqueID,onClick:this._onFaceClick.bind(this,a,c)},b("React").createElement(b("Link.react"),{"aria-label":a.name,className:"_2rt_ link","data-hover":this.props.showHovercard?null:"tooltip","data-hovercard":this.props.showHovercard?e:null,"data-ignoreclass":"_2rt_","data-tooltip-alignh":"left","data-tooltip-content":a.name,"data-tooltip-position":this.props.tooltipPosition,href:a.URL},b("React").createElement(b("Image.react"),{src:a.profilePicURI,width:d,height:d,className:"img"})))},renderMore:function(){if(!this.props.moreCount)return null;var a=this.props.numFaces!=null&&this.props.numFaces<=this.props.profiles.length?this.props.moreCount+1:this.props.moreCount,c=b("intlSummarizeNumber")(a,0),d=c.length,e;a===0||this.props.size==="small"&&d>2||this.props.size===28&&d>2||this.props.size==="medium"&&d>3||this.props.size==="large"&&d>6?e=b("React").createElement(b("Image.react"),{src:i("97502")}):e="+"+c;var f;(this.props.showToolTip===void 0||this.props.showToolTip===!0)&&(a===1?f=h._("1 other person"):f=h._("{num} other people",[h._param("num",a)]));c=b("joinClasses")("_43q8 _43q7"+(d<2?" _43qa":"")+(d===2?" _43qb":"")+(d===3?" _43qd":"")+(d>3?" _43qe":"")+(this.props.moreColor==="blue"?" _49c8":"")+(this.props.moreColor==="gray"?" _49cb":""));return b("React").createElement("li",{className:c},b("React").createElement("a",{"data-hover":f?"tooltip":null,"data-tooltip-position":f?"right":null,"data-tooltip-content":f,ajaxify:this.props.moreDialogLink||this.props.morePageLink,href:this.props.morePageLink,role:"button",rel:this.props.moreDialogLink?"dialog":null},e))},render:function(){var a=this.props.spacing||this.defaultProps.spacing;a=b("joinClasses")(this.props.className,"_43qm"+(this.props.size==28?" _3cxu":"")+(this.props.size=="small"?" _43q9":"")+(this.props.size=="medium"?" _43qc":"")+(this.props.size=="large"?" _43qf":"")+(a!=this.defaultProps.spacing?" _4nab":""));var c=this.props.numFaces==void 0?this.props.profiles:this.props.profiles.slice(0,this.props.moreCount?this.props.numFaces-1:this.props.numFaces);return b("React").createElement("div",{className:a,style:this.props.style},b("React").createElement(b("List.react"),{className:"_4cg3",direction:"horizontal",spacing:this.props.spacing||"none",border:"none"},c.map(this.renderFace),this.renderMore()))}});e.exports=c}),null);
__d("EnterMessengerCallRoomMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"input",type:"EnterMessengerCallRoomData!",defaultValue:null}],b={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null};b=[{kind:"LinkedField",alias:null,name:"enter_messenger_call_room",storageKey:null,args:[{kind:"Variable",name:"data",variableName:"input",type:"EnterMessengerCallRoomData!"}],concreteType:"EnterMessengerCallRoomResponsePayload",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"messenger_call_room",storageKey:null,args:null,concreteType:"MessengerCallRoom",plural:!1,selections:[b,{kind:"ScalarField",alias:null,name:"conference_name",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"room_message_thread",storageKey:null,args:null,concreteType:"MessengerGlobalGroupThread",plural:!1,selections:[b]}]}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"EnterMessengerCallRoomMutation",type:"Mutation",metadata:null,argumentDefinitions:a,selections:b},operation:{kind:"Operation",name:"EnterMessengerCallRoomMutation",argumentDefinitions:a,selections:b},params:{operationKind:"mutation",name:"EnterMessengerCallRoomMutation",id:"1650289558360123",text:null,metadata:{}}}}();e.exports=a}),null);
__d("EnterMessengerCallRoomMutation",["Promise","RelayFBEnvironment","RelayModern","VideoChatLinksLoggingEvent","VideoChatLinksLoggingSurface","VideoChatLinksUserActionsTypedLogger","EnterMessengerCallRoomMutation.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("RelayModern").commitMutation;b("RelayModern").graphql;var h=function(){return b("EnterMessengerCallRoomMutation.graphql")};function a(a){return new(b("Promise"))(function(c,d){g(b("RelayFBEnvironment"),{mutation:h,variables:{input:{room_link:a}},optimisticUpdater:null,onCompleted:function(a){var b;b=(b=a)!=null?(b=b.enter_messenger_call_room)!=null?(b=b.messenger_call_room)!=null?b.conference_name:b:b:b;a=(a=a)!=null?(a=a.enter_messenger_call_room)!=null?(a=a.messenger_call_room)!=null?(a=a.room_message_thread)!=null?a.id:a:a:a:a;b?c({conferenceName:b,threadFBID:a}):a?(i("Missing conferenceName"),c({conferenceName:"GROUP:"+a,threadFBID:a})):(i("Missing conferenceName and threadID"),d(new Error("Missing conference name and thread ID")))},onError:function(a){d(a)}})})}function i(a){new(b("VideoChatLinksUserActionsTypedLogger"))().setSurface(b("VideoChatLinksLoggingSurface").WWW_INTERSTITIAL).setEvent(b("VideoChatLinksLoggingEvent").ERROR).setErrorType("EnterRoomError").setErrorDetails(a).log()}e.exports=a}),null);
__d("VFRTCGroupCallIncomingDialogBodyQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"id",type:"ID!",defaultValue:null}],b=[{kind:"Variable",name:"id",variableName:"id",type:"ID!"}],c={kind:"ScalarField",alias:null,name:"thread_name",args:null,storageKey:null},d={kind:"LinkedField",alias:null,name:"image",storageKey:null,args:null,concreteType:"Image",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}]};return{kind:"Request",fragment:{kind:"Fragment",name:"VFRTCGroupCallIncomingDialogBodyQuery",type:"Query",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"message_thread",storageKey:null,args:b,concreteType:"MessageThread",plural:!1,selections:[c,d]}]},operation:{kind:"Operation",name:"VFRTCGroupCallIncomingDialogBodyQuery",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"message_thread",storageKey:null,args:b,concreteType:"MessageThread",plural:!1,selections:[c,d,{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}]}]},params:{operationKind:"query",name:"VFRTCGroupCallIncomingDialogBodyQuery",id:"2013561045387033",text:null,metadata:{}}}}();e.exports=a}),null);
__d("VFWebBlockUserMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"input",type:"MessengerBlockData!",defaultValue:null}],b=[{kind:"Variable",name:"data",variableName:"input",type:"MessengerBlockData!"}],c={kind:"ScalarField",alias:null,name:"client_mutation_id",args:null,storageKey:null},d={kind:"ScalarField",alias:null,name:"is_message_blocked_by_viewer",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"VFWebBlockUserMutation",type:"Mutation",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"messenger_block",storageKey:null,args:b,concreteType:"MessengerBlockResponsePayload",plural:!1,selections:[c,{kind:"LinkedField",alias:null,name:"messaging_actor",storageKey:null,args:null,concreteType:null,plural:!1,selections:[d]}]}]},operation:{kind:"Operation",name:"VFWebBlockUserMutation",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"messenger_block",storageKey:null,args:b,concreteType:"MessengerBlockResponsePayload",plural:!1,selections:[c,{kind:"LinkedField",alias:null,name:"messaging_actor",storageKey:null,args:null,concreteType:null,plural:!1,selections:[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},d,{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}]}]}]},params:{operationKind:"mutation",name:"VFWebBlockUserMutation",id:"2170031336348755",text:null,metadata:{}}}}();e.exports=a}),null);
__d("VFWebConferenceUtilsCallThreadLookupQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"callId",type:"ID!",defaultValue:null}],b=[{kind:"Variable",name:"id",variableName:"callId",type:"ID!"}],c={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},d={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"VFWebConferenceUtilsCallThreadLookupQuery",type:"Query",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:b,concreteType:null,plural:!1,selections:[{kind:"InlineFragment",type:"MessengerCall",selections:[{kind:"LinkedField",alias:null,name:"thread",storageKey:null,args:null,concreteType:null,plural:!1,selections:[c]}]}]}]},operation:{kind:"Operation",name:"VFWebConferenceUtilsCallThreadLookupQuery",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:b,concreteType:null,plural:!1,selections:[d,c,{kind:"InlineFragment",type:"MessengerCall",selections:[{kind:"LinkedField",alias:null,name:"thread",storageKey:null,args:null,concreteType:null,plural:!1,selections:[d,c]}]}]}]},params:{operationKind:"query",name:"VFWebConferenceUtilsCallThreadLookupQuery",id:"2214702778569422",text:null,metadata:{}}}}();e.exports=a}),null);
__d("VFWebCreateCallMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"input",type:"MessengerCreateCallConferenceData!",defaultValue:null}],b=[{kind:"LinkedField",alias:null,name:"messenger_create_call_conference",storageKey:null,args:[{kind:"Variable",name:"data",variableName:"input",type:"MessengerCreateCallConferenceData!"}],concreteType:"MessengerCreateCallConferenceResponsePayload",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"conference_name",args:null,storageKey:null}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"VFWebCreateCallMutation",type:"Mutation",metadata:null,argumentDefinitions:a,selections:b},operation:{kind:"Operation",name:"VFWebCreateCallMutation",argumentDefinitions:a,selections:b},params:{operationKind:"mutation",name:"VFWebCreateCallMutation",id:"1720220268047488",text:null,metadata:{}}}}();e.exports=a}),null);
__d("VFWebGroupItem_messageThread.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},b=[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}];return{kind:"Fragment",name:"VFWebGroupItem_messageThread",type:"MessageThread",metadata:null,argumentDefinitions:[],selections:[{kind:"LinkedField",alias:null,name:"thread_key",storageKey:null,args:null,concreteType:"MessageThreadKey",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"thread_fbid",args:null,storageKey:null}]},a,{kind:"LinkedField",alias:null,name:"image",storageKey:null,args:null,concreteType:"Image",plural:!1,selections:b},{kind:"LinkedField",alias:null,name:"other_participants",storageKey:null,args:null,concreteType:"MessagingParticipantsOfThreadConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"MessagingParticipantsOfThreadEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"MessagingParticipant",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"messaging_actor",storageKey:null,args:null,concreteType:null,plural:!1,selections:[a,{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"profile_picture",storageKey:null,args:null,concreteType:"Image",plural:!1,selections:b}]}]}]}]}]}}();e.exports=a}),null);
__d("VFWebIncomingCallDialogUtils_actorQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"actor_ids",type:"[ID!]!",defaultValue:null},{kind:"LocalArgument",name:"thread_id",type:"ID!",defaultValue:null},{kind:"LocalArgument",name:"should_fetch_thread",type:"Boolean",defaultValue:!1},{kind:"LocalArgument",name:"picture_width",type:"Int",defaultValue:null},{kind:"LocalArgument",name:"picture_height",type:"Int",defaultValue:null}],b=[{kind:"Variable",name:"id",variableName:"actor_ids",type:"[ID!]!"}],c={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},d={kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},e=[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}],f={kind:"LinkedField",alias:null,name:"profile_picture",storageKey:null,args:[{kind:"Variable",name:"height",variableName:"picture_height",type:"Int"},{kind:"Variable",name:"width",variableName:"picture_width",type:"Int"}],concreteType:"Image",plural:!1,selections:e},g={kind:"InlineFragment",type:"User",selections:[{kind:"ScalarField",alias:null,name:"short_name",args:null,storageKey:null}]},h=[{kind:"Variable",name:"id",variableName:"thread_id",type:"ID!"}],i={kind:"ScalarField",alias:null,name:"thread_name",args:null,storageKey:null};e={kind:"LinkedField",alias:null,name:"image",storageKey:null,args:null,concreteType:"Image",plural:!1,selections:e};return{kind:"Request",fragment:{kind:"Fragment",name:"VFWebIncomingCallDialogUtils_actorQuery",type:"Query",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"messaging_actors",storageKey:null,args:b,concreteType:null,plural:!0,selections:[c,d,f,g]},{kind:"Condition",passingValue:!0,condition:"should_fetch_thread",selections:[{kind:"LinkedField",alias:null,name:"message_thread",storageKey:null,args:h,concreteType:"MessageThread",plural:!1,selections:[i,e]}]}]},operation:{kind:"Operation",name:"VFWebIncomingCallDialogUtils_actorQuery",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"messaging_actors",storageKey:null,args:b,concreteType:null,plural:!0,selections:[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},c,d,f,g]},{kind:"Condition",passingValue:!0,condition:"should_fetch_thread",selections:[{kind:"LinkedField",alias:null,name:"message_thread",storageKey:null,args:h,concreteType:"MessageThread",plural:!1,selections:[i,e,c]}]}]},params:{operationKind:"query",name:"VFWebIncomingCallDialogUtils_actorQuery",id:"1990230701030206",text:null,metadata:{}}}}();e.exports=a}),null);
__d("VFWebListTraySearchResultsGroupsQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"name",type:"String!",defaultValue:null}],b=[{kind:"Variable",name:"query",variableName:"name",type:"String!"}],c=[{kind:"Literal",name:"first",value:10,type:"Int"},{kind:"Literal",name:"of_type",value:["group_thread"],type:"[SearchEntityType]"}],d={kind:"LinkedField",alias:null,name:"thread_key",storageKey:null,args:null,concreteType:"MessageThreadKey",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"thread_fbid",args:null,storageKey:null}]},e={kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},f={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},g={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},h=[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}];return{kind:"Request",fragment:{kind:"Fragment",name:"VFWebListTraySearchResultsGroupsQuery",type:"Query",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"entities_named",storageKey:null,args:b,concreteType:"SearchableEntitiesQuery",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"search_results",storageKey:'search_results(first:10,of_type:["group_thread"])',args:c,concreteType:"SearchableResultsConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"nodes",storageKey:null,args:null,concreteType:null,plural:!0,selections:[{kind:"InlineFragment",type:"MessageThread",selections:[d,e,{kind:"FragmentSpread",name:"VFWebGroupItem_messageThread",args:null}]}]}]}]}]},operation:{kind:"Operation",name:"VFWebListTraySearchResultsGroupsQuery",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"entities_named",storageKey:null,args:b,concreteType:"SearchableEntitiesQuery",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"search_results",storageKey:'search_results(first:10,of_type:["group_thread"])',args:c,concreteType:"SearchableResultsConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"nodes",storageKey:null,args:null,concreteType:null,plural:!0,selections:[f,g,{kind:"InlineFragment",type:"MessageThread",selections:[d,e,{kind:"LinkedField",alias:null,name:"image",storageKey:null,args:null,concreteType:"Image",plural:!1,selections:h},{kind:"LinkedField",alias:null,name:"other_participants",storageKey:null,args:null,concreteType:"MessagingParticipantsOfThreadConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"MessagingParticipantsOfThreadEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"MessagingParticipant",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"messaging_actor",storageKey:null,args:null,concreteType:null,plural:!1,selections:[f,e,g,{kind:"LinkedField",alias:null,name:"profile_picture",storageKey:null,args:null,concreteType:"Image",plural:!1,selections:h}]},g]}]}]}]}]}]},g]}]},params:{operationKind:"query",name:"VFWebListTraySearchResultsGroupsQuery",id:"2014457745310112",text:null,metadata:{}}}}();e.exports=a}),null);
__d("VFWebListTraySearchResultsQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"name",type:"String",defaultValue:null}],b=[{kind:"Literal",name:"first",value:50,type:"Int"},{kind:"Variable",name:"name_like",variableName:"name",type:"String"},{kind:"Literal",name:"orderby",value:"communication",type:"[MessengerContactsOrdering]"}],c={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},d={kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"VFWebListTraySearchResultsQuery",type:"Query",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:"viewer",name:"__viewer_viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"messenger_contacts",storageKey:null,args:b,concreteType:"MessengerContactsConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"nodes",storageKey:null,args:null,concreteType:"Contact",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"messaging_profile",storageKey:null,args:null,concreteType:null,plural:!1,selections:[c,d,{kind:"FragmentSpread",name:"VFWebMessengerContact_messagingActor",args:null}]}]}]}]}]},operation:{kind:"Operation",name:"VFWebListTraySearchResultsQuery",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"messenger_contacts",storageKey:null,args:b,concreteType:"MessengerContactsConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"nodes",storageKey:null,args:null,concreteType:"Contact",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"messaging_profile",storageKey:null,args:null,concreteType:null,plural:!1,selections:[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},c,d,{kind:"InlineFragment",type:"User",selections:[{kind:"LinkedField",alias:null,name:"profile_picture",storageKey:null,args:null,concreteType:"Image",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"is_message_blocked_by_viewer",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"url",args:[{kind:"Literal",name:"site",value:"www",type:"SiteEnum"}],storageKey:'url(site:"www")'}]}]},c]}]}]},{kind:"LinkedHandle",alias:null,name:"viewer",args:null,handle:"viewer",key:"",filters:null}]},params:{operationKind:"query",name:"VFWebListTraySearchResultsQuery",id:"1919238308186478",text:null,metadata:{}}}}();e.exports=a}),null);
__d("VFWebMessengerContact_messagingActor.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"Fragment",name:"VFWebMessengerContact_messagingActor",type:"User",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"profile_picture",storageKey:null,args:null,concreteType:"Image",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"is_message_blocked_by_viewer",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"url",args:[{kind:"Literal",name:"site",value:"www",type:"SiteEnum"}],storageKey:'url(site:"www")'}]};e.exports=a}),null);
__d("RungParticipantsAddedWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function(a,b,c,d,e,f){"use strict";e.exports=b("WebGraphQLSubscriptionHelper").getExports({docID:"1879396068740293",queryID:"738167736389860"})}),null);
__d("RungParticipantsAddedSubscription",["BaseGraphQLSubscription","RungParticipantsAddedWebGraphQLSubscription","uuid"],(function(a,b,c,d,e,f){__p&&__p();var g;g=babelHelpers.inherits(a,b("BaseGraphQLSubscription"));g&&g.prototype;a.prototype.getTopic=function(a){"use strict";return"gqls/"+this.getSubscriptionCallName()+"/call_id_"+a};a.prototype.getQueryID=function(){"use strict";return b("RungParticipantsAddedWebGraphQLSubscription").getDocID()};a.prototype.getQueryParameters=function(a){"use strict";return{input:JSON.stringify({client_subscription_id:b("uuid")(),call_id:a})}};a.prototype.getSubscriptionCallName=function(){"use strict";return"rung_participants_added_subscribe"};function a(){"use strict";g.apply(this,arguments)}e.exports=a}),null);
__d("SimpleNUXMessageTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$1={}}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:SimpleNUXMessageLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:SimpleNUXMessageLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:SimpleNUXMessageLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setEventTimestamp=function(a){this.$1.event_timestamp=a;return this};a.prototype.setName=function(a){this.$1.name=a;return this};a.prototype.setNuxMessageType=function(a){this.$1.nux_message_type=a;return this};a.prototype.setTime=function(a){this.$1.time=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.setWeight=function(a){this.$1.weight=a;return this};c={event:!0,event_timestamp:!0,name:!0,nux_message_type:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("XBonfireAppController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/bonfire/{?*bonfire_id}",{bonfire_id:{type:"String"},referrer:{type:"String"}})}),null);
__d("XFacebookBonfireController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/fbbonfire/",{rest:{type:"String"}})}),null);
__d("PartiesUtils",["CurrentUser","URI","XBonfireAppController","XFacebookBonfireController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new(b("URI"))(document.URL),h=b("XBonfireAppController").getURIBuilder().getURI().setDomain(g.getDomain().replace(/\.[^.]+\.com$/,".mybonfire.com")).setProtocol("https").toString();function i(a){return/^\d+$/.test(a)}a={payloadParticipantsToPartiesUsers:function(a){return a.map(function(a){return{accepts_messenger_user_feedback:!1,big_image_src:a.profile_picture_uri,employee:!1,fbid:a.fbid.toString(),gender:0,href:null,id:"fbid:"+a.fbid.toString(),image_src:a.profile_picture_uri,is_business_enabled:null,is_employee_away:null,is_friend:null,is_messenger_user:null,is_messenger_platform_bot:null,is_parties_user:!0,is_verified:null,name:a.display_name,short_name:a.display_name,user_type:null,vanity:a.username,timezone:null,personal_id:null,work_id:null}})},joinBonfire:function(a,c){if(i(a)){a=b("CurrentUser").isWorkUser()?b("XFacebookBonfireController").getURIBuilder().getURI()+a:b("XBonfireAppController").getURIBuilder().setString("bonfire_id",a).setString("referrer",c).getURI().setDomain(g.getDomain().replace(/\.[^.]+\.com$/,".mybonfire.com")).setProtocol("https");window.open(a,"_blank")}},navigateToBonfireAppPage:function(){window.open(h,"_blank")}};e.exports=a}),null);
__d("SimpleNUXMessageEvents",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MARK_AS_SEEN:"seen",USER_IS_ELIGIBLE:"eligible"})}),null);
__d("XSimpleNUXMessagesController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/nux/{msg_id}/seen/",{msg_id:{type:"Int",required:!0}})}),null);
__d("SimpleNUXMessage",["AsyncRequest","SimpleNUXMessageConfig","SimpleNUXMessageEvents","SimpleNUXMessageTypedLogger","SimpleNUXMessageTypesToShow","XSimpleNUXMessagesController"],(function(a,b,c,d,e,f){__p&&__p();var g=new Set();function h(a,c){var d=b("SimpleNUXMessageTypesToShow").mapping[a];new(b("SimpleNUXMessageTypedLogger"))().setNuxMessageType(a).setName(d).setEvent(c).setEventTimestamp(Math.floor(Date.now()/1e3)).log()}function a(a){var c=!b("SimpleNUXMessageTypesToShow").mapping[a];!c&&!g.has(a)&&(h(a,b("SimpleNUXMessageEvents").USER_IS_ELIGIBLE),g.add(a));return c}function c(a){delete b("SimpleNUXMessageTypesToShow").mapping[a];a=b("XSimpleNUXMessagesController").getURIBuilder().setInt("msg_id",a).getURI();new(b("AsyncRequest"))().setURI(a).send()}function d(){return b("SimpleNUXMessageConfig").isEnabled}e.exports={isEnabled:d,hasUserSeenMessage:a,markMessageSeenByUser:c}}),null);
__d("VFWebStrings",["fbt","FBRTCParticipantCallState","React","Timestamp.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();e.exports={app_name:g._("Messenger Video"),list_tray_title:g._("Messenger Video"),ring_friend_button:g._("Ring"),invite_friend_button:g._("Add"),cancel_ring_button:g._("Cancel"),preview_camera_microphone:g._("Preview On"),disable_camera_microphone:g._("Preview Off"),join_video_chat_link:g._("Join Video Chat"),redial_remote_user:g._("Ring"),dont_join_video_chat_link:g._("Not now"),blocked_user:g._("Blocked"),welcome_screen_message:g._("Messenger Video"),welcome_screen_call_to_action:g._("Connect with your favorite people"),call_history_recent_header_label:g._("Recent"),toggle_tray:g._("Toggle tray"),leaveCall:g._("Leave call"),toggleScreenShare:g._("Toggle screen sharing"),toggleMute:g._("Toggle mute"),toggleVideo:g._("Toggle video"),close_window_warning:g._("Leaving so soon?"),ignore_button_label:g._("Ignore"),label_refresh:g._("Refresh"),load_error_media:g._("An Error occured when trying to get access to Camera and\/or Microphone:"),load_error_media_permission:g._("Please Allow Camera and Microphone Access"),load_error_media_permission_explanation:g._("To use VFWeb, you need to turn your camera and microphone on. This will let your friends see and hear you when you connect with them."),load_error_media_permission_explanation_later:g._("You can turn these off later."),load_error_media_permission_learn_more:g._("Learn more"),load_error_unknown:g._("An Unknown Error occured trying to load VFWeb."),load_error_unknown_refresh_request:g._("Please refresh your browser or try again later."),activeOnline:g._("Active now"),logout:g._("Log Out"),settings:g._("Settings"),audio_settings:g._("Audio Settings"),audio_settings_modal_title:g._("Audio Settings"),search_placeholder:g._("Search for friends and family"),search_placeholder_roster:g._("Add people to this call"),star_rating_audio_call:g._("Please rate the quality of your audio call"),star_rating_video_call:g._("Please rate the quality of your video call"),star_rating_not_now:g._("Not Now"),star_rating_submit:g._("Submit"),hideListTray:g._("Hide"),ignore:g._("Ignore"),join_button_label:g._("Join"),joining_generic_error_title:g._("Could Not Join Call"),joining_generic_error_message:g._("Something happened and we could not join this call. Please try again."),okay:g._("Okay"),noAnswerOnOutgoingCall:g._("No Answer"),user_video_off:function(a){return g._("{name}'s camera is off",[g._param("name",a)])},video_escalation:g._("Requesting video..."),viewer_video_off:function(a){return g._("Your camera is off")},call_state:function(a){__p&&__p();switch(a){case b("FBRTCParticipantCallState").DISCONNECTED:return g._("Disconnected");case b("FBRTCParticipantCallState").NO_ANSWER:case b("FBRTCParticipantCallState").REJECTED:return g._("No Answer");case b("FBRTCParticipantCallState").IN_ANOTHER_CALL:return g._("In another call");case b("FBRTCParticipantCallState").UNREACHABLE:return g._("Unreachable");case b("FBRTCParticipantCallState").CONNECTION_DROPPED:return g._("Connection dropped");case b("FBRTCParticipantCallState").CONTACTING:return g._("Contacting...");case b("FBRTCParticipantCallState").RINGING:return g._("Ringing...");case b("FBRTCParticipantCallState").CONNECTING:return g._("Connecting...");case b("FBRTCParticipantCallState").CONNECTED:return g._("Connected");case b("FBRTCParticipantCallState").PARTICIPANT_LIMIT_REACHED:return g._("Participant limit reached");case b("FBRTCParticipantCallState").RING_TYPE_UNSUPPORTED:return g._("Not supported");default:return null}},full_label:g._("Full"),call_created_time:function(a){return g._("{relative time, like '2 hours'} ago",[g._param("relative time, like '2 hours'",b("React").createElement(b("Timestamp.react"),{minimize:!0,shorten:!0,time:a,useLargerTimeUnits:!0}))])},in_this_call_label:g._("In this call"),yourself_in_call_row:g._("You"),oops_message:g._("Something went wrong."),oops_sub_message:g._("You can help us improve by reporting an issue. Then restart the application to try again."),restart:g._("Restart"),no_internet_connection:g._("Unable to load information due to failed connection."),dismiss_failed_call:g._("Dismiss"),redial:g._("Redial"),call_roster_ongoing_video_chat:g._("Ongoing Video Chat"),ringing:g._("Ringing"),update_old_build_prompt:g._("Oops! You're on an old build. Please go {=fburl.com\/dvc} to manually update. New builds will auto-update.",[g._param("=fburl.com/dvc",b("React").createElement("b",null,g._("fburl.com\/dvc")))]),no_camera_message_title:g._("No camera found."),no_camera_message_action:g._("Check audio and video settings"),switch_to_start_new_video_chat_title:g._("Start New Video Chat?"),switch_to_join_another_video_chat_title:g._("Join Another Video Chat?"),current_video_chat_status:g._("You're already in a video chat."),end_call_to_start_new_video_chat:g._("If you want to create another video chat, your current video chat will end."),leave_call_to_start_new_video_chat:g._("If you want to create another video chat, you will leave the current video chat."),end_call_to_join_another_video_chat:g._("If you want to join another video chat, your current video chat will end."),leave_call_to_join_another_video_chat:g._("If you want to join another video chat, you will leave the current video chat."),no_camera_permission_message_title:g._("Camera permission denied."),no_camera_permssion_message_action_macos:g._("Check 'Security & Privacy' in System Preferences ..."),no_camera_permssion_message_action_windows:g._("Check 'Camera privacy settings' in Settings"),search_no_results:g._("No results found"),not_available_title:g._("Content not available"),not_available_subtitle:g._("This application is not yet available in your region."),back_to_grid_view:g._("View all participants"),add_people_to_call:g._("Add people to this call"),exit_miniview:g._("Exit Miniview"),settings_button_nux:g._("Modify audio and video settings"),start_audio_call:g._("Audio"),start_video_call:g._("Video"),open_facebook_profile:g._("Profile"),open_chat:g._("Chat")}}),null);
__d("VFWebIcon.react",["React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={"audio-off":"M23.4286183,9.326875 L9.71033611,23.036875 C9.41360039,23.333375 9.0119581,23.499875 8.59283138,23.499875 C7.7196091,23.499875 7.01173954,22.792375 7.01173954,21.919375 L7.01173954,14.501875 C7.01173954,13.397875 7.90744181,12.502375 9.01245765,12.502375 L14.1843514,12.502375 C14.7153785,12.502375 15.223426,12.291875 15.5985919,11.916875 L20.9962846,6.521875 C21.3274896,6.190375 21.7770892,6.003875 22.2461714,6.003875 C23.2228016,6.003875 24.0145964,6.795875 24.0145964,7.771375 L24.0145964,7.912875 C24.0145964,8.443375 23.8037841,8.951875 23.4286183,9.326875 Z M24.0145964,28.230875 C24.0145964,29.206875 23.2228016,29.997875 22.2461714,29.997875 C21.7770892,29.997875 21.3274896,29.811875 20.9962846,29.480375 L15.9033205,24.389375 C15.3812854,23.867875 14.5355387,23.867875 14.0135036,24.389375 L8.7072295,29.692375 C8.31707698,30.082875 7.68314158,30.082875 7.29298906,29.692375 C6.90233698,29.302375 6.90233698,28.669875 7.29298906,28.279375 L29.2928954,6.292875 C29.6830479,5.902375 30.3169833,5.902375 30.7066363,6.292875 C31.0977879,6.682875 31.0977879,7.315875 30.7066363,7.705875 L24.6005745,13.808875 C24.2254086,14.183875 24.0145964,14.692375 24.0145964,15.222875 L24.0145964,28.230875","audio-on":"M20.23045,30 C19.76195,30 19.31145,29.8135 18.97995,29.482 L13.58295,24.0855 C13.20745,23.7105 12.69895,23.5 12.16845,23.5 L6.99595,23.5 C5.89095,23.5 4.99545,22.6045 4.99545,21.5 L4.99545,14.5 C4.99545,13.3955 5.89095,12.5 6.99595,12.5 L12.16845,12.5 C12.69895,12.5 13.20745,12.2895 13.58295,11.914 L18.97995,6.518 C19.31145,6.1865 19.76195,6 20.23045,6 C21.20695,6 21.99845,6.7915 21.99845,7.768 L21.99845,28.232 C21.99845,29.2085 21.20695,30 20.23045,30 M26.63345,27.269 C26.22145,27.6105 25.61145,27.562 25.25345,27.164 C24.86795,26.735 24.93395,26.0805 25.37695,25.7115 C27.58495,23.8705 28.99145,21.0985 28.99145,17.996 C28.99145,14.8935 27.58495,12.1215 25.37695,10.2805 C24.93395,9.911 24.86795,9.257 25.25345,8.828 C25.61145,8.43 26.22145,8.3815 26.63345,8.723 C29.29645,10.9315 30.99695,14.2625 30.99695,17.996 C30.99695,21.729 29.29645,25.0605 26.63345,27.269",cross:"M24.4386402,26.5608358 L18.4998126,20.6218774 L12.5614847,26.5608358 C11.9754458,27.1463881 11.0251934,27.1463881 10.4391545,26.5608358 C9.85361517,25.974784 9.85361517,25.0250103 10.4391545,24.4389584 L16.377982,18.5 L10.4391545,12.5610416 C9.85361517,11.9754893 9.85361517,11.025216 10.4391545,10.4391642 C11.0251934,9.85361194 11.9754458,9.85361194 12.5614847,10.4391642 L18.4998126,16.3786222 L24.4386402,10.4391642 C25.0246791,9.85361194 25.9744319,9.85361194 26.5604708,10.4391642 C27.1465097,11.025216 27.1465097,11.9754893 26.5604708,12.5610416 L20.6211437,18.5 L26.5604708,24.4389584 C27.1465097,25.0250103 27.1465097,25.974784 26.5604708,26.5608358 C25.9744319,27.1463881 25.0246791,27.1463881 24.4386402,26.5608358 Z",plus:"M27.5 19.5h-8v8c0 .8285-.6715 1.5-1.5 1.5s-1.5-.6715-1.5-1.5v-8h-8c-.8285 0-1.5-.6715-1.5-1.5s.6715-1.5 1.5-1.5h8v-8c0-.8285.6715-1.5 1.5-1.5s1.5.6715 1.5 1.5v8h8c.8285 0 1.5.6715 1.5 1.5s-.6715 1.5-1.5 1.5z",camcorder:"M20,27 L9,27 C6.791,27 5,25.209 5,23 L5,13 C5,10.791 6.791,9 9,9 L20,9 C22.209,9 24,10.791 24,13 L24,23 C24,25.209 22.209,27 20,27 M30.5525,23.3995 L26.829,21.536 C26.321,21.282 26,20.762 26,20.193 L26,15.808 C26,15.2395 26.321,14.719 26.829,14.465 L30.5525,12.6015 C31.218,12.269 32,12.753 32,13.497 L32,22.504 C32,23.2485 31.218,23.732 30.5525,23.3995","camcorder-cross":"M6.52219159,23.73575 C6.00847773,24.24975 5.008035,24.00175 5.008035,23.01175 L5.008035,13.00725 C5.008035,10.79725 6.79803794,9.00525 9.00680761,9.00525 L19.1191748,9.00575 C19.9062364,9.00575 20.3005168,9.95775 19.7438269,10.51425 L6.52219159,23.73575 Z M27.1966755,8.70725 L24.589128,11.31625 C24.2143368,11.69125 24.0039539,12.19925 24.0039539,12.72875 L24.0019551,23.01175 C24.0019551,25.22175 22.2149504,27.00675 20.0061808,27.00675 L9.73590149,27.00675 C9.20569683,27.00675 8.69698019,27.21725 8.32218896,27.59225 L5.20642449,30.70925 C4.81614189,31.10025 4.18249484,31.10025 3.79271195,30.70925 C3.40242935,30.31875 3.40242935,29.68575 3.79271195,29.29525 L25.782963,7.29325 C26.1727459,6.90225 26.8063929,6.90225 27.1966755,7.29325 C27.5869581,7.68375 27.5869581,8.31725 27.1966755,8.70725 Z M30.5533058,23.41125 L26.8308793,21.54725 C26.3226624,21.29275 26.0018411,20.77225 26.0018411,20.20375 L26.0018411,15.81625 C26.0018411,15.24725 26.3226624,14.72725 26.8308793,14.47275 L30.5533058,12.60875 C31.2179356,12.27575 32,12.75975 32,13.50425 L32,22.51575 C32,23.25975 31.2179356,23.74425 30.5533058,23.41125 Z",microphone:"M14,28 L22,28 C22.552,28 23,28.448 23,29 C23,29.552 22.552,30 22,30 L14,30 C13.448,30 13,29.552 13,29 C13,28.448 13.448,28 14,28 M18,22.5 C15.239,22.5 13,20.2615 13,17.5 L13,11 C13,8.2385 15.239,6 18,6 C20.761,6 23,8.2385 23,11 L23,17.5 C23,20.2615 20.761,22.5 18,22.5 M18,26.5 C13.0295,26.5 9,22.4705 9,17.5 C9,16.948 9.448,16.5 10,16.5 C10.552,16.5 11,16.948 11,17.5 C11,21.366 14.134,24.5 18,24.5 C21.866,24.5 25.0005,21.366 25.0005,17.5 L25,17.5 C25,16.948 25.448,16.5 26,16.5 C26.552,16.5 27,16.948 27,17.5 C27,22.4705 22.9705,26.5 18,26.5","microphone-cross":"M14.0098327,28.0001562 L22.0107909,28.0001562 C22.5632535,28.0001562 23.0112232,28.4478973 23.0112232,29.0000781 C23.0112232,29.5522589 22.5632535,30 22.0107909,30 L14.0098327,30 C13.4573701,30 13.0094004,29.5522589 13.0094004,29.0000781 C13.0094004,28.4478973 13.4573701,28.0001562 14.0098327,28.0001562 M9.00917125,17.5022253 C9.00917125,16.9500445 9.45714092,16.5023034 10.0091036,16.5023034 C10.5615661,16.5023034 11.0090358,16.9500445 11.0090358,17.5022253 C11.0090358,18.2512922 11.1275278,18.9728751 11.346013,19.6494839 C11.4595053,20.0017802 11.3620119,20.3875572 11.1000297,20.6499055 C10.5795649,21.1706045 9.67562613,20.9747177 9.44764157,20.2751222 C9.16366079,19.4016272 9.00917125,18.4701657 9.00917125,17.5022253 M23.0112232,17.5022253 C23.0112232,20.2631291 20.7718748,22.5013352 18.0100618,22.5013352 C17.2881107,22.5013352 16.6031571,22.3449256 15.984699,22.0670862 C15.7147172,21.9461561 15.3987386,22.0066212 15.1897528,22.2155004 L14.6942863,22.7112138 C14.3908069,23.0145385 14.4578023,23.5347377 14.8397765,23.7316239 C15.7912121,24.2213408 16.8661393,24.501179 18.0100618,24.501179 C21.8768,24.501179 25.0115878,21.3674907 25.0115878,17.5022253 L25.0110878,17.5022253 C25.0110878,16.9500445 25.4585575,16.5023034 26.0115201,16.5023034 C26.5634827,16.5023034 27.0114523,16.9500445 27.0114523,17.5022253 C27.0114523,22.4718522 22.9812252,26.5005231 18.0100618,26.5005231 C16.2806789,26.5005231 14.6712879,26.0053094 13.3023806,25.1568 C12.9194065,24.9194372 12.42494,24.9789028 12.1064615,25.2972188 L7.7072594,29.6946765 C7.31678584,30.0849509 6.68332873,30.0849509 6.29285517,29.6946765 C5.90238161,29.3039024 5.90238161,28.6717679 6.29285517,28.2809938 L28.2928656,6.29270578 C28.6833391,5.90243141 29.3167963,5.90243141 29.7067699,6.29270578 C30.0977434,6.68298015 30.0977434,7.31561441 29.7067699,7.70638849 L23.5971835,13.8128582 C23.2217089,14.1881412 23.0112232,14.6963474 23.0112232,15.2270406 L23.0112232,17.5022253 Z M22.2895221,9.46592126 L13.9005901,17.8510736 C13.5681126,18.1828818 13.000151,17.9475178 13.001151,17.4782891 L13.0091504,11.0035323 C13.0091504,8.24262848 15.2484988,6.00442244 18.0098118,6.00442244 C19.9141829,6.00442244 21.5680709,7.06930681 22.4120138,8.6349017 C22.5595038,8.90774396 22.5085072,9.2470478 22.2895221,9.46592126 Z","screen-share":"M10,16.9983 L10,19.9983 C10,20.5503 9.552,20.9983 9,20.9983 L8,20.9983 C6.8955,20.9983 6,20.1028 6,18.9983 L6,7.9983 C6,6.8938 6.8955,5.9983 8,5.9983 L22,5.9983 C23.1045,5.9983 24,6.8938 24,7.9983 L24,11.9983 C24,12.5503 23.552,12.9983 23,12.9983 L14,12.9983 C11.791,12.9983 10,14.7893 10,16.9983 M28,29.9983 L14,29.9983 C12.8955,29.9983 12,29.1028 12,27.9983 L12,16.9983 C12,15.8938 12.8955,14.9983 14,14.9983 L28,14.9983 C29.1045,14.9983 30,15.8938 30,16.9983 L30,27.9983 C30,29.1028 29.1045,29.9983 28,29.9983","screen-share-cross":"M26.20995,26.2842 C26.60095,26.6747 26.60095,27.3072 26.20995,27.6982 C25.81945,28.0882 25.18545,28.0882 24.79445,27.6977 L20.99745,23.9067 L17.20045,27.6977 C16.80995,28.0882 16.17645,28.0882 15.78495,27.6982 C15.39395,27.3072 15.39395,26.6747 15.78495,26.2842 L19.58195,22.4927 L15.78495,18.7012 C15.39395,18.3112 15.39395,17.6782 15.78495,17.2877 C16.17595,16.8972 16.80995,16.8972 17.20045,17.2877 L20.99745,21.0792 L24.79445,17.2877 C25.18545,16.8972 25.81945,16.8972 26.20995,17.2877 C26.60095,17.6782 26.60095,18.3112 26.20995,18.7012 L22.41295,22.4927 L26.20995,26.2842 Z M27.99995,14.9982 L13.99995,14.9982 C12.89545,14.9982 11.99995,15.8937 11.99995,16.9982 L11.99995,27.9982 C11.99995,29.1027 12.89545,29.9982 13.99995,29.9982 L27.99995,29.9982 C29.10445,29.9982 29.99995,29.1027 29.99995,27.9982 L29.99995,16.9982 C29.99995,15.8937 29.10445,14.9982 27.99995,14.9982 Z M22.99995,12.9982 C23.55245,12.9982 23.99995,12.5507 23.99995,11.9982 L23.99995,7.9982 C23.99995,6.8937 23.10445,5.9982 21.99995,5.9982 L7.99995,5.9982 C6.89545,5.9982 5.99995,6.8937 5.99995,7.9982 L5.99995,18.9982 C5.99995,20.1032 6.89545,20.9982 7.99995,20.9982 L8.99995,20.9982 C9.55245,20.9982 9.99995,20.5507 9.99995,19.9982 L9.99995,16.9982 C9.99995,14.7892 11.79095,12.9982 13.99995,12.9982 L22.99995,12.9982 Z",refresh:"M29.002971,18.0012843 C29.002971,24.0738602 24.079045,28.9966377 18.0047858,28.9966377 C15.8321566,28.9966377 13.8125717,28.3609727 12.1095785,27.2726903 L10.8897252,29.1036655 C10.4946108,29.6968194 9.58484729,29.6102969 9.30326574,28.9511259 L7.07712102,23.7382731 C6.82554816,23.1491202 7.2586736,22.4994516 7.90286017,22.4994516 L13.6010104,22.500952 C14.3207189,22.500952 14.7573453,23.298659 14.3617307,23.8923131 L13.2188998,25.6072581 C14.6048011,26.4834855 16.2422754,26.9976189 18.0047858,26.9976189 C22.974225,26.9976189 27.0033919,22.9700738 27.0033919,18.0012843 C27.0033919,17.5396645 26.9663812,17.0865469 26.8978614,16.6444322 C26.8038341,16.042276 27.2734701,15.5021358 27.8826466,15.5021358 C28.3707879,15.5021358 28.7939105,15.853727 28.8699325,16.335352 C28.9554573,16.8779928 29.002971,17.4341371 29.002971,18.0012843 M7.00610045,18.0012843 C7.00610045,11.9282083 11.9305266,7.00543083 18.0047858,7.00543083 C20.1769149,7.00543083 22.1964998,7.64159592 23.899493,8.72987834 L25.1193463,6.89890318 C25.5144607,6.30574926 26.4242242,6.39227171 26.7058057,7.05144277 L28.9319505,12.2642955 C29.1835233,12.8534484 28.7503979,13.503117 28.1067115,13.503117 L22.4080611,13.5011165 C21.6883526,13.5016166 21.2517262,12.7039096 21.6473407,12.1097554 L22.7901717,10.3953105 C21.4042703,9.51858301 19.7667961,9.00494972 18.0047858,9.00494972 C13.0348465,9.00494972 9.0061797,13.0324949 9.0061797,18.0012843 C9.0061797,18.4629041 9.04269027,18.9160217 9.11171026,19.3581364 C9.20523735,19.9597926 8.73560134,20.5004329 8.12642491,20.5004329 C7.63828354,20.5004329 7.215161,20.1488416 7.13913898,19.6672166 C7.05361421,19.1240757 7.00610045,18.5684315 7.00610045,18.0012843","resize-up":"M12.59815,24.8169 L14.71915,26.9374 C15.28365,27.5019 14.99015,28.4679 14.20715,28.6249 L7.19665,29.9799 C6.49715,30.1199 5.88015,29.5039 6.02065,28.8044 L7.37615,21.7964 C7.53315,21.0134 8.50015,20.7204 9.06465,21.2849 L11.18465,23.4044 L15.29865,19.2879 C15.68915,18.8979 16.32165,18.8979 16.71215,19.2879 C17.10215,19.6784 17.10215,20.3104 16.71215,20.7009 L12.59815,24.8169 Z M29.9799519,7.1959 L28.6250542,14.2034 C28.4678921,14.9869 27.5018955,15.2799 26.9373131,14.7154 L24.8176264,12.5959 L20.7048838,16.7119 C20.3149815,17.1019 19.6823289,17.1019 19.2924267,16.7119 C18.9025244,16.3219 18.9025244,15.6894 19.2924267,15.2994 L23.4051694,11.1829 L21.2849822,9.0624 C20.7203998,8.4979 21.0137023,7.5324 21.7965099,7.3749 L28.8037385,6.0199 C29.5039609,5.8794 30.1200965,6.4959 29.9799519,7.1959 Z","resize-down":"M15.6250542,27.200149 C15.4678921,27.9828278 14.5018955,28.2757076 13.9373131,27.7114392 L11.818127,25.5928087 L7.70538427,29.70762 C7.31498153,30.09746 6.68282941,30.09746 6.29242667,29.70762 C5.90252444,29.3172802 5.90252444,28.6855394 6.29242667,28.2951996 L10.4051694,24.1808881 L8.28498218,22.061258 C7.72039976,21.4969895 8.01370233,20.5313858 8.79650987,20.3744502 L15.8037385,19.0200061 C16.5039609,18.8800635 17.1200965,19.4958108 16.9799519,20.1950239 L15.6250542,27.200149 Z M29.7076063,7.70480407 L25.5951021,11.818856 L27.7158308,13.9389441 C28.2796257,14.5029996 27.9867322,15.4684505 27.2035171,15.6256053 L20.1960657,16.9799392 C19.4963202,17.1200772 18.8800443,16.5044709 19.0199934,15.8047818 L20.3750006,8.79988262 C20.5319435,8.01711166 21.498592,7.72432329 22.0628867,8.28837884 L24.182116,10.4069654 L28.2951201,6.292413 C28.6849783,5.902529 29.3177481,5.902529 29.7076063,6.292413 C30.0974646,6.68279749 30.0974646,7.31441958 29.7076063,7.70480407 Z",phone:"M12.8546683,23.0915802 C10.2003459,20.4371382 8.18827548,17.4933995 7.18895039,14.801598 C6.11677282,11.9134196 6.30082118,9.54827444 7.70754499,8.14106577 C8.38574404,7.46332572 9.22115105,6.9556194 9.80301228,6.64860076 C10.1768605,6.45174482 10.6202062,6.44887101 10.9902201,6.6495587 C12.2608248,7.33735708 14.2542027,9.8624776 14.6055242,11.228016 C14.6980277,11.5867632 14.6266131,11.9694589 14.4094936,12.2774354 L12.8029047,14.5630718 C12.7056083,14.7019726 12.682123,14.8820647 12.7415553,15.0406032 C13.4096892,16.8233229 14.2192144,18.3129141 15.9254961,20.01852 C17.6303399,21.7246049 19.1209399,22.5340612 20.904867,23.2027008 C21.0635129,23.2625718 21.2432476,23.2391024 21.3822424,23.1413929 L23.6205389,21.5679822 C23.9339963,21.3476569 24.313596,21.2868279 24.6572488,21.3696894 C26.1948195,21.7356211 28.7992956,23.6898115 29.3811568,24.9135753 C29.5474713,25.2637011 29.5388441,25.6674713 29.3576715,26.0209499 C29.0993327,26.5267404 28.5534185,27.4875506 27.8018877,28.2395308 C24.2474537,31.7915592 16.8807262,27.1187451 12.8546683,23.0915802","phone-end":"M17.9966165,12.0000034 C21.8267777,12.0010033 25.4032059,12.6879152 28.0666783,13.9342554 C30.924921,15.271084 32.4990327,17.1473434 32.4999993,19.2175779 C32.5004826,20.21545 32.2641483,21.2033233 32.0659949,21.8567395 C31.9388867,22.2766857 31.6203913,22.6046436 31.209102,22.7296276 C29.7959296,23.1575727 26.5355804,22.765623 25.2963964,22.0187188 C24.9711347,21.8227439 24.7463997,21.4887867 24.6806707,21.1023363 L24.1896368,18.2387035 C24.1596722,18.0647258 24.047063,17.9152449 23.8890235,17.8422543 C22.1211081,17.0213595 20.4638686,16.5069255 18.0024161,16.5059256 C15.5409636,16.5049258 13.8793744,17.0188599 12.1100091,17.8387547 C11.952453,17.9117454 11.8398438,18.0612262 11.8098791,18.2352039 L11.3309277,21.0393443 C11.2637489,21.431794 11.0341809,21.7557525 10.7268014,21.9477279 C9.35374293,22.8091174 6.06439564,23.2865562 4.76141587,22.8136168 C4.38879072,22.6781342 4.10364308,22.3746731 3.97895139,21.9812236 C3.80012998,21.4192956 3.5004833,20.3109377 3.5,19.2045796 C3.5,13.9757501 12.1863707,11.9970038 17.9966165,12.0000034","friend-woman-add":"M11,18.9984598 L8.5,18.9984598 L8.5,21.4988098 C8.5,22.0508871 8.052,22.4989499 7.5,22.4989499 C6.948,22.4989499 6.5,22.0508871 6.5,21.4988098 L6.5,18.9984598 L4,18.9984598 C3.448,18.9984598 3,18.5503971 3,17.9983198 C3,17.4462425 3.448,16.9981797 4,16.9981797 L6.5,16.9981797 L6.5,14.4978297 C6.5,13.9457524 6.948,13.4976897 7.5,13.4976897 C8.052,13.4976897 8.5,13.9457524 8.5,14.4978297 L8.5,16.9981797 L11,16.9981797 C11.552,16.9981797 12,17.4462425 12,17.9983198 C12,18.5503971 11.552,18.9984598 11,18.9984598 Z M30.5,28.0607585 C30.5,28.8557498 29.82455,29.5 29.075,29.5 L12.925,29.5 C12.17545,29.5 11.5,28.8557498 11.5,28.0607585 C11.5,24.0872422 15.750775,20.8655112 21,20.8655112 C26.249225,20.8655112 30.5,24.0872422 30.5,28.0607585 Z M26.0559,18.4584542 C25.332,18.4584542 24.581025,18.3494789 24.00295,18.1137659 C23.224425,18.9135579 22.182275,19.4185886 20.966275,19.4185886 C19.830075,19.4185886 18.74755,18.9759666 17.98185,18.2664273 C17.8365,18.2861101 17.68735,18.300032 17.52965,18.300032 C15.673825,18.300032 14.35,15.7729582 14.35,12.6976477 C14.35,9.48695817 17.2646,5.97670674 18.9309,5.97670674 C19.6263,5.97670674 20.167325,6.30267237 20.167325,6.30267237 C20.62855,5.91381793 21.12065,5.5 22.277275,5.5 C24.483175,5.5 28.091275,9.10194427 28.091275,12.6976477 C28.091275,14.2981917 27.582075,14.7979417 27.582075,15.5780509 C27.582075,16.8953553 28.6076,16.8267057 28.6076,17.3523793 C28.6076,17.7887604 27.625775,18.4584542 26.0559,18.4584542 Z","magnifying-glass":"M15.499,9.000053 C11.909,9.000053 8.9995,11.9106492 8.9995,15.5009175 C8.9995,19.0911858 11.909,22.0022817 15.499,22.0022817 C19.0885,22.0022817 21.998,19.0911858 21.998,15.5009175 C21.998,11.9106492 19.0885,9.000053 15.499,9.000053 Z M25.4875,28.30874 L21.6335,23.8523894 C21.313,23.482068 20.7755,23.4056049 20.355,23.6574834 C18.934,24.5085729 17.276,25.0023347 15.499,25.0023347 C10.253,25.0023347 6,20.7483865 6,15.5009175 C6,10.2539482 10.253,6 15.499,6 C20.7445,6 24.9975,10.2539482 24.9975,15.5009175 C24.9975,17.2770608 24.5045,18.9357608 23.655,20.3565755 C23.4065,20.7708757 23.491,21.3016197 23.8555,21.6184668 L28.3065,25.4841024 L25.4875,28.30874 Z M28.3065,25.4841024 C29.183,26.2452352 29.231,27.5915859 28.4105,28.4131896 C27.591,29.2352931 26.247,29.1873162 25.4875,28.30874 L28.3065,25.4841024 Z",more:"M7.5,9 L28.5,9 C29.3284271,9 30,9.67157288 30,10.5 C30,11.3284271 29.3284271,12 28.5,12 L7.5,12 C6.67157288,12 6,11.3284271 6,10.5 C6,9.67157288 6.67157288,9 7.5,9 Z M7.5,16.5 L28.5,16.5 C29.3284271,16.5 30,17.1715729 30,18 C30,18.8284271 29.3284271,19.5 28.5,19.5 L7.5,19.5 C6.67157288,19.5 6,18.8284271 6,18 C6,17.1715729 6.67157288,16.5 7.5,16.5 Z M7.5,24 L28.5,24 C29.3284271,24 30,24.6715729 30,25.5 C30,26.3284271 29.3284271,27 28.5,27 L7.5,27 C6.67157288,27 6,26.3284271 6,25.5 C6,24.6715729 6.67157288,24 7.5,24 Z",lock:"M22,10 C22,7.3615 20.6385,6 18,6 C15.3615,6 14,7.3615 14,10 L14,14 L22,14 L22,10 Z M25,30 L11,30 C9.3435,30 8,28.6565 8,27 L8,17 C8,15.3435 9.3435,14 11,14 L12,14 L12,10 C12,6.0415 14.0415,4 18,4 C21.9585,4 24,6.0415 24,10 L24,14 L25,14 C26.6565,14 28,15.3435 28,17 L28,27 C28,28.6565 26.6565,30 25,30 Z",link:"M23.32815,21.2285 C22.14065,22.412 20.55715,23 18.99865,23 C18.05665,23 15.50165,22.7085 15.50165,21.052 C15.50165,20.1945 16.20465,19.535 17.01415,19.535 C17.69965,19.535 17.87065,20 18.99865,20 C19.78615,20 20.59865,19.7045 21.19815,19.1065 C21.79815,18.509 25.47665,14.843 26.07915,14.243 C26.68115,13.643 26.99865,12.7855 26.99865,12 C26.99865,10.253 25.64815,9 23.99865,9 C23.21015,9 22.31765,9.2955 21.72065,9.9005 C21.26265,10.364 20.85015,10.8025 20.58265,11.0695 C20.31515,11.336 19.95465,11.496 19.54365,11.496 C18.62315,11.496 18.00215,10.8075 18.00215,10.008 C18.00215,9.6355 18.14115,9.258 18.44015,8.96 C18.73815,8.6625 19.08965,8.28 19.59065,7.7785 C20.77665,6.589 22.43915,6 23.99865,6 C27.25515,6 29.99865,8.5395 29.99865,12 C29.99865,13.554 29.39915,15.1795 28.20915,16.365 C27.01915,17.5515 24.51565,20.0455 23.32815,21.2285 Z M12.6719,14.7715 C13.8594,13.588 15.4429,13 17.0014,13 C17.9434,13 20.4984,13.2915 20.4984,14.948 C20.4984,15.8055 19.7954,16.465 18.9859,16.465 C18.3004,16.465 18.1294,16 17.0014,16 C16.2144,16 15.4019,16.2955 14.8019,16.8935 C14.2019,17.491 10.5234,21.157 9.9209,21.757 C9.3189,22.357 9.0014,23.2145 9.0014,24 C9.0014,25.747 10.3519,27 12.0014,27 C12.7899,27 13.6824,26.7045 14.2799,26.0995 C14.7374,25.636 15.1499,25.1975 15.4174,24.9305 C15.6849,24.664 16.0454,24.5045 16.4564,24.5045 C17.3769,24.5045 17.9979,25.1925 17.9979,25.992 C17.9979,26.3645 17.8589,26.742 17.5599,27.04 C17.2619,27.3375 16.9104,27.72 16.4094,28.2215 C15.2234,29.411 13.5609,30 12.0014,30 C8.7449,30 6.0014,27.4605 6.0014,24 C6.0014,22.446 6.6009,20.8205 7.7909,19.635 C8.9809,18.4485 11.4844,15.9545 12.6719,14.7715 Z",leave:"M23.9926813 21.9947277V18.995818H13.996744c-.5520823 0-.999244-.4471883-.999244-.9993034 0-.5516155.4471617-.9993035.999244-.9993035h9.9959373v-2.999909c0-.7984434.890826-1.2746115 1.5558229-.8314204l6.0034579 3.9987128c.5940505.3957241.5940505 1.2676164 0 1.6633406l-6.0034579 3.9987128c-.6649969.4426914-1.5558229-.0334767-1.5558229-.8319202M6.0025 25V11c0-2.209 1.79089545-4 4.0005003-4h6.9989994C19.2111043 7 21.0025 8.791 21.0025 11v3c0 .5525-.4477239 1-1.0005003 1-.5522761 0-1-.4475-1-1v-3c0-1.1045-.8954477-2-2-2h-6.9989994c-1.10455233 0-2.00000005.8955-2.00000005 2v14c0 1.1045.89544772 2 2.00000005 2h6.9989994c1.1045523 0 2-.8955 2-2v-3c0-.552.4477239-1 1-1 .5527764 0 1.0005003.448 1.0005003 1v3c0 2.2095-1.7913957 4-4.0005003 4h-6.9989994C7.79339545 29 6.0025 27.2095 6.0025 25",settings:"M18 11.00025c-3.8655 0-6.9995 3.134-6.9995 7 0 3.8655 3.134 6.9995 6.9995 6.9995 3.8655 0 6.9995-3.134 6.9995-6.9995 0-3.866-3.134-7-6.9995-7zm13 6.427v1.146c0 .568-.321 1.087-.829 1.3415l-1.533.766c-.3405.1705-.6165.4565-.7465.814-.124.341-.2675.673-.425.997-.1665.342-.1805.7385-.0605 1.1l.554 1.6605c.1795.539.039 1.1335-.3625 1.535l-.8105.8105c-.4015.4015-.996.542-1.5345.362l-1.6575-.5525c-.361-.12-.758-.106-1.1.0605-.3245.158-.658.302-1.0005.4265-.359.1305-.6455.407-.816.7485l-.764 1.528c-.254.508-.7735.8295-1.3415.8295h-1.146c-.568 0-1.0875-.3215-1.3415-.8295l-.764-1.528c-.1705-.3415-.4575-.618-.816-.7485-.343-.1245-.6755-.2685-1.0005-.4265-.342-.1665-.739-.1805-1.1-.0605l-1.6575.5525c-.539.18-1.133.0395-1.5345-.362l-.8105-.8105c-.402-.4015-.542-.996-.3625-1.535l.554-1.6605c.12-.3615.106-.758-.0605-1.1-.1575-.324-.301-.656-.425-.997-.13-.3575-.406-.6435-.7465-.814l-1.533-.766c-.508-.2545-.829-.7735-.829-1.3415v-1.146c0-.5685.321-1.088.829-1.342l1.533-.766c.3405-.1705.6165-.4565.7465-.814.124-.341.2675-.673.425-.997.1665-.342.1805-.7385.0605-1.1l-.554-1.6605c-.1795-.539-.0395-1.133.3625-1.535l.8105-.81c.4015-.402.9955-.5425 1.5345-.3625l1.6575.5525c.361.12.758.106 1.1-.0605.325-.158.6575-.302 1.0005-.4265.3585-.1305.6455-.407.816-.7485l.764-1.528c.254-.508.7735-.829 1.3415-.829h1.146c.568 0 1.0875.321 1.3415.829l.764 1.528c.1705.3415.457.618.816.7485.3425.1245.676.2685 1.0005.4265.342.1665.739.1805 1.1.0605l1.6575-.5525c.5385-.18 1.133-.0395 1.5345.3625l.8105.81c.4015.402.542.996.3625 1.535l-.554 1.6605c-.12.3615-.106.758.0605 1.1.1575.324.301.656.425.997.13.3575.406.6435.7465.814l1.533.766c.508.254.829.7735.829 1.342z",download:"M18.83275,24.56885 C18.43675,25.16335 17.56425,25.16335 17.16825,24.56885 L13.16675,18.56035 C12.72375,17.89535 13.20025,17.00385 13.99925,17.00385 L16.99975,17.00385 L16.99975,4.99985 C16.99975,4.44785 17.44775,3.99985 17.99975,3.99985 C18.55225,3.99985 18.99975,4.44785 18.99975,4.99985 L18.99975,17.00385 L22.00175,17.00385 C22.80075,17.00385 23.27725,17.89535 22.83425,18.56035 L18.83275,24.56885 Z M27.99975,28.99985 L7.99975,28.99985 C7.44775,28.99985 6.99975,28.55235 6.99975,27.99985 C6.99975,27.44785 7.44775,26.99985 7.99975,26.99985 L27.99975,26.99985 C28.55225,26.99985 28.99975,27.44785 28.99975,27.99985 C28.99975,28.55235 28.55225,28.99985 27.99975,28.99985 Z",redo:"M16,28.0039 L22,28.0039 C22.552,28.0039 23,27.5559 23,27.0039 C23,26.4519 22.552,26.0039 22,26.0039 L15.9985,26.0044 C12.1335,26.0034 9,22.8694 9,19.0039 C9,15.1379 12.134,12.0039 16,12.0039 L21,12.0039 L21.004,15.0049 C21.004,15.8044 21.895,16.2804 22.5605,15.8374 L28.569,11.8359 C29.1635,11.4399 29.1635,10.5674 28.569,10.1714 L22.5605,6.1699 C21.895,5.7264 21.004,6.2029 21.004,7.0019 L21,10.0039 L16,10.0039 C11.0295,10.0039 7,14.0339 7,19.0039 C7,23.9744 11.0295,28.0039 16,28.0039",group:"M28.5,19.9955 C31.539,19.9955 34,22.2345 34,24.996 C34,25.548 33.609,25.996 33.175,25.996 L28.267,25.996 C27.8055,25.996 27.412,25.6145 27.299,25.0775 C27.012,23.715 26.426,22.4615 25.612,21.384 C25.4415,21.1575 25.5155,20.794 25.7485,20.671 C26.5575,20.243 27.496,19.9955 28.5,19.9955 M18,19.993 C22.1425,19.993 25.497,22.6075 25.497,25.832 C25.497,26.477 24.964,27 24.3725,27 L11.6275,27 C11.036,27 10.503,26.477 10.503,25.832 C10.503,22.6075 13.8575,19.993 18,19.993 M7.5,19.9955 C8.504,19.9955 9.4425,20.243 10.2515,20.671 C10.4845,20.794 10.559,21.158 10.388,21.384 C9.5745,22.4615 8.9885,23.7155 8.7015,25.0775 C8.5885,25.6145 8.195,25.996 7.7335,25.996 L2.825,25.996 C2.391,25.996 2,25.548 2,24.996 C2,22.2345 4.461,19.9955 7.5,19.9955 M7.5,19.0005 C5.7485,19.0005 4.588,17.559 4.36,15.6535 C4.132,15.516 3.998,15.1945 3.998,14.748 C3.998,14.325 4.1195,14.017 4.326,13.868 C4.377,11.9715 4.9255,10.9945 5.51,10.9945 C6.0875,10.9945 6.306,11.1965 6.306,11.1965 C6.306,10.813 6.5495,10.5 7.5,10.5 C9.8255,10.5 10.6245,11.427 10.6785,13.872 C10.8825,14.022 11.0025,14.328 11.0025,14.748 C11.0025,15.1945 10.868,15.516 10.64,15.6535 C10.412,17.559 9.2515,19.0005 7.5,19.0005 M21.9615,17.9665 C21.403,17.9665 20.8985,17.9065 20.444,17.8145 C19.843,18.469 18.938,18.996 18,18.996 C17.1235,18.996 16.388,18.52 15.7975,17.939 C15.685,17.9555 15.57,17.9665 15.4485,17.9665 C14.0165,17.9665 13,15.774 13,13.2565 C13,10.8445 15.2145,8.488 16.5,8.488 C17.037,8.488 17.484,8.7235 17.484,8.7235 C17.84,8.4055 18.2195,8 19.1125,8 C20.8145,8 23.5,10.2915 23.5,13.2345 C23.5,14.5445 22.995,15.2485 22.995,15.8865 C22.995,16.9645 23.997,16.8775 23.997,17.3075 C23.997,17.664 23.1735,17.9665 21.9615,17.9665 M28.5,19.0005 C26.7485,19.0005 25.588,17.559 25.36,15.6535 C25.132,15.516 24.998,15.1945 24.998,14.748 C24.998,14.325 25.1195,14.017 25.326,13.868 C25.377,11.9715 25.9255,10.9945 26.5105,10.9945 C27.0875,10.9945 27.306,11.1965 27.306,11.1965 C27.306,10.813 27.5495,10.5 28.5,10.5 C30.8255,10.5 31.6245,11.427 31.6785,13.872 C31.8825,14.022 32.0025,14.328 32.0025,14.748 C32.0025,15.1945 31.868,15.516 31.64,15.6535 C31.412,17.559 30.2515,19.0005 28.5,19.0005","caution-triangle":"M20.0051526,16.0130814 C20.0051526,16.3394431 19.9651454,16.6653049 19.8856311,16.9816708 L19.1705023,19.8389596 C19.0734848,20.2287943 18.7234217,20.5006791 18.3218494,20.5006791 L17.6877352,20.5006791 C17.2861628,20.5006791 16.9360998,20.2287943 16.8390823,19.8389596 L16.1239535,16.9816708 C16.0444392,16.6653049 16.004432,16.3394431 16.004432,16.0130814 L16.004432,12.258673 C16.004432,11.8443486 16.3404925,11.5094905 16.7545671,11.5094905 L19.2550175,11.5094905 C19.6690921,11.5094905 20.0051526,11.8443486 20.0051526,12.258673 L20.0051526,16.0130814 Z M18.0047923,25.9968492 C16.9000933,25.9968492 16.004432,25.1017286 16.004432,23.9986962 C16.004432,22.8946642 16.9000933,22.0000435 18.0047923,22.0000435 C19.1094913,22.0000435 20.0051526,22.8946642 20.0051526,23.9986962 C20.0051526,25.1017286 19.1094913,25.9968492 18.0047923,25.9968492 Z M30.6590717,24.2660829 L20.1356761,6.22722976 C19.1805041,4.59092341 16.8225793,4.59092341 15.8674073,6.22722976 L5.34401171,24.2660829 C4.37883786,25.919382 5.56755198,28 7.47789609,28 L28.5246872,28 C30.4350313,28 31.6237455,25.919382 30.6590717,24.2660829 Z",grids:"M16,17 L8,17 C7.448,17 7,16.552 7,16 L7,11 C7,8.791 8.791,7 11,7 L16,7 C16.552,7 17,7.448 17,8 L17,16 C17,16.552 16.552,17 16,17 M16,29 L11,29 C8.791,29 7,27.209 7,25 L7,20 C7,19.448 7.448,19 8,19 L16,19 C16.552,19 17,19.448 17,20 L17,28 C17,28.552 16.552,29 16,29 M28,17 L20,17 C19.448,17 19,16.552 19,16 L19,8 C19,7.448 19.448,7 20,7 L25,7 C27.209,7 29,8.791 29,11 L29,16 C29,16.552 28.552,17 28,17 M25,29 L20,29 C19.448,29 19,28.552 19,28 L19,20 C19,19.448 19.448,19 20,19 L28,19 C28.552,19 29,19.448 29,20 L29,25 C29,27.209 27.209,29 25,29","app-facebook":"M25.00295,29.00025 L22.48645,29.00025 C22.20995,29.00025 21.98645,28.77675 21.98645,28.50075 L21.98645,20.48625 L24.31995,20.48625 C24.59695,20.48625 24.83095,20.27925 24.86545,20.00375 L25.17195,17.51025 C25.20495,17.24175 24.99545,17.00525 24.72545,17.00525 L21.98645,17.00525 L21.98645,15.11825 C21.98645,14.15675 22.24395,13.50175 23.62245,13.50175 L24.99095,13.50225 C25.26645,13.50225 25.49045,13.27825 25.49045,13.00225 L25.49045,11.08025 C25.49045,10.81875 25.29195,10.60125 25.03095,10.58225 C24.51245,10.54325 23.68095,10.50175 22.81895,10.50175 C20.28395,10.50175 18.50245,11.86925 18.50245,14.71125 L18.50245,17.00525 L16.01345,17.00525 C15.73745,17.00525 15.51345,17.22925 15.51345,17.50475 L15.51345,19.98675 C15.51345,20.26275 15.73745,20.48625 16.01345,20.48625 L18.50145,20.48625 L18.50145,28.50075 C18.50145,28.77675 18.27795,29.00025 18.00195,29.00025 L10.99695,29.00025 C8.78945,29.00025 6.99995,27.21075 6.99995,25.00325 L6.99995,10.99625 C6.99995,8.78925 8.78945,6.99975 10.99695,6.99975 L25.00295,6.99975 C27.21095,6.99975 29.00045,8.78925 29.00045,10.99625 L29.00045,25.00325 C29.00045,27.21075 27.21095,29.00025 25.00295,29.00025 Z",chat:"M29.99925,17.4582055 C29.99825,24.1159345 24.97375,28.9897983 17.99975,28.9897983 C16.83775,28.9897983 15.73075,28.8862481 14.69225,28.6326251 C13.82875,28.4220229 12.92725,28.4435334 12.08525,28.7306726 L8.08375,29.9587683 C7.43925,30.178875 6.81375,29.5525713 7.03225,28.8832466 L7.82675,26.2534712 C8.12425,25.3415289 8.00875,24.3410437 7.50925,23.5261484 C6.45225,21.8008116 6.00125,19.7398121 6.00075,17.4582055 L6.00075,17.457205 L6.00075,17.4562045 C6.00175,10.7989757 11.02625,6.00365 17.99975,6.00365 C24.97375,6.00365 29.99825,10.7989757 29.99925,17.4562045 L29.99925,17.457205 L29.99925,17.4582055 Z"};function h(a){return b("React").createElement("svg",{className:a.className,width:a.size+"px",height:a.size+"px",viewBox:"0 0 36 36"},b("React").createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},b("React").createElement("polygon",{points:"0 36 36 36 36 0 0 0"}),b("React").createElement("path",{d:g[a.glyph],fill:a.color})))}h.GetGlyph=function(a){var b=Object.keys(g);b=b.find(function(b){return b===a});if(!b)throw new Error("Glyph not found!");return b};h.defaultProps={size:16,color:"currentColor"};h.examples=[{title:"Icons",render:function(){return b("React").createElement("div",null,Object.keys(g).map(function(a){return b("React").createElement(h,{key:a,glyph:a,color:"white",size:36})}))}}];e.exports=h}),null);
__d("VFWebButton.react",["AbstractButton.react","React","VFWebIcon.react","stylex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("stylex").inject(".d-17516{display:flex}",1);b("stylex").inject(".ai-7d911{align-items:center}",1);b("stylex").inject(".jc-3ffb8{justify-content:center}",1);b("stylex").inject(".bs-7e05b{box-sizing:border-box}",1);b("stylex").inject(".b-93424{border:none}",.1);b("stylex").inject(".m-9f1a3{margin:0px}",.1);b("stylex").inject(".p-a8443{padding:0px}",.1);b("stylex").inject(".br-2a1ee{border-radius:50%}",1);b("stylex").inject(".t-97d07{transition:0.2s ease background-color}",.1);b("stylex").inject(".c-bdda1{color:var(--fds-white)}",1);b("stylex").inject(".fs-80e17{font-size:0.8125rem}",1);b("stylex").inject(".fw-53508{font-weight:bold}",1);b("stylex").inject(".tt-ba66b{text-transform:uppercase}",1);b("stylex").inject(".c-f0d86{cursor:default}",1);b("stylex").inject(".pl-6247d{padding-left:12px}",1);b("stylex").inject(".pr-0b6e8{padding-right:12px}",1);b("stylex").inject(".bs-6b2a1{box-shadow:var(--fds-black-alpha-05) 0px 2px 12px}",1,".bs-6b2a1{box-shadow:var(--fds-black-alpha-05) -0px 2px 12px}");b("stylex").inject(".mr-87742{margin-right:4px}",1);b("stylex").inject(".mw-e2bda{min-width:18px}",1);b("stylex").inject(".h-4459f{height:18px}",1);b("stylex").inject(".mw-82fdc{min-width:20px}",1);b("stylex").inject(".h-26ce9{height:20px}",1);b("stylex").inject(".mw-a36b1{min-width:28px}",1);b("stylex").inject(".h-43ecc{height:28px}",1);b("stylex").inject(".br-c432d{border-radius:14px}",1);b("stylex").inject(".w-a0be7{width:32px}",1);b("stylex").inject(".h-935f4{height:32px}",1);b("stylex").inject(".w-3c80e{width:40px}",1);b("stylex").inject(".h-479cc{height:40px}",1);b("stylex").inject(".w-f8cd8{width:60px}",1);b("stylex").inject(".h-5620c{height:60px}",1);b("stylex").inject(".c-947be{color:var(--fds-white-alpha-50)}",1);b("stylex").inject(".bc-9bf5f{background-color:transparent}",1);b("stylex").inject(".c-8806f:hover{color:var(--fds-white)}",8);b("stylex").inject(".c-2d40f:active{color:var(--fds-white)}",10);b("stylex").inject(".c-bdda1{color:var(--fds-white)}",1);b("stylex").inject(".bc-119da{background-color:var(--fds-white-alpha-20)}",1);b("stylex").inject(".bc-cc95e:hover{background-color:var(--fds-white-alpha-40)}",8);b("stylex").inject(".bc-32f25:active{background-color:var(--fds-white-alpha-20)}",10);b("stylex").inject(".c-e9783{color:var(--fds-black)}",1);b("stylex").inject(".bc-1ef6e{background-color:var(--fds-white)}",1);b("stylex").inject(".bc-b9283:hover{background-color:var(--fds-white)}",8);b("stylex").inject(".c-bdda1{color:var(--fds-white)}",1);b("stylex").inject(".bc-8ba0e{background-color:#6cd64f}",1);b("stylex").inject(".bc-26677:hover{background-color:#7DD964}",8);b("stylex").inject(".c-bdda1{color:var(--fds-white)}",1);b("stylex").inject(".bc-92212{background-color:#ff294e}",1);b("stylex").inject(".bc-018b8:hover{background-color:#FF5370}",8);b("stylex").inject(".c-6ce82{color:var(--fds-white-alpha-30)}",1);b("stylex").inject(".bc-119da{background-color:var(--fds-white-alpha-20)}",1);b("stylex").inject(".bc-8047b:hover{background-color:var(--fds-white-alpha-20)}",8);b("stylex").inject(".bc-32f25:active{background-color:var(--fds-white-alpha-20)}",10);function g(c){var d=c.size,e=c.use,f=c.icon,g=c.iconColor,l=c.label,m=c.labelIsHidden,n=c.tabIndex,a=c.onClick,o=c.disabled;c=babelHelpers.objectWithoutPropertiesLoose(c,["size","use","icon","iconColor","label","labelIsHidden","tabIndex","onClick","disabled"]);f=f?b("React").createElement(b("VFWebIcon.react"),{className:m?"":"mr-87742",glyph:f,size:j(d),color:g}):null;return b("React").createElement(b("AbstractButton.react"),babelHelpers["extends"]({},c,{className:b("stylex").dedupe(Object.assign({"display-1":"d-17516","align-items-1":"ai-7d911","justify-content-1":"jc-3ffb8","box-sizing-1":"bs-7e05b","border-0.1":"b-93424","margin-0.1":"m-9f1a3","padding-0.1":"p-a8443","border-radius-1":"br-2a1ee","transition-0.1":"t-97d07","color-1":"c-bdda1","font-size-1":"fs-80e17","font-weight-1":"fw-53508","text-transform-1":"tt-ba66b","cursor-1":"c-f0d86"},d===18?{"min-width-1":"mw-e2bda","height-1":"h-4459f"}:null,d===20?{"min-width-1":"mw-82fdc","height-1":"h-26ce9"}:null,d===28?{"min-width-1":"mw-a36b1","height-1":"h-43ecc","border-radius-1":"br-c432d"}:null,d===32?{"width-1":"w-a0be7","height-1":"h-935f4"}:null,d===40?{"width-1":"w-3c80e","height-1":"h-479cc"}:null,d===60?{"width-1":"w-f8cd8","height-1":"h-5620c"}:null,e==="clear"?{"color-1":"c-947be","background-color-1":"bc-9bf5f","color-8":"c-8806f","color-10":"c-2d40f"}:null,e==="transparent"?{"color-1":"c-bdda1","background-color-1":"bc-119da","background-color-8":"bc-cc95e","background-color-10":"bc-32f25"}:null,e==="inverted"?{"color-1":"c-e9783","background-color-1":"bc-1ef6e","background-color-8":"bc-b9283"}:null,e==="green"?{"color-1":"c-bdda1","background-color-1":"bc-8ba0e","background-color-8":"bc-26677"}:null,e==="danger"?{"color-1":"c-bdda1","background-color-1":"bc-92212","background-color-8":"bc-018b8"}:null,e!=="clear"&&d>=40?{"box-shadow-1":"bs-6b2a1"}:null,m?null:{"padding-left-1":"pl-6247d","padding-right-1":"pr-0b6e8"},o?{"color-1":"c-6ce82","background-color-1":"bc-119da","background-color-8":"bc-8047b","background-color-10":"bc-32f25"}:null)),image:f,label:l,title:m?l:null,labelIsHidden:m,onClick:h(a),onContextMenu:i,size:"small",tabIndex:n,disabled:o}))}g.defaultProps={use:"transparent",labelIsHidden:!0,disabled:!1};function h(a){return function(b){b.stopPropagation(),a&&a(b)}}function i(a){a.preventDefault(),a.stopPropagation()}function j(a){switch(a){case 18:return 18;case 20:return 16;case 28:return 20;case 32:return 22;case 40:return 28;case 60:return 36;default:a;return 0}}var k=function(){return!1};g.examples=[{title:"Small round button",description:"Used in side panels, assumes the background is dark",render:function(){return b("React").createElement("div",{style:{display:"flex"}},b("React").createElement(g,{size:32,icon:"camcorder",onClick:k,label:"Test"}),b("React").createElement(g,{size:32,icon:"cross",onClick:k,label:"Test"}))}},{title:"Medium round button",description:"Used for in-call controls",render:function(){return b("React").createElement("div",{style:{display:"flex"}},b("React").createElement(g,{size:60,use:"clear",icon:"camcorder",onClick:k,label:"Clear"}),b("React").createElement(g,{size:60,use:"transparent",icon:"camcorder",onClick:k,label:"Transparent"}),b("React").createElement(g,{size:60,use:"inverted",icon:"camcorder",onClick:k,label:"Inverted"}),b("React").createElement(g,{size:60,use:"danger",icon:"phone-end",onClick:k,label:"Danger"}),b("React").createElement(g,{size:60,use:"transparent",icon:"phone-end",onClick:k,label:"Transparent, disabled",disabled:!0}))}},{title:"Pills",render:function(){return b("React").createElement("div",{style:{display:"flex",flexWrap:"wrap"}},b("React").createElement(g,{size:28,onClick:k,label:"Ring",labelIsHidden:!1}),b("React").createElement(g,{size:28,use:"clear",onClick:k,label:"Cancel",labelIsHidden:!1}),b("React").createElement(g,{size:28,icon:"refresh",onClick:k,label:"Refresh",labelIsHidden:!1}),b("React").createElement(g,{size:28,use:"danger",icon:"lock",onClick:k,label:"Lock",labelIsHidden:!1}),b("React").createElement(g,{size:28,use:"green",icon:"camcorder",onClick:k,label:"Join",labelIsHidden:!1}))}},{title:"Very small close button",description:"Used for closing small dialogs such as NUX popovers",render:function(){return b("React").createElement("div",{style:{display:"flex"}},b("React").createElement(g,{size:18,icon:"cross",onClick:k,label:"Close"}))}}];e.exports=g}),null);
__d("VFWebText.react",["React","stylex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("stylex").inject(".o-02b0f{overflow:hidden}",.1);b("stylex").inject(".to-b7159{text-overflow:ellipsis}",1);b("stylex").inject(".ws-1792a{white-space:nowrap}",1);b("stylex").inject(".mw-bf7ef{min-width:0px}",1);b("stylex").inject(".fs-2731c{font-size:1.875rem}",1);b("stylex").inject(".lh-223e6{line-height:1.2}",1);b("stylex").inject(".fw-7c501{font-weight:700}",1);b("stylex").inject(".fs-c6e2a{font-size:1.25rem}",1);b("stylex").inject(".lh-223e6{line-height:1.2}",1);b("stylex").inject(".fw-7c501{font-weight:700}",1);b("stylex").inject(".fs-80e17{font-size:0.8125rem}",1);b("stylex").inject(".lh-7bfdb{line-height:1.1538461538461537}",1);b("stylex").inject(".fw-4fbe2{font-weight:600}",1);b("stylex").inject(".tt-ba66b{text-transform:uppercase}",1);b("stylex").inject(".fs-f1695{font-size:0.9375rem}",1);b("stylex").inject(".lh-ac3aa{line-height:1.0666666666666667}",1);b("stylex").inject(".fw-7c501{font-weight:700}",1);b("stylex").inject(".fs-80e17{font-size:0.8125rem}",1);b("stylex").inject(".lh-7bfdb{line-height:1.1538461538461537}",1);b("stylex").inject(".fw-7c501{font-weight:700}",1);b("stylex").inject(".tt-ba66b{text-transform:uppercase}",1);b("stylex").inject(".fs-50504{font-size:0.6875rem}",1);b("stylex").inject(".lh-f02c8{line-height:1.8181818181818181}",1);b("stylex").inject(".fw-4fbe2{font-weight:600}",1);b("stylex").inject(".fs-f1695{font-size:0.9375rem}",1);b("stylex").inject(".lh-1db6f{line-height:1.3333333333333333}",1);b("stylex").inject(".fw-4fbe2{font-weight:600}",1);b("stylex").inject(".ws-f2522{white-space:normal}",1);b("stylex").inject(".fs-f1695{font-size:0.9375rem}",1);b("stylex").inject(".lh-1db6f{line-height:1.3333333333333333}",1);b("stylex").inject(".fw-85846{font-weight:400}",1);b("stylex").inject(".ws-f2522{white-space:normal}",1);b("stylex").inject(".fs-80e17{font-size:0.8125rem}",1);b("stylex").inject(".lh-6e791{line-height:1.3846153846153846}",1);b("stylex").inject(".fw-85846{font-weight:400}",1);b("stylex").inject(".ws-f2522{white-space:normal}",1);b("stylex").inject(".c-136f6{color:white}",1);b("stylex").inject(".c-947be{color:var(--fds-white-alpha-50)}",1);function g(a){var c=a.style,d=a.color;return b("React").createElement("div",{className:b("stylex").dedupe(Object.assign({"overflow-0.1":"o-02b0f","text-overflow-1":"to-b7159","white-space-1":"ws-1792a","min-width-1":"mw-bf7ef"},c==="headline"?{"font-size-1":"fs-2731c","line-height-1":"lh-223e6","font-weight-1":"fw-7c501"}:null,c==="title-large"?{"font-size-1":"fs-c6e2a","line-height-1":"lh-223e6","font-weight-1":"fw-7c501"}:null,c==="title-small"?{"font-size-1":"fs-80e17","line-height-1":"lh-7bfdb","font-weight-1":"fw-4fbe2","text-transform-1":"tt-ba66b"}:null,c==="button-large"?{"font-size-1":"fs-f1695","line-height-1":"lh-ac3aa","font-weight-1":"fw-7c501"}:null,c==="button-small"?{"font-size-1":"fs-80e17","line-height-1":"lh-7bfdb","font-weight-1":"fw-7c501","text-transform-1":"tt-ba66b"}:null,c==="button-very-small"?{"font-size-1":"fs-50504","line-height-1":"lh-f02c8","font-weight-1":"fw-4fbe2"}:null,c==="body-medium-semibold"?{"font-size-1":"fs-f1695","line-height-1":"lh-1db6f","font-weight-1":"fw-4fbe2","white-space-1":"ws-f2522"}:null,c==="body-medium"?{"font-size-1":"fs-f1695","line-height-1":"lh-1db6f","font-weight-1":"fw-85846","white-space-1":"ws-f2522"}:null,c==="body-small"?{"font-size-1":"fs-80e17","line-height-1":"lh-6e791","font-weight-1":"fw-85846","white-space-1":"ws-f2522"}:null,d==="white"?{"color-1":"c-136f6"}:null,d==="white-50"?{"color-1":"c-947be"}:null))},a.children)}g.defaultProps={color:"inherit"};g.examples=[{title:"Typography",render:function(){return b("React").createElement("div",{style:{display:"flex",flexDirection:"column"}},b("React").createElement(g,{style:"headline"},"Headline - Bold"),b("React").createElement(g,{style:"title-large"},"Title - Large Bold"),b("React").createElement(g,{style:"title-small"},"Title - Small Semibold"),b("React").createElement(g,{style:"button-large"},"Button - Large"),b("React").createElement(g,{style:"button-small"},"Button - Small"),b("React").createElement(g,{style:"button-very-small"},"Button - Very Small"),b("React").createElement(g,{style:"body-medium-semibold"},"Body - Medium Semibold"),b("React").createElement(g,{style:"body-medium"},"Body - Medium"),b("React").createElement(g,{style:"body-small"},"Body - Small"))}},{title:"Typography: Wrapping",render:function(){return b("React").createElement("div",{style:{display:"flex",flexDirection:"column"}},b("React").createElement(g,{style:"headline"},"Headers and most other text styles don't wrap"),b("React").createElement(g,{style:"body-medium"},"Body styles do wrap: Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."))}}];e.exports=g}),null);
__d("ContactCards",["React","URI","VFWebButton.react","VFWebRingButton.react","VFWebStrings","VFWebText.react","XMessengerDotComMainController","stylex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("stylex").inject(".d-17516{display:flex}",1);b("stylex").inject(".fd-7e677{flex-direction:row}",1);b("stylex").inject(".ai-7d911{align-items:center}",1);b("stylex").inject(".jc-8a89c{justify-content:flex-start}",1);b("stylex").inject(".ml-eca6a{margin-left:44px}",1);b("stylex").inject(".d-17516{display:flex}",1);b("stylex").inject(".fd-85d4c{flex-direction:column}",1);b("stylex").inject(".ai-7d911{align-items:center}",1);b("stylex").inject(".jc-3ffb8{justify-content:center}",1);b("stylex").inject(".ml-206c8{margin-left:8px}",1);b("stylex").inject(".mr-7533f{margin-right:8px}",1);b("stylex").inject(".mt-69d6d{margin-top:2px}",1);function g(a,c){var d={usersToRing:[a||""],surface:"vfweb_list_tray",threadId:null};return[{button:b("React").createElement(b("VFWebRingButton.react"),babelHelpers["extends"]({mode:"create",isAudioCall:!0},d)),label:b("VFWebStrings").start_audio_call},{button:b("React").createElement(b("VFWebRingButton.react"),babelHelpers["extends"]({mode:"create"},d)),label:b("VFWebStrings").start_video_call},{button:b("React").createElement(b("VFWebButton.react"),{size:32,icon:"chat",onClick:function(){if(a==null||a==="")return;var c=b("XMessengerDotComMainController").getURIBuilder().setString("thread_key",a).getURI();b("URI").goURIOnNewWindow(c)},label:b("VFWebStrings").open_chat}),label:b("VFWebStrings").open_chat},{button:b("React").createElement(b("VFWebButton.react"),{size:32,icon:"app-facebook",onClick:function(){c!=null&&c!==""&&b("URI").goURIOnNewWindow(c)},label:b("VFWebStrings").open_facebook_profile}),label:b("VFWebStrings").open_facebook_profile}]}function h(a){a={usersToRing:a,surface:"vfweb_list_tray",threadId:null};return[{button:b("React").createElement(b("VFWebRingButton.react"),babelHelpers["extends"]({mode:"create",isAudioCall:!0},a)),label:b("VFWebStrings").start_audio_call},{button:b("React").createElement(b("VFWebRingButton.react"),babelHelpers["extends"]({mode:"create"},a)),label:b("VFWebStrings").start_video_call}]}function i(a){return b("React").createElement("div",{className:"ml-eca6a jc-8a89c ai-7d911 fd-7e677 d-17516"},a.map(function(a){return b("React").createElement("div",{className:"mr-7533f ml-206c8 jc-3ffb8 ai-7d911 fd-85d4c d-17516",key:a.label},a.button,b("React").createElement("div",{className:"mt-69d6d"},b("React").createElement(b("VFWebText.react"),{style:"button-very-small",color:"white-50"},a.label)))}))}function a(a){var c=a.userId;a=a.userProfileUrl;a=new(b("URI"))(a).setDomain("www.facebook.com").toString();return i(g(c,a))}function c(a){a=a.usersToRing;return i(h(a))}e.exports={IndividualContactCard:a,GroupContactCard:c}}),null);
__d("VFRTCConstants",["keyMirror"],(function(a,b,c,d,e,f){__p&&__p();a=Object.freeze({OFFER:"offer",ANSWER:"answer",ICE_CANDIDATE:"ice_candidate",OK:"ok",PING:"ping",PING_ACK:"ping_ack",HANGUP:"hang_up",OTHER_DISMISS:"other_dismiss",MSG_ACK:"msg_ack",PRANSWER:"pranswer",ICERESTART_OFFER:"icerestart_offer",ICERESTART_ANSWER:"icerestart_answer",PCRESTART_OFFER:"pcrestart_offer",PCRESTART_ANSWER:"pcrestart_answer",SDP_UPDATE:"sdp_update",OFFER_ACK:"offer_ack",OFFER_NACK:"offer_nack",ANSWER_ACK:"answer_ack",SET_VIDEO:"set_video",VIDEO_REQUEST:"video_request",ACK:"ack",SWITCH_TO_MULTIWAY:"switch_to_multiway"});c=Object.freeze({CHILD_WINDOW_READY:"rtc_child_window_ready",CHILD_WINDOW_START_CALL:"rtc_child_window_start_call",CHILD_WINDOW_MESSAGE:"rtc_child_window_message"});d=Object.freeze({DIRECT_VIDEO:"direct_video",ESCALATED:"escalated",ESCALATION_DECLINED:"escalation_declined",VOIP:"voip"});f=b("keyMirror")({SCREEN:null,CAMERA:null});var g=Object.freeze({LL_NONE:0,LL_BASIC:1,LL_DEBUG:2,LL_WARNING:3,LL_INFO:4,LL_VERBOSE:5}),h=Object.freeze({AUDIO_ONLY:"audio_only",AUDIO_VIDEO:"audio_video",SCREEN_CONTENT:"screen"}),i=Object.freeze({CUSTOM_VIDEO_STREAM_SIZE:"CUSTOM_VIDEO_STREAM_SIZE",CUSTOM_VIDEO:"CUSTOM_VIDEO",FHD_VIDEO:"FHD_VIDEO",HD_VIDEO:"HD_VIDEO",LQ_VIDEO:"LQ_VIDEO",SD_VIDEO:"SD_VIDEO",HD_IDEAL_LQ_REQUIRED_VIDEO:"HD_IDEAL_LQ_REQUIRED_VIDEO",FHD_IDEAL_LQ_REQUIRED_VIDEO:"FHD_IDEAL_LQ_REQUIRED_VIDEO"}),j=Object.freeze({FHD_HEIGHT:1080,HD_HEIGHT:720,LQ_HEIGHT:180,SD_HEIGHT:480,FHD_WIDTH:1920,HD_WIDTH:1280,LQ_WIDTH:320,SD_WIDTH:848,VLQ_FRAME_RATE:5,LQ_FRAME_RATE:15,FRAME_RATE:30}),k=Object.freeze({UNKNOWN:-1,IGNORE_CALL:0,HANGUP_CALL:1,IN_ANOTHER_CALL:2,ACCEPT_AFTER_HANGUP:3,NO_ANSWER_TIMEOUT:4,INCOMING_TIMEOUT:5,OTHER_INSTANCE_HANDLED:6,SIGNALING_MESSAGE_FAILED:7,CONNECTION_DROPPED:8,CLIENT_INTERRUPTED:9,WEBRTC_ERROR:10,CLIENT_ERROR:11,NO_PERMISSION:12,OTHER_NOT_CAPABLE:13,NO_UI_ERROR:14,UNSUPPORTED_VERSION:15,CALLER_NOT_VISIBLE:16,CARRIER_BLOCKED:17,OTHER_CARRIER_BLOCKED:18,CLIENT_ENCRYPTION_ERROR:19,INACTIVE_TIMEOUT:20}),l=["IgnoreCall","HangupCall","InAnotherCall","CallEndAcceptAfterHangUp","NoAnswerTimeout","IncomingTimeout","OtherInstanceHandled","SignalingMessageFailed","ConnectionDropped","ClientInterrupted","WebRTCError","ClientError","NoPermission","OtherNotCapable","NoUIShown","VersionUnsupported","CallerNotVisible","CarrierBlocked","OtherCarrierBlocked","ClientEncryptionError","InactiveTimeout"],m=Object.freeze({CALL_INITIALIZATION_FAILED:"CollabCallInitializationFailed",CLOSED_AS_STALE:"CollabClosedAsStale",CLOSED_BY_MCU:"CollabClosedByMcu",INVALID_MEETING_ID:"CollabInvalidMeetingId",LOST_MCU_CONNECTION:"CollabLostMcuConnection",LOST_MCU_THRIFT_CONNECTION:"CollabLostMcuThriftConnection",LOST_SIP_ADAPTER_CONNECTION:"CollabLostSipAdapterConnection",MCU_INVALID_STREAM_CONFIGURATION:"CollabMcuInvalidStreamConfiguration",MCU_NO_AUDIO_STREAM:"CollabMcuNoAudioStream",REMOTE_PEER_HANGUP:"CollabRemotePeerHangup",REMOTE_PEER_REJECT:"CollabRemotePeerReject",SIP_CONNECTION_INITIALIZATION_FAILED:"CollabSipConnectionInitializationFailed",UNKNOWN:"CollabUnknown"}),n=Object.freeze({TOGGLE_SELF_VIEW:5,SUBMIT_STAR_RATING:6,SUBMIT_FEEDBACK:7,START_CALL:9,OPEN_SCREEN_IN_NEW:10}),o=Object.freeze({ONE_HOUR:"1hour",UNTIL_EIGHT_AM:"8am",ALWAYS:"always"});b=b("keyMirror")({AUDIO:null,VIDEO:null});var p=Object.freeze({CUSTOM:"custom",MULTIWAY:"multiway",P2P:"p2p"}),q=Object.freeze({DOMINANT_SPEAKER:"DOMINANT_SPEAKER",GRID:"GRID"}),r=Object.freeze({LANDSCAPE:"LANDSCAPE",PORTRAIT:"PORTRAIT"});o={CallBlockingConstants:o,CallEndReason:k,CallType:d,ChildWindowMessageType:c,CollabCallEndSubreason:m,GroupVideoViewLayout:q,IncomingCallDialogTypes:b,Orientation:r,PayloadType:a,RTCConstraints:j,SignalingProtocol:p,StreamType:h,UIEventType:n,UploadLogLevel:g,VideoQuality:i,MediaContentTypes:f,convertFromUploadLogLevel:function(a){switch(a){case g.LL_DEBUG:return"d";case g.LL_BASIC:return"b";case g.LL_WARNING:return"w";case g.LL_INFO:return"i";case g.LL_VERBOSE:return"v";case g.LL_NONE:default:return null}},convertToUploadLogLevel:function(a){switch(a){case"d":return g.LL_DEBUG;case"b":return g.LL_BASIC;case"w":return g.LL_WARNING;case"i":return g.LL_INFO;case"v":return g.LL_VERBOSE;default:return g.LL_NONE}},uploadLogLevelString:function(a){switch(a){case g.LL_BASIC:return"basic";case g.LL_DEBUG:return"debug";case g.LL_WARNING:return"warning";case g.LL_INFO:return"info";case g.LL_VERBOSE:return"verbose";default:return""}},endCallReasonFromString:function(a){return l.indexOf(a)},callEndReasonString:function(a){a=l[a];return!a?"Unknown":a},fullCallEndReasonString:function(a,b){return this.callEndReasonString(a)+"_"+(b?"remote":"local")}};e.exports=o}),null);
__d("VFRTCUserRecord",["immutable"],(function(a,b,c,d,e,f){"use strict";var g;c=b("immutable").Record({FBID:"UNDEFINED",isGuestUser:!1,isMessengerUser:!1,isPartiesUser:!1,lastConnectedAt:0,participantState:null,profilePictureUrl:null,profileUrl:null,roomLocation:null,screenStreams:b("immutable").Set(),streams:b("immutable").Set(),userName:"",userShortName:"",vanity:""});g=babelHelpers.inherits(a,c);g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("VFRTCUser",["FBRTCParticipantCallState","VFRTCConstants","VFRTCUserRecord","VFRTCUtils","immutable","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("VFRTCConstants").MediaContentTypes;g=babelHelpers.inherits(i,b("VFRTCUserRecord"));g&&g.prototype;i.prototype.clone=function(){return new i(this.toObject())};i.prototype.setParticipantState=function(a){return(!this.participantState||this.participantState.state!==b("FBRTCParticipantCallState").CONNECTED)&&a.state===b("FBRTCParticipantCallState").CONNECTED?this.set("participantState",a).set("lastConnectedAt",Date.now()):!this.participantState||this.participantState.state!==a.state?this.set("participantState",a):this};i.prototype.getParticipantState=function(){return this.participantState&&this.participantState.state};i.prototype.hasAudio=function(){return this.getAllStreamAudioTracks().some(function(a){return a.length>0})};i.prototype.hasVideo=function(){return this.streams.some(function(a){return a.getVideoTracks().length>0})};i.prototype.hasLiveVideoTracks=function(){return this.streams.some(function(a){return a.getVideoTracks().some(function(a){return a.readyState==="live"})})};i.prototype.isAudioMuted=function(){return!this.hasAudio()?!0:this.getAllStreamAudioTracks().every(function(a){return this.areAllTracksMuted(a)}.bind(this))};i.prototype.isVideoMuted=function(){return!this.hasVideo()?!0:this.streams.every(function(a){return this.areAllTracksMuted(a.getVideoTracks())}.bind(this))};i.prototype.areAllTracksMuted=function(a){return!a.some(function(a){return a.enabled})};i.prototype.hasFunctioningVideoTrack=function(){return!this.hasVideo()?!1:this.streams.some(function(a){return b("VFRTCUtils").streamHasFunctioningVideoTrack(a)})};i.prototype.toggleMuteAudio=function(a){this.getAllStreamAudioTracks().forEach(function(a){return this.$VFRTCUser1(a)}.bind(this));return this.clone()};i.prototype.toggleMuteVideo=function(a){this.streams.forEach(function(b){this.$VFRTCUser1(b.getVideoTracks(),a)}.bind(this));return this.clone()};i.prototype.stopVideo=function(){this.streams.forEach(function(a){a.getVideoTracks().forEach(function(b){this.$VFRTCUser1(a.getVideoTracks(),!0),b.readyState!=="ended"&&(b.onended&&b.onended(),b.stop())}.bind(this))}.bind(this));return this.clone()};i.prototype.getAllStreamAudioTracks=function(){return this.streams.concat(this.screenStreams).map(function(a){return a.getAudioTracks()})};i.prototype.hasStream=function(){return!this.streams.isEmpty()};i.prototype.addStream=function(a){return this.set("streams",this.streams.add(b("nullthrows")(a)))};i.prototype.removeStream=function(a){return this.set("streams",this.streams["delete"](a))};i.prototype.getStream=function(){return this.hasStream()?this.streams.first():null};i.prototype.getActiveStream=function(){return this.hasStream()?this.streams.find(function(a){return"active"in a&&a.active}):null};i.prototype.replaceStream=function(a,b){return!this.streams.contains(a)?this:this.set("streams",this.streams["delete"](a).add(b))};i.prototype.removeAllStreams=function(){return this.set("streams",b("immutable").Set())};i.prototype.getScreenStream=function(){return this.screenStreams&&this.hasScreenStream()?this.screenStreams.first():null};i.prototype.hasScreenStream=function(){return!this.screenStreams.isEmpty()};i.prototype.addScreenStream=function(a){return this.set("screenStreams",this.screenStreams.add(a))};i.prototype.removeScreenStream=function(a){return this.set("screenStreams",this.screenStreams["delete"](a))};i.prototype.removeAllScreenStreams=function(){return this.set("screenStreams",b("immutable").Set())};i.prototype.replaceScreenStream=function(a,b){if(!this.screenStreams.contains(a))return this;return a===b?this:this.set("screenStreams",this.screenStreams.add(b)["delete"](a))};i.prototype.setRoomLocation=function(a){return this.set("roomLocation",a)};i.prototype.getRoomLocation=function(){return this.roomLocation};i.prototype.$VFRTCUser1=function(a,b){var c=b!=null?!b:this.areAllTracksMuted(a);a.forEach(function(a){return a.enabled=c})};i.prototype.getMediaTypeForTracks=function(){var a=new Map(),b=this.getScreenStream();b&&b.getVideoTracks().forEach(function(b){return a.set(b.id,h.SCREEN)});return a};function i(){g.apply(this,arguments)}e.exports=i}),null);
__d("VFRTCConfig",["CurrentUser"],(function(a,b,c,d,e,f){__p&&__p();var g=!1,h=null,i=null,j=0,k={};a={setConfig:function(a){var b=a.isVCEndpointCall,c=a.meetingID,d=a.meetingPassword,e=a.peerID;a=a.serverConfig;g=b;h=c;i=d;j=e;k=a},isVCEndpointCall:function(){return g},getMeetingID:function(){return h},getMeetingPassword:function(){return i},getPeerID:function(){return j},statsInterpreterConfig:function(){return{bad_score_count:3,frr_weight:800,plr_weight:500,rtt_weight:2,score_threshold:1e3}},unsupportedBrowserUrl:function(){if(k.troubleshooting_urls&&k.troubleshooting_urls.unsupported_browser)return k.troubleshooting_urls.unsupported_browser;if(b("CurrentUser").isWorkUser())return"https://www.facebook.com/help/work/919532078125908";else return"https://www.facebook.com/help/211644178877843"},userMediaErrorUrl:function(){if(k.troubleshooting_urls&&k.troubleshooting_urls.user_media_error)return k.troubleshooting_urls.user_media_error;if(b("CurrentUser").isWorkUser())return"https://www.facebook.com/help/work/180714775754632";else return"https://www.facebook.com/help/232232800134371"},userMediaPermissionErrorUrl:function(){if(k.troubleshooting_urls&&k.troubleshooting_urls.user_media_permission_error)return k.troubleshooting_urls.user_media_permission_error;if(b("CurrentUser").isWorkUser())return"https://www.facebook.com/help/work/180714775754632";else return"https://www.facebook.com/help/232232800134371"},isMessengerDotCom:function(){return k.is_messenger_dot_com},useMessengerCallUI:function(){return k.messenger_call_ui},useHDVideoQuality:function(){return k.use_hd_video_quality},shouldCreateDataChannel:function(){return k.data_channel},disableURLManager:function(){return k.disable_url_manager}};e.exports=a}),null);
__d("VFFBRTCUtils",["AsyncRequest","CollabCallTriggerType","FBIDCheck","RTCConfig","VFRTCConfig","VFWebLogger","assignMediaStream","emptyFunction"],(function(a,b,c,d,e,f){__p&&__p();var g=6e3,h="setSinkId"in window.HTMLMediaElement.prototype;a={attachMediaStream:function(a,c){if(a==null)return;b("assignMediaStream")(a,c);if(c){c=a.play();c!==void 0&&c["catch"](function(a){b("VFWebLogger").logRTCCheckpoint({checkpoint:"autoplay was preventd"})})}},aboutEqual:function(a,b){return a-b<.01&&b-a<.01},sendServerRequest:function(a,c,d,e,f,h){c===void 0&&(c=b("emptyFunction"));d===void 0&&(d=b("emptyFunction"));e===void 0&&(e=!1);f===void 0&&(f=g);h===void 0&&(h={});a=new(b("AsyncRequest"))().setURI(a).setData(h).setAllowCrossPageTransition(!0).setHandler(c).setErrorHandler(d).setTimeoutHandler(f,function(){d()});e&&a.setOption("asynchronous_DEPRECATED",!1);a.send()},supportsSetSink:function(){return h},isPeerVCEndpoint:function(a){var c=b("VFRTCConfig").isVCEndpointCall();return c!==void 0?c:!!a&&!b("FBIDCheck").isUser_deprecated(a)&&b("RTCConfig").CollabVCEndpointsVideoCallGK},isCollabTrigger:function(a){return a===b("CollabCallTriggerType").QUICK_DIAL||a===b("CollabCallTriggerType").MEETING_ROOM_PAGE_PROFILE}};e.exports=a}),null);
__d("VFRTCAudioTrackNoiseDetector",["invariant","Promise","MediaStream"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="audio track with absolute silence",i="audio track data timeout",j='wrong track type, expected "audio"',k=100;a={ABSOLUTE_SILENCE_ERROR:h,DATA_TIMEOUT_ERROR:i,WRONG_TRACK_TYPE_ERROR:j,detect:function(a,c){__p&&__p();if("kind"in a&&a.kind!=="audio")return b("Promise").reject(new Error(j));var d=new(b("MediaStream"))();d.addTrack(a);var e=new AudioContext(),f=e.createMediaStreamSource(d),l=e.createScriptProcessor(0,1,1),m=k,n=function(){__p&&__p();l!=null||g(0,2865);l.onaudioprocess=null;l.disconnect();l=null;f!=null||g(0,2866);f.disconnect();f=null;d!=null||g(0,2867);d.removeTrack(a);d=null;e!=null||g(0,2868);return b("Promise").resolve(e.close())["catch"](function(){return b("Promise").resolve()}).then(function(){e=null})};return b("Promise").race([new(b("Promise"))(function(a,b){__p&&__p();l!=null||g(0,2865),l.onaudioprocess=function(c){__p&&__p();c=c.inputBuffer;for(var c=c.getChannelData(0),d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;if(f!==0){a();return}}m>0?m--:b(new Error(h))},f!=null||g(0,2866),f.connect(l),e!=null||g(0,2868),l.connect(e.destination)}),new(b("Promise"))(function(a){return window.setTimeout(a,c)}).then(function(){throw new Error(i)})]).then(function(){return n()})["catch"](function(a){return n().then(function(){throw a})})}};e.exports=a}),null);
__d("VFRTCExperiment",["FBRTCExperimentName","FBRTCExperimentsConfig","QE2Logger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();g.gen=function(a){var c={params:{},auto_exposure:!1,in_experiment:!1};c=b("FBRTCExperimentsConfig")[a]||c;a=new g(a,c);return a};g.getIncomingCallExperiments=function(){return g.gen(b("FBRTCExperimentName").INCOMING_CALL_EXPERIMENTS)};g.getMediaQualityExperiments=function(){return g.gen(b("FBRTCExperimentName").MEDIA_QUALITY_H2_2018)};g.getNewMuteIconLayoutExperiments=function(){return g.gen(b("FBRTCExperimentName").NEW_MUTE_ICON_LAYOUT)};function g(a,b){this.$1=a,this.$2=b}g.prototype.$3=function(){this.$2.auto_exposure&&this.logExposure()};g.prototype.logExposure=function(){this.$2.in_experiment&&b("QE2Logger").logExposureForUser(this.$1)};g.prototype.getParam=function(a,b){if(this.$2.in_experiment){this.$3();a=this.$2.params[a];if(a!==void 0)return String(a)}return b};g.prototype.getInt=function(a,b){if(this.$2.in_experiment){this.$3();if(this.$2.params[a]!==void 0)return parseInt(this.$2.params[a],10)}return b};g.prototype.getBool=function(a,b){var c=this.$2.params;if(this.$2.in_experiment){this.$3();if(c[a]!==void 0)return c[a]==="1"||c[a]===1||c[a]==="true"||c[a]===!0}return b};e.exports=g}),null);
__d("VFRTCExperiments",["VFRTCConfig","qex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={enableCallCollisionFix:function(){return b("VFRTCConfig").isVCEndpointCall()?!1:b("qex")._("771668")},passOfferWithWindowMessages:function(){return b("VFRTCConfig").isVCEndpointCall()?!1:b("qex")._("771669")},forceSmallWindow:function(a,c){return a||c?!1:b("qex")._("722012")},fixedHeightGridView:function(a,c){return a||c?!1:b("qex")._("779395")},fixedHeightGridViewOuterWindowHeight:function(){return b("qex")._("779396")},fixedHeightGridViewOuterWindowWidth:function(){return b("qex")._("779397")},fixedHeightGridViewGridHeightPercent:function(){return b("qex")._("781541")}};e.exports=a}),null);
__d("VFRTCSupport",["CollabMinimumChromeVersion","RTCConfig","UserAgent"],(function(a,b,c,d,e,f){var g={isWebrtcSupported:function(){return b("UserAgent").isBrowser("Chrome >= 28")||b("UserAgent").isBrowser("Firefox >= 25")||b("UserAgent").isBrowser("Edge >= 15.15042")||b("UserAgent").isBrowser("Opera >= 20")},isGroupCallWebtrcSupported:function(){return b("UserAgent").isBrowser("Chrome >= 28")||b("UserAgent").isBrowser("Opera >= 20")},isCollabSupported:function(){return g.isWebrtcSupported()&&(!!b("RTCConfig").CollabWhitelistedBrowserGK||b("UserAgent").isBrowser("Chrome >= "+b("CollabMinimumChromeVersion").VIDEO_CALL))},isMobileDevice:function(){return b("UserAgent").isPlatform("Android")||b("UserAgent").isPlatform("iOS")},isVideoFilterEffectSupported:function(){return!g.isMobileDevice()&&(b("UserAgent").isBrowser("Chrome >= 51")||b("UserAgent").isBrowser("Opera >= 36"))},videoEscalationByUnmuteWorkaround:function(){return b("UserAgent").isBrowser("Firefox < 60")||b("UserAgent").isBrowser("Edge")},isChromiumBased:function(){return b("UserAgent").isBrowser("Chrome")||b("UserAgent").isBrowser("Opera")}};e.exports=g}),null);
__d("VFRTCClientFeatureGating",["CurrentUser","FBRTCExperimentName","URI","VFRTCConfig","VFRTCExperiment","VFRTCExperiments","VFRTCSupport","gkx","isBonfireURI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={isVCCallOrWorkUser:function(){return b("VFRTCConfig").isVCEndpointCall()||b("CurrentUser").isWorkUser()},canCallMWeb:function(){return b("gkx")("797400")},shouldUseMWVideoEscalationDialog:function(){return!(b("gkx")("779394")||b("VFRTCExperiment").gen(b("FBRTCExperimentName").VIDEO_ESCALATION).getBool("disable_multiway_video_escalation_dialog",!1))},addScreenContentTypeInSDP:function(){return b("gkx")("678343")},draggableSelfView:function(){return b("VFRTCExperiment").gen(b("FBRTCExperimentName").LARGER_SELF_VIEW).getBool("draggable_self_view",!1)},endCallSurveyDropdownOptions:function(){return!this.isVCCallOrWorkUser()},fixedHeightGridView:function(){return b("VFRTCExperiments").fixedHeightGridView(b("VFRTCConfig").isVCEndpointCall(),b("CurrentUser").isWorkUser())},canUseMWVideoFilters:function(){return!b("CurrentUser").isWorkUser()&&!b("isBonfireURI")(b("URI").getRequestURI())&&b("VFRTCSupport").isVideoFilterEffectSupported()&&b("VFRTCExperiment").gen(b("FBRTCExperimentName").VIDEO_CHAT_FILTERS).getBool("use_filters_mw",!1)},isChatEnabled:function(){return!b("VFRTCConfig").isVCEndpointCall()},isGroupChatEnabled:function(){return!1},canUseP2PVideoFilters:function(){return!b("CurrentUser").isWorkUser()&&b("VFRTCSupport").isVideoFilterEffectSupported()&&b("gkx")("678346")&&!this.stopVideoWhenMute()},isGuestLoginEnabled:function(){return b("gkx")("678347")},useNewIncomingCallDialog:function(){return b("VFRTCExperiment").getIncomingCallExperiments().getBool("use_new_incoming_call_dialog",!1)},answerCallWithThreeButtons:function(){return b("VFRTCExperiment").getIncomingCallExperiments().getBool("use_three_buttons",!1)},callUnification:function(){return b("VFRTCExperiment").gen(b("FBRTCExperimentName").CALL_UNIFICATION).getBool("in_call_background_updated",!1)},waitForMediaPermission:function(){return b("gkx")("678348")},shouldUseRealMultiwayAppID:function(){return b("gkx")("678349")},canUseMultiwaySandbox:function(){return b("gkx")("678350")},stopVideoWhenMute:function(){if(b("VFRTCConfig").isVCEndpointCall())return!1;var a=b("VFRTCExperiment").gen(b("FBRTCExperimentName").TURNOFF_CAMERA_WHEN_FACEMUTE);return a.getBool("camera_off",!1)},restartVideoWithTrackAPI:function(){var a=b("VFRTCExperiment").gen(b("FBRTCExperimentName").TURNOFF_CAMERA_WHEN_FACEMUTE);return a.getBool("track_api",!1)},shouldAlwaysShowRedial:function(){return!this.isVCCallOrWorkUser()},disableOpusStereo:function(){return b("gkx")("678351")},shouldApplySdpMidTranslation:function(){return b("gkx")("700608")},preserveFirefoxInactiveDataChannelBlock:function(){return b("gkx")("724606")},alwaysOpenChatTab:function(){return b("VFRTCExperiment").gen(b("FBRTCExperimentName").FB_PROFILE_RTC_BUTTONS).getBool("open_chat_tab",!1)},shouldAlwaysShowStarRating:function(){return b("VFRTCConfig").isVCEndpointCall()?!1:b("VFRTCExperiment").gen(b("FBRTCExperimentName").P2P_END_CALL_SCREEN).getBool("persist_star_rating",!1)},shouldShowNetworkQualityIndicator:function(){return this.isVCCallOrWorkUser()?!1:b("VFRTCExperiment").getMediaQualityExperiments().getBool("show_network_indicator",!1)},shouldMonitorNetworkQuality:function(){return this.isVCCallOrWorkUser()?!1:b("VFRTCExperiment").getMediaQualityExperiments().getBool("monitor_network_quality",!1)},preferIsacForGroupCalls:function(){return b("VFRTCConfig").isVCEndpointCall()?!1:b("gkx")("717703")},useNewMuteIcon:function(){return this.isVCCallOrWorkUser()?!1:b("VFRTCExperiment").getNewMuteIconLayoutExperiments().getBool("rtc_www_new_mute_icon",!1)},shouldUseH264:function(){return b("gkx")("833124")}};e.exports=a}),null);
__d("VFRTCStrings",["fbt"],(function(a,b,c,d,e,f,g){"use strict";a={busy:g._("Busy"),callAgain:g._("Call Again"),callEnded:g._("Call Ended"),callFailed:g._("Call Failed"),callInterrupted:g._("Call Interrupted"),cannotConnect:g._("Can't Connect Call"),chatLinksLeftVideoChat:g._("You left the group video chat"),clientEncryptionError:g._("Client Encryption Error"),close:g._("Close"),connected:g._("Connected"),connecting:g._("Connecting..."),connectionDropped:g._("Connection Dropped"),connectionLost:g._("Connection Lost"),contacting:g._("Contacting..."),copiedVideoChatLink:g._("Copied"),copyVideoChatLink:g._("Copy Video Chat Link"),disconnected:g._("Disconnected"),dismiss:g._("Dismiss"),hangingUp:g._("Hanging up..."),inactive:g._("Call is Inactive"),inAnotherCall:g._("In Another Call"),incomingVideoChat:g._("Incoming video chat"),invalidStreamConfiguration:g._("Too many clients connected to the room"),noAnswer:g._("No Answer"),notNow:g._("Not Now"),participantLimitReached:g._("Participant Limit Reached"),pleaseWait:g._("Please wait..."),profilePictureAlt:g._("Profile Picture"),reconnecting:g._("Reconnecting..."),redial:g._("Redial"),ringing:g._("Ringing..."),switchToWiFi:g._("Switch to Wi-Fi to complete your call"),unreachable:g._("Unreachable"),userVideoOff:function(a){return g._("{name}'s camera is off",[g._param("name",a)])},viewerVideoOff:g._("Your camera is off"),waitingForOthers:g._("Waiting for others to join...")};e.exports=a}),null);
__d("VFRTCEndCallReason",["fbt","FBRTCDismissReason","FBRTCHangupReason","FBRTCRtcResponseStatusCode","VFRTCConstants","VFRTCStrings"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("VFRTCConstants").CallEndReason,i=b("VFRTCConstants").CollabCallEndSubreason;function j(a){this.$3="local",typeof a==="string"||a instanceof String?this.$1=b("VFRTCConstants").endCallReasonFromString(a):this.$1=a}j.prototype.setSubreason=function(a){this.$2=a;return this};j.prototype.getSubreason=function(){return this.$2};j.prototype.setRemoteEnded=function(a){this.$3=a?"remote":"local";return this};j.prototype.getRemoteEnded=function(){return this.$3==="remote"};j.prototype.toStrName=function(a){a===void 0&&(a=!0);return a?this.$4()+"_"+this.$3:this.$4()};j.prototype.$4=function(){return b("VFRTCConstants").callEndReasonString(this.$1)};j.prototype.getReasonID=function(){return this.$1};j.prototype.toString=function(a){var b;a===void 0&&(a=!1);b=((b=this.$5(a))!=null?b:"").toString();return a?b+" "+this.$6():b};j.prototype.$5=function(a){__p&&__p();switch(this.$1){case h.NO_ANSWER_TIMEOUT:case h.IGNORE_CALL:return b("VFRTCStrings").noAnswer;case h.OTHER_NOT_CAPABLE:if(this.$2===i.MCU_INVALID_STREAM_CONFIGURATION)return b("VFRTCStrings").invalidStreamConfiguration;case h.INCOMING_TIMEOUT:case h.NO_PERMISSION:case h.OTHER_CARRIER_BLOCKED:return b("VFRTCStrings").unreachable;case h.SIGNALING_MESSAGE_FAILED:case h.WEBRTC_ERROR:case h.NO_UI_ERROR:case h.CALLER_NOT_VISIBLE:case h.CLIENT_ERROR:return b("VFRTCStrings").callFailed;case h.UNSUPPORTED_VERSION:return b("VFRTCStrings").cannotConnect;case h.IN_ANOTHER_CALL:return b("VFRTCStrings").inAnotherCall;case h.CARRIER_BLOCKED:return b("VFRTCStrings").switchToWiFi;case h.CLIENT_INTERRUPTED:return b("VFRTCStrings").callInterrupted;case h.HANGUP_CALL:case h.ACCEPT_AFTER_HANGUP:return a?"":b("VFRTCStrings").callEnded;case h.CONNECTION_DROPPED:return b("VFRTCStrings").connectionLost;case h.OTHER_INSTANCE_HANDLED:return null;case h.CLIENT_ENCRYPTION_ERROR:return b("VFRTCStrings").clientEncryptionError;case h.INACTIVE_TIMEOUT:return b("VFRTCStrings").inactive;default:return null}};j.prototype.$6=function(){__p&&__p();var a;if(this.$1!==h.OTHER_NOT_CAPABLE&&this.$1!==h.SIGNALING_MESSAGE_FAILED&&this.$1!==h.HANGUP_CALL&&this.$1!==h.ACCEPT_AFTER_HANGUP)return"";switch(this.$2){case i.REMOTE_PEER_HANGUP:return"Call ended";case i.REMOTE_PEER_REJECT:return"Call declined";case i.CLOSED_BY_MCU:return"Call expired";case i.CLOSED_AS_STALE:return"Server failed, call is stale";case i.CALL_INITIALIZATION_FAILED:return"Call initialization to room failed";case i.SIP_CONNECTION_INITIALIZATION_FAILED:return"No Answer";case i.LOST_MCU_CONNECTION:return"MCU Media connection failed";case i.LOST_MCU_THRIFT_CONNECTION:return"MCU infrastructure dropped connection";case i.LOST_SIP_ADAPTER_CONNECTION:return"SIP infrastructure dropped connection";case i.MCU_NO_AUDIO_STREAM:return"Invalid audio stream";case i.MCU_INVALID_STREAM_CONFIGURATION:return"Invalid stream configuration";case i.INVALID_MEETING_ID:return"Invalid meeting ID";case i.UNKNOWN:default:a=(a=this.$2)!=null?a:"Unknown";return this.$2!=null&&this.$2!==""?"Unexpected call failure: "+a:"Call ended"}};j.fromHangupReason=function(a){switch(a){case b("FBRTCHangupReason").IGNORE_CALL:return new j(h.IGNORE_CALL);case b("FBRTCHangupReason").NO_ANSWER_TIMEOUT:return new j(h.NO_ANSWER_TIMEOUT);case b("FBRTCHangupReason").HANGUP_CALL:return new j(h.HANGUP_CALL);case b("FBRTCHangupReason").CLIENT_ERROR:return new j(h.CLIENT_ERROR);case b("FBRTCHangupReason").IN_ANOTHER_CALL:return new j(h.IN_ANOTHER_CALL);case b("FBRTCHangupReason").CLIENT_INTERRUPTED:return new j(h.CLIENT_INTERRUPTED);default:return new j(h.HANGUP_CALL)}};j.fromDismissRequest=function(a){__p&&__p();if(!a)return new j(h.HANGUP_CALL);switch(a.reason){case b("FBRTCDismissReason").ANSWERED_ON_ANOTHER_DEVICE:case b("FBRTCDismissReason").REJECTED_ON_ANOTHER_DEVICE:return new j(h.OTHER_INSTANCE_HANDLED);case b("FBRTCDismissReason").CALL_ENDED:return new j(h.HANGUP_CALL);case b("FBRTCDismissReason").IN_ANOTHER_CALL:return new j(h.IN_ANOTHER_CALL);case b("FBRTCDismissReason").CONNECTION_DROPPED:return new j(h.CONNECTION_DROPPED);case b("FBRTCDismissReason").REMOVED_BY_PARTICIPANT:return new j(h.HANGUP_CALL);case b("FBRTCDismissReason").REJECTED_BY_CALLEE:return new j(h.IGNORE_CALL);case b("FBRTCDismissReason").INTERNAL_ERROR:return new j(h.SIGNALING_MESSAGE_FAILED);default:return new j(h.HANGUP_CALL)}};j.fromResponseStatusCode=function(a){switch(a){case b("FBRTCRtcResponseStatusCode").PRECONDITION_FAILURE:case b("FBRTCRtcResponseStatusCode").METHOD_NOT_ALLOWED:case b("FBRTCRtcResponseStatusCode").UNAUTHORIZED:return new j(h.NO_PERMISSION);case b("FBRTCRtcResponseStatusCode").SERVICE_UNAVAILABLE:return new j(h.SIGNALING_MESSAGE_FAILED);case b("FBRTCRtcResponseStatusCode").SERVER_INTERNAL_ERROR:case b("FBRTCRtcResponseStatusCode").BAD_REQUEST:case b("FBRTCRtcResponseStatusCode").BUSY_HERE:case b("FBRTCRtcResponseStatusCode").CONDITIONAL_REQUEST_FAILED:case b("FBRTCRtcResponseStatusCode").NOT_FOUND:return new j(h.CLIENT_ERROR);default:return new j(h.HANGUP_CALL)}};e.exports=j}),null);
__d("VFRTCConsoleLogger",["Log","LogHistory","formatDate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null;h.getInstance=function(){g||(g=new h());return g};function h(){this.$1=b("LogHistory").getInstance(h.MODULE_NAME)}h.prototype.getLogHistory=function(){return this.$1};h.prototype.log=function(a,b,c,d,e){d===void 0&&(d="Console");e===void 0&&(e="DEBUG");e=" "+JSON.stringify({conferenceName:b,callID:c});this.$1.log(d||"Console",a+e);return this};h.MODULE_NAME="webrtc";e.exports=h}),null);
__d("VFRTCLoggingSharedInstance",["CurrentUser","UserAgentData"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null;h.getInstance=function(){g==null&&(g=new h());return g};function h(){this.$1=b("UserAgentData").browserName+b("CurrentUser").getID().substr(-4)+"_"+Date.now().toString().substr(-5)}h.prototype.getDeviceID=function(){return this.$1};e.exports=h}),null);
__d("VFRTCLogger",["ChannelManager","FBRTCMessageType","MarauderLogger","P2PReliabilityTypedLogger","UserAgentData","VFRTCConsoleLogger","VFRTCLoggingSharedInstance","CurrentUser","pageID"],(function(a,b,c,d,e,f){__p&&__p();var g=b("CurrentUser").getID(),h="call_action",i="rtc_client_call_summary",j="client_error",k="client_event",l="info",m="received_message",n="send_failed",o="send_succeeded",p="sent_message",q=null;r.getInstance=function(){"use strict";q==null&&(q=new r());return q};r.multiwayMessageTypeName=function(a){"use strict";__p&&__p();switch(a){case b("FBRTCMessageType").JOIN:return"JOIN";case b("FBRTCMessageType").SERVER_MEDIA_UPDATE:return"SERVER_MEDIA_UPDATE";case b("FBRTCMessageType").HANGUP:return"HANGUP";case b("FBRTCMessageType").ICE_CANDIDATE:return"ICE_CANDIDATE";case b("FBRTCMessageType").RING:return"RING";case b("FBRTCMessageType").DISMISS:return"DISMISS";case b("FBRTCMessageType").CONFERENCE_STATE:return"CONFERENCE_STATE";case b("FBRTCMessageType").ADD_PARTICIPANTS:return"ADD_PARTICIPANTS";case b("FBRTCMessageType").SUBSCRIPTION:return"SUBSCRIPTION";case b("FBRTCMessageType").CLIENT_MEDIA_UPDATE:return"CLIENT_MEDIA_UPDATE";case b("FBRTCMessageType").DATA_MESSAGE:return"DATA_MESSAGE";case b("FBRTCMessageType").REMOVE_PARTICIPANTS:return"REMOVE_PARTICIPANTS";case b("FBRTCMessageType").EXPERIMENT:return"EXPERIMENT";case b("FBRTCMessageType").CONNECT:return"CONNECT";case b("FBRTCMessageType").APPROVAL:return"APPROVAL"}return a.toString()};function r(){"use strict";this.$2=JSON.stringify({version:2,device:b("UserAgentData").deviceName,os:b("UserAgentData").platformName,os_version:b("UserAgentData").platformFullVersion,browser:b("UserAgentData").browserName,browser_version:b("UserAgentData").browserFullVersion}),this.$3=JSON.stringify({version:2,device:b("UserAgentData").deviceName,os:b("UserAgentData").platformName,os_version:b("UserAgentData").platformFullVersion,browser:b("UserAgentData").browserName,browser_version:b("UserAgentData").browserFullVersion,msg_source:"web"}),this.$1=b("VFRTCLoggingSharedInstance").getInstance().getDeviceID()}r.prototype.logToConsole=function(a){"use strict";this.$4(null,null,"Console",a)};r.prototype.$5=function(a){"use strict";return new(b("P2PReliabilityTypedLogger"))().setExtra(this.$2).setDeviceID(this.$1).setRawTime(Date.now()).setServiceName("WEB_CLIENT").setMsgType(a.toUpperCase())};r.prototype.logMultiwayMessageReceived=function(a,b){"use strict";var c=r.multiwayMessageTypeName(a.type());this.$4(a.conferenceName(),b,"Received MW",c+", "+a.transactionId(),c==="EXPERIMENT"?"DEBUG":"INFO")};r.prototype.logReceivedMessage=function(a,b,c){"use strict";var d=b?b.toString():null,e={call_id:b,from:a,msg_id:c.msg_id,type:c.type};c.sdp&&(e.content=c.sdp);c.ack_id&&(e.ack_msg_id=c.ack_id);var f=c.type||c.msgType;this.$5(f).setEventName("CLIENT_RECEIVED_MESSAGE").setCallID(d).setMsgID(c.msg_id).setSenderID(a).setReceiverID(g).setExtra(this.$3).log();this.$6(m,e);this.$4(a,b,"Received P2P",c.type+", "+c.msg_id)};r.prototype.logSentMessage=function(a,b,c){"use strict";var d=b?b.toString():null,e={call_id:b,msg_id:c.msg_id,to:a,type:c.type};c.sdp&&(e.content=c.sdp);c.ack_id&&(e.ack_msg_id=c.ack_id);this.$5(c.type).setEventName("CLIENT_SENDING_MESSAGE").setCallID(d).setMsgID(c.msg_id).setSenderID(g).setReceiverID(a).log();this.$6(p,e);this.$4(a,b,"Sent",c.type+", "+c.msg_id)};r.prototype.logSentMessageSuccess=function(a,b,c,d){"use strict";var e={call_id:b,msg_id:d,peer_id:a,type:c};b=b?b.toString():null;this.$5(c).setEventName("CLIENT_TRANSPORT_SUCCESS").setCallID(b).setMsgID(d.toString()).setSenderID(g).setReceiverID(a).log();this.$6(o,e)};r.prototype.logSentMessageFailure=function(a,b,c,d,e){"use strict";var f={call_id:b,error_code:e,msg_id:d,peer_id:a,type:c},h=b?b.toString():null;this.$5(c).setEventName("CLIENT_TRANSPORT_ERROR").setCallID(h).setMsgID(d.toString()).setSenderID(a).setSenderID(g).setReceiverID(a).setResultCode(e).log();this.$6(n,f);this.$4(a,b,"Send Failed",c+", "+e)};r.prototype.logCallAction=function(a,b,c,d,e){"use strict";var f={call_action:c,call_id:b,content:d,peer_id:a};e&&(f.trigger=e);this.$6(h,f);this.$4(a,b,"CallAction",c+", "+JSON.stringify(d))};r.prototype.logEvent=function(a,b,c){"use strict";var d={call_id:b,content:c,peer_id:a};this.$6(k,d);this.$4(a,b,"Event",JSON.stringify(c))};r.prototype.logInfo=function(a,b,c){"use strict";var d={call_id:b,content:c,peer_id:a};this.$6(l,d);this.$4(a,b,"Info",JSON.stringify(c))};r.prototype.logError=function(a,b,c){"use strict";var d={call_id:b,content:c,peer_id:a};this.$6(j,d);this.$4(a,b,"Error",JSON.stringify(c))};r.prototype.logErrorWithoutID=function(a){"use strict";this.logError(null,null,a)};r.prototype.logEndCallSummary=function(a){"use strict";if(!a)return;var c={call_id:a.callID,channel_session_id:b("ChannelManager").getCompleteConfig().sessionID,content:a.toString(),peer_id:a.peerID,tag:"endcallstats"},d=babelHelpers["extends"]({},c,a.getExtraInfo());this.$6(i,d);this.$4(a.peerID,a.callID,"Call Summary",JSON.stringify(c))};r.prototype.doesContainSensitiveData=function(a){"use strict";return String(a).indexOf("crypto")>-1};r.prototype.redactSensitiveData=function(a,b){"use strict";if(a!==i){a=JSON.stringify(b);if(this.doesContainSensitiveData(a))return{redacted:!0}}return b};r.prototype.$6=function(a,c){"use strict";c.page_id=b("pageID");c=this.redactSensitiveData(a,c);b("VFRTCConsoleLogger").getInstance().getLogHistory().log(a,c);b("MarauderLogger").log(a,b("VFRTCConsoleLogger").MODULE_NAME,c)};r.prototype.$4=function(a,c,d,e,f){f===void 0&&(f="DEBUG"),b("VFRTCConsoleLogger").getInstance().log(this.doesContainSensitiveData(e)?"redacted":e,a,c,d,f)};r.CallAction=Object.freeze({ANSWER_CALL:"answer_call",AUTO_DISABLE_VIDEO:"auto_disable_video",DENIED_PERMISSION:"denied_permission",END_CALL:"end_call",FAILED_GETTING_URI:"failed_getting_uri",OLD_URI:"old_uri",OPEN_POPUP:"open_popup",POPUP_OPENED:"popup_opened",RECEIVED_CALL:"received_call",SET_FULLSCREEN_ON:"set_fullscreen_on",SET_MUTE:"set_mute",SET_SELF_VIEW_ON:"set_self_view_on",SET_VIDEO_ON:"set_video_on",START_CALL:"start_call",START_SKYPE:"start_skype",TRY_NEW:"try_new",USER_SETTINGS_CHANGED:"user_settings_changed"});r.Trigger=Object.freeze({ADMIN_MESSAGE:"admin_message",CHAT_TAB_ICON_TOUR:"chat_tab_icon_tour",CHAT_TAB_ICON:"chat_tab_icon",CHAT_TAB_VOICE_ICON:"chat_tab_voice_icon",MULTIWAY_ADMIN_MESSAGE_JOIN_AUDIO_CALL_BUTTON:"multiway_admin_message_join_audio_call_button",MULTIWAY_ADMIN_MESSAGE_JOIN_VIDEO_CALL_BUTTON:"multiway_admin_message_join_video_call_button",MULTIWAY_ADMIN_MESSAGE_START_AUDIO_CALL_BUTTON:"multiway_admin_message_start_audio_call_button",MULTIWAY_ADMIN_MESSAGE_START_VIDEO_CALL_BUTTON:"multiway_admin_message_start_video_call_button",MULTIWAY_CHAT_TAB_SHEET_JOIN_CALL_BUTTON:"multiway_chat_tab_sheet_join_call_button",MULTIWAY_POPUP_START_CALL_BUTTON:"multiway_popup_start_call_button",MULTIWAY_THREAD_HEADER_AUDIO_BUTTON:"multiway_thread_header_audio_button",MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_AUDIO_BUTTON:"multiway_thread_header_join_audio_call_audio_button",MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_VIDEO_BUTTON:"multiway_thread_header_join_audio_call_video_button",MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_AUDIO_BUTTON:"multiway_thread_header_join_video_call_audio_button",MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_VIDEO_BUTTON:"multiway_thread_header_join_video_call_video_button",MULTIWAY_THREAD_HEADER_VIDEO_BUTTON:"multiway_thread_header_video_button",MULTIWAY_THREAD_LIST_JOIN_CALL_BUTTON:"multiway_thread_list_join_call_button",POPUP_CALL_START_BUTTON:"popup_start_call_button",REDIAL_BUTTON:"redial_button",RESET_CALL:"install_screen_sharing_ext_dialog",RETURN_CALL:"return_call",SKYPE_DEPRECATION_DIALOG:"skype_deprecation_dialog",TIMELINE_PROFILE:"timeline_profile",VC_PRECALL_SETUP:"vc_precall_setup",UNKNOWN:"unknown",WEB_MESSENGER:"web_messenger"});r.Key=Object.freeze({BATTERY_START:"battery_start",BATTERY_END:"battery_end",CALL_TYPE:"call_type",CONNECTION_EFFECTIVE_TYPE:"conn_effective_type",CPU_CORES:"cpu_cores",DEVICE_INFO:"device_info",DEVICE_MEMORY:"device_memory",DEVICE_PIXEL_RATIO:"device_pixel_ratio",INITIATED_BY_PAGE_ID:"initiated_by_page_id",PEER_IS_MOBILE:"peer_is_mobile",RATING_SHOWN:"rating_shown",RATING:"rating5",EFFECT_COUNT:"rtc_effect_count",EFFECT_TOTAL_DURATION:"rtc_effect_total_duration",VIDEO_DURATION_WITH_FILTER:"rtc_video_duration_with_filter_enabled",SCREEN_DURATION:"screen_duration",SURVEY_CHOICE:"survey_choice",SURVEY_DETAILS:"survey_details",SURVEY_SHOWN:"survey_shown",MEDIA_INPUTS:"media_inputs",VIDEO_CAPABILITIES:"video_capabilities"});e.exports=r}),null);
__d("VFRTCMediaDevices",["invariant","Promise","VFRTCOnDeviceChangePoller"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=navigator.mediaDevices&&typeof navigator.mediaDevices.enumerateDevices==="function",i=window.MediaStreamTrack&&window.MediaStreamTrack.getSources==="function",j=1e3,k;a={addEventListener:function(a,c){if(a==="devicechange"&&b("VFRTCOnDeviceChangePoller").isNeeded()){k||(k=new(b("VFRTCOnDeviceChangePoller"))(j));k.add(c);return}var d=navigator;d=d.mediaDevices;d&&"addEventListener"in d&&d.addEventListener(a,c)},removeEventListener:function(a,c){if(a==="devicechange"&&b("VFRTCOnDeviceChangePoller").isNeeded()){k&&k.remove(c);return}var d=navigator;d=d.mediaDevices;d&&"removeEventListener"in d&&d.removeEventListener(a,c)},isSupported:function(a){switch(a){case"enumerateDevices":return h||i;default:return Boolean(navigator.mediaDevices)}},enumerateDevices:function(){if(h){navigator.mediaDevices||g(0,4492);return b("Promise").resolve(navigator.mediaDevices.enumerateDevices())}else if(i)return new(b("Promise"))(function(a){return window.MediaStreamTrack.getSources(a)}).then(l);return b("Promise").reject(new Error("enumerateDevices() not supported"))},filterDevicesOfKind:function(a,b){return a.filter(function(a){return a.kind===b})}};function l(a){return a.map(function(a){var b=a.id,c=a.kind;a=a.label;return{deviceId:b,groupId:"",kind:c==="video"?"videoinput":"audioinput",label:a}})}e.exports=a}),null);
__d("VFRTCOnDeviceChangePoller",["Promise","VFRTCLogger","VFRTCMediaDevices"],(function(a,b,c,d,e,f){__p&&__p();a.isNeeded=function(){"use strict";var a=navigator;a=a.mediaDevices;return!b("VFRTCMediaDevices").isSupported("enumerateDevices")||a&&"ondevicechange"in a?!1:!0};function a(a){"use strict";__p&&__p();this.$1=[],this.$2="",this.$4=null,this.$7=function(){__p&&__p();b("VFRTCMediaDevices").enumerateDevices().then(function(a){__p&&__p();a=a.map(function(a){return a.deviceId+":"+a.label+":"+a.groupId}).sort().join("~");if(a===this.$2)return;this.$2=a;for(var a=this.$1,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;try{d()}catch(a){}}}.bind(this))["catch"](function(a){return b("Promise").resolve()}).then(function(){this.$4=window.setTimeout(this.$7,this.$3)}.bind(this))["catch"](function(a){})}.bind(this),this.$3=a}a.prototype.add=function(a){"use strict";this.$1.push(a),this.$5()};a.prototype.remove=function(a){"use strict";this.$1=this.$1.filter(function(b){return b!==a}),this.$6()};a.prototype.$5=function(){"use strict";if(this.$4!==null)return;this.$4=window.setTimeout(this.$7,0)};a.prototype.$6=function(){"use strict";if(this.$1.length>0)return;this.$4!==null&&(window.clearTimeout(this.$4),this.$4=null)};e.exports=a}),null);
__d("VFRTCVideoTrackActivityDetector",["invariant","Promise","MediaStream","assignMediaStream"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="video track playback timeout",i="unexpected video track ready state",j='wrong track type, expected "video"';a={PLAYBACK_TIMEOUT_ERROR:h,WRONG_READY_STATE_ERROR:i,WRONG_TRACK_TYPE_ERROR:j,detect:function(a,c){__p&&__p();if("kind"in a&&a.kind!=="video")return b("Promise").reject(new Error(j));var d=document.createElement("video");d.muted=!0;var e=new(b("MediaStream"))();e.addTrack(a);var f,k=null,l=function(){window.clearInterval(k),d&&(d.pause(),b("assignMediaStream")(d,null),d.removeEventListener("timeupdate",f),d=null),e&&(e.removeTrack(a),e=null)};return b("Promise").race([new(b("Promise"))(function(c,h){d!=null||g(0,5995),b("assignMediaStream")(d,e),f=function(b){d!=null||g(0,5995),d.currentTime>0&&(a.readyState==="live"?(c(),l()):h(new Error(i)))},b("Promise").resolve(d.pause()).then(function(){d!=null||g(0,5995);return d.play()}).then(function(){f(),d!=null||g(0,5995),d.addEventListener("timeupdate",f),k=window.setInterval(f,50)})["catch"](function(a){return h(a)})}),new(b("Promise"))(function(a){return window.setTimeout(a,c)}).then(function(){throw new Error(h)})])["catch"](function(a){l();throw a})}};e.exports=a}),null);
__d("VFRTCMediaStreamValidator",["Promise","VFRTCAudioTrackNoiseDetector","VFRTCVideoTrackActivityDetector"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="no audio tracks",h="no video tracks",i="too many audio tracks",j="too many video tracks",k="unexpected audio track(s)",l="unexpected video track(s)";a={NO_AUDIO_TRACKS_ERROR:g,NO_VIDEO_TRACKS_ERROR:h,TOO_MANY_AUDIO_TRACKS_ERROR:i,TOO_MANY_VIDEO_TRACKS_ERROR:j,UNEXPECTED_AUDIO_TRACKS_ERROR:k,UNEXPECTED_VIDEO_TRACKS_ERROR:l,validate:function(a,c,d,e){__p&&__p();d===void 0&&(d={});e===void 0&&(e={});d=d;var f=d.audio;f=f===void 0?!0:f;d=d.video;d=d===void 0?!0:d;e=e;var g=e.audio;g=g===void 0?1e3:g;e=e.video;e=e===void 0?1e3:e;return b("Promise").all([m(a,c,f,g),n(a,c,d,e)]).then(function(){return a})}};function m(a,c,d,e){var f=a.getAudioTracks();if(!c.audio)return f.length>0?b("Promise").reject(new Error(k)):b("Promise").resolve(a);if(f.length<1)return b("Promise").reject(new Error(g));else if(f.length>1)return b("Promise").reject(new Error(i));return d?b("VFRTCAudioTrackNoiseDetector").detect(f[0],e).then(function(){return a}):b("Promise").resolve(a)}function n(a,c,d,e){var f=a.getVideoTracks();if(!c.video)return f.length>0?b("Promise").reject(new Error(l)):b("Promise").resolve(a);if(f.length<1)return b("Promise").reject(new Error(h));else if(f.length>1)return b("Promise").reject(new Error(j));return d?b("VFRTCVideoTrackActivityDetector").detect(f[0],e).then(function(){return a}):b("Promise").resolve(a)}e.exports=a}),null);
__d("VFRTCUserMediaConstraints",["RTCConfig","VFRTCConstants","VFRTCSupport"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("VFRTCConstants").RTCConstraints;var g=b("VFRTCConstants").VideoQuality,h={width:a.FHD_WIDTH,height:a.FHD_HEIGHT,frameRate:a.FRAME_RATE},i={width:a.HD_WIDTH,height:a.HD_HEIGHT,frameRate:a.FRAME_RATE},j={width:a.SD_WIDTH,height:a.SD_HEIGHT,frameRate:a.FRAME_RATE},k={width:a.LQ_WIDTH,height:a.LQ_HEIGHT,frameRate:a.LQ_FRAME_RATE},l={audio:function(a){return a?{deviceId:{exact:a}}:!0},video:function(a,c,d){d===void 0&&(d=b("RTCConfig").CollaborationCallQuality.videoToRoom);c=c?{deviceId:{exact:c}}:null;if(a===g.CUSTOM_VIDEO)return babelHelpers["extends"]({},d,c);if(b("VFRTCSupport").isMobileDevice())return{facingMode:{ideal:"user"}};d=n(a);a=m(a)?k:p(d);return babelHelpers["extends"]({width:o(d,"width",a),height:o(d,"height",a),frameRate:o(d,"frameRate",{frameRate:10})},c)},chromeMediaSource:function(a,b){a=a.video;a=l.chromify(a);if(typeof a!=="object")return{audio:!1,video:Boolean(a)};var c=a.mandatory;a=a.optional;a=a===void 0?[]:a;return{audio:!1,video:{mandatory:babelHelpers["extends"]({},c,{chromeMediaSource:"desktop",chromeMediaSourceId:b}),optional:[{googTemporalLayeredScreencast:!0}].concat(a)}}},chromify:function(a,b){__p&&__p();if(!a||typeof a!=="object")return Boolean(a);if(!s(a))return a;b=b?b.optionalConstraintsOnly:!1;var c=a.mandatory;c=c===void 0?{}:c;var d=a.optional;d=d===void 0?[]:d;var e=Object.entries(a);for(var f=0;f<e.length;f++){var g=e[f],h=g[0];g=g[1];if(h==="require"||h==="advanced"||h==="mediaSource")continue;g=g&&typeof g==="object"?g:{ideal:g};Number.isFinite(g.exact)&&(g.min=g.exact,g.max=g.exact);var i=g.ideal,j=g.exact;if(i!==void 0)if(Number.isFinite(i)){var k;d.push((k={},k[r(h,"min")]=i,k),(k={},k[r(h,"max")]=i,k))}else{d.push((k={},k[r(h)]=i,k))}if(!b)if(j!==void 0&&!Number.isFinite(j))c[r(h)]=j;else{i=["min","max"];for(var k=0;k<i.length;k++){j=i[k];Number.isFinite(g[j])&&(c[r(h,j)]=g[j])}}}a.advanced&&d.push.apply(d,a.advanced);j={};Object.keys(c).length>0?j.mandatory=c:b&&(j.mandatory={});d.length>0&&(j.optional=d);return j}};function m(a){return a===g.HD_IDEAL_LQ_REQUIRED_VIDEO||a===g.FHD_IDEAL_LQ_REQUIRED_VIDEO}function n(a){switch(a){case g.FHD_VIDEO:case g.FHD_IDEAL_LQ_REQUIRED_VIDEO:return h;case g.HD_VIDEO:case g.HD_IDEAL_LQ_REQUIRED_VIDEO:return i;case g.LQ_VIDEO:return k;case g.SD_VIDEO:return j;default:return i}}function o(a,b,c){c===void 0&&(c=p(a));var d=a[b];return{min:Math.min(c[b],d),max:Math.max(q(a)[b],d),ideal:d}}function p(a){switch(a){case h:return i;case i:return j;case j:case k:default:return k}}function q(a){switch(a){case k:return j;case j:return i;case i:case h:default:return h}}function r(b,a){return a?""+a+b.charAt(0).toUpperCase()+b.slice(1):b==="deviceId"?"sourceId":b}function s(a){return Object.keys(a).some(function(a){return a!=="mandatory"&&a!=="optional"})}e.exports=l}),null);
__d("VFRTCgenerateRTCTransactionID",["randomInt"],(function(a,b,c,d,e,f){"use strict";function a(){return String(b("randomInt")(0,4294967294)+1)}e.exports=a}),null);
__d("VFRTCUtils",["invariant","Promise","CurrentUser","FBLogger","MediaRequestSourceApp","RTCConfig","URI","UserAgent","UserMediaRequestError","VFFBRTCUtils","VFRTCAudioTrackNoiseDetector","VFRTCClientFeatureGating","VFRTCConfig","VFRTCEndCallReason","VFRTCgenerateRTCTransactionID","VFRTCLogger","VFRTCMediaDevices","VFRTCMediaStreamValidator","VFRTCScreenSharing","VFRTCUser","VFRTCUserMediaConstraints","VFRTCVideoFilterRenderer","VFRTCVideoTrackActivityDetector","VFWebLogger"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("VFRTCAudioTrackNoiseDetector").DATA_TIMEOUT_ERROR,i=b("VFRTCVideoTrackActivityDetector").PLAYBACK_TIMEOUT_ERROR,j={isGroupCall:function(a){return a.split(":")[0]==="GROUP"},isMessengerCall:function(a){return a.split(":")[0]==="MESSENGER"},isBonfireCall:function(a){return!!this.parseBonfireID(a)},isPeerCall:function(a){return a.split(":")[0]==="PEER"},isAlohaCall:function(a){return a.split(":")[0]==="ALOHA"},isWatchPartyCall:function(a){return a.split(":")[0]==="WATCH"},isSupportedMWCall:function(a){return j.isGroupCall(a)||j.isMessengerCall(a)||j.isAlohaCall(a)||j.isBonfireCall(a)||j.isWatchPartyCall(a)},parseBonfireID:function(a){a=a.match(/BONFIRE:(\d+)/);return a&&a.length>1?a[1]:null},getPeerID:function(a){if(j.isGroupCall(a))throw new Error("Not a P2P call: "+a);a=a.split(":");a=a.slice(1);return a[0]===b("CurrentUser").getID()?a[1]:a[0]},getMessengerCallID:function(a){if(!j.isMessengerCall(a))throw new Error("Not a Messenger call: "+a);return Number(a.split(":")[1])},getThreadID:function(a){return!j.isGroupCall(a)?null:Number(a.split(":")[1])},getSandboxingTierFromURIOrEmpty:function(a,b){b=b+"=";a=a.split(b);if(a[1]){b=a.pop().split("&").shift();return b}return""},createRequestHeader:function(a,c,d,e,f){__p&&__p();a={type:a,transactionId:b("VFRTCgenerateRTCTransactionID")(),retryCount:0,conferenceName:c,clientSessionId:e?e:""};c={};d&&(a.serverInfoData=d);f&&(c.esc_p2p_call_id=f);if(b("VFRTCClientFeatureGating").canUseMultiwaySandbox()){e=window.location.href;d=j.getSandboxingTierFromURIOrEmpty(e,"multiway_www_tier");f=j.getSandboxingTierFromURIOrEmpty(e,"multiway_core_tier");d&&(c.multiwayWwwTier=d);f&&(c.multiwayCoreTier=f)}a.extensions=c;return a},createClientContextMessage:function(a,b){a={num_participants:a,trigger:b};b={header:{topic_DEPRECATED:"client_context",shouldSendToAllUsers:!1},body:{genericMessage:{topic:"client_context",data:JSON.stringify(a)}}};return b},createResponseHeader:function(a,b,c){b={type:a.type,transactionId:a.transactionId,retryCount:0,conferenceName:a.conferenceName,responseStatusCode:b,clientSessionId:c?c:""};a.serverInfoData&&(b.serverInfoData=a.serverInfoData);return b},maybeRemoveVideoConstraint:function(a){return b("VFRTCMediaDevices").enumerateDevices().then(function(c){if(c.some(function(a){return a.kind==="videoinput"})){b("VFWebLogger").logRTCCheckpoint({checkpoint:"[maybeRemoveVideoConstraint] At least one device has videoinput.  Keeping constraints "+JSON.stringify(a)});return a}b("VFWebLogger").logRTCCheckpoint({checkpoint:"[maybeRemoveVideoConstraint] No devices capable of videoinput.",errorDomain:"GetUserMedia",errorType:"Removing video stream by setting video constraint to false."});return babelHelpers["extends"]({},a,{video:!1})})["catch"](function(){return b("Promise").resolve(a)})},getUserMediaWithAudioFallback:function(a,c){__p&&__p();return a.video?j.maybeRemoveVideoConstraint(a).then(function(a){return j.getUserMedia(a,c)})["catch"](function(c){__p&&__p();if(a.video){if(c.name==="NotFoundError"||c.name==="StreamFailedToStart"){var d="Audio Fallback Error Recovery: "+JSON.stringify(c)+" constraints: "+JSON.stringify(a);b("VFWebLogger").logRTCCheckpoint({checkpoint:"[getUserMediaWithAudioFallback] Retrying getUserMedia with no video stream",errorDomain:"GetUserMedia",errorType:d});return j.getUserMedia({video:!1,audio:a.audio})}if(c.name==="OverconstrainedError"){d="Video Constraints Error Recovery: "+JSON.stringify(c)+" constraints: "+JSON.stringify(a);b("VFWebLogger").logRTCCheckpoint({checkpoint:"[getUserMediaWithAudioFallback] Retrying getUserMedia with no video constraints",errorDomain:"GetUserMedia",errorType:d});return j.getUserMedia({video:!0,audio:a.audio})}}d="Error: "+JSON.stringify(c)+" constraints: "+JSON.stringify(a);b("VFWebLogger").logRTCCheckpoint({checkpoint:"[getUserMediaWithAudioFallback] Throwing other error",errorDomain:"GetUserMedia",errorType:d});throw c}):j.getUserMedia(a,c)},getUserMediaWithFallbackToEmptyVideoConstraints:function(a,c){return j.getUserMedia(a,c)["catch"](function(c){if(a.video&&c.name==="OverconstrainedError"){b("VFWebLogger").logRTCCheckpoint({checkpoint:"[getUserMediaWithFallbackToEmptyVideoConstraints] Fallback getUserMedia with no video constraints",errorDomain:"GetUserMedia",errorType:"Original Constraints: "+JSON.stringify(a)});return j.getUserMedia(babelHelpers["extends"]({},a,{video:!0}))}throw c})},getUserScreenMedia:function(a){return b("VFRTCScreenSharing").getUserMedia(a)},getUserMedia:function(a,c){__p&&__p();var d=navigator,e=d.mediaDevices;if(typeof a.video==="object"&&a.video.mediaSource){b("FBLogger")("rtc_www").mustfix("Please use %s instead of %s for screen","VFRTCUtils.getUserScreenMedia()","VFRTCUtils.getUserMedia()");return b("VFRTCScreenSharing").getUserMedia(a)}d=c&&c.optionalConstraintsOnly&&a.video;var f=j._parseConstraints(a,{optionalConstraintsOnly:!!d}),g=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return new(b("Promise"))(function(a,d){e&&typeof e.getUserMedia==="function"?(b("VFWebLogger").logRTCCheckpoint({checkpoint:"[getUserMedia] Newer version"}),a(e.getUserMedia(f).then(function(a){return j._maybeSupportFilteredStreams(a,!!(c&&c.supportFilteredStreams))}))):g?(b("VFWebLogger").logRTCCheckpoint({checkpoint:"[getUserMedia] Backwards compatible version"}),g.call(navigator,f,a,d)):(b("VFWebLogger").logRTCCheckpoint({checkpoint:"[getUserMedia] Not supported"}),d("getUserMedia not supported"))})["catch"](function(a){var c=a.message,d=a.name,e=a.constraint;b("VFWebLogger").logError(null,"GetUserMedia",(d?d:"unknown GetUserMedia error")+":"+(c?" "+c:"")+(e?" "+e:""));throw b("UserMediaRequestError").createFromNative(a)})},_parseConstraints:function(a,c){if(b("UserAgent").isBrowser("Chrome")||b("UserAgent").isBrowser("Opera")){var d=a.audio,e=a.video,f={};d!==void 0&&(f.audio=b("VFRTCUserMediaConstraints").chromify(d));e!==void 0&&(f.video=b("VFRTCUserMediaConstraints").chromify(e,c));return f}return a},_maybeSupportFilteredStreams:function(a,c){return c&&a.getVideoTracks().length>0?b("VFRTCVideoFilterRenderer").initStreamForFilters(a):a},getUserMediaWithValidation:function(a,c,d,e){__p&&__p();c===void 0&&(c={audio:!0,video:!0});d===void 0&&(d=5);e===void 0&&(e={audio:1e3,video:1e3});return new(b("Promise"))(function(f,g){__p&&__p();var k=function d(k){j.getUserMedia(a).then(function(d){return b("VFRTCMediaStreamValidator").validate(d,a,c,e).then(function(a){return f({stream:a})})["catch"](function(a){if(a.message===h||a.message===i)f({stream:d,err:a});else{j.stopMediaStream(d);throw a}})},g)["catch"](function(a){k>0?d(k-1):g(a)})};k(d)})},isFullScreen:function(){return Boolean(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)},requestFullScreen:function(a){a===void 0&&(a=document.documentElement),typeof a.requestFullscreen==="function"?a.requestFullscreen():typeof a.msRequestFullscreen==="function"?a.msRequestFullscreen():typeof a.mozRequestFullScreen==="function"?a.mozRequestFullScreen():typeof a.webkitRequestFullscreen==="function"&&a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)},exitFullScreen:function(){typeof document.exitFullscreen==="function"?document.exitFullscreen():typeof document.msExitFullscreen==="function"?document.msExitFullscreen():typeof document.mozCancelFullScreen==="function"?document.mozCancelFullScreen():typeof document.webkitExitFullscreen==="function"&&document.webkitExitFullscreen()},toggleFullScreen:function(){j.isFullScreen()?j.exitFullScreen():j.requestFullScreen()},endCallReasonFromHangupReason:function(a){return b("VFRTCEndCallReason").fromHangupReason(a).getReasonID()},endCallReasonFromDismissRequest:function(a){return b("VFRTCEndCallReason").fromDismissRequest(a).getReasonID()},endCallReasonFromResponseStatusCode:function(a){return b("VFRTCEndCallReason").fromResponseStatusCode(a).getReasonID()},stopMediaStream:function(a){if(!a.active&&"active"in a)return;a.getTracks().forEach(function(a){a.readyState!=="ended"&&(a.stop(),a.dispatchEvent(new Event("ended")))})},transferAudioTracks:function(a,b){__p&&__p();for(var c=b.getAudioTracks(),d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;a.addTrack(f);b.removeTrack(f)}},payloadParticipantsToRTCUsers:function(a){return a.map(function(a){var c=a.big_image_src||a.image_src;a.fbid||g(0,1174);return new(b("VFRTCUser"))({FBID:a.fbid,profileUrl:new(b("URI"))(a.href),profilePictureUrl:c,isMessengerUser:!!a.is_messenger_user,isPartiesUser:!!a.is_parties_user,userName:a.name,userShortName:a.short_name,vanity:a.vanity||""})})},getStreamVideoResolution:function(a){return new(b("Promise"))(function(c,d){var e=document.createElement("video");b("VFFBRTCUtils").attachMediaStream(e,a);var f=function(){e.removeEventListener("loadedmetadata",g),e.removeEventListener("error",h),b("VFFBRTCUtils").attachMediaStream(e,null)},g=function(){c({height:e.videoHeight,width:e.videoWidth}),f()},h=function(){d(e.error),f()};e.addEventListener("loadedmetadata",g);e.addEventListener("error",h)})},isScreenSharingSupported:function(){return b("UserAgent").isBrowser("Chrome")||this.isVCScreenSharingSupported()},isVCScreenSharingSupported:function(){return b("VFRTCConfig").isVCEndpointCall()&&b("RTCConfig").CollabWhitelistedBrowserGK},filterDevicesByKind:function(a,b){return a?a.filter(function(a){return a.kind===b}):[]},isDevicePresent:function(a,b){return a==null?!1:a.some(function(a){return a.deviceId===b})},streamHasFunctioningVideoTrack:function(a){return a.getVideoTracks().some(function(a){return a.enabled&&!a.muted})}};e.exports=j}),null);
__d("VFRTCCallActionTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CALL:"CALL",CALL_SUCCESS:"CALL_SUCCESS",CALL_ERROR:"CALL_ERROR",INCOMING_CALL_SUCCESS:"INCOMING_CALL_SUCCESS",INIT:"INIT",RESET:"RESET",RESET_FOR_REDIAL:"RESET_FOR_REDIAL",CALL_COLLISION:"CALL_COLLISION",WAIT_FOR_USER_INPUT:"WAIT_FOR_USER_INPUT",SET_CALL_SUMMARY:"SET_CALL_SUMMARY",SET_MW_CALL_TYPE:"SET_MW_CALL_TYPE",SET_LAYOUT:"SET_LAYOUT",SET_DOMINANT_SPEAKER:"SET_DOMINANT_SPEAKER",SET_PINNED_SPEAKER:"SET_PINNED_SPEAKER",SET_USE_DOMINANT_SPEAKE_VIEW:"SET_USE_DOMINANT_SPEAKE_VIEW",SET_GRID_VIEW:"SET_GRID_VIEW",SET_STRIP_VIEW:"SET_STRIP_VIEW",INIT_THREAD:"INIT_THREAD",ON_PARTICIPANT_LEFT:"ON_PARTICIPANT_LEFT",ON_PARTICIPANTS_ADDED:"ON_PARTICIPANTS_ADDED",ADD_PARTICIPANTS_TO_RING:"ADD_PARTICIPANTS_TO_RING",JOIN:"JOIN",JOIN_SUCCESS:"JOIN_SUCCESS",JOIN_ERROR:"JOIN_ERROR",HANGUP:"HANGUP",HANGUP_SUCCESS:"HANGUP_SUCCESS",HANGUP_ERROR:"HANGUP_ERROR",ON_CONFERENCE_STATE:"ON_CONFERENCE_STATE",DISMISS:"DISMISS",END_CALL:"END_CALL",ON_JOIN_REQUEST_SENT:"ON_JOIN_REQUEST_SENT",ON_JOIN_RESPONSE:"ON_JOIN_RESPONSE",ON_RECEIVED_JOIN_RESPONSE:"ON_RECEIVED_JOIN_RESPONSE",ON_PROCESSED_JOIN_RESPONSE:"ON_PROCESSED_JOIN_RESPONSE",ON_SERVER_MEDIA_UPDATE_SUCCESS:"ON_SERVER_MEDIA_UPDATE_SUCCESS",ON_CLIENT_MEDIA_UPDATE_RESPONSE:"ON_CLIENT_MEDIA_UPDATE_RESPONSE",INIT_LOCAL_USER:"INIT_LOCAL_USER",INIT_REMOTE_USERS:"INIT_REMOTE_USERS",UPDATE_REMOTE_USERS:"UPDATE_REMOTE_USERS",UPDATE_LOCAL_USER_INFO:"UPDATE_LOCAL_USER_INFO",ADD_REMOTE_STREAM:"ADD_REMOTE_STREAM",REMOVE_REMOTE_STREAM:"REMOVE_REMOTE_STREAM",REMOVE_ALL_REMOTE_STREAMS:"REMOVE_ALL_REMOTE_STREAMS",ADD_REMOTE_TRACK:"ADD_REMOTE_TRACK",REMOVE_REMOTE_TRACK:"REMOVE_REMOTE_TRACK",AUDIO_MUTED:"AUDIO_MUTED",AUDIO_UNMUTED:"AUDIO_UNMUTED",VIDEO_MUTED:"VIDEO_MUTED",VIDEO_UNMUTED:"VIDEO_UNMUTED",REMOTE_AUDIO_MUTED:"REMOTE_AUDIO_MUTED",REMOTE_AUDIO_UNMUTED:"REMOTE_AUDIO_UNMUTED",REMOTE_VIDEO_MUTED:"REMOTE_VIDEO_MUTED",REMOTE_VIDEO_UNMUTED:"REMOTE_VIDEO_UNMUTED",SELF_VIEW_COLLAPSED:"SELF_VIEW_COLLAPSED",SELF_VIEW_UNCOLLAPSED:"SELF_VIEW_UNCOLLAPSED",ADD_LOCAL_STREAM:"ADD_LOCAL_STREAM",REMOVE_LOCAL_STREAM:"REMOVE_LOCAL_STREAM",REPLACE_LOCAL_STREAM:"REPLACE_LOCAL_STREAM",REMOVE_ALL_LOCAL_STREAMS:"REMOVE_ALL_LOCAL_STREAMS",STOP_LOCAL_STREAM:"STOP_LOCAL_STREAM",ADD_LOCAL_SCREEN_STREAM:"ADD_LOCAL_SCREEN_STREAM",REMOVE_LOCAL_SCREEN_STREAM:"REMOVE_LOCAL_SCREEN_STREAM",REMOVE_ALL_LOCAL_SCREEN_STREAMS:"REMOVE_ALL_LOCAL_SCREEN_STREAMS",REPLACE_LOCAL_SCREEN_STREAM:"REPLACE_LOCAL_SCREEN_STREAM",ADD_REMOTE_SCREEN_STREAM:"ADD_REMOTE_SCREEN_STREAM",REMOVE_REMOTE_SCREEN_STREAM:"REMOVE_REMOTE_SCREEN_STREAM",TOGGLE_REMOTE_STREAM:"TOGGLE_REMOTE_STREAM",SUBMIT_RATING:"SUBMIT_RATING",SUBMIT_FEEDBACK:"SUBMIT_FEEDBACK",SUBMIT_FEEDBACK_OPTIONS:"SUBMIT_FEEDBACK_OPTIONS",SUBMIT_SURVEY_CHOICE:"SUBMIT_SURVEY_CHOICE",RATING_SHOWN:"RATING_SHOWN",FEEDBACK_SHOWN:"FEEDBACK_SHOWN",SET_CONFERENCE_STATE:"SET_CONFERENCE_STATE",SET_END_CALL_REASON:"SET_END_CALL_REASON",FLOOR_STATUS:"FLOOR_STATUS"})}),null);
__d("VFRTCIceStatsParser",[],(function(a,b,c,d,e,f){__p&&__p();var g=null;h.getInstance=function(){"use strict";g||(g=new h());return g};h.prototype.extractIceInfo=function(a){"use strict";var b=[];a=a.split("\r\n");for(var c=0;c<a.length;c++){var d=a[c];this.$1(d)&&b.push({gen:this.$2(d),type:this.$3(d)})}return b};h.prototype.$1=function(a){"use strict";return a.indexOf("candidate:")>-1};h.prototype.$2=function(a){"use strict";var b=0;a=a.match(/generation (\d+)/);a&&(b=parseInt(a[1],10));return b};h.prototype.$3=function(a){"use strict";a=a.match(/typ (host|relay|srflx|prflx)/);if(a)return a[1];else return"unknown"};function h(){"use strict"}e.exports=h}),null);
__d("VFRTCLocalUploadLogLevel",["CurrentUser","VFRTCConstants"],(function(a,b,c,d,e,f){"use strict";var g=b("VFRTCConstants").UploadLogLevel,h={getUploadLogLevel:function(a){return Math.max(h.getLocalUploadLogLevel(),a)},getLocalUploadLogLevel:function(){return b("CurrentUser").isEmployee()?g.LL_DEBUG:g.LL_NONE}};e.exports=h}),null);
__d("VFRTCMediaMetricTracker",["performanceNow"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={count:0,current:-1,first:-1,min:-1,max:-1,mean:-1,median:-1,startedTime:-1,total:-1,updatedTime:-1};function h(){this.$1={},this.$2={},this.$3={}}h.prototype.getVideoStreamReportKeys=function(){return Object.keys(this.$3)};h.prototype.getJitterStreamReportKey=function(){return Object.keys(this.$1)};h.prototype.getAudioStreamReportKeys=function(){return Object.keys(this.$2)};h.prototype.addJitterBufferDelay=function(a,b){b!==null&&b!==void 0&&(this.$1[a]||(this.$1[a]=[]),this.$1[a].push(b))};h.prototype.setVideoMetric=function(a,b,c){c!==null&&c!==void 0&&(this.$3[a]||(this.$3[a]={}),this.$3[a][b]=this.$4(this.$3[a][b],c))};h.prototype.$4=function(a,c){__p&&__p();if(a!==null&&a!==void 0){a.current=c;a.updatedTime=b("performanceNow")();a.total+=c;a.count+=1;a.min=Math.min(a.min,c);a.max=Math.max(a.max,c);a.mean=a.total/a.count;return a}else return{min:c,max:c,total:c,count:1,mean:c,first:c,startedTime:b("performanceNow")(),current:c,updatedTime:b("performanceNow")()}};h.prototype.getVideoMetric=function(a,b){return this.$3[a]?this.$3[a][b]:null};h.prototype.addMetricStat=function(a,b,c){c!==null&&c!==void 0&&(this.$2[a]||(this.$2[a]={}),this.$2[a][b]=this.$4(this.$2[a][b],c))};h.prototype.getMetricStats=function(a,b){return!this.$2[a]?null:this.$2[a][b]};h.prototype.getJitterBufferStats=function(a){__p&&__p();if(!this.$1[a])return g;var b=this.$1[a].length;if(b===0)return g;this.$1[a].sort(function(a,b){return a-b});var c=this.$1[a].reduce(function(a,b){return a+b});if(b%2===0){var d=Math.floor((b-1)/2),e=Math.ceil((b-1)/2);d=(this.$1[a][d]+this.$1[a][e])/2}else d=this.$1[a][(b-1)/2];return{max:this.$1[a][b-1],min:this.$1[a][0],mean:c/b,median:d,total:c,count:b,first:-1,startedTime:-1,current:-1,updatedTime:-1}};h.prototype.toJsonString=function(){return JSON.stringify({stats:this.$2,jitterBufferDelays:this.$1,videoMetric:this.$3})};h.fromJsonString=function(a){var b=new h();try{a=JSON.parse(a),a=a}catch(a){return b}a.stats&&(b.$2=a.stats);a.jitterBufferDelays&&(b.$1=a.jitterBufferDelays);a.videoMetric&&(b.$3=a.videoMetric);return b};e.exports=h}),null);
__d("VFRTCMediaMetricsConst",[],(function(a,b,c,d,e,f){"use strict";a={JITTER:"jitter",ACCELERATE_RATE:"accelerate_rate",DECODING_CNG:"decoding_cng",DECODING_NORMAL:"decoding_normal",DECODING_PLC:"decoding_plc",DECODING_PLC_CNG:"decoding_plc_cng",DISCARD_RATE:"discard_rate",EXPAND_RATE:"expand_rate",PREEMPTIVE_RATE:"preemptive_rate",AUDIO_PACKETS_RECEIVED:"audio_packets_received",AUDIO_PACKETS_RECEIVED_LOST:"audio_packets_received_lost",AUDIO_PACKETS_SENT:"audio_packets_sent",AUDIO_PACKETS_SENT_LOST:"audio_packets_sent_lost",VIDEO_BYTES_RECEIVED:"video_bytes_received",VIDEO_BYTES_SENT:"video_bytes_sent",INBOUND_QP:"inbound_qp",OUTBOUND_QP:"outbound_qp",FRAMES_ENCODED:"frames_encoded",FRAMES_DECODED:"frames_decoded",VIDEOBWE_SEND_BANDWIDTH:"videobwe_send_bandwidth",VIDEOBWE_TRANSMIT_BITRATE:"videobwe_transmit_bitrate",VIDEOBWE_RETRANSMIT_BITRATE:"videobwe_retransmit_bitrate",AUDIO_BYTES_SENT:"audio_bytes_sent",AUDIO_BYTES_RECEIVED:"audio_bytes_received",VIDEO_PKTS_SENT:"video_pkts_sent",VIDEO_PKTS_SEND_LOST:"video_pkts_send_lost",VIDEO_PKTS_RECEIVED:"video_pkts_received",VIDEO_PKTS_RECV_LOST:"video_pkts_receive_lost",AUDIO_RTT_RECEIVED:"audio_rtt_received",AUDIO_RTT_SENT:"audio_rtt_sent"};e.exports=a}),null);
__d("VFRTCCallSummary",["SiteData","UserAgentData","VFRTCConstants","VFRTCIceStatsParser","VFRTCLocalUploadLogLevel","VFRTCLogger","VFRTCMediaMetricsConst","VFRTCMediaMetricTracker","gkx","performanceNow"],(function(a,b,c,d,e,f){__p&&__p();var g=5*60*1e3,h={CALL_STARTED:"started",SENT_OFFER:"s_o",RECV_OFFER:"r_o",SENT_OFFER_ACK:"s_oack",RECV_OFFER_ACK:"r_oack",SENT_RETRIED_OFFER:"s_o2",RECV_RETRIED_OFFER:"r_o2",SENT_RETRIED_OFFER_ACK:"s_oack2",RECV_RETRIED_OFFER_ACK:"r_oack2",SENT_PRANSWER:"s_pr",RECV_PRANSWER:"r_pr",NETWORK_READY:"network_ready",SENT_ANSWER:"s_a",RECV_ANSWER:"r_a",SENT_ANSWER_ACK:"s_aack",RECV_ANSWER_ACK:"r_aack",SENT_RETRIED_ANSWER:"s_a2",RECV_RETRIED_ANSWER:"r_a2",SENT_RETRIED_ANSWER_ACK:"s_aack2",RECV_RETRIED_ANSWER_ACK:"r_aack2",SENT_OK:"s_ok",RECV_OK:"r_ok",CALL_CONNECTED:"connected",CALL_ENDED:"ended",SENT_JOIN_REQUEST:"s_jreq",RECV_JOIN_RESPONSE:"r_jresp",PROC_JOIN_RESPONSE:"p_jresp",RECV_RING_REQUEST:"r_rreq",SENT_RING_RESPONSE:"s_rresp"},i={FELLBACK_TO_AUDIO:"f_a",MEDIA_REQUESTED:"m_r",MEDIA_SUCCEEDED:"m_s",POPUP_OPENED:"opened",PRESSED_ANSWER:"p_a"},j={ESCALATION_IS_AVAILABLE:"esc_available",USER_INITIATED_REQUEST:"out_started",RECEIVED_INCOMING_REQUEST:"inc_started",REJECTED_INVALID_P2P_STATE:"rej_invalid_state",CONNECTING_TO_MULTIWAY:"u_connecting_mw",CONNECTED_TO_MULTIWAY:"u_connected_mw",PEER_CONNECTING_TO_MULTIWAY:"p_connecting_mw",PEER_CONNECTED_TO_MULTIWAY:"p_connected_mw",READY_TO_ESCALATE:"ready_esc",PEER_FAILED_TO_CONNECT_TO_MULTIWAY:"p_fail_conn",MULTIWAY_CALL_ENDED:"mw_call_ended",TIMED_OUT:"timed_out",PEER_ABORTED:"p_aborted",INTERNAL_ERROR:"internal_err"},k={ESCALATION_INITIATION_BUTTON_CLICKED:"esc_init_button",ESCALATION_APPROVED_BUTTON_CLICKED:"esc_appr_button",ESCALATION_DECLINED_BUTTON_CLICKED:"esc_decl_button",USERMEDIA_REQUEST:"media_req",USERMEDIA_SUCCESS:"media_success",USERMEDIA_FAILURE:"media_fail",SENT_ESC_REQUEST:"s_esc_req",RECV_ESC_REQUEST:"r_esc_req",SENT_ESC_REQUEST_ACK:"s_esc_req_ack",RECV_ESC_REQUEST_ACK:"s_esc_req_ack",SENT_ESC_RESPONSE:"s_esc_rep",RECV_ESC_ACCEPT:"r_esc_accept",RECV_ESC_DECLINE:"r_esc_decl",RECV_ESC_TIMEOUT:"r_esc_timeout"},l=[b("VFRTCMediaMetricsConst").ACCELERATE_RATE,b("VFRTCMediaMetricsConst").DISCARD_RATE,b("VFRTCMediaMetricsConst").EXPAND_RATE,b("VFRTCMediaMetricsConst").PREEMPTIVE_RATE];m.nullSummary=function(){"use strict";return new m({peerID:"0",callID:"0",isCaller:!1,callTrigger:"NULL_SUMMARY"})};function m(a){"use strict";this.peerID=String(a.peerID),this.callID=String(a.callID),this.$2=a.isCaller,this.$1=a.version||m.CURRENT_SUMMARY_VERSION,this.$3=b("VFRTCLocalUploadLogLevel").getLocalUploadLogLevel(),this.$14=new Date().valueOf(),this.$4=a.callTrigger||null,this.$5={},this.$7={},this.$8={},this.$13={},this.$33=null,this.$34=null,this.$35=null,this.$16=0,this.$17=0,this.$32=!1,this.$9={},this.$10={},this.$11={},this.$12={},this.$36=null,this.$19=b("performanceNow")(),this.$15=0,this.$6={},this.$18=this.$19,this.$20=0,this.$21={},this.addExtraInfo(b("VFRTCLogger").Key.DEVICE_INFO,this.$43()),this.$44(),this.$45(),this.$46(),this.$23=b("VFRTCIceStatsParser").getInstance(),this.$42=new(b("VFRTCMediaMetricTracker"))(),this.$22=b("VFRTCLogger").getInstance()}m.prototype.toJsonString=function(){"use strict";this.$17=new Date().valueOf();return JSON.stringify({version:this.$1,peerID:this.peerID,callID:this.callID,isCaller:this.$2,uploadLogLevel:this.$3,callType:this.$28,conferenceName:this.$25,joinWithSID:this.$26,activeConn:this.$24,escP2PCallID:this.$27,serverInfoData:this.$29,localVideoDuration:this.$30,remoteVideoDuration:this.$31,startTime:this.$14,trigger:this.$4,signalingTime:this.$5,escStateTimes:this.$7,applicationEventTime:this.$8,videoEscTimes:this.$13,endCallReason:this.$33,endCallSubreason:this.$34,isRemoteEnded:this.$35,lastUpdatedTime:this.$16,lastSerializedTime:this.$17,unsetOnRetrieve:this.$32,openCount:this.$20,extraInfo:this.$21,gen0IceSentCount:this.$9,gen0IceReceivedCount:this.$10,iceSentCount:this.$11,iceReceivedCount:this.$12,connectionType:this.$36,mediaMetricStats:this.$42.toJsonString(),newSignalingTime:this.$6,accumulatedCallTime:this.$47(),deviceCharged:this.$38,videoReceivedCodec:this.$39,videoSentCodec:this.$40,audioSentCodec:this.$41,relayIP:this.$37})};m.fromJsonString=function(a){"use strict";__p&&__p();try{a=JSON.parse(a)}catch(a){return null}if(a.version<m.OLDEST_SUPPORTED_SUMMARY_VERSION)return null;if(!Object.prototype.hasOwnProperty.call(a,"peerID")||!Object.prototype.hasOwnProperty.call(a,"callID")||!Object.prototype.hasOwnProperty.call(a,"isCaller")||!Object.prototype.hasOwnProperty.call(a,"startTime")||!Object.prototype.hasOwnProperty.call(a,"trigger")||!Object.prototype.hasOwnProperty.call(a,"signalingTime")||!Object.prototype.hasOwnProperty.call(a,"endCallReason")||!Object.prototype.hasOwnProperty.call(a,"isRemoteEnded")||!Object.prototype.hasOwnProperty.call(a,"lastUpdatedTime")||!Object.prototype.hasOwnProperty.call(a,"lastSerializedTime"))return null;var c=new m({peerID:a.peerID,callID:a.callID,isCaller:a.isCaller});c.$1=a.version;c.$3=a.uploadLogLevel;c.$14=a.startTime;c.$4=a.trigger;c.$5=a.signalingTime;c.$33=a.endCallReason;c.$34=a.endCallSubreason;c.$35=a.isRemoteEnded;c.$16=a.lastUpdatedTime;c.$17=a.lastSerializedTime;c.$26=a.joinWithSID;a.callType&&(c.$28=a.callType);a.conferenceName&&(c.$25=a.conferenceName);a.escP2PCallID&&(c.$27=a.escP2PCallID);a.activeConn&&(c.$24=a.activeConn);a.serverInfoData&&(c.$29=a.serverInfoData);a.localVideoDuration&&(c.$30=a.localVideoDuration);a.remoteVideoDuration&&(c.$31=a.remoteVideoDuration);a.unsetOnRetrieve&&(c.$32=a.unsetOnRetrieve);a.openCount&&(c.$20=a.openCount);a.extraInfo&&(c.$21=a.extraInfo);a.gen0IceSentCount&&(c.$9=a.gen0IceSentCount);a.gen0IceReceivedCount&&(c.$10=a.gen0IceReceivedCount);a.iceSentCount&&(c.$11=a.iceSentCount);a.iceReceivedCount&&(c.$12=a.iceReceivedCount);a.newSignalingTime&&(c.$6=a.newSignalingTime);a.accumulatedCallTime&&(c.$15=a.accumulatedCallTime);a.escStateTimes&&(c.$7=a.escStateTimes);a.applicationEventTime&&(c.$8=a.applicationEventTime);a.videoEscTimes&&(c.$13=a.videoEscTimes);a.mediaMetricStats&&(c.$42=b("VFRTCMediaMetricTracker").fromJsonString(a.mediaMetricStats));a.connectionType&&(c.$36=a.connectionType);a.deviceCharged&&(c.$38=a.deviceCharged);a.videoReceivedCodec!==null&&(c.$39=a.videoReceivedCodec);a.videoSentCodec!==null&&(c.$40=a.videoSentCodec);a.audioSentCodec!==null&&(c.$41=a.audioSentCodec);a.relayIP!==null&&a.relayIP!==void 0&&(c.$37=a.relayIP);return c};m.restoreOrInitialize=function(a,c,d,e,f,g){"use strict";c=String(c);d=String(d);a=a.retrieveCallSummary(c,d);!a?(a=new m({peerID:c,callID:d,isCaller:e}),f?(a.onFullMessageReceived({msg:f}),a.onOfferAckSent(f)):a.onCallStarted(g||b("VFRTCLogger").Trigger.UNKNOWN),b("VFRTCLogger").getInstance().logError(c,d,"Missing call summary from storage")):a.$32&&(a.$33=null,a.$34=null,a.$35=null,delete a.$5[h.CALL_ENDED],delete a.$6[h.CALL_ENDED],a.$19=0,a.$32=null);return a};m.logSavedSummaries=function(a){"use strict";__p&&__p();var c=a.getLoggableSummaries(),d=c.length;if(d<=0)return;var e=b("VFRTCLogger").getInstance(),f=[];for(var g=0;g<d;g++){var h=c[g];e.logEndCallSummary(h);f.push({peerID:h.peerID,callID:h.callID})}a.removeCallSummaries(f);e.logToConsole("Logged pending summaries: "+d)};m.prototype.logThisSummary=function(a){"use strict";var c=b("VFRTCLogger").getInstance();a.retrieveCallSummary(this.peerID,this.callID)!=null&&(c.logEndCallSummary(this),a.removeCallSummary(this.peerID,this.callID),c.logToConsole("Logged active summary"))};m.prototype.isNull=function(){"use strict";var a=m.CANONICAL_NULL_SUMMARY;return this.peerID===a.peerID&&this.callID===a.callID&&this.isCaller()===a.isCaller()&&this.getCallTrigger()===a.getCallTrigger()};m.prototype.save=function(a){"use strict";var c=b("performanceNow")(),d=c-this.$18;if(d>g){this.$22.logInfo(this.peerID,this.callID,"Summary too old: "+d);return}a.storeCallSummary(this.peerID,this.callID,this);this.$18=c};m.prototype.getVersion=function(){"use strict";return this.$1};m.prototype.getLastUpdatedTime=function(){"use strict";return this.$16};m.prototype.setLastUpdatedTime=function(a){"use strict";this.$16=a};m.prototype.getExtraInfo=function(){"use strict";return this.$21};m.prototype.getCallTrigger=function(){"use strict";return this.$4};m.prototype.addExtraInfo=function(a,b){"use strict";this.$21[a]=b,this.$46()};m.prototype.isCaller=function(){"use strict";return this.$2};m.prototype.isNetworkReady=function(){"use strict";if(this.$5[h.NETWORK_READY])return!0;else return!1};m.prototype.isAnswerReceived=function(){"use strict";if(this.$5[h.RECV_ANSWER])return!0;else return!1};m.prototype.onCallStarted=function(a){"use strict";this.$4=a,this.$48(h.CALL_STARTED),this.$46()};m.prototype.setCallTrigger=function(a){"use strict";this.$4=a,this.$46()};m.prototype.onPopupOpened=function(){"use strict";this.$49(i.POPUP_OPENED),this.$20++,this.$46()};m.prototype.onPressedAnswer=function(){"use strict";this.$49(i.PRESSED_ANSWER),this.$46()};m.prototype.onMediaRequested=function(){"use strict";this.$49(i.MEDIA_REQUESTED),this.$46()};m.prototype.onMediaSucceeded=function(){"use strict";this.$49(i.MEDIA_SUCCEEDED),this.$46()};m.prototype.onFellbackToAudio=function(){"use strict";this.$49(i.FELLBACK_TO_AUDIO),this.$46()};m.prototype.setConnectionType=function(a){"use strict";this.$36=a,this.$46()};m.prototype.setUploadLogLevel=function(a){"use strict";this.$3=a,this.$46()};m.prototype.getCallType=function(){"use strict";return this.$28};m.prototype.setCallType=function(a){"use strict";this.$28=a,this.addExtraInfo(b("VFRTCLogger").Key.CALL_TYPE,a),this.$46()};m.prototype.setVideoDurations=function(a,b){"use strict";this.$30=a,this.$31=b,this.$46()};m.prototype.setScreenDuration=function(a){"use strict";this.addExtraInfo(b("VFRTCLogger").Key.SCREEN_DURATION,a)};m.prototype.setConferenceName=function(a){"use strict";this.$25=a,this.$46()};m.prototype.setTotalVideoFilterDuration=function(a){"use strict";this.addExtraInfo(b("VFRTCLogger").Key.VIDEO_DURATION_WITH_FILTER,Math.ceil(a).toString())};m.prototype.setCoExperienceEffectDuration=function(a){"use strict";this.addExtraInfo(b("VFRTCLogger").Key.EFFECT_TOTAL_DURATION,Math.ceil(a).toString())};m.prototype.setEffectCount=function(a){"use strict";this.addExtraInfo(b("VFRTCLogger").Key.EFFECT_COUNT,a.toString())};m.prototype.setJoinWithSID=function(a){"use strict";this.$26=a,this.$46()};m.prototype.setServerInfoData=function(a){"use strict";this.$29=a,this.$46()};m.prototype.setActiveConnection=function(a){"use strict";this.$24=a,this.$46()};m.prototype.setEscalationP2PCallID=function(a){"use strict";this.$27=a,this.$46()};m.prototype.onOfferAckSent=function(a){"use strict";this.onMessageSent({type:b("VFRTCConstants").PayloadType.OFFER_ACK,flag:a.flag})};m.prototype.onMessageSent=function(a){"use strict";__p&&__p();var c=a.flag===1;switch(a.type){case b("VFRTCConstants").PayloadType.OFFER:this.$50(c,h.SENT_OFFER,h.SENT_RETRIED_OFFER);this.$51(a,this.$9,this.$11);break;case b("VFRTCConstants").PayloadType.ANSWER:this.$50(c,h.SENT_ANSWER,h.SENT_RETRIED_ANSWER);this.$51(a,this.$9,this.$11);break;case b("VFRTCConstants").PayloadType.OK:this.$48(h.SENT_OK);break;case b("VFRTCConstants").PayloadType.PRANSWER:this.$48(h.SENT_PRANSWER);break;case b("VFRTCConstants").PayloadType.OFFER_ACK:this.$50(c,h.SENT_OFFER_ACK,h.SENT_RETRIED_OFFER_ACK);break;case b("VFRTCConstants").PayloadType.ANSWER_ACK:this.$50(c,h.SENT_ANSWER_ACK,h.SENT_RETRIED_ANSWER_ACK);break;case b("VFRTCConstants").PayloadType.ICE_CANDIDATE:this.$51(a,this.$9,this.$11);break;case b("VFRTCConstants").PayloadType.ACK:a.ack_type===b("VFRTCConstants").PayloadType.VIDEO_REQUEST&&this.$52(k.SENT_ESC_REQUEST_ACK);break;case b("VFRTCConstants").PayloadType.VIDEO_REQUEST:a.ack_id?this.$52(k.SENT_ESC_RESPONSE):this.$52(k.SENT_ESC_REQUEST);break;default:}this.$46()};m.prototype.$51=function(a,b,c){"use strict";var d,e=null;a=this.$23.extractIceInfo(a.sdp);for(var f=0;f<a.length;f++)d=a[f].gen,e=a[f].type,d===0&&this.$53(b,e),this.$53(c,e)};m.prototype.$53=function(a,b){"use strict";!a[b]?a[b]=1:a[b]+=1};m.prototype.$54=function(a){"use strict";this.addExtraInfo(b("VFRTCLogger").Key.PEER_IS_MOBILE,a.isFromMobile()?"1":"0")};m.prototype.onFullMessageReceived=function(a){"use strict";__p&&__p();var c=a.msg,d=c.flag===1;switch(c.type){case b("VFRTCConstants").PayloadType.OFFER:this.$54(a);this.$50(d,h.RECV_OFFER,h.RECV_RETRIED_OFFER);this.$51(c,this.$10,this.$12);break;case b("VFRTCConstants").PayloadType.ANSWER:this.$54(a);this.$50(d,h.RECV_ANSWER,h.RECV_RETRIED_ANSWER);this.$51(c,this.$10,this.$12);break;case b("VFRTCConstants").PayloadType.OK:this.$48(h.RECV_OK);break;case b("VFRTCConstants").PayloadType.PRANSWER:this.$48(h.RECV_PRANSWER);break;case b("VFRTCConstants").PayloadType.OFFER_ACK:this.$50(d,h.RECV_OFFER_ACK,h.RECV_RETRIED_OFFER_ACK);break;case b("VFRTCConstants").PayloadType.ANSWER_ACK:this.$50(d,h.RECV_ANSWER_ACK,h.RECV_RETRIED_ANSWER_ACK);break;case b("VFRTCConstants").PayloadType.ICE_CANDIDATE:this.$51(c,this.$10,this.$12);break;case b("VFRTCConstants").PayloadType.ACK:c.ack_type===b("VFRTCConstants").PayloadType.VIDEO_REQUEST&&this.$52(k.RECV_ESC_REQUEST_ACK);break;case b("VFRTCConstants").PayloadType.VIDEO_REQUEST:c.ack_id?c.videoon||c.reqVideoOn?this.$52(k.RECV_ESC_ACCEPT):this.$52(k.RECV_ESC_DECLINE):c.videoon||c.reqVideoOn?this.$52(k.RECV_ESC_REQUEST):this.$52(k.RECV_ESC_TIMEOUT);break;default:}this.$46()};m.prototype.onMsgAckReceived=function(a,b){"use strict";a=a.msg.flag===1;b?this.$50(a,h.RECV_OFFER_ACK,h.RECV_RETRIED_OFFER_ACK):this.$50(a,h.RECV_ANSWER_ACK,h.RECV_RETRIED_ANSWER_ACK)};m.prototype.onNetworkReady=function(){"use strict";this.$48(h.NETWORK_READY),this.$46()};m.prototype.onCallConnected=function(){"use strict";this.$48(h.CALL_CONNECTED),this.$46()};m.prototype.onCallEnded=function(a,b,c,d){"use strict";this.$32=c,this.$33=a,this.$34=d,this.$35=b,this.$48(h.CALL_ENDED),this.$46()};m.prototype.setOfferSentTime=function(){"use strict";this.$48(h.SENT_OFFER)};m.prototype.setOfferAckReceivedTime=function(){"use strict";this.$48(h.RECV_OFFER_ACK)};m.prototype.setAnswerSentTime=function(){"use strict";this.$48(h.SENT_ANSWER)};m.prototype.setAnswerReceivedTime=function(){"use strict";this.$48(h.RECV_ANSWER)};m.prototype.setJoinRequestSent=function(){"use strict";this.$48(h.SENT_JOIN_REQUEST),this.$46()};m.prototype.setJoinResponseReceived=function(){"use strict";this.$48(h.RECV_JOIN_RESPONSE),this.$46()};m.prototype.setJoinResponseProcessed=function(){"use strict";this.$48(h.PROC_JOIN_RESPONSE),this.$46()};m.prototype.setRingRequestReceived=function(){"use strict";this.$48(h.RECV_RING_REQUEST),this.$46()};m.prototype.setRingResponseSent=function(){"use strict";this.$48(h.SENT_RING_RESPONSE),this.$46()};m.prototype.setEscalationAvailable=function(){"use strict";this.$55(j.ESCALATION_IS_AVAILABLE)};m.prototype.setEscalationInitiated=function(){"use strict";this.$55(j.USER_INITIATED_REQUEST)};m.prototype.setReceivedEscalationRequest=function(){"use strict";this.$55(j.RECEIVED_INCOMING_REQUEST)};m.prototype.setInvalidP2PEscalationState=function(){"use strict";this.$55(j.REJECTED_INVALID_P2P_STATE)};m.prototype.setEscalationConnectingToMultiway=function(){"use strict";this.$55(j.CONNECTING_TO_MULTIWAY)};m.prototype.setEscalationConnectedToMultiway=function(){"use strict";this.$55(j.CONNECTED_TO_MULTIWAY)};m.prototype.setEscalationPeerConnectingToMultiway=function(){"use strict";this.$55(j.PEER_CONNECTING_TO_MULTIWAY)};m.prototype.setEscalationPeerConnectedToMultiway=function(){"use strict";this.$55(j.PEER_CONNECTED_TO_MULTIWAY)};m.prototype.setReadyToEscalate=function(){"use strict";this.$55(j.READY_TO_ESCALATE)};m.prototype.setEscalationPeerFailedToConnectToMultiway=function(){"use strict";this.$55(j.PEER_FAILED_TO_CONNECT_TO_MULTIWAY)};m.prototype.setEscalationTimedOut=function(){"use strict";this.$55(j.TIMED_OUT)};m.prototype.setVidEscalationInitClick=function(){"use strict";this.$52(k.ESCALATION_INITIATION_BUTTON_CLICKED)};m.prototype.setVidEscalationAcceptedClick=function(){"use strict";this.$52(k.ESCALATION_APPROVED_BUTTON_CLICKED)};m.prototype.setVidEscalationDeclinedClick=function(){"use strict";this.$52(k.ESCALATION_DECLINED_BUTTON_CLICKED)};m.prototype.setVidEscalationMediaRequested=function(){"use strict";this.$52(k.USERMEDIA_REQUEST)};m.prototype.setVidEscalationMediaSuccess=function(){"use strict";this.$52(k.USERMEDIA_SUCCESS)};m.prototype.setVidEscalationMediaFailed=function(){"use strict";this.$52(k.USERMEDIA_FAILURE)};m.prototype.setVideoCapabilities=function(a){"use strict";this.addExtraInfo(b("VFRTCLogger").Key.VIDEO_CAPABILITIES,a)};m.prototype.setMediaInputs=function(a){"use strict";this.addExtraInfo(b("VFRTCLogger").Key.MEDIA_INPUTS,a)};m.prototype.getVideoReceivedCodec=function(){"use strict";return this.$39};m.prototype.setVideoReceivedCodec=function(a){"use strict";this.$39=a};m.prototype.getVideoSentCodec=function(){"use strict";return this.$40};m.prototype.setVideoSentCodec=function(a){"use strict";this.$40=a};m.prototype.getAudioSentCodec=function(){"use strict";return this.$41};m.prototype.setAudioSentCodec=function(a){"use strict";this.$41=a};m.prototype.toString=function(){"use strict";var a={};a.core_metrics=this.$56();a.time_series=null;return JSON.stringify(a)};m.prototype.$56=function(){"use strict";__p&&__p();var a={};a.ver=this.$1;a.log_level=b("VFRTCConstants").uploadLogLevelString(this.$3);a.caller=this.$2;a.call_type=this.$28;a.active_conn=this.$24;a.app_event_times=this.$8;a.conf_name=this.$25;a.join_with_sid=this.$26;a.esc_p2p_call_id=this.$27;a.esc_state_times=this.$7;a.vid_esc_times=this.$13;a.serv_info=this.$29;a.conn=this.$57();a.peer_id=this.peerID;a.has_video=!0;a.open_count=this.$20;a.signaling=this.$58();a.sender=this.$59();a.receiver=this.$60();a.end=this.$61();a.video=this.$62();a.push_phase=b("SiteData").push_phase;a.DebugAudioMetrics=this.$63();a.device_charged=this.$38;return a};m.prototype.$63=function(){"use strict";return{NetworkReceive:{jb_nm:this.$64()}}};m.prototype.$64=function(){"use strict";var a={},b=this.$42.getAudioStreamReportKeys().pop();l.forEach(function(c){var d=this.$42.getMetricStats(b,c);d&&(a[c]={m:d.min,M:d.max,avg:d.mean})}.bind(this));var c=this.$42.getJitterBufferStats(b);a.neteq={maxWait:c.max,meanWait:c.mean||0,mediaWait:c.median||0,minWait:c.min};return a};m.prototype.$57=function(){"use strict";var a={dtls:1},b=this.$59();b.avgrtt&&(a.avgrtt=b.avgrtt,a.maxrtt=b.maxrtt,a.minrtt=b.minrtt);this.$37!==null&&(a.relay_ip=this.$37);return a};m.prototype.$58=function(){"use strict";var a={};this.$4&&(a.trigger=this.$4);a.start_time=this.$14;a.time_from_start=this.$5;a.new_time_from_start=this.$6;var b=this.$65();b>0&&(a.duration=b);return a};m.prototype.$65=function(){"use strict";var a=this.$6[h.CALL_CONNECTED]||this.$6[h.NETWORK_READY];if(!a)return 0;var b=this.$6[h.CALL_ENDED]||this.$47();return Math.max(0,b-a)};m.prototype.$59=function(){"use strict";__p&&__p();var a={},c=this.$42.getAudioStreamReportKeys();c.some(function(c){c=this.$42.getMetricStats(c,b("VFRTCMediaMetricsConst").AUDIO_BYTES_SENT);if(c!=null){a.bytes=c.current;var d=c.updatedTime-c.startedTime;d>0&&(a.ube_avg=(c.current-c.first)*8/d*1e3);return!0}return!1}.bind(this));c.some(function(c){c=this.$42.getMetricStats(c,b("VFRTCMediaMetricsConst").AUDIO_PACKETS_SENT_LOST);if(c){a.plost=c.current;return!0}return!1}.bind(this));c.some(function(c){c=this.$42.getMetricStats(c,b("VFRTCMediaMetricsConst").AUDIO_PACKETS_SENT);if(c){a.psent=c.current;return!0}return!1}.bind(this));c.some(function(c){c=this.$42.getMetricStats(c,b("VFRTCMediaMetricsConst").AUDIO_RTT_SENT);if(c){a.avgrtt=c.mean;a.maxrtt=c.max;a.minrtt=c.min;return!0}return!1}.bind(this));this.$9&&(a.ice_g0=this.$9);this.$11&&(a.ice=this.$11);this.$41!=null&&this.$41!==""&&(a.codec={www:this.$41});return a};m.prototype.$60=function(){"use strict";__p&&__p();var a={},c=this.$42.getAudioStreamReportKeys();c.some(function(c){__p&&__p();var d=this.$42.getMetricStats(c,b("VFRTCMediaMetricsConst").DECODING_PLC),e=this.$42.getMetricStats(c,b("VFRTCMediaMetricsConst").DECODING_PLC_CNG),f=this.$42.getMetricStats(c,b("VFRTCMediaMetricsConst").DECODING_CNG);c=this.$42.getMetricStats(c,b("VFRTCMediaMetricsConst").DECODING_NORMAL);if(f!=null&&c!=null&&d!=null&&e!=null){a.dec_cng=f.current;a.dec_normal=c.current;a.dec_plc=d.current;a.dec_plc_cng=e.current;a.neteq_calls=a.dec_cng+a.dec_normal+a.dec_plc+a.dec_plc_cng;return!0}return!1}.bind(this));c.some(function(c){c=this.$42.getMetricStats(c,b("VFRTCMediaMetricsConst").AUDIO_BYTES_RECEIVED);if(c){a.bytes=c.current;var d=c.updatedTime-c.startedTime;d>0&&(a.dbe_avg=(c.current-c.first)*8/d*1e3);return!0}return!1}.bind(this));c.some(function(c){c=this.$42.getMetricStats(c,b("VFRTCMediaMetricsConst").AUDIO_PACKETS_RECEIVED_LOST);if(c){a.plost=c.current;return!0}return!1}.bind(this));c.some(function(c){c=this.$42.getMetricStats(c,b("VFRTCMediaMetricsConst").AUDIO_PACKETS_RECEIVED);if(c){a.precv=c.current;return!0}return!1}.bind(this));c.some(function(c){c=this.$42.getMetricStats(c,b("VFRTCMediaMetricsConst").AUDIO_RTT_RECEIVED);if(c){a.avgrtt=c.mean;a.maxrtt=c.max;a.minrtt=c.min;return!0}return!1}.bind(this));this.$10&&(a.ice_g0=this.$10);this.$12&&(a.ice=this.$12);return a};m.prototype.$61=function(){"use strict";var a={};this.$33!=null&&(a.end_call_reason_string=b("VFRTCConstants").callEndReasonString(this.$33),this.$34!==null&&(a.end_call_subreason_string=this.$34),a.remote_ended=this.$35);this.$36&&(a.conn_type=this.$36);return a};m.prototype.$62=function(){"use strict";var a={ename:this.$40,eqps:this.$66(),frames:this.$67(),psent:null,plost:null};return{sender:this.$68(a),receiver:this.$69(),ld:this.$30,rd:this.$31,bwe:this.$70()}};m.prototype.$66=function(){"use strict";__p&&__p();var a=null,c=this.$42.getVideoStreamReportKeys();c.some(function(c){c=this.$42.getVideoMetric(c,b("VFRTCMediaMetricsConst").OUTBOUND_QP);if(c){a=c.current;return!0}return!1}.bind(this));return a};m.prototype.$67=function(){"use strict";__p&&__p();var a=null,c=this.$42.getVideoStreamReportKeys();c.some(function(c){c=this.$42.getVideoMetric(c,b("VFRTCMediaMetricsConst").FRAMES_ENCODED);if(c){a=c.current;return!0}return!1}.bind(this));return a};m.prototype.$70=function(){"use strict";__p&&__p();var a={avg_enc_bitrate:this.$71(),avg_send_bw:null,avg_trans_bitrate:null,avg_retrans_bitrate:null},c=this.$42.getVideoStreamReportKeys();c.some(function(c){var d=this.$42.getVideoMetric(c,b("VFRTCMediaMetricsConst").VIDEOBWE_SEND_BANDWIDTH),e=this.$42.getVideoMetric(c,b("VFRTCMediaMetricsConst").VIDEOBWE_TRANSMIT_BITRATE);c=this.$42.getVideoMetric(c,b("VFRTCMediaMetricsConst").VIDEOBWE_RETRANSMIT_BITRATE);if(d&&e&&c){a.avg_send_bw=d.mean;a.avg_trans_bitrate=e.mean;a.avg_retrans_bitrate=c.mean;return!0}return!1}.bind(this));return a};m.prototype.$71=function(){"use strict";__p&&__p();var a=this.$42.getVideoStreamReportKeys(),c=null;a.some(function(a){a=this.$42.getVideoMetric(a,b("VFRTCMediaMetricsConst").VIDEO_BYTES_SENT);if(a){var d=a.current-a.first;a=a.updatedTime-a.startedTime;a>0&&(c=d*8/a*1e3);return!0}return!1}.bind(this));return c};m.prototype.$68=function(a){"use strict";__p&&__p();var c=this.$42.getVideoStreamReportKeys();c.some(function(c){var d=this.$42.getVideoMetric(c,b("VFRTCMediaMetricsConst").VIDEO_PKTS_SENT);c=this.$42.getVideoMetric(c,b("VFRTCMediaMetricsConst").VIDEO_PKTS_SEND_LOST);if(d&&c){a.psent=d.current;a.plost=c.current;return!0}return!1}.bind(this));return a};m.prototype.$69=function(){"use strict";__p&&__p();var a={dec_bytes:null,dec_time:null,dname:this.$39,frd:null,precv:null,plost:null,qps:null},c=this.$42.getVideoStreamReportKeys();c.some(function(c){var d=this.$42.getVideoMetric(c,b("VFRTCMediaMetricsConst").VIDEO_PKTS_RECEIVED);c=this.$42.getVideoMetric(c,b("VFRTCMediaMetricsConst").VIDEO_PKTS_RECV_LOST);if(d&&c){a.precv=d.current;a.plost=c.current;return!0}return!1}.bind(this));c.some(function(c){c=this.$42.getVideoMetric(c,b("VFRTCMediaMetricsConst").VIDEO_BYTES_RECEIVED);if(c){a.dec_bytes=c.current-c.first;a.dec_time=c.updatedTime-c.startedTime;return!0}return!1}.bind(this));c.some(function(c){var d=this.$42.getVideoMetric(c,b("VFRTCMediaMetricsConst").FRAMES_DECODED);c=this.$42.getVideoMetric(c,b("VFRTCMediaMetricsConst").INBOUND_QP);if(d&&c){a.frd=d.current;a.qps=c.current;return!0}return!1}.bind(this));return a};m.prototype.$72=function(){"use strict";return new Date().valueOf()-this.$14};m.prototype.$47=function(){"use strict";var a=b("performanceNow")()-this.$19;return Math.floor(this.$15+a)};m.prototype.$48=function(a){"use strict";if(this.$5[a])return;this.$5[a]=this.$72();this.$6[a]=this.$47()};m.prototype.$55=function(a){"use strict";if(this.$7[a])return;this.$7[a]=this.$72()};m.prototype.$49=function(a){"use strict";if(this.$8[a])return;this.$8[a]=this.$72()};m.prototype.$52=function(a){"use strict";if(this.$13[a])return;this.$13[a]=this.$72()};m.prototype.setDeviceCharged=function(a){"use strict";this.$38=a};m.prototype.$50=function(a,b,c){"use strict";a?this.$48(c):this.$48(b)};m.prototype.$46=function(){"use strict";this.$16=new Date().valueOf()};m.prototype.$43=function(){"use strict";var a=b("UserAgentData").platformName;window.navigator.userAgent.toLowerCase().includes("mobile")&&(a+=" Mobile");return{device:b("UserAgentData").deviceName,os:a,os_version:b("UserAgentData").platformFullVersion,browser:b("UserAgentData").browserName,browser_version:b("UserAgentData").browserFullVersion,screen_height:window.screen.availHeight,screen_width:window.screen.availWidth,user_agent:window.navigator.userAgent}};m.prototype.$44=function(){"use strict";window.navigator.connection!=null&&window.navigator.connection.effectiveType!=null&&this.addExtraInfo(b("VFRTCLogger").Key.CONNECTION_EFFECTIVE_TYPE,window.navigator.connection.effectiveType)};m.prototype.$45=function(){"use strict";navigator.hardwareConcurrency!=null&&this.addExtraInfo(b("VFRTCLogger").Key.CPU_CORES,navigator.hardwareConcurrency),window.navigator.deviceMemory!=null&&this.addExtraInfo(b("VFRTCLogger").Key.DEVICE_MEMORY,window.navigator.deviceMemory),this.addExtraInfo(b("VFRTCLogger").Key.DEVICE_PIXEL_RATIO,window.devicePixelRatio)};m.prototype.getCallDuration=function(){"use strict";return this.$65()};m.prototype.getConnectedStartTime=function(){"use strict";return this.$5[h.CALL_CONNECTED]?this.$5[h.CALL_CONNECTED]+this.$14:0};m.prototype.getCurrentTimeFromCallConnected=function(){"use strict";var a=this.$6[h.CALL_CONNECTED];return this.$47()-a};m.prototype.getMediaMetricTracker=function(){"use strict";return this.$42};m.prototype.getEndCallReason=function(){"use strict";return this.$33!=null?b("VFRTCConstants").callEndReasonString(this.$33):"Unknown"};m.prototype.setRelayIP=function(a){"use strict";this.$37=a};m.CANONICAL_NULL_SUMMARY=Object.freeze(m.nullSummary());m.OLDEST_SUPPORTED_SUMMARY_VERSION=19;m.CURRENT_SUMMARY_VERSION=24;m.REPORT_KEY="reportID";e.exports=m}),null);
__d("VFRTCCallSummaryStore",["CacheStorage","FBLogger","VFRTCCallSummary","VFRTCLogger","areEqual","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="localstorage",h="RTC_CALL_SUMMARY_",i="summary",j=2e3,k=3,l=3*60*1e3,m=null;n.getInstance=function(){m||(m=new n());return m};function n(){this.$1=new(b("CacheStorage"))(g,h),this.$2=b("VFRTCLogger").getInstance()}n.prototype.storeCallSummary=function(a,c,d){__p&&__p();if(d.isNull()){b("FBLogger")("rtweb").mustfix("Storing invalid VFRTCCallSummary!");return}var e=this;this.$3(function(b){__p&&__p();b[a]||(b[a]={});var f=b[a][c];if(f){f=e.$4(f);if(f&&f.getLastUpdatedTime()>d.getLastUpdatedTime()){e.$2.logToConsole("Outdated summaries");return null}}b[a][c]=e.$5(d);return b},e.$2.logError.bind(e.$2,a,c))};n.prototype.retrieveCallSummary=function(a,b){var c=this.getCallSummaries(),d=null;c[a]&&(d=c[a][b]);if(d)return this.$4(d);else return null};n.prototype.removeCallSummary=function(a,b){this.removeCallSummaries([{peerID:a,callID:b}])};n.prototype.removeCallSummaries=function(a){this.$3(function(b){var c=a.length;for(var d=0;d<c;d++){var e=a[d].peerID,f=a[d].callID;b[e]&&b[e][f]&&(delete b[e][f],this.$6(b[e])&&delete b[e])}return b}.bind(this),this.$2.logError.bind(this.$2,null,null))};n.prototype.getLoggableSummaries=function(){var a=this.getCallSummaries(),b=[];for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c))for(var d in a[c])if(Object.prototype.hasOwnProperty.call(a[c],d)){var e=this.$4(a[c][d],l);e&&b.push(e)}return b};n.prototype.$6=function(a){for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b))return!1;return!0};n.prototype.$5=function(a){a={__t:Date.now(),__d:a.toJsonString()};return a};n.prototype.$4=function(a,c){return a&&(!c||Date.now()-a.__t>=c)?b("VFRTCCallSummary").fromJsonString(a.__d):null};n.prototype.getCallSummaries=function(){var a=this.$1.get(i)||{};return a};n.prototype.$3=function(a,c,d,e){__p&&__p();d===void 0&&(d=k);(d===void 0||d===null)&&(d=k);var f=this.getCallSummaries(),g=this.getCallSummaries();f=a(f);if(f===null)return;var h=this.getCallSummaries();if(b("areEqual")(g,h))this.$1.set(i,f);else if(d>0){c("Retry lock");if(e){var l=this;b("setTimeout")(function(){l.$3(a,c,d-1,!0)},j)}else this.$3(a,c,d-1,!0)}else c("Failed to lock")};e.exports=n}),null);
__d("VFRTCCallReducer",["invariant","FBRTCParticipantCallState","FBRTCRtcResponseStatusCode","MercuryParticipantTypes","RTCConferenceState","RTCGroupCallEscalationActionTypes","URI","VFRTCCallActionTypes","VFRTCCallStore","VFRTCCallStoreState","VFRTCCallSummary","VFRTCCallSummaryStore","VFRTCConstants","VFRTCScreenSharingUtils","VFRTCUser","VFRTCUtils","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("VFRTCConstants").SignalingProtocol;function a(a,c){switch(c.type){case b("VFRTCCallActionTypes").INIT:return a.set("callInfo",a.callInfo.set("callID",c.callID).set("conferenceName",c.conferenceName).set("serverInfoData",c.serverInfoData).set("protocol",c.protocol));case b("VFRTCCallActionTypes").RESET:return new(b("VFRTCCallStoreState"))();case b("VFRTCCallActionTypes").RESET_FOR_REDIAL:return a.set("callInfo",a.callInfo.set("conferenceState",b("RTCConferenceState").NEW).set("callID",c.callID).set("conferenceName",c.conferenceName)).set("callSummary",b("VFRTCCallSummary").nullSummary()).set("connections",b("immutable").Set()).set("remoteUsers",a.remoteUsers.map(function(a){return a.removeAllStreams()}));case b("VFRTCCallActionTypes").CALL_COLLISION:return a.set("callInfo",a.callInfo.set("conferenceState",b("RTCConferenceState").NEW).set("callID",c.conferenceName).set("conferenceName",c.conferenceName)).set("remoteUsers",a.remoteUsers.map(function(a){return a.removeAllStreams()}))}return a}function c(a,c){switch(c.type){case b("VFRTCCallActionTypes").CALL:return a.setIn(["callInfo","conferenceState"],b("RTCConferenceState").CONNECTING).set("connections",a.connections.add(c.peerConnection));case b("VFRTCCallActionTypes").CALL_ERROR:return a.setIn(["callInfo","conferenceState"],b("RTCConferenceState").TERMINATED);case b("VFRTCCallActionTypes").CALL_SUCCESS:return c.connected?a.setIn(["callInfo","conferenceState"],b("RTCConferenceState").CONNECTED):a}return a}function d(a,c){switch(c.type){case b("VFRTCCallActionTypes").INCOMING_CALL_SUCCESS:return a.setIn(["callInfo","conferenceState"],b("RTCConferenceState").CONNECTED)}return a}function f(a,c){__p&&__p();switch(c.type){case b("VFRTCCallActionTypes").HANGUP:a.connections.forEach(function(a){return a.close()});return a.setIn(["callInfo","conferenceState"],b("RTCConferenceState").TERMINATING).set("connections",b("immutable").Set()).set("remoteUsers",a.remoteUsers.map(function(a){return a.removeAllStreams()}));case b("VFRTCCallActionTypes").DISMISS:c.transaction.sendResponse(c.request.createResponse(b("FBRTCRtcResponseStatusCode").OK,{callID:a.callInfo.callID}));case b("VFRTCCallActionTypes").END_CALL:a.connections.forEach(function(a){return a.close()});return a.setIn(["callInfo","conferenceState"],b("RTCConferenceState").TERMINATED).set("connections",b("immutable").Set()).set("remoteUsers",a.remoteUsers.map(function(a){return a.removeAllStreams()}));case b("VFRTCCallActionTypes").HANGUP_ERROR:case b("VFRTCCallActionTypes").HANGUP_SUCCESS:return c.callID===a.callInfo.callID?a.setIn(["callInfo","conferenceState"],b("RTCConferenceState").TERMINATED):a}return a}function i(a,c){__p&&__p();switch(c.type){case b("RTCGroupCallEscalationActionTypes").GROUP_ESCALATION_CLEAR_P2P_CONNECTION:var d=b("VFRTCCallStore").getConnection(h.P2P);if(d){c=d.getRemoteStreams();var e=c[0];d.close();var f=a.localUser;if(!b("VFRTCScreenSharingUtils").isGroupCallScreenSharingSupported()){c=f.getScreenStream();if(c){var g=f.getStream();g&&b("VFRTCUtils").transferAudioTracks(g,c);b("VFRTCUtils").stopMediaStream(c);f=f.removeScreenStream(c)}}return a.withMutations(function(a){a.set("connections",a.connections.remove(d)).set("localUser",f).set("remoteUsers",a.remoteUsers.map(function(a){return a.removeStream(e)}))})}}return a}function j(a,c){__p&&__p();switch(c.type){case b("RTCGroupCallEscalationActionTypes").GROUP_ESCALATION_CANCEL:var d=b("VFRTCCallStore").getConnection(h.MULTIWAY);if(d){var e=d.getRemoteStreams(),f=e[0],g=a.callSummary;c.p2pCallSummary&&(g=c.p2pCallSummary,b("VFRTCCallSummaryStore").getInstance().removeCallSummary(a.callSummary.peerID,a.callSummary.callID));d.close();return a.withMutations(function(a){a.set("callInfo",a.callInfo.set("conferenceState",b("RTCConferenceState").CONNECTED).set("conferenceName",g.callID).set("protocol","p2p").set("serverInfoData","")).set("callSummary",g).set("connections",a.connections.remove(d)).set("remoteUsers",a.remoteUsers.map(function(a){return a.removeStream(f)}))})}}return a}function k(a,c){__p&&__p();switch(c.type){case b("VFRTCCallActionTypes").ON_PARTICIPANTS_ADDED:var d=a.remoteUsers.map(function(a){return a.FBID});return a.set("remoteUsers",a.remoteUsers.union(Object.keys(c.participants).filter(function(a){return!d.has(c.participants[a].fbid)}).map(function(a){var d=c.participants[a],e=d.big_image_src||d.image_src;c.images&&c.images[a]&&(e=c.images[a]);d.fbid||g(0,1174);return new(b("VFRTCUser"))({FBID:d.fbid,profileUrl:new(b("URI"))(d.href),profilePictureUrl:e,isGuestUser:d.user_type===b("MercuryParticipantTypes").GUEST,isMessengerUser:!!d.is_messenger_user,isPartiesUser:!!d.is_parties_user,userName:d.name,userShortName:d.short_name,vanity:d.vanity})})))}return a}function l(a,c){__p&&__p();switch(c.type){case b("VFRTCCallActionTypes").ON_CONFERENCE_STATE:var d=c.transaction,e=c.request,f=c.request.conferenceStateRequest();if(c.conferenceStateVersion>=f.version){d.sendResponse(e.createResponse(b("FBRTCRtcResponseStatusCode").OK,{body:{ConferenceStateResponse:{currentVerison:c.conferenceStateVersion}},callID:a.callInfo.callID}));return a}c.resolve(f.version);var g=a.remoteUsers.map(function(a){var b=f.participantStates[a.FBID];return b?a.setParticipantState(b):a}),h=g.some(function(a){a=a.participantState;return a&&a.state===b("FBRTCParticipantCallState").CONNECTED});h=h?b("RTCConferenceState").CONNECTED:a.callInfo.conferenceState;d.sendResponse(e.createResponse(b("FBRTCRtcResponseStatusCode").OK,{body:{ConferenceStateResponse:{currentVerison:c.conferenceStateVersion}},callID:a.callInfo.callID}));return a.setIn(["remoteUsers"],g).setIn(["callInfo","conferenceState"],h)}return a}function m(a,c){switch(c.type){case b("VFRTCCallActionTypes").ON_JOIN_RESPONSE:return a.setIn(["callInfo","serverInfoData"],c.serverInfoData)}return a}function n(a,c){switch(c.type){case b("VFRTCCallActionTypes").INIT_LOCAL_USER:return a.set("localUser",c.localUser);case b("VFRTCCallActionTypes").INIT_REMOTE_USERS:case b("VFRTCCallActionTypes").UPDATE_REMOTE_USERS:return a.set("remoteUsers",c.remoteUsers);case b("VFRTCCallActionTypes").UPDATE_LOCAL_USER_INFO:return a.set("localUser",a.localUser.merge(c.info))}return a}function o(a,c){switch(c.type){case b("VFRTCCallActionTypes").AUDIO_MUTED:case b("VFRTCCallActionTypes").AUDIO_UNMUTED:return a.set("localUser",a.localUser.toggleMuteAudio());case b("VFRTCCallActionTypes").VIDEO_MUTED:return a.set("localUser",a.localUser.toggleMuteVideo(!0));case b("VFRTCCallActionTypes").VIDEO_UNMUTED:return a.set("localUser",a.localUser.toggleMuteVideo(!1));default:return a}}function p(a,c){__p&&__p();switch(c.type){case b("VFRTCCallActionTypes").ADD_LOCAL_STREAM:return a.set("localUser",a.localUser.addStream(c.stream));case b("VFRTCCallActionTypes").REMOVE_LOCAL_STREAM:return a.set("localUser",a.localUser.removeStream(c.stream));case b("VFRTCCallActionTypes").REPLACE_LOCAL_STREAM:var d=c.oldStream.getAudioTracks();d=d[0];if(d!=null)for(var e=c.newStream.getAudioTracks(),f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{g=e.next();if(g.done)break;h=g.value}h=h;h.enabled=d.enabled}return a.set("localUser",a.localUser.replaceStream(c.oldStream,c.newStream));case b("VFRTCCallActionTypes").STOP_LOCAL_STREAM:return a.set("localUser",a.localUser.stopVideo());case b("VFRTCCallActionTypes").REMOVE_ALL_LOCAL_STREAMS:if(c.stopStreams)for(var h=a.localUser.streams,g=Array.isArray(h),f=0,h=g?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(g){if(f>=h.length)break;e=h[f++]}else{f=h.next();if(f.done)break;e=f.value}d=e;b("VFRTCUtils").stopMediaStream(d)}return a.set("localUser",a.localUser.removeAllStreams())}return a}function q(a,c){__p&&__p();switch(c.type){case b("VFRTCCallActionTypes").ADD_LOCAL_SCREEN_STREAM:return a.set("localUser",a.localUser.addScreenStream(c.stream));case b("VFRTCCallActionTypes").REMOVE_LOCAL_SCREEN_STREAM:return a.set("localUser",a.localUser.removeScreenStream(c.stream));case b("VFRTCCallActionTypes").REMOVE_ALL_LOCAL_SCREEN_STREAMS:if(c.stopStreams)for(var d=a.localUser.screenStreams,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;b("VFRTCUtils").stopMediaStream(g)}return a.set("localUser",a.localUser.removeAllScreenStreams());case b("VFRTCCallActionTypes").REPLACE_LOCAL_SCREEN_STREAM:return a.set("localUser",a.localUser.replaceScreenStream(c.oldStream,c.newStream))}return a}function r(a,c){__p&&__p();var d;switch(c.type){case b("VFRTCCallActionTypes").ADD_REMOTE_STREAM:d=v(a,c);if(!d)return a;var e=a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.addStream(c.stream)));return u(e,{type:b("VFRTCCallActionTypes").TOGGLE_REMOTE_STREAM,mediaStatus:e.mediaStatus.toJS()});case b("VFRTCCallActionTypes").REMOVE_REMOTE_STREAM:d=v(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.removeStream(c.stream)));case b("VFRTCCallActionTypes").REMOVE_ALL_REMOTE_STREAMS:d=v(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.removeAllStreams().removeAllScreenStreams()))}return a}function s(a,c){var d;switch(c.type){case b("VFRTCCallActionTypes").ADD_REMOTE_TRACK:d=v(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.clone()));case b("VFRTCCallActionTypes").REMOVE_REMOTE_TRACK:d=v(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.clone()))}return a}function t(a,c){var d;switch(c.type){case b("VFRTCCallActionTypes").ADD_REMOTE_SCREEN_STREAM:d=v(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.addScreenStream(c.stream)));case b("VFRTCCallActionTypes").REMOVE_REMOTE_SCREEN_STREAM:d=v(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.removeScreenStream(c.stream)))}return a}function u(a,c){__p&&__p();var d;switch(c.type){case b("VFRTCCallActionTypes").TOGGLE_REMOTE_STREAM:return a.set("remoteUsers",Object.entries(c.mediaStatus).reduce(function(b,c){__p&&__p();var d=c[0];c=c[1];var e=b.reduce(function(b,a){var c=a.streams.map(function(a){return a.getTracks().find(function(a){return a.id===d})}).find(Boolean);return c?{user:a,track:c}:b},{}),a=e.user;e=e.track;if(a&&e){if(e.kind==="audio"&&a.isAudioMuted()===c)return b["delete"](a).add(a.toggleMuteAudio());if(e.kind==="video"&&a.isVideoMuted()===c)return b["delete"](a).add(a.toggleMuteVideo(!a.isVideoMuted()))}return b},a.remoteUsers)).set("mediaStatus",b("immutable").Map(c.mediaStatus));case b("VFRTCCallActionTypes").REMOTE_AUDIO_MUTED:d=v(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.toggleMuteAudio(!0)));case b("VFRTCCallActionTypes").REMOTE_AUDIO_UNMUTED:d=v(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.toggleMuteAudio(!1)));case b("VFRTCCallActionTypes").REMOTE_VIDEO_MUTED:d=v(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.toggleMuteVideo(!0)));case b("VFRTCCallActionTypes").REMOTE_VIDEO_UNMUTED:d=v(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.toggleMuteVideo(!1)))}return a}function v(a,b){return a.remoteUsers.find(function(a){return b.userID?a.FBID==b.userID:a.FBID===b.stream.id.split(":")[0]})}function w(a,c){switch(c.type){case b("VFRTCCallActionTypes").WAIT_FOR_USER_INPUT:return a.callInfo.conferenceState===b("RTCConferenceState").NEW?a.setIn(["callInfo","conferenceState"],b("RTCConferenceState").AWAITING_USER_START):a}return a}e.exports={abortMultiwayEscalationProcess:j,callInit:a,callStart:c,callEnd:f,completeTransitionToMultiway:i,onParticipantsChanged:k,incomingCallStart:d,processUsers:n,toggleLocalStream:o,processLocalStream:p,processLocalScreenStream:q,processRemoteStream:r,processRemoteScreenStream:t,processRemoteTrack:s,toggleRemoteStream:u,processConferenceState:l,processJoinResponse:m,waitForUserInput:w}}),null);
__d("VFRTCStatsHelpers",["Promise"],(function(a,b,c,d,e,f){__p&&__p();var g=!1,h=function(a){if(a==="host"||a==="local")return"local";if(a==="serverreflexive"||a==="srflx")return"srflx";if(a==="peerreflexive"||a==="prflx")return"prflx";return a==="relayed"||a==="relay"?"relay":"unknown_"+a},i={UNKNOWN_CONNECTION:"l:unknown-unknown;r:unknown-unknown",connectionType:function(a,b,c,d){return a!==null&&a!==void 0&&b!==null&&c!==null&&c!==void 0&&d!==null?["l:",h(a),"-",b,";","r:",h(c),"-",d].join(""):null},getVideoCapabilitiesInfo:function(a){__p&&__p();a=a.getVideoTracks();a=a[0];if(a==null)return null;if(typeof a.getCapabilities!=="function")return null;a=a.getCapabilities();var b=a.aspectRatio,c=a.facingMode,d=a.frameRate,e=a.height;a=a.width;return{facing_mode:(c=c)!=null?c:null,max_aspect_ratio:(c=b==null?void 0:b.max)!=null?c:null,max_frame_rate:(c=d==null?void 0:d.max)!=null?c:null,max_height:(d=e==null?void 0:e.max)!=null?d:null,max_width:(c=a==null?void 0:a.max)!=null?c:null,min_aspect_ratio:(e=b==null?void 0:b.min)!=null?e:null}},getMediaInputs:function(a){var b={audio_inputs:[],video_inputs:[]};a.forEach(function(a){switch(a.kind){case"videoinput":b.video_inputs.push(a.label);break;case"audioinput":b.audio_inputs.push(a.label);break}});return b},logCapabilities:function(a,b,c){a.setVideoCapabilities(i.getVideoCapabilitiesInfo(b)),a.setMediaInputs(i.getMediaInputs(c))},internalGetWindow:function(){return window},getBatteryStats:function(){return new(b("Promise"))(function(a,b){var c=i.internalGetWindow().navigator.getBattery;typeof c==="function"?a(c.call(navigator)):b()}).then(function(a){a.charging?g=!0:a.onchargingchange=function(a){a.target.charging&&(g=!0),a.target.onchargingchange=null};return{level:a.level*100,wasCharged:g}})["catch"](function(){return{placeholder:!0,level:-1,wasCharged:!1}})}};e.exports=i}),null);
__d("VFRTCCallSummaryReducer",["RTCConferenceState","VFRTCCallActionTypes","VFRTCCallStore","VFRTCCallSummaryStore","VFRTCLogger","VFRTCMediaMetricParser","VFRTCStatsHelpers","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VFRTCLogger").Key;a={setCallSummary:function(a,c){switch(c.type){case b("VFRTCCallActionTypes").SET_CALL_SUMMARY:return a.set("callSummary",c.callSummary)}return a},onCallStarted:function(a,c){switch(c.type){case b("VFRTCCallActionTypes").INCOMING_CALL_SUCCESS:case b("VFRTCCallActionTypes").CALL_SUCCESS:c=function c(){var d=b("VFRTCCallStore").getState().callInfo,e=d.conferenceState;d=d.callID;e!==b("RTCConferenceState").TERMINATED&&a.callInfo.callID===d&&(a.callSummary.save(b("VFRTCCallSummaryStore").getInstance()),window.setTimeout(c,1e4))};c();b("VFRTCMediaMetricParser").startCollectingMediaStats();return a}return a},onMessageSignaling:function(a,c){__p&&__p();switch(c.type){case b("VFRTCCallActionTypes").ON_JOIN_REQUEST_SENT:a.callSummary.setJoinRequestSent();a.callSummary.save(b("VFRTCCallSummaryStore").getInstance());return a;case b("VFRTCCallActionTypes").ON_RECEIVED_JOIN_RESPONSE:a.callSummary.setJoinResponseReceived();a.callSummary.save(b("VFRTCCallSummaryStore").getInstance());return a;case b("VFRTCCallActionTypes").ON_JOIN_RESPONSE:a.callSummary.setServerInfoData(c.serverInfoData);a.callSummary.save(b("VFRTCCallSummaryStore").getInstance());return a;case b("VFRTCCallActionTypes").ON_PROCESSED_JOIN_RESPONSE:a.callSummary.setJoinResponseProcessed();a.callSummary.save(b("VFRTCCallSummaryStore").getInstance());return a}return a},onCallEnded:function(a,c){__p&&__p();switch(c.type){case b("VFRTCCallActionTypes").CALL_ERROR:case b("VFRTCCallActionTypes").HANGUP:case b("VFRTCCallActionTypes").END_CALL:a.callSummary.onCallEnded(c.endCallReason,!1,!1,c.endCallSubreason);b("promiseDone")(b("VFRTCStatsHelpers").getBatteryStats(),function(c){a.callSummary.addExtraInfo(g.BATTERY_END,c.level),a.callSummary.setDeviceCharged(c.wasCharged),a.callSummary.save(b("VFRTCCallSummaryStore").getInstance())});a.callSummary.save(b("VFRTCCallSummaryStore").getInstance());return a;case b("VFRTCCallActionTypes").DISMISS:a.callSummary.onCallEnded(c.endCallReason,!0,!1,c.endCallSubreason);a.callSummary.save(b("VFRTCCallSummaryStore").getInstance());return a}return a},onSurveyResult:function(a,c){__p&&__p();switch(c.type){case b("VFRTCCallActionTypes").RATING_SHOWN:a.callSummary.addExtraInfo(g.RATING_SHOWN,"1");a.callSummary.save(b("VFRTCCallSummaryStore").getInstance());return a;case b("VFRTCCallActionTypes").FEEDBACK_SHOWN:a.callSummary.addExtraInfo(g.SURVEY_SHOWN,"1");a.callSummary.save(b("VFRTCCallSummaryStore").getInstance());return a;case b("VFRTCCallActionTypes").SUBMIT_RATING:a.callSummary.addExtraInfo(g.RATING,c.rating);a.callSummary.save(b("VFRTCCallSummaryStore").getInstance());return a;case b("VFRTCCallActionTypes").SUBMIT_FEEDBACK:a.callSummary.addExtraInfo(g.SURVEY_DETAILS,c.feedback);a.callSummary.save(b("VFRTCCallSummaryStore").getInstance());return a;case b("VFRTCCallActionTypes").SUBMIT_SURVEY_CHOICE:a.callSummary.addExtraInfo(g.SURVEY_CHOICE,c.surveyChoice);a.callSummary.save(b("VFRTCCallSummaryStore").getInstance());return a}return a}};e.exports=a}),null);
__d("VFRTCExpressionWWWLogger",["invariant","FBRTCParticipantCallState","RTCExpressionAction","RtcExpressionWWWTypedLogger","VFRTCConsoleLogger","immutable","performanceNow"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("immutable").Map;function a(){this.$1=h()}a.prototype.logStartTimer=function(a){var c=b("performanceNow")(),d=a.rtcExpressionIntent;this.$1=this.$1.set(d,c);a.rtcExpressionAction=b("RTCExpressionAction").ENABLED;this.logEvent(a);this.$2(d,{startTime:c})};a.prototype.$3=function(a){var c=this.$1.get(a);c||g(0,2586);this.$1=this.$1.remove(a);return parseInt(b("performanceNow")()-c,10)};a.prototype.logStopTimer=function(a){var c=a.rtcExpressionIntent;c=this.$3(c);a.rtcExpressionDuration=c;a.rtcExpressionAction=b("RTCExpressionAction").DISABLED;this.logEvent(a);return c};a.prototype.logEvent=function(a){var c=new(b("RtcExpressionWWWTypedLogger"))().setCallID(a.callID||123).setConferenceName(a.conferenceName).setPeerID(a.peerID).setRawClientTime(b("performanceNow")()).setRtcExpressionAction(a.rtcExpressionAction).setRtcExpressionDuration(a.rtcExpressionDuration).setRtcExpressionID(a.rtcExpressionId).setRtcExpressionIntent(a.rtcExpressionIntent).setRtcExpressionName(a.rtcExpressionName).setRtcExpressionParticipantCount(a.rtcExpressionParticipantCount).setRtcExpressionType(a.rtcExpressionType),d=c.getData();this.$2(a.rtcExpressionName,d);c.log()};a.prototype.getExpressionLoggerInfoFromStore=function(a){var c=a.callInfo,d=c.callID;c=c.conferenceName;a=a.remoteUsers;a=a.filter(function(a){return a.getParticipantState()===b("FBRTCParticipantCallState").CONNECTED}).size+1;return{callID:d,conferenceName:c,rtcExpressionParticipantCount:a}};a.prototype.$2=function(a,b){};e.exports=new a()}),null);
__d("VFRTCCoExperienceReducer",["RTCCoExperienceActionTypes","RTCExpressionIntent","VFRTCCallActionTypes","VFRTCCallStore","VFRTCCoExperienceStore","VFRTCExpressionWWWLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){switch(c.type){case b("RTCCoExperienceActionTypes").TOGGLE_CHAT_WINDOW:c=b("VFRTCExpressionWWWLogger").getExpressionLoggerInfoFromStore(b("VFRTCCallStore").getState());a.chatWindowVisible?b("VFRTCExpressionWWWLogger").logStopTimer(babelHelpers["extends"]({},c,{rtcExpressionName:"chat",rtcExpressionIntent:b("RTCExpressionIntent").CHAT})):b("VFRTCExpressionWWWLogger").logStartTimer(babelHelpers["extends"]({},c,{rtcExpressionName:"chat",rtcExpressionIntent:b("RTCExpressionIntent").CHAT}));return a.set("chatWindowVisible",!a.chatWindowVisible);default:return a}}function c(a,c){__p&&__p();switch(c.type){case b("VFRTCCallActionTypes").HANGUP:case b("VFRTCCallActionTypes").END_CALL:case b("VFRTCCallActionTypes").HANGUP_ERROR:case b("VFRTCCallActionTypes").HANGUP_SUCCESS:case b("RTCCoExperienceActionTypes").SET_FILTER:var d=b("VFRTCExpressionWWWLogger").getExpressionLoggerInfoFromStore(b("VFRTCCallStore").getState()),e=a.currentVideoFilter,f=a.videoFilterHistory;if(e){var g=b("VFRTCExpressionWWWLogger").logStopTimer(babelHelpers["extends"]({},d,{rtcExpressionName:e,rtcExpressionIntent:b("RTCExpressionIntent").EFFECT})),h=f.get(e)||0;f=f.set(e,h+g);b("VFRTCCoExperienceStore").logCoExperienceDurationToSummary(f)}c.filter&&b("VFRTCExpressionWWWLogger").logStartTimer(babelHelpers["extends"]({},d,{rtcExpressionName:c.filter,rtcExpressionIntent:b("RTCExpressionIntent").EFFECT}));return a.set("currentVideoFilter",c.filter).set("videoFilterHistory",f);default:return a}}e.exports={processChatWindowToggle:a,processSetVideoFilter:c}}),null);
__d("VFRTCScreenSharing",["VFDesktopHelper","VFRTCUserMediaConstraints","VFRTCUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={getUserMedia:function(a){__p&&__p();return b("VFDesktopHelper").getScreenSharingSourceID().then(function(c){return b("VFRTCUtils").getUserMedia(b("VFRTCUserMediaConstraints").chromeMediaSource(a,c))}).then(function(a){__p&&__p();for(var b=a.getTracks(),c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e.addEventListener("ended",function(b){return window.setTimeout(function(){a.active||g.stop()})})}return a})},stop:function(){return b("VFDesktopHelper").stopScreenSharing()}};e.exports=g}),null);
__d("VFRTCVersionDetection",["UserAgent","UserAgentData"],(function(a,b,c,d,e,f){__p&&__p();a={isChrome:function(){return b("UserAgent").isBrowser("Chrome")},isFirefox:function(){return b("UserAgent").isBrowser("Firefox")},isChromium:function(){return!!navigator.webkitGetUserMedia},webrtcVersion:function(){if(this.isFirefox()||this.isChrome())return b("UserAgentData").browserVersion||0;if(this.isChromium()){var a=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return a!=null?parseInt(a[2],10):999}return 0}};e.exports=a}),null);
__d("VFRTCScreenSharingUtils",["FBRTCExperimentName","RTCConfig","VFRTCExperiment","VFRTCSupport","VFRTCUtils","VFRTCVersionDetection"],(function(a,b,c,d,e,f){"use strict";a={isGroupCallScreenSharingSupported:function(){return b("RTCConfig").ScreenSharingToGroupGK},isSupportedBrowser:function(){return b("VFRTCVersionDetection").isChrome()&&b("VFRTCVersionDetection").webrtcVersion()>=34},canUserReceiveScreenSharing:function(){return!b("VFRTCSupport").isMobileDevice()&&(b("VFRTCVersionDetection").isChromium()&&b("VFRTCVersionDetection").webrtcVersion()>=34||b("VFRTCUtils").isVCScreenSharingSupported())},canPeerReceiveScreenSharing:function(a){if(a.remoteSupport("screen_sharing"))return!0;return!a.remoteSupport("www")&&!a.remoteSupport("mweb")?b("RTCConfig").ScreenSharingToMobileGK?!0:b("VFRTCExperiment").gen(b("FBRTCExperimentName").ENABLE_SCREEN_SHARING).getBool("can_share_to_mobile",!1):!1}};e.exports=a}),null);
__d("VFRTCMediaStatsReport",["VFRTCStatsHelpers"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){return}a.prototype.parseStatString=function(a,b){return a&&a[b]!=null&&a[b]!==""?a[b]:null};a.prototype.parseMediaStat=function(a,b){return a&&a[b]!=null&&a[b]!==""?Number(a[b]):null};a.prototype.getAccelerateRate=function(a){return null};a.prototype.getAudioBytesReceived=function(a){return null};a.prototype.getAudioBytesSent=function(a){return null};a.prototype.getAudioDecodingCNG=function(a){return null};a.prototype.getAudioDecodingNormal=function(a){return null};a.prototype.getAudioDecodingPLC=function(a){return null};a.prototype.getAudioDecodingPLCCNG=function(a){return null};a.prototype.getAudioJitter=function(a){return null};a.prototype.getAudioPacketsReceived=function(a){return null};a.prototype.getAudioPacketsReceivedLost=function(a){return null};a.prototype.getAudioPacketsSent=function(a){return null};a.prototype.getAudioPacketsSentLost=function(a){return null};a.prototype.getAudioReceivedRtt=function(a){return null};a.prototype.getAudioRecvKeys=function(){return[]};a.prototype.getAudioSendCodec=function(a){return null};a.prototype.getAudioSendKeys=function(){return[]};a.prototype.getAudioSendRtt=function(a){return null};a.prototype.getConnectionType=function(){return b("VFRTCStatsHelpers").UNKNOWN_CONNECTION};a.prototype.getDiscardRate=function(a){return null};a.prototype.getExpandRate=function(a){return null};a.prototype.getFramesDecoded=function(a){return null};a.prototype.getFramesEncoded=function(a){return null};a.prototype.getInboundQpSum=function(a){return null};a.prototype.getJitterBufferDelay=function(a){return null};a.prototype.getOutboundQpSum=function(a){return null};a.prototype.getPreemptiveExpandRate=function(a){return null};a.prototype.getVideoBweKeys=function(){return[]};a.prototype.getVideoBweRetransmitBitrate=function(a){return null};a.prototype.getVideoBweSendBandwidth=function(a){return null};a.prototype.getVideoBweTransmitBitrate=function(a){return null};a.prototype.getVideoBytesReceived=function(a){return null};a.prototype.getVideoBytesSent=function(a){return null};a.prototype.getVideoFrameHeightReceived=function(a){return null};a.prototype.getVideoFrameHeightSent=function(a){return null};a.prototype.getVideoFrameRateReceived=function(a){return null};a.prototype.getVideoFrameRateSent=function(a){return null};a.prototype.getVideoFrameWidthReceived=function(a){return null};a.prototype.getVideoFrameWidthSent=function(a){return null};a.prototype.getVideoPacketsReceived=function(a){return null};a.prototype.getVideoPacketsReceivedLost=function(a){return null};a.prototype.getVideoPacketsSent=function(a){return null};a.prototype.getVideoPacketsSentLost=function(a){return null};a.prototype.getVideoRecvCodec=function(a){return null};a.prototype.getVideoRecvCodecImplementationName=function(a){return null};a.prototype.getVideoRecvKeys=function(){return[]};a.prototype.getVideoSendCodec=function(a){return null};a.prototype.getVideoSendCodecImplementationName=function(a){return null};a.prototype.getVideoSendKeys=function(){return[]};a.prototype.getVideoSentRtt=function(a){return null};a.prototype.getVideoRecvCodecForConnection=function(){var a=null;this.getVideoRecvKeys().forEach(function(b){var c=this.getVideoRecvCodec(b);b=this.getVideoRecvCodecImplementationName(b);c!=null&&c!==""&&b!=null&&b!==""&&(a=c+b)}.bind(this));return a};a.prototype.getVideoSendCodecForConnection=function(){var a=null;this.getVideoSendKeys().forEach(function(b){var c=this.getVideoSendCodec(b);b=this.getVideoSendCodecImplementationName(b);c!=null&&c!==""&&b!=null&&b!==""&&(a=c+b)}.bind(this));return a};a.prototype.getAudioSendCodecForConnection=function(){var a=null;this.getAudioSendKeys().forEach(function(b){b=this.getAudioSendCodec(b);b!=null&&b!==""&&(a=b)}.bind(this));return a};e.exports=a}),null);
__d("VFRTCChromeMediaStatsReport",["VFRTCMediaStatsReport","VFRTCStatsHelpers"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("VFRTCMediaStatsReport"));g=c&&c.prototype;function a(a){__p&&__p();g.constructor.call(this,a);this.$VFRTCChromeMediaStatsReport1={};this.$VFRTCChromeMediaStatsReport2={};this.$VFRTCChromeMediaStatsReport3={};this.$VFRTCChromeMediaStatsReport4={};this.$VFRTCChromeMediaStatsReport5={};this.$VFRTCChromeMediaStatsReport6=[];if(a)for(var a=a.values(),b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;d.type==="ssrc"&&d.audioOutputLevel!=null&&d.audioOutputLevel!==""?this.$VFRTCChromeMediaStatsReport1[d.id]=d:d.type==="ssrc"&&d.audioInputLevel!=null&&d.audioInputLevel!==""?this.$VFRTCChromeMediaStatsReport2[d.id]=d:d.type==="ssrc"&&d.mediaType==="video"?d.bytesReceived!=null?this.$VFRTCChromeMediaStatsReport3[d.id]=d:this.$VFRTCChromeMediaStatsReport4[d.id]=d:d.type==="VideoBwe"?this.$VFRTCChromeMediaStatsReport5[d.id]=d:d.type==="googCandidatePair"&&d.googActiveConnection!==null&&d.googActiveConnection==="true"&&this.$VFRTCChromeMediaStatsReport6.push(d)}}a.prototype.getAudioSendKeys=function(){return Object.keys(this.$VFRTCChromeMediaStatsReport2)};a.prototype.getAudioRecvKeys=function(){return Object.keys(this.$VFRTCChromeMediaStatsReport1)};a.prototype.getVideoRecvKeys=function(){return Object.keys(this.$VFRTCChromeMediaStatsReport3)};a.prototype.getVideoSendKeys=function(){return Object.keys(this.$VFRTCChromeMediaStatsReport4)};a.prototype.getVideoBweKeys=function(){return Object.keys(this.$VFRTCChromeMediaStatsReport5)};a.prototype.getAudioBytesSent=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport2[a],"bytesSent")};a.prototype.getAudioDecodingPLC=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport1[a],"googDecodingPLC")};a.prototype.getAudioDecodingPLCCNG=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport1[a],"googDecodingPLCCNG")};a.prototype.getAudioDecodingCNG=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport1[a],"googDecodingCNG")};a.prototype.getAudioDecodingNormal=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport1[a],"googDecodingNormal")};a.prototype.getAudioPacketsSentLost=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport2[a],"packetsLost")};a.prototype.getAudioPacketsSent=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport2[a],"packetsSent")};a.prototype.getAudioSendCodec=function(a){return this.parseStatString(this.$VFRTCChromeMediaStatsReport2[a],"googCodecName")};a.prototype.getAudioSendRtt=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport2[a],"googRtt")};a.prototype.getAudioBytesReceived=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport1[a],"bytesReceived")};a.prototype.getAudioPacketsReceived=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport1[a],"packetsReceived")};a.prototype.getAudioPacketsReceivedLost=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport1[a],"packetsLost")};a.prototype.getAudioReceivedRtt=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport1[a],"googRtt")};a.prototype.getVideoBytesReceived=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport3[a],"bytesReceived")};a.prototype.getVideoPacketsReceived=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport3[a],"packetsReceived")};a.prototype.getVideoPacketsReceivedLost=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport3[a],"packetsLost")};a.prototype.getFramesDecoded=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport3[a],"framesDecoded")};a.prototype.getInboundQpSum=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport3[a],"qpSum")};a.prototype.getVideoFrameHeightReceived=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport3[a],"googFrameHeightReceived")};a.prototype.getVideoFrameRateReceived=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport3[a],"googFrameRateReceived")};a.prototype.getVideoFrameWidthReceived=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport3[a],"googFrameWidthReceived")};a.prototype.getFramesEncoded=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport4[a],"framesEncoded")};a.prototype.getVideoBytesSent=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport4[a],"bytesSent")};a.prototype.getVideoFrameHeightSent=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport4[a],"googFrameHeightSent")};a.prototype.getVideoFrameRateSent=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport4[a],"googFrameRateSent")};a.prototype.getVideoFrameWidthSent=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport4[a],"googFrameWidthSent")};a.prototype.getVideoPacketsSent=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport4[a],"packetsSent")};a.prototype.getVideoPacketsSentLost=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport4[a],"packetsLost")};a.prototype.getVideoSentRtt=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport4[a],"googRtt")};a.prototype.getOutboundQpSum=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport4[a],"qpSum")};a.prototype.getAudioJitter=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport1[a],"googJitterReceived")};a.prototype.getJitterBufferDelay=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport1[a],"googCurrentDelayMs")};a.prototype.getAccelerateRate=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport1[a],"googAccelerateRate")};a.prototype.getPreemptiveExpandRate=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport1[a],"googPreemptiveExpandRate")};a.prototype.getExpandRate=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport1[a],"googExpandRate")};a.prototype.getDiscardRate=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport1[a],"googSecondaryDiscardedRate")};a.prototype.getVideoBweRetransmitBitrate=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport5[a],"googRetransmitBitrate")};a.prototype.getVideoBweSendBandwidth=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport5[a],"googAvailableSendBandwidth")};a.prototype.getVideoBweTransmitBitrate=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport5[a],"googTransmitBitrate")};a.prototype.getVideoRecvCodec=function(a){return this.parseStatString(this.$VFRTCChromeMediaStatsReport3[a],"googCodecName")};a.prototype.getVideoRecvCodecImplementationName=function(a){return this.parseStatString(this.$VFRTCChromeMediaStatsReport3[a],"codecImplementationName")};a.prototype.getVideoSendCodec=function(a){return this.parseStatString(this.$VFRTCChromeMediaStatsReport4[a],"googCodecName")};a.prototype.getVideoSendCodecImplementationName=function(a){return this.parseStatString(this.$VFRTCChromeMediaStatsReport4[a],"codecImplementationName")};a.prototype.getConnectionType=function(){var a=null;this.$VFRTCChromeMediaStatsReport6.some(function(c){a=b("VFRTCStatsHelpers").connectionType(this.parseStatString(c,"googLocalCandidateType"),this.parseStatString(c,"googTransportType"),this.parseStatString(c,"googRemoteCandidateType"),this.parseStatString(c,"googTransportType"));return a!==null}.bind(this));if(a!==null)return a;else return b("VFRTCStatsHelpers").UNKNOWN_CONNECTION};e.exports=a}),null);
__d("VFRTCMozMediaStatsReport",["VFRTCMediaStatsReport","VFRTCStatsHelpers"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("VFRTCMediaStatsReport"));g=c&&c.prototype;function a(a){__p&&__p();g.constructor.call(this,a);this.$VFRTCMozMediaStatsReport1={};this.$VFRTCMozMediaStatsReport2={};this.$VFRTCMozMediaStatsReport3={};this.$VFRTCMozMediaStatsReport4={};this.$VFRTCMozMediaStatsReport5={};this.$VFRTCMozMediaStatsReport6={};for(var a=a.values(),b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;d.type==="inbound-rtp"&&d.mediaType==="audio"&&d.isRemote===!1?this.$VFRTCMozMediaStatsReport1[d.id]=d:d.type==="outbound-rtp"&&d.mediaType==="audio"&&d.isRemote===!1?this.$VFRTCMozMediaStatsReport2[d.id]=d:d.type==="inbound-rtp"&&d.mediaType==="video"&&d.isRemote===!1?this.$VFRTCMozMediaStatsReport3[d.id]=d:d.type==="outbound-rtp"&&d.mediaType==="video"&&d.isRemote===!1?this.$VFRTCMozMediaStatsReport4[d.id]=d:d.type==="candidate-pair"&&d.state==="succeeded"?this.$VFRTCMozMediaStatsReport6[d.id]=d:(d.type==="local-candidate"||d.type==="remote-candidate")&&(this.$VFRTCMozMediaStatsReport5[d.id]=d)}}a.prototype.getAudioSendKeys=function(){return Object.keys(this.$VFRTCMozMediaStatsReport2)};a.prototype.getAudioRecvKeys=function(){return Object.keys(this.$VFRTCMozMediaStatsReport1)};a.prototype.getVideoRecvKeys=function(){return Object.keys(this.$VFRTCMozMediaStatsReport3)};a.prototype.getVideoSendKeys=function(){return Object.keys(this.$VFRTCMozMediaStatsReport4)};a.prototype.getAudioBytesSent=function(a){return this.parseMediaStat(this.$VFRTCMozMediaStatsReport2[a],"bytesSent")};a.prototype.getAudioPacketsSent=function(a){return this.parseMediaStat(this.$VFRTCMozMediaStatsReport2[a],"packetsSent")};a.prototype.getAudioBytesReceived=function(a){return this.parseMediaStat(this.$VFRTCMozMediaStatsReport1[a],"bytesReceived")};a.prototype.getAudioPacketsReceived=function(a){return this.parseMediaStat(this.$VFRTCMozMediaStatsReport1[a],"packetsReceived")};a.prototype.getAudioPacketsReceivedLost=function(a){return this.parseMediaStat(this.$VFRTCMozMediaStatsReport1[a],"packetsLost")};a.prototype.getAudioReceivedRtt=function(a){return this.parseMediaStat(this.$VFRTCMozMediaStatsReport1[a],"roundTripTime")};a.prototype.getFramesDecoded=function(a){return this.parseMediaStat(this.$VFRTCMozMediaStatsReport3[a],"framesDecoded")};a.prototype.getFramesEncoded=function(a){return this.parseMediaStat(this.$VFRTCMozMediaStatsReport4[a],"framesEncoded")};a.prototype.getVideoBytesReceived=function(a){return this.parseMediaStat(this.$VFRTCMozMediaStatsReport3[a],"bytesReceived")};a.prototype.getVideoFrameRateReceived=function(a){var b=this.getFramesDecoded(a);return b==null||b===0?null:this.parseMediaStat(this.$VFRTCMozMediaStatsReport3[a],"framerateMean")};a.prototype.getVideoPacketsReceived=function(a){return this.parseMediaStat(this.$VFRTCMozMediaStatsReport3[a],"packetsReceived")};a.prototype.getVideoPacketsReceivedLost=function(a){return this.parseMediaStat(this.$VFRTCMozMediaStatsReport3[a],"packetsLost")};a.prototype.getVideoBytesSent=function(a){return this.parseMediaStat(this.$VFRTCMozMediaStatsReport4[a],"bytesSent")};a.prototype.getVideoFrameRateSent=function(a){var b=this.getFramesEncoded(a);return b==null||b===0?null:this.parseMediaStat(this.$VFRTCMozMediaStatsReport4[a],"framerateMean")};a.prototype.getVideoPacketsSent=function(a){return this.parseMediaStat(this.$VFRTCMozMediaStatsReport4[a],"packetsSent")};a.prototype.getAudioJitter=function(a){return this.parseMediaStat(this.$VFRTCMozMediaStatsReport1[a],"jitter")};a.prototype.getJitterBufferDelay=function(a){return this.parseMediaStat(this.$VFRTCMozMediaStatsReport1[a],"mozJitterBufferDelay")};a.prototype.getConnectionType=function(){__p&&__p();var a=null;Object.keys(this.$VFRTCMozMediaStatsReport6).forEach(function(c){c=this.$VFRTCMozMediaStatsReport6[c];var d=this.parseStatString(c,"localCandidateId");c=this.parseStatString(c,"remoteCandidateId");d!==void 0&&d!==null&&c!==void 0&&c!==null&&(a=b("VFRTCStatsHelpers").connectionType(this.parseStatString(this.$VFRTCMozMediaStatsReport5[d],"candidateType"),this.parseStatString(this.$VFRTCMozMediaStatsReport5[d],"transport"),this.parseStatString(this.$VFRTCMozMediaStatsReport5[c],"candidateType"),this.parseStatString(this.$VFRTCMozMediaStatsReport5[c],"transport")));return a!==null}.bind(this));if(a!==null)return a;else return b("VFRTCStatsHelpers").UNKNOWN_CONNECTION};e.exports=a}),null);
__d("VFRTCAppDispatcher",["ExplicitRegistrationDispatcher","objectValues"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("ExplicitRegistrationDispatcher"));g=c&&c.prototype;function a(a){"use strict";g.constructor.call(this,a),this.dispatch=this.dispatch.bind(this)}a.prototype.explicitlyRegisterStoresInMap=function(a){"use strict";this.explicitlyRegisterStores(b("objectValues")(a))};e.exports=new a({strict:!0})}),null);
__d("VFRTCP2PCallActions",["RTCP2PCallActionTypes","VFRTCAppDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={setCallType:function(a){b("VFRTCAppDispatcher").dispatch({type:b("RTCP2PCallActionTypes").SET_CALL_TYPE,callType:a})},setConnectionStatus:function(a){b("VFRTCAppDispatcher").dispatch({type:b("RTCP2PCallActionTypes").SET_CONNECTION_STATUS,connectionStatus:a})},setMultiwayEscalationSupport:function(a,c){b("VFRTCAppDispatcher").dispatch({type:b("RTCP2PCallActionTypes").SET_MULTIWAY_ESCALATION_SUPPORT,offerEscalationSupport:a,escalationConferenceName:c})},setRemoteSignalingExperiments:function(a){b("VFRTCAppDispatcher").dispatch({type:b("RTCP2PCallActionTypes").SET_REMOTE_SIGNALING_EXPERIMENTS,remoteSignalingExperiments:a})},togglePopOutScreenContent:function(a){b("VFRTCAppDispatcher").dispatch({type:a?b("RTCP2PCallActionTypes").POP_OUT_SCREEN_CONTENT:b("RTCP2PCallActionTypes").POP_IN_SCREEN_CONTENT,stream:a})},processMessage:function(a){b("VFRTCAppDispatcher").dispatch({type:b("RTCP2PCallActionTypes").P2P_PROCESS_MESSAGE,message:a})},setIsCaller:function(a){b("VFRTCAppDispatcher").dispatch({type:b("RTCP2PCallActionTypes").P2P_SET_IS_CALLER,isCaller:a})},togglePoorNetworkQualityIndicator:function(a){b("VFRTCAppDispatcher").dispatch({type:a?b("RTCP2PCallActionTypes").SHOW_POOR_NETWORK_QUALITY:b("RTCP2PCallActionTypes").DISMISS_POOR_NETWORK_QUALITY})},starRatingDone:function(a){a===void 0&&(a=!0),b("VFRTCAppDispatcher").dispatch({type:b("RTCP2PCallActionTypes").P2P_STAR_RATING_DONE,done:a})}};e.exports=a}),null);
__d("VFRTCNetworkQualityMonitor",["VFRTCClientFeatureGating","VFRTCExperiment","VFRTCMediaMetricsConst","VFRTCP2PCallActions","VFWebLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=2;function a(){this.$3=0;var a=b("VFRTCExperiment").getMediaQualityExperiments();this.$1=a.getInt("rtt_threshold",Number.POSITIVE_INFINITY);this.$2=parseFloat(a.getParam("packet_loss_rate_threshold",String(Number.POSITIVE_INFINITY)));b("VFWebLogger").logRTCCheckpoint({checkpoint:"VFRTCNetworkQualityMonitor constructed: rtt "+this.$1+", packetLoss "+this.$2})}a.prototype.$4=function(a,b,c){a=a.getMetricStats(b,c);return a!=null?a.current>this.$1:!1};a.prototype.$5=function(a,b){a=a/(a+b);return a>=this.$2};a.prototype.$6=function(a,b,c,d){c=a.getMetricStats(b,c);a=a.getMetricStats(b,d);return c!=null&&a!=null?this.$5(c.current,a.current):!1};a.prototype.$7=function(a,b,c){var d=c.packetLostKey,e=c.packetsKey,f=c.rttKey;c=b.some(function(b){var c=this.$6(a,b,d,e);return c||this.$4(a,b,f)}.bind(this));return c};a.prototype.getCount=function(){return this.$3};a.prototype.determineQuality=function(a){var c=this.$3,d=this.$7(a,a.getAudioStreamReportKeys(),{packetLostKey:b("VFRTCMediaMetricsConst").AUDIO_PACKETS_SENT_LOST,packetsKey:b("VFRTCMediaMetricsConst").AUDIO_PACKETS_SENT,rttKey:b("VFRTCMediaMetricsConst").AUDIO_RTT_SENT});a=this.$7(a,a.getAudioStreamReportKeys(),{packetLostKey:b("VFRTCMediaMetricsConst").AUDIO_PACKETS_RECEIVED_LOST,packetsKey:b("VFRTCMediaMetricsConst").AUDIO_PACKETS_RECEIVED,rttKey:b("VFRTCMediaMetricsConst").AUDIO_RTT_RECEIVED});d||a?this.$3<g&&this.$3++:this.$3>0&&this.$3--;c!==this.$3&&this.$3>=g?(b("VFWebLogger").logRTCCheckpoint({checkpoint:"poor_network_quality_exceeded_threshold_"+this.$3}),b("VFRTCClientFeatureGating").shouldShowNetworkQualityIndicator()&&b("VFRTCP2PCallActions").togglePoorNetworkQualityIndicator(!0)):c>0&&this.$3<=0&&(b("VFWebLogger").logRTCCheckpoint({checkpoint:"network_quality_recovered_from_"+c}),b("VFRTCClientFeatureGating").shouldShowNetworkQualityIndicator()&&b("VFRTCP2PCallActions").togglePoorNetworkQualityIndicator(!1))};e.exports=a}),null);
__d("VFRTCMediaMetricParser",["RTCConferenceState","RTCWebMediaLoggingStreamsTypes","RTCWebMediaStreamsTypedLogger","RTWebLoggingCallType","UserAgent","VFRTCCallStore","VFRTCChromeMediaStatsReport","VFRTCClientFeatureGating","VFRTCConstants","VFRTCLogger","VFRTCMediaMetricsConst","VFRTCMozMediaStatsReport","VFRTCNetworkQualityMonitor","VFRTCSupport","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VFRTCConstants").SignalingProtocol;function h(){if(b("gkx")("678354")){var a=b("VFRTCCallStore").getState(),c=a.callInfo;a=a.callSummary;return new(b("RTCWebMediaStreamsTypedLogger"))().setCallID(c.callID).setTimeElapsed(a.getCurrentTimeFromCallConnected()).setConferenceName(c.conferenceName).setCallType(c.protocol===g.MULTIWAY?b("RTWebLoggingCallType").MW:b("RTWebLoggingCallType").P2P)}return null}function i(a,c){a.getVideoSendKeys().forEach(function(d){var e=a.getOutboundQpSum(d),f=a.getFramesEncoded(d),g=a.getVideoBytesSent(d),i=a.getVideoPacketsSent(d),j=a.getVideoPacketsSentLost(d);c.setVideoMetric(d,b("VFRTCMediaMetricsConst").OUTBOUND_QP,e);c.setVideoMetric(d,b("VFRTCMediaMetricsConst").FRAMES_ENCODED,f);c.setVideoMetric(d,b("VFRTCMediaMetricsConst").VIDEO_BYTES_SENT,g);c.setVideoMetric(d,b("VFRTCMediaMetricsConst").VIDEO_PKTS_SENT,i);c.setVideoMetric(d,b("VFRTCMediaMetricsConst").VIDEO_PKTS_SEND_LOST,j);var k=h();k&&k.setIsLocal(!0).setStreamType(b("RTCWebMediaLoggingStreamsTypes").VIDEO).setStreamID(d).setFrames(f).setQpSum(e).setBytes(g).setPackets(i).setPacketsLost(j).setFrameHeight(a.getVideoFrameHeightSent(d)).setFramesPerSecond(a.getVideoFrameRateSent(d)).setFrameWidth(a.getVideoFrameWidthSent(d)).log()})}function j(a,c){a.getVideoBweKeys().forEach(function(d){var e=a.getVideoBweSendBandwidth(d),f=a.getVideoBweTransmitBitrate(d),g=a.getVideoBweRetransmitBitrate(d);c.setVideoMetric(d,b("VFRTCMediaMetricsConst").VIDEOBWE_SEND_BANDWIDTH,e);c.setVideoMetric(d,b("VFRTCMediaMetricsConst").VIDEOBWE_TRANSMIT_BITRATE,f);c.setVideoMetric(d,b("VFRTCMediaMetricsConst").VIDEOBWE_RETRANSMIT_BITRATE,g);f=h();f&&f.setIsLocal(!0).setStreamType(b("RTCWebMediaLoggingStreamsTypes").VIDEO).setStreamID(d).setBytes(e).log()})}function k(a,c){a.getVideoRecvKeys().forEach(function(d){var e=a.getInboundQpSum(d),f=a.getFramesDecoded(d),g=a.getVideoBytesReceived(d),i=a.getVideoPacketsReceived(d),j=a.getVideoPacketsReceivedLost(d);c.setVideoMetric(d,b("VFRTCMediaMetricsConst").VIDEO_BYTES_RECEIVED,g);c.setVideoMetric(d,b("VFRTCMediaMetricsConst").INBOUND_QP,e);c.setVideoMetric(d,b("VFRTCMediaMetricsConst").FRAMES_DECODED,f);c.setVideoMetric(d,b("VFRTCMediaMetricsConst").VIDEO_PKTS_RECEIVED,i);c.setVideoMetric(d,b("VFRTCMediaMetricsConst").VIDEO_PKTS_RECV_LOST,j);var k=h();k&&k.setIsLocal(!1).setStreamType(b("RTCWebMediaLoggingStreamsTypes").VIDEO).setStreamID(d).setBytes(g).setFrames(f).setQpSum(e).setPackets(i).setPacketsLost(j).setFrameHeight(a.getVideoFrameHeightReceived(d)).setFramesPerSecond(a.getVideoFrameRateReceived(d)).setFrameWidth(a.getVideoFrameWidthReceived(d)).log()})}function l(a,c){a.getAudioSendKeys().forEach(function(d){var e=a.getAudioBytesSent(d),f=a.getAudioPacketsSent(d),g=a.getAudioPacketsSentLost(d),i=a.getAudioSendRtt(d);c.addMetricStat(d,b("VFRTCMediaMetricsConst").AUDIO_BYTES_SENT,e);c.addMetricStat(d,b("VFRTCMediaMetricsConst").AUDIO_PACKETS_SENT,f);c.addMetricStat(d,b("VFRTCMediaMetricsConst").AUDIO_PACKETS_SENT_LOST,g);c.addMetricStat(d,b("VFRTCMediaMetricsConst").AUDIO_RTT_SENT,i);var j=h();j&&j.setIsLocal(!0).setStreamType(b("RTCWebMediaLoggingStreamsTypes").AUDIO).setStreamID(d).setPackets(f).setBytes(e).setRtt(i).setPacketsLost(g).log()})}function m(a,c){__p&&__p();a.getAudioRecvKeys().forEach(function(d){__p&&__p();var e=a.getJitterBufferDelay(d),f=a.getAudioJitter(d),g=a.getAccelerateRate(d),i=a.getExpandRate(d),j=a.getPreemptiveExpandRate(d),k=a.getDiscardRate(d),l=a.getAudioBytesReceived(d),m=a.getAudioPacketsReceived(d),n=a.getAudioPacketsReceivedLost(d),o=a.getAudioReceivedRtt(d);c.addJitterBufferDelay(d,e);c.addMetricStat(d,b("VFRTCMediaMetricsConst").JITTER,f);c.addMetricStat(d,b("VFRTCMediaMetricsConst").ACCELERATE_RATE,g);c.addMetricStat(d,b("VFRTCMediaMetricsConst").DISCARD_RATE,k);c.addMetricStat(d,b("VFRTCMediaMetricsConst").EXPAND_RATE,i);c.addMetricStat(d,b("VFRTCMediaMetricsConst").PREEMPTIVE_RATE,j);c.addMetricStat(d,b("VFRTCMediaMetricsConst").DECODING_PLC,a.getAudioDecodingPLC(d));c.addMetricStat(d,b("VFRTCMediaMetricsConst").DECODING_CNG,a.getAudioDecodingCNG(d));c.addMetricStat(d,b("VFRTCMediaMetricsConst").DECODING_NORMAL,a.getAudioDecodingNormal(d));c.addMetricStat(d,b("VFRTCMediaMetricsConst").DECODING_PLC_CNG,a.getAudioDecodingPLCCNG(d));c.addMetricStat(d,b("VFRTCMediaMetricsConst").AUDIO_BYTES_RECEIVED,l);c.addMetricStat(d,b("VFRTCMediaMetricsConst").AUDIO_PACKETS_RECEIVED,m);c.addMetricStat(d,b("VFRTCMediaMetricsConst").AUDIO_PACKETS_RECEIVED_LOST,n);c.addMetricStat(d,b("VFRTCMediaMetricsConst").AUDIO_RTT_RECEIVED,o);g=h();g&&g.setIsLocal(!1).setStreamType(b("RTCWebMediaLoggingStreamsTypes").AUDIO).setStreamID(d).setJitter(f).setJitterBufferDelay(e).setBytes(l).setPackets(m).setRtt(o).setPacketsLost(n).log()})}var n={parseStats:function(a,c){a.getStats().then(function(a){var d=null;b("VFRTCSupport").isChromiumBased()?d=new(b("VFRTCChromeMediaStatsReport"))(a):b("UserAgent").isBrowser("Firefox")&&(d=new(b("VFRTCMozMediaStatsReport"))(a));d&&n.parseStatsWithReport(d,c)})["catch"](function(a){b("VFRTCLogger").getInstance().logToConsole("error parsing RTCStatsReport")})},parseStatsWithReport:function(a,b){__p&&__p();var c=b.getMediaMetricTracker();m(a,c);l(a,c);k(a,c);i(a,c);j(a,c);b.setConnectionType(a.getConnectionType());c=a.getVideoRecvCodecForConnection();c!=null&&c!==""&&b.setVideoReceivedCodec(c);c=a.getVideoSendCodecForConnection();c!=null&&c!==""&&b.setVideoSentCodec(c);c=a.getAudioSendCodecForConnection();c!=null&&c!==""&&b.setAudioSentCodec(c)},startCollectingMediaStats:function(){var a=null;(b("VFRTCClientFeatureGating").shouldShowNetworkQualityIndicator()||b("VFRTCClientFeatureGating").shouldMonitorNetworkQuality())&&(a=new(b("VFRTCNetworkQualityMonitor"))());var c=function c(){var d=b("VFRTCCallStore").getState().callInfo.conferenceState,e=b("VFRTCCallStore").getState().callSummary,f=b("VFRTCCallStore").getState().connections.first();d!==b("RTCConferenceState").TERMINATED&&(f&&(n.parseStats(f,e),a!=null&&a.determineQuality(e.getMediaMetricTracker())),window.setTimeout(c,5e3))};c()}};e.exports=n}),null);
__d("VFRTCCallStore",["FluxReduceStore","RTCConferenceState","VFRTCAppDispatcher","VFRTCCallReducer","VFRTCCallStoreState","VFRTCCallSummaryReducer","VFRTCCallSummaryStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=[b("VFRTCCallSummaryReducer").onCallEnded,b("VFRTCCallSummaryReducer").onCallStarted,b("VFRTCCallSummaryReducer").onMessageSignaling,b("VFRTCCallSummaryReducer").onSurveyResult,b("VFRTCCallSummaryReducer").setCallSummary,b("VFRTCCallReducer").abortMultiwayEscalationProcess,b("VFRTCCallReducer").callEnd,b("VFRTCCallReducer").callInit,b("VFRTCCallReducer").callStart,b("VFRTCCallReducer").completeTransitionToMultiway,b("VFRTCCallReducer").incomingCallStart,b("VFRTCCallReducer").onParticipantsChanged,b("VFRTCCallReducer").processConferenceState,b("VFRTCCallReducer").processJoinResponse,b("VFRTCCallReducer").processLocalScreenStream,b("VFRTCCallReducer").processLocalStream,b("VFRTCCallReducer").processRemoteScreenStream,b("VFRTCCallReducer").processRemoteStream,b("VFRTCCallReducer").processRemoteTrack,b("VFRTCCallReducer").processUsers,b("VFRTCCallReducer").toggleLocalStream,b("VFRTCCallReducer").toggleRemoteStream,b("VFRTCCallReducer").waitForUserInput];g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return new(b("VFRTCCallStoreState"))()};a.prototype.reduce=function(a,b){return h.reduce(function(a,c){return c(a,b)},a)};a.prototype.hasRemoteVideo=function(){return this.getState().remoteUsers.some(function(a){return a.hasStream()&&!a.areAllTracksMuted(a.streams.first().getVideoTracks())})};a.prototype.hasLocalVideo=function(){var a=this.getState();a=a.localUser;return a.hasStream()&&!a.areAllTracksMuted(a.streams.first().getVideoTracks())};a.prototype.isInCall=function(a){a===void 0&&(a=!1);var c=this.getState(),d=c.callInfo;c=c.remoteUsers;return d.conferenceState===b("RTCConferenceState").CONNECTING||d.conferenceState===b("RTCConferenceState").CONNECTED||a&&d.conferenceState===b("RTCConferenceState").NEW&&c.size>0};a.prototype.getConnection=function(a){var b=this.getState();b=b.connections;a&&(b=b.filter(function(b){return b.getSignalingProtocol()===a}));return b.first()};a.prototype.mutateCallSummary=function(a){var c=this.getState();c=c.callSummary;a(c);c.save(b("VFRTCCallSummaryStore").getInstance())};a.prototype.getSortedRemoteUsers=function(){return this.getState().remoteUsers.toList().sort(function(a,b){return a.lastConnectedAt===b.lastConnectedAt?a.FBID>b.FBID?1:-1:a.lastConnectedAt-b.lastConnectedAt})};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("VFRTCAppDispatcher"))}),null);
__d("VFRTCCallStoreState",["CurrentUser","RTCConferenceState","VFRTCCallSummary","VFRTCUser","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h;d={debugID:0,callID:"",conferenceState:b("RTCConferenceState").NEW,conferenceName:"",protocol:"",serverInfoData:""};g=babelHelpers.inherits(a,b("immutable").Record(d));g&&g.prototype;function a(){g.apply(this,arguments)}f={connections:b("immutable").Set(),localUser:new(b("VFRTCUser"))({FBID:b("CurrentUser").getID()}),remoteUsers:b("immutable").Set(),callInfo:new a(),callSummary:b("VFRTCCallSummary").nullSummary(),mediaStatus:b("immutable").Map()};h=babelHelpers.inherits(c,b("immutable").Record(f));h&&h.prototype;function c(){h.apply(this,arguments)}e.exports=c}),null);
__d("VFRTCCoExperienceStoreState",["immutable"],(function(a,b,c,d,e,f){"use strict";var g;c={chatWindowVisible:!1,currentVideoFilter:null,videoFilterHistory:b("immutable").Map()};g=babelHelpers.inherits(a,b("immutable").Record(c));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("VFRTCCoExperienceStore",["FluxReduceStore","VFRTCAppDispatcher","VFRTCCallStore","VFRTCCallSummaryStore","VFRTCCoExperienceReducer","VFRTCCoExperienceStoreState","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=[b("VFRTCCoExperienceReducer").processChatWindowToggle,b("VFRTCCoExperienceReducer").processSetVideoFilter];g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return new(b("VFRTCCoExperienceStoreState"))()};a.prototype.reduce=function(a,b){return h.reduce(function(a,c){return c(a,b)},a)};a.prototype.logCoExperienceDurationToSummary=function(a){var c=b("VFRTCCallStore").getState();c=c.callSummary;c.setEffectCount(a.size);var d=0;a.reduce(function(a,b){d+=b},0);c.setTotalVideoFilterDuration(d);c.setCoExperienceEffectDuration(d);c.save(b("VFRTCCallSummaryStore").getInstance())};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("VFRTCAppDispatcher"))}),null);
__d("VFRTCCoExperienceActions",["RTCCoExperienceActionTypes","VFRTCAppDispatcher"],(function(a,b,c,d,e,f){"use strict";a={toggleChatWindow:function(){b("VFRTCAppDispatcher").dispatch({type:b("RTCCoExperienceActionTypes").TOGGLE_CHAT_WINDOW})},setVideoFilter:function(a){b("VFRTCAppDispatcher").dispatch({type:b("RTCCoExperienceActionTypes").SET_FILTER,filter:a})},removeVideoFilter:function(){b("VFRTCAppDispatcher").dispatch({type:b("RTCCoExperienceActionTypes").SET_FILTER,filter:null})}};e.exports=a}),null);
__d("VFRTCVideoFilterRenderer",["invariant","RTCVideoFilterConfig","VFFBRTCUtils","VFRTCCallStore","VFRTCCoExperienceActions","VFRTCCoExperienceStore"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("RTCVideoFilterConfig").config,i=b("VFFBRTCUtils").attachMediaStream,j=30;k.initStreamForFilters=function(a){a=k.initFilters(a);return a};k.applyStreamEffect=function(a){k.createEffectElement(a),b("VFRTCCoExperienceActions").setVideoFilter(a),k.applyFilters()};k.removeStreamEffect=function(){b("VFRTCCoExperienceActions").removeVideoFilter(),k.applyFilters()};k.initCanvas=function(a){__p&&__p();var b=document.createElement("canvas"),c=document.createElement("video");b.className="filteredCanvas";c.className="filteredVideo";i(c,a);c.muted=!0;c.play();b.width=a.getVideoTracks()[0].getSettings().width;b.height=a.getVideoTracks()[0].getSettings().height;a=document;a=a.body;a!=null||g(0,2402);a.append(b);a.append(c);return{cvs:b,vid:c}};k.initFilters=function(a){__p&&__p();var b;!document.querySelector("canvas.filteredCanvas")||!document.querySelector("video.filteredVideo")?b=k.initCanvas(a).cvs:b=document.querySelector("canvas.filteredCanvas");if(b===null)return a;b=b.captureStream(j).getVideoTracks()[0];if(!b)return a;k.startApplyingFilters(a);var c=new MediaStream([a.getAudioTracks()[0],b]);b.addEventListener("ended",function(b){a.getVideoTracks().forEach(function(a){a.readyState!=="ended"&&a.stop()})});return c};k.startApplyingFilters=function(a){if(window.MediaRecorder!==void 0){a=new MediaRecorder(a);a.ondataavailable=k.applyFilters;a.start(Math.floor(1e3/j))}else{a=function a(){k.applyFilters(),window.requestAnimationFrame(a)};a()}};k.applyFilters=function(){__p&&__p();var a=b("VFRTCCallStore").getState().localUser.isVideoMuted(),c=document.querySelector("canvas.filteredCanvas"),d=document.querySelector("video.filteredVideo");if(a||c==null||d==null)return;a=d.videoWidth;var e=d.videoHeight;if(a>0&&e>0){c=c.getContext("2d");c.drawImage(d,0,0,a,e);d=b("VFRTCCoExperienceStore").getState().currentVideoFilter;if(d){d=document.querySelector("video."+(d?d:""));c.drawImage(d,0,0,a,e)}}};k.createEffectElement=function(a){__p&&__p();if(document.querySelector("video."+a))return null;var b=document.createElement("video");b.className=a;b.crossOrigin="anonymous";b.src=h[a].video_url;b.play();b.autoplay=!0;b.loop=!0;a=document;a=a.body;a!=null||g(0,2402);a.append(b);return b};function k(){}e.exports=k}),null);
__d("VFWebAddMemberWarning.react",["fbt","React","stylex"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();b("stylex").inject(".fs-80e17{font-size:0.8125rem}",1);b("stylex").inject(".c-947be{color:var(--fds-white-alpha-50)}",1);b("stylex").inject(".pl-35382{padding-left:20px}",1);b("stylex").inject(".pr-e47c1{padding-right:20px}",1);b("stylex").inject(".mt-f8c92{margin-top:5px}",1);b("stylex").inject(".mb-3e112{margin-bottom:5px}",1);function a(){return b("React").createElement("div",{className:"mb-3e112 mt-f8c92 pr-e47c1 pl-35382 c-947be fs-80e17"},g._("People you add to this group video will see previous messages in this conversation."))}e.exports=a}),null);
__d("VFWebSearchInput.react",["cx","AbstractTextInput.react","React","VFWebButton.react","VFWebIcon.react","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.inputField=b("React").createRef(),c}a.prototype.componentDidMount=function(){var a=this.props.isFocused,b=this.inputField.current;a&&b&&b.focusInput()};a.prototype.componentDidUpdate=function(a){var b=this.props.isFocused,c=this.inputField.current;if(b==null||!c)return;if(a.isFocused===b)return;b?c.focusInput():c.blurInput()};a.prototype.render=function(){return b("React").createElement("div",{className:b("joinClasses")(this.props.className,"_4-3c")},b("React").createElement("div",{className:b("joinClasses")(this.props.className,"_6m4o"+(this.props.isFocused||!!this.props.value?" _2luq":"")+(this.props.isFocused?"":" _2lup")),role:"search"},b("React").createElement(b("VFWebIcon.react"),{className:"_76ah",glyph:"magnifying-glass",size:20}),b("React").createElement(b("AbstractTextInput.react"),{ref:this.inputField,className:"_2qaw",onBlur:this.props.onBlur,onChange:this.props.onChange,onClick:this.props.onClick,onEnter:this.props.onEnter,onKeyUp:this.props.onKeyUp,onFocus:this.props.onFocus,placeholder:this.props.placeholder,value:this.props.value,disabled:this.props.isDisabled}),b("React").createElement("div",{className:(this.props.isFocused?"":"hidden_elem")+" _2lv8"},b("React").createElement(b("VFWebButton.react"),{size:20,icon:"cross",use:"inverted",label:"Clear Search",onClick:this.props.onClear}))))};e.exports=a}),null);
__d("VFWebListTraySearchBar.react",["cx","invariant","Keys","React","VFWebLogger","VFWebSearchInput.react","VFWebStrings"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$1=function(a){a.target instanceof HTMLInputElement||h(0,1185);a=a.target.value;var b=this.props.updateSearchQuery;b&&b(a)}.bind(this),this.$2=function(){b("VFWebLogger").logClick(this.props.surface,"vfweb_search_input"),this.props.enableSearch()}.bind(this),this.$3=function(a){a.keyCode===b("Keys").ESC&&this.props.disableSearch()}.bind(this),c}a.prototype.render=function(){return b("React").createElement(b("VFWebSearchInput.react"),{className:this.props.isBlurred?"_70w1":"",isFocused:this.props.isFocused,placeholder:this.props.placeholder,onChange:this.$1,onFocus:this.$2,onClear:this.props.disableSearch,onKeyUp:this.$3,value:this.props.searchQuery,isDisabled:this.props.isDisabled})};e.exports=a}),null);
__d("VFWebModal.react",["React","VFWebText.react","stylex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("stylex").inject("@keyframes df0fa-B{0%{transform:translate(-50%, -100%);}100%{transform:translate(-50%, 0);}}",1);b("stylex").inject(".bc-02e2e{background-color:var(--fds-gray-100)}",1);b("stylex").inject(".d-17516{display:flex}",1);b("stylex").inject(".fd-85d4c{flex-direction:column}",1);b("stylex").inject(".w-8f18d{width:420px}",1);b("stylex").inject(".mh-a3a2a{max-height:100%}",1);b("stylex").inject("@media (min-height:600px){.mh-4c41a{max-height:600px}}",2);b("stylex").inject(".l-da312{left:50%}",1);b("stylex").inject(".t-e6bae{top:50%}",1);b("stylex").inject(".p-2d38c{position:fixed}",1);b("stylex").inject(".t-2c3fc{transform:translate(-50%, -50%)}",.1);b("stylex").inject(".br-9d9af{border-radius:12px}",1);b("stylex").inject(".l-da312{left:50%}",1);b("stylex").inject(".t-8d3c4{top:0px}",1);b("stylex").inject(".p-2d38c{position:fixed}",1);b("stylex").inject(".t-57d2d{transform:translate(-50%, 0)}",.1);b("stylex").inject(".bblr-8c18c{border-bottom-left-radius:12px}",1);b("stylex").inject(".bbrr-a34b5{border-bottom-right-radius:12px}",1);b("stylex").inject(".ad-03cee{animation-duration:300ms}",1);b("stylex").inject(".an-6514e{animation-name:df0fa-B}",1);b("stylex").inject(".atf-812ca{animation-timing-function:ease-out}",1);b("stylex").inject(".d-17516{display:flex}",1);b("stylex").inject(".fd-7e677{flex-direction:row}",1);b("stylex").inject(".fs-e47bf{flex-shrink:0}",1);b("stylex").inject(".p-56f6a{padding:20px}",.1);b("stylex").inject(".d-17516{display:flex}",1);b("stylex").inject(".fd-85d4c{flex-direction:column}",1);b("stylex").inject(".o-02b0f{overflow:hidden}",.1);b("stylex").inject(".h-4535f{height:10000px}",1);b("stylex").inject(".p-56f6a{padding:20px}",.1);b("stylex").inject(".d-17516{display:flex}",1);b("stylex").inject(".fd-7e677{flex-direction:row}",1);b("stylex").inject(".ai-7d911{align-items:center}",1);b("stylex").inject(".fs-e47bf{flex-shrink:0}",1);b("stylex").inject(".p-56f6a{padding:20px}",.1);b("stylex").inject(".d-17516{display:flex}",1);b("stylex").inject(".d-17516{display:flex}",1);b("stylex").inject(".fd-7e677{flex-direction:row}",1);b("stylex").inject(".jc-223e1{justify-content:flex-end}",1);b("stylex").inject(".f-20298{flex:1}",.1);b("stylex").inject(".d-17516{display:flex}",1);b("stylex").inject(".h-e73d7{height:30px}",1);b("stylex").inject(".p-3a84f{padding:6px}",.1);b("stylex").inject(".pl-53e0b{padding-left:10px}",1);b("stylex").inject(".pr-1d34e{padding-right:10px}",1);b("stylex").inject(".ml-fe897{margin-left:10px}",1);b("stylex").inject(".c-374ba{color:var(--fds-white-text)}",1);b("stylex").inject(".b-93424{border:none}",.1);b("stylex").inject(".br-3a6d3{border-radius:10px}",1);b("stylex").inject(".bc-119da{background-color:var(--fds-white-alpha-20)}",1);b("stylex").inject(".bc-cc95e:hover{background-color:var(--fds-white-alpha-40)}",8);b("stylex").inject(".bc-32f25:active{background-color:var(--fds-white-alpha-20)}",10);b("stylex").inject(".bc-46cbd{background-color:#018eed}",1);b("stylex").inject(".bc-7c610:hover{background-color:#42acf3}",8);b("stylex").inject(".bc-e2c83:active{background-color:#018eed}",10);b("stylex").inject(".c-6ce82{color:var(--fds-white-alpha-30)}",1);b("stylex").inject(".bc-119da{background-color:var(--fds-white-alpha-20)}",1);b("stylex").inject(".bc-8047b:hover{background-color:var(--fds-white-alpha-20)}",8);b("stylex").inject(".bc-32f25:active{background-color:var(--fds-white-alpha-20)}",10);function a(a){return b("React").createElement("div",{className:"mh-4c41a mh-a3a2a w-8f18d fd-85d4c d-17516 bc-02e2e br-9d9af t-2c3fc p-2d38c t-e6bae l-da312"},a.children)}function c(a){return b("React").createElement("div",{className:"mh-4c41a mh-a3a2a w-8f18d fd-85d4c d-17516 bc-02e2e atf-812ca an-6514e ad-03cee bbrr-a34b5 bblr-8c18c t-57d2d p-2d38c t-8d3c4 l-da312"},a.children)}function d(a){return b("React").createElement("div",{className:"p-56f6a fs-e47bf fd-7e677 d-17516"},a.children)}function f(a){return b("React").createElement("div",{className:"o-02b0f fd-85d4c d-17516"+(a.height==="full"?" h-4535f":"")+(a.padding==="default"?" p-56f6a":"")},a.children)}f.defaultProps={height:"auto",padding:"default"};function g(a){return b("React").createElement("div",{className:"p-56f6a fs-e47bf ai-7d911 fd-7e677 d-17516"},b("React").createElement("div",{className:"d-17516"},a.leftContent),b("React").createElement("div",{className:"f-20298 jc-223e1 fd-7e677 d-17516"},a.children))}function h(a){return b("React").createElement("button",{className:b("stylex").dedupe(Object.assign({"display-1":"d-17516","height-1":"h-e73d7","padding-0.1":"p-3a84f","padding-left-1":"pl-53e0b","padding-right-1":"pr-1d34e","margin-left-1":"ml-fe897","color-1":"c-374ba","border-0.1":"b-93424","border-radius-1":"br-3a6d3","background-color-1":"bc-119da","background-color-8":"bc-cc95e","background-color-10":"bc-32f25"},a.use==="confirm"?{"background-color-1":"bc-46cbd","background-color-8":"bc-7c610","background-color-10":"bc-e2c83"}:null,a.disabled?{"color-1":"c-6ce82","background-color-1":"bc-119da","background-color-8":"bc-8047b","background-color-10":"bc-32f25"}:null)),disabled:a.disabled,onClick:a.onClick},b("React").createElement(b("VFWebText.react"),{style:"button-large"},a.label))}h.defaultProps={use:"button",disabled:!1};e.exports={Dialog:a,Sheet:c,Header:d,Body:f,Footer:g,Button:h}}),null);
__d("VFWebTrayLabel.react",["React","stylex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("stylex").inject(".tt-ba66b{text-transform:uppercase}",1);b("stylex").inject(".c-947be{color:var(--fds-white-alpha-50)}",1);b("stylex").inject(".fw-53508{font-weight:bold}",1);b("stylex").inject(".fg-9eb8f{flex-grow:0}",1);b("stylex").inject(".fs-e47bf{flex-shrink:0}",1);b("stylex").inject(".fs-80e17{font-size:0.8125rem}",1);b("stylex").inject(".mt-86185{margin-top:4px}",1);b("stylex").inject(".d-17516{display:flex}",1);b("stylex").inject(".ai-7d911{align-items:center}",1);b("stylex").inject(".pl-35382{padding-left:20px}",1);b("stylex").inject(".pr-e47c1{padding-right:20px}",1);function a(a){return b("React").createElement("div",{className:"pr-e47c1 pl-35382 ai-7d911 d-17516 mt-86185 fs-80e17 fs-e47bf fg-9eb8f fw-53508 c-947be tt-ba66b"},a.children)}e.exports=a}),null);
__d("VFWebAddPeopleTray.react",["fbt","FluxContainer","React","ScrollableArea.react","VFRTCCallStore","VFWebAddMemberWarning.react","VFWebAppFluxStore","VFWebListTraySearchBar.react","VFWebListTraySearchResults.react","VFWebModal.react","VFWebPeopleInCall.react","VFWebStrings","VFWebText.react","VFWebTrayLabel.react","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("VFWebModal.react").Body,j=b("VFWebModal.react").Button,k=b("VFWebModal.react").Footer,l=b("VFWebModal.react").Header,m=b("VFWebModal.react").Sheet;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.state={searchQuery:null,remoteUsers:b("immutable").Set()},this.searchDataSource=new(b("VFWebListTraySearchResults.react").DataSource)({includeGroups:!1}),this.$4=function(a){this.setState({searchQuery:a})}.bind(this),this.$2=function(){this.setState({searchQuery:null})}.bind(this),this.$3=function(){this.setState({searchQuery:""})}.bind(this),this.$1=function(a){this.containerDiv&&a.target instanceof Node&&!this.containerDiv.contains(a.target)&&this.$2()}.bind(this),c}a.getStores=function(){return[b("VFRTCCallStore")]};a.calculateState=function(a){return babelHelpers["extends"]({},a,{remoteUsers:b("VFRTCCallStore").getState().remoteUsers})};a.prototype.componentDidMount=function(){this.searchDataSource.setQuery(""),document.addEventListener("click",this.$1,!1)};a.prototype.componentWillUnmount=function(){document.removeEventListener("click",this.$1,!1)};a.prototype.render=function(){__p&&__p();var a=this.state,c=a.searchQuery;a=a.remoteUsers;var d=null,e=null;if(c==null)e=b("React").createElement(b("VFWebPeopleInCall.react"),{surface:"vfweb_add_people_tray"});else{var f=c.length>0,h=f?"vfweb_add_people_tray_search":"vfweb_add_people_tray_suggestions";d=b("React").createElement(b("VFWebTrayLabel.react"),null,f?g._("Search Results"):g._("Suggestions"));e=b("React").createElement(b("VFWebListTraySearchResults.react"),{dataSource:this.searchDataSource,searchQuery:c,resultButtonMode:"invite",surface:h})}f=null;c!=null&&a.size>1&&(f=b("React").createElement(b("VFWebAddMemberWarning.react"),null));return b("React").createElement(m,null,b("React").createElement(l,null,b("React").createElement(b("VFWebText.react"),{style:"title-large"},b("VFWebStrings").in_this_call_label)),b("React").createElement(i,{height:"full",padding:"none"},b("React").createElement(b("VFWebListTraySearchBar.react"),{disableSearch:this.$2,enableSearch:this.$3,isFocused:c!=null,searchQuery:c||"",placeholder:b("VFWebStrings").search_placeholder_roster,surface:"vfweb_add_people_tray",updateSearchQuery:this.$4}),f,d,b("React").createElement(b("ScrollableArea.react"),{tabIndex:0},e)),b("React").createElement(k,null,b("React").createElement(j,{use:"confirm",label:"Done",onClick:b("VFWebAppFluxStore").removeOverlayModal})))};e.exports=b("FluxContainer").create(a)}),null);
__d("VFWebProfileImage.react",["Image.react","React","joinClasses","stylex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b("stylex").inject(".of-67c9f{object-fit:cover}",1);b("stylex").inject(".ai-7d911{align-items:center}",1);b("stylex").inject(".d-17516{display:flex}",1);b("stylex").inject(".jc-3ffb8{justify-content:center}",1);b("stylex").inject(".bc-119da{background-color:var(--fds-white-alpha-20)}",1);b("stylex").inject(".c-6ce82{color:var(--fds-white-alpha-30)}",1);b("stylex").inject(".bc-032ca{background-color:var(--fds-black-alpha-20)}",1);b("stylex").inject(".c-c6ae4{color:var(--fds-black-alpha-30)}",1);b("stylex").inject(".fs-18a8a{font-size:1.0625rem}",1);b("stylex").inject(".fs-80e17{font-size:0.8125rem}",1);c=babelHelpers.inherits(a,b("React").Component);g=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.state={imageHasError:!Boolean(this.props.imageUri)},b}a.prototype.componentDidUpdate=function(a){this.props.imageUri!==a.imageUri&&this.setState({imageHasError:!Boolean(this.props.imageUri)})};a.prototype.render=function(){var a=this.props,c=a.className,d=a.fallbackColor,e=a.fallbackText,f=a.fallbackTextSize;a=a.imageUri;return this.state.imageHasError?b("React").createElement("div",{className:b("joinClasses")(c,b("stylex").dedupe(Object.assign({"object-fit-1":"of-67c9f"},{"align-items-1":"ai-7d911","display-1":"d-17516","justify-content-1":"jc-3ffb8"},d==="white"||!Boolean(d)?{"background-color-1":"bc-119da","color-1":"c-6ce82"}:null,d==="black"?{"background-color-1":"bc-032ca","color-1":"c-c6ae4"}:null,f===17||!Boolean(f)?{"font-size-1":"fs-18a8a"}:null,f===13?{"font-size-1":"fs-80e17"}:null)))},e):b("React").createElement(b("Image.react"),{draggable:"false",src:a,className:b("joinClasses")(c,"of-67c9f"),onError:function(){this.setState({imageHasError:!0})}.bind(this)})};e.exports=a}),null);
__d("VFWebGroupProfile.react",["React","VFWebProfileImage.react","stylex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("stylex").inject(".p-d2b6b{position:relative}",1);b("stylex").inject(".w-3c80e{width:40px}",1);b("stylex").inject(".h-479cc{height:40px}",1);b("stylex").inject(".w-a9bfc{width:26px}",1);b("stylex").inject(".h-291bb{height:26px}",1);b("stylex").inject(".p-5414d{position:absolute}",1);b("stylex").inject(".br-2a1ee{border-radius:50%}",1);b("stylex").inject(".b-3c3c7{bottom:0px}",1);b("stylex").inject(".l-76624{left:0px}",1);b("stylex").inject(".t-8d3c4{top:0px}",1);b("stylex").inject(".r-00c4b{right:0px}",1);b("stylex").inject(".cp-85100{clip-path:url(#vfwSecondAvatar)}",1);var g=b("React").createElement("svg",{width:"43",height:"43"},b("React").createElement("defs",null,b("React").createElement("clipPath",{id:"vfwSecondAvatar"},b("React").createElement("path",{d:"M14.97 26 C14.47 17.96, 8.04 11.53, 0 11.03 L0 0 L26 0 L26 26 L14.97 26 Z",fill:"black"}))));function h(a){a=a.profiles;var c=a[0];a=a[1];return b("React").createElement("div",{className:"h-479cc w-3c80e p-d2b6b"},b("React").createElement(b("VFWebProfileImage.react"),{className:"br-2a1ee p-5414d h-291bb w-a9bfc l-76624 b-3c3c7",fallbackText:i(c),fallbackTextSize:13,imageUri:c==null?void 0:c.imageUri}),b("React").createElement(b("VFWebProfileImage.react"),{className:"br-2a1ee p-5414d h-291bb w-a9bfc cp-85100 r-00c4b t-8d3c4",fallbackText:i(a),fallbackTextSize:13,imageUri:a==null?void 0:a.imageUri}),g)}function i(a){a=a==null?void 0:a.userName;return a!=null?a.charAt(0):null}h.examples=[{title:"Profile picture for group",render:function(){return b("React").createElement("div",null,b("React").createElement(h,{profiles:[{userName:"One",imageUri:"https://via.placeholder.com/52/f557d3/ffffff?text=1"},{userName:"Two",imageUri:"https://via.placeholder.com/52/57b8f5/ffffff?text=2"}]}))}}];e.exports=h}),null);
__d("VFWebListItem.react",["ClickableArea.react","React","emptyFunction","stylex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useState;b("stylex").inject(".d-17516{display:flex}",1);b("stylex").inject(".fg-9eb8f{flex-grow:0}",1);b("stylex").inject(".fs-e47bf{flex-shrink:0}",1);b("stylex").inject(".fd-85d4c{flex-direction:column}",1);b("stylex").inject(".ml-8c071{margin-left:4px}",1);b("stylex").inject(".mr-87742{margin-right:4px}",1);b("stylex").inject(".p-d7814{padding:12px}",.1);b("stylex").inject(".br-f7cf4{border-radius:8px}",1);b("stylex").inject(".bs-7e05b{box-sizing:border-box}",1);b("stylex").inject(".d-17516{display:flex}",1);b("stylex").inject(".fd-7e677{flex-direction:row}",1);b("stylex").inject(".ai-7d911{align-items:center}",1);b("stylex").inject(".bc-afb58{background-color:var(--fds-white-alpha-10)}",1);b("stylex").inject(".mb-c3a4c{margin-bottom:4px}",1);b("stylex").inject(".w-3c80e{width:40px}",1);b("stylex").inject(".h-479cc{height:40px}",1);b("stylex").inject(".d-17516{display:flex}",1);b("stylex").inject(".fg-42ff7{flex-grow:1}",1);b("stylex").inject(".fd-7e677{flex-direction:row}",1);b("stylex").inject(".ai-7d911{align-items:center}",1);b("stylex").inject(".as-b0ac9{align-self:stretch}",1);b("stylex").inject(".mw-bf7ef{min-width:0px}",1);b("stylex").inject(".ml-9af34{margin-left:12px}",1);b("stylex").inject(".d-17516{display:flex}",1);b("stylex").inject(".fg-42ff7{flex-grow:1}",1);b("stylex").inject(".fs-2d2a1{flex-shrink:1}",1);b("stylex").inject(".fd-85d4c{flex-direction:column}",1);b("stylex").inject(".mw-bf7ef{min-width:0px}",1);b("stylex").inject(".fs-f1695{font-size:0.9375rem}",1);b("stylex").inject(".fw-53508{font-weight:bold}",1);b("stylex").inject(".lh-1db6f{line-height:1.3333333333333333}",1);b("stylex").inject(".o-02b0f{overflow:hidden}",.1);b("stylex").inject(".to-b7159{text-overflow:ellipsis}",1);b("stylex").inject(".ws-1792a{white-space:nowrap}",1);b("stylex").inject(".c-bdda1{color:var(--fds-white)}",1);b("stylex").inject(".mw-bf7ef{min-width:0px}",1);b("stylex").inject(".fs-80e17{font-size:0.8125rem}",1);b("stylex").inject(".lh-7bfdb{line-height:1.1538461538461537}",1);b("stylex").inject(".o-02b0f{overflow:hidden}",.1);b("stylex").inject(".to-b7159{text-overflow:ellipsis}",1);b("stylex").inject(".ws-1792a{white-space:nowrap}",1);b("stylex").inject(".c-947be{color:var(--fds-white-alpha-50)}",1);b("stylex").inject(".mw-bf7ef{min-width:0px}",1);b("stylex").inject(".ml-bd360{margin-left:1px}",1);b("stylex").inject(".ml-9af34{margin-left:12px}",1);b("stylex").inject(".d-db3f8{display:none}",1);b("stylex").inject(".h-cbd1d{height:0px}",1);b("stylex").inject(".mt-e7c31{margin-top:0px}",1);b("stylex").inject(".t-6b199{transition:height 0.3s ease-out}",.1);b("stylex").inject(".o-02b0f{overflow:hidden}",.1);b("stylex").inject(".h-3e554{height:54px}",1);b("stylex").inject(".mt-cf934{margin-top:10px}",1);b("stylex").inject(".mt-69d6d{margin-top:2px}",1);function h(a){var c=a.subtitle==null?null:b("React").createElement("div",{className:"ml-bd360 mw-bf7ef c-947be ws-1792a to-b7159 o-02b0f lh-7bfdb fs-80e17"},a.subtitle),d=a.title==null?null:b("React").createElement("div",{className:"mw-bf7ef c-bdda1 ws-1792a to-b7159 o-02b0f lh-1db6f fw-53508 fs-f1695"},a.title),e=g(!1),f=e[0],h=e[1];e=function(){return h(!0)};var i=function(){return h(!1)},j=a.showAuxOnlyOnHover&&!f,k=a.expandedContent==null;return b("React").createElement(b("ClickableArea.react"),{onClick:a.onClick||b("emptyFunction")},b("React").createElement("div",{className:"bs-7e05b br-f7cf4 p-d7814 mr-87742 ml-8c071 fd-85d4c fs-e47bf fg-9eb8f d-17516"+(a.isLast?" mb-c3a4c":"")+(a.alwaysHighlighted||f?" bc-afb58":""),onMouseEnter:e,onMouseLeave:i,onContextMenu:a.onContextMenu},b("React").createElement("div",{className:"ai-7d911 fd-7e677 d-17516"},b("React").createElement("div",{className:"h-479cc w-3c80e"},a.icon),b("React").createElement("div",{className:"ml-9af34 mw-bf7ef as-b0ac9 ai-7d911 fd-7e677 fg-42ff7 d-17516"},b("React").createElement("div",{className:"mw-bf7ef fd-85d4c fs-2d2a1 fg-42ff7 d-17516"},d,c),b("React").createElement("div",{className:"ml-9af34"+(j||!k?" d-db3f8":"")},a.aux))),b("React").createElement("div",{className:b("stylex").dedupe(Object.assign({"transition-0.1":"t-6b199","overflow-0.1":"o-02b0f","height-1":"h-3e554","margin-top-1":"mt-cf934"},c===null?{"margin-top-1":"mt-69d6d"}:null,k?{"height-1":"h-cbd1d","margin-top-1":"mt-e7c31"}:null))},a.expandedContent)))}h.defaultProps={showAuxOnlyOnHover:!1,alwaysHighlighted:!1};var i=function(a){return b("React").createElement("div",{style:{backgroundColor:"#777",width:a,height:a,borderRadius:"50%"}})};h.examples=[{title:"List item with image and title",render:function(){return b("React").createElement("div",null,b("React").createElement(h,{icon:i(40),title:"Planet Express"}),b("React").createElement(h,{icon:i(40),title:"Planet Express",subtitle:"42 minutes ago"}),b("React").createElement(h,{icon:i(40),title:"The Planet Express: Hover this to see hidden aux",subtitle:"42 minutes ago",aux:i(32),showAuxOnlyOnHover:!0}),b("React").createElement(h,{icon:i(40),title:"This item is always highlighted",subtitle:"42 minutes ago",alwaysHighlighted:!0}),b("React").createElement(h,{icon:i(40),title:"The last Planet Express",subtitle:"42 minutes ago",aux:i(32),isLast:!0}),b("React").createElement(h,{icon:i(40),title:"The Planet Expandable",expandedContent:"I am expanded"}))}}];e.exports=h}),null);
__d("VFWebUserProfile.react",["cx","fbt","React","VFWebIcon.react","VFWebProfileImage.react","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;b("stylex").inject(".w-bffd0{width:100%}",1);b("stylex").inject(".h-3e8d9{height:100%}",1);var j=b("React").createElement("div",{className:"_6j1l","aria-label":h._("Active now")});i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.render=function(){var a=this.props,c=a.fallbackColor,d=a.isOnline,e=a.userName,f=a.userProfileUri,g=a.showShimmer;a=a.isProfileButton;g=g===!0?b("React").createElement("div",{className:"_2upd _70w2"}):b("React").createElement(b("VFWebProfileImage.react"),{className:"h-3e8d9 w-bffd0",imageUri:f,fallbackColor:c,fallbackText:e!=null?e.charAt(0):null});return b("React").createElement("div",{className:"_6jkp"},b("React").createElement("div",{className:"_2ug5"+(d?" _6j2j":"")},a==null?g:b("React").createElement(b("React").Fragment,null,g,b("React").createElement("div",{className:"_7byj"},b("React").createElement(b("VFWebIcon.react"),{glyph:"settings",size:28,color:"white"})))),d===!0?j:null)};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("VFWebGroupItem.react",["React","RelayModern","VFWebGroupProfile.react","VFWebListItem.react","VFWebListItemCallControls.react","VFWebUserProfile.react","VFWebGroupItem_messageThread.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.render=function(){__p&&__p();var a,c,d,e=this.props.messageThread;a=e==null?void 0:(a=e.thread_key)==null?void 0:a.thread_fbid;if(a==null)return null;c=(((c=e.other_participants)==null?void 0:c.edges)||[]).map(function(a){return a.node}).filter(Boolean).map(function(a){return a.messaging_actor});var f=c.map(function(a){return a&&a.name}).filter(Boolean).join(", "),g=c.map(function(a){return a&&a.id}).filter(Boolean);d=((d=e.image)==null?void 0:d.uri)?b("React").createElement(b("VFWebUserProfile.react"),{userProfileUri:(d=e.image)==null?void 0:d.uri,userName:e.name}):b("React").createElement(b("VFWebGroupProfile.react"),{profiles:c.filter(Boolean).map(function(a){var b;return{imageUri:(b=a.profile_picture)==null?void 0:b.uri,userName:a.name}})});c=a===this.props.currentCallThreadId?null:b("React").createElement(b("VFWebListItemCallControls.react"),{threadId:a,usersToRing:g,surface:this.props.surface});a=e.name?{title:e.name,subtitle:f}:{title:f,subtitle:null};g=a.title;e=a.subtitle;return b("React").createElement(b("VFWebListItem.react"),{icon:d,title:g,subtitle:e,aux:c,showAuxOnlyOnHover:!0})};function a(){g.apply(this,arguments)}e.exports=c(a,{messageThread:function(){return b("VFWebGroupItem_messageThread.graphql")}})}),null);
__d("VFWebListItemCallControls.react",["cx","React","VFWebRingButton.react"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return b("React").createElement("div",{className:"_7g6f"},b("React").createElement(b("VFWebRingButton.react"),babelHelpers["extends"]({mode:"create",isAudioCall:!0},a)),b("React").createElement(b("VFWebRingButton.react"),babelHelpers["extends"]({mode:"create"},a)))}e.exports=a}),null);
__d("VFDataSource",["EventEmitter","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("EventEmitter"));g=c&&c.prototype;function a(a){g.constructor.call(this),this.$VFDataSource1=a,this.$VFDataSource3=null,this.$VFDataSource4=new Set(),this.$VFDataSource2={"":{items:[],loading:!1}}}a.prototype.setQuery=function(a){__p&&__p();var c=h(a);if(this.$VFDataSource4.has(c)){this.emit("change");return}var d=this.$VFDataSource5(c);d=this.$VFDataSource2[d].items;var e=d.filter(function(a){return this.$VFDataSource1.isMatchingQuery(a,c)}.bind(this));this.$VFDataSource6(c,{items:e,loading:!0});this.$VFDataSource3!==null&&clearTimeout(this.$VFDataSource3);this.$VFDataSource3=setTimeout(function(){this.$VFDataSource4.add(c),b("promiseDone")(this.$VFDataSource1.fetchData(a).then(function(a){var b=this.$VFDataSource1.getID,d=new Set(e.map(b));a=a.filter(function(a){return!d.has(b(a))});this.$VFDataSource6(c,{items:[].concat(e,a),loading:!1})}.bind(this)))}.bind(this),100)};a.prototype.$VFDataSource6=function(a,b){this.$VFDataSource2[a]=b,this.emit("change")};a.prototype.getState=function(a){return this.$VFDataSource2[h(a)]};a.prototype.$VFDataSource5=function(a){for(var b=a.length-1;b>0;b--){var c=a.substring(0,b);if(this.$VFDataSource2[c])return c}return""};function h(a){return a.toLowerCase().trim()}e.exports=a}),null);
__d("VFWebConferenceUtils",["regeneratorRuntime","RelayFBEnvironment","RelayModern","VFWebLogger","VFWebConferenceUtilsCallThreadLookupQuery.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h="PEER",i="MESSENGER",j=b("RelayModern").fetchQuery;b("RelayModern").graphql;function a(a){__p&&__p();var c,d,e,f;return b("regeneratorRuntime").async(function(h){__p&&__p();while(1)switch(h.prev=h.next){case 0:c=m(a);if(!(c==null)){h.next=3;break}return h.abrupt("return",null);case 3:h.prev=3;h.next=6;return b("regeneratorRuntime").awrap(j(b("RelayFBEnvironment"),g||(g=function(){return b("VFWebConferenceUtilsCallThreadLookupQuery.graphql")}),{callId:c}));case 6:f=h.sent;return h.abrupt("return",(d=f.node)==null?void 0:(e=d.thread)==null?void 0:e.id);case 10:h.prev=10;h.t0=h["catch"](3);b("VFWebLogger").logError(null,"thread_for_call_error",JSON.stringify(h.t0));throw h.t0;case 14:case"end":return h.stop()}},null,this,[[3,10]])}function k(a,b){return a+":"+b}function l(a,b){return b==null?null:b.startsWith(a+":")?b.substr(a.length+1):null}function c(a){return l(h,a)}function d(a){return k(h,a)}function m(a){return l(i,a)}e.exports={buildP2PConferenceName:d,parseP2PConferenceName:c,queryThreadId:a}}),null);
__d("VFWebLoadingIndicator.react",["cx","React","XUISpinner.react"],(function(a,b,c,d,e,f,g){"use strict";function a(){return b("React").createElement("div",{className:"_2mgg"},b("React").createElement(b("XUISpinner.react"),{size:"large",className:"_2mgj"}))}e.exports=a}),null);
__d("VFWebNoContent.react",["React","stylex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("stylex").inject(".mt-55092{margin-top:50px}",1);b("stylex").inject(".p-56f6a{padding:20px}",.1);b("stylex").inject(".ta-f09f6{text-align:center}",1);b("stylex").inject(".fs-80e17{font-size:0.8125rem}",1);b("stylex").inject(".lh-7bfdb{line-height:1.1538461538461537}",1);b("stylex").inject(".c-947be{color:var(--fds-white-alpha-50)}",1);function a(a){return b("React").createElement("div",{className:"c-947be lh-7bfdb fs-80e17 ta-f09f6 p-56f6a mt-55092"},a.message)}e.exports=a}),null);
__d("VFWebListTraySearchResults.react",["regeneratorRuntime","Promise","CurrentUser","FluxContainer","React","RelayFBEnvironment","RelayModern","VFDataSource","VFRTCCallStore","VFWebConferenceUtils","VFWebGroupItem.react","VFWebLoadingIndicator.react","VFWebMessengerContact.react","VFWebNoContent.react","VFWebStrings","immutable","promiseDone","VFWebListTraySearchResultsQuery.graphql","VFWebListTraySearchResultsGroupsQuery.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h,i=b("RelayModern").fetchQuery;b("RelayModern").graphql;var j=function(){return b("VFWebListTraySearchResultsQuery.graphql")},k=function(){return b("VFWebListTraySearchResultsGroupsQuery.graphql")};function l(a,c){__p&&__p();var d,e,f,g,h,l,m,n,o;return b("regeneratorRuntime").async(function(p){__p&&__p();while(1)switch(p.prev=p.next){case 0:p.next=2;return b("regeneratorRuntime").awrap(b("Promise").all([i(b("RelayFBEnvironment"),j,{name:a}),c.includeGroups?i(b("RelayFBEnvironment"),k,{name:a}):b("Promise").resolve({})]));case 2:h=p.sent;l=h[0];m=h[1];n=((l==null?void 0:(d=l.viewer)==null?void 0:(e=d.messenger_contacts)==null?void 0:e.nodes)||[]).map(function(a){return a==null?void 0:a.messaging_profile}).filter(function(a){return Boolean(a)&&a.id!==b("CurrentUser").getID()}).map(function(a){return{type:"contact",id:a.id,name:a.name,actor:a}});o=((m==null?void 0:(f=m.entities_named)==null?void 0:(g=f.search_results)==null?void 0:g.nodes)||[]).filter(function(a){return Boolean(a)&&a.thread_key!=null}).map(function(a){var b;return{type:"thread",id:(b=a.thread_key)==null?void 0:b.thread_fbid,name:a.name,messageThread:a}});return p.abrupt("return",[].concat(n,o));case 8:case"end":return p.stop()}},null,this)}function m(a,b){return((a==null?void 0:a.name)||"").toLowerCase().includes(b)}function n(a){return a.id||""}d=babelHelpers.inherits(a,b("VFDataSource"));g=d&&d.prototype;function a(a){g.constructor.call(this,{getID:n,isMatchingQuery:m,fetchData:function(b){return l(b,a)}})}f=babelHelpers.inherits(c,b("React").Component);h=f&&f.prototype;function c(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.state=babelHelpers["extends"]({},this.$1(),{remoteUserFbids:b("immutable").Set(),currentConferenceName:"",currentCallThreadId:null}),this.subscription=null,this.$2=function(){this.setState(this.$1())}.bind(this),c}c.getStores=function(){return[b("VFRTCCallStore")]};c.calculateState=function(a,c){c=b("VFRTCCallStore").getState().remoteUsers.map(function(a){return a.FBID});var d=b("VFRTCCallStore").getState().callInfo.conferenceName;return babelHelpers["extends"]({},a,{remoteUserFbids:c,currentConferenceName:d})};c.prototype.componentDidMount=function(){this.subscription=this.props.dataSource.addListener("change",this.$2),this.$3()};c.prototype.componentDidUpdate=function(a,b){this.props.searchQuery!==a.searchQuery&&this.props.dataSource.setQuery(this.props.searchQuery),b.currentConferenceName!==this.state.currentConferenceName&&this.$3()};c.prototype.componentWillUnmount=function(){this.subscription&&(this.subscription.remove(),this.subscription=null)};c.prototype.$3=function(){b("promiseDone")(b("VFWebConferenceUtils").queryThreadId(this.state.currentConferenceName).then(function(a){return this.setState({currentCallThreadId:a})}.bind(this)))};c.prototype.$1=function(){var a=this.props.dataSource.getState(this.props.searchQuery);return{items:a.items,loading:a.loading}};c.prototype.render=function(){var a=this.state.items.map(function(a){if(!a.id||this.state.remoteUserFbids.has(a.id))return null;if(a.type==="contact")return b("React").createElement(b("VFWebMessengerContact.react"),{buttonMode:this.props.resultButtonMode,messagingActor:a.actor,key:a.id,surface:this.props.surface});else if(a.type==="thread")return b("React").createElement(b("VFWebGroupItem.react"),{currentCallThreadId:this.state.currentCallThreadId,messageThread:a.messageThread,key:a.id,surface:this.props.surface});return null}.bind(this)).filter(Boolean);return b("React").createElement("div",null,a,this.state.loading?b("React").createElement(b("VFWebLoadingIndicator.react"),null):a.length===0?b("React").createElement(b("VFWebNoContent.react"),{message:b("VFWebStrings").search_no_results}):null)};c.DataSource=a;e.exports=b("FluxContainer").create(c,{withProps:!0})}),null);
__d("VFWebBlockUserMutation",["Promise","RelayFBEnvironment","RelayModern","VFWebBlockUserMutation.graphql"],(function(a,b,c,d,e,f){"use strict";var g=b("RelayModern").commitMutation;b("RelayModern").graphql;var h=function(){return b("VFWebBlockUserMutation.graphql")};function a(a,c){return new(b("Promise"))(function(d,e){g(b("RelayFBEnvironment"),{mutation:h,variables:{input:{target_id:a,should_be_blocked:c}},optimisticResponse:{messenger_block:{messaging_actor:{__typename:"User",id:a,is_message_blocked_by_viewer:c}}},onCompleted:d,onError:e})})}e.exports=a}),null);
__d("VFWebUserContextMenu",["fbt","regeneratorRuntime","VFDesktopHelper","VFWebBlockUserMutation","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){if(!b("VFDesktopHelper").isDesktopApp())return;var c=a.isBlocked?{label:g._("Unblock Calls"),click:function(){return i(a.fbid)}}:{label:g._("Block Calls"),click:function(){return b("promiseDone")(h(a.fbid,a.name))}};b("VFDesktopHelper").openContextMenu([c])}function h(a,c){__p&&__p();var d,e;return b("regeneratorRuntime").async(function(f){__p&&__p();while(1)switch(f.prev=f.next){case 0:f.next=2;return b("regeneratorRuntime").awrap(b("VFDesktopHelper").showMessageBox({title:g._("Block on Messenger"),type:"warning",message:g._("Are you sure you want to block {name of the person to block} on Messenger?",[g._param("name of the person to block",c)]),detail:g._("{bullet 1} {person name 1} will not be blocked on Facebook.{new line 1}{bullet 2} You won't receive messages or calls from {person name 2}. Any messages sent to you from {person name 3} during the block will not be received.{new line 2}{bullet 3} You and {person name 4} will be able to see, message and call each other in shared groups unless you leave them.",[g._param("bullet 1","\u2022"),g._param("person name 1",c),g._param("new line 1","\n"),g._param("bullet 2","\u2022"),g._param("person name 2",c),g._param("person name 3",c),g._param("new line 2","\n"),g._param("bullet 3","\u2022"),g._param("person name 4",c)]),buttons:[g._("Block"),g._("Cancel")]})["catch"](function(){return{response:0}}));case 2:d=f.sent;e=d.response;if(!(e===0)){f.next=7;break}f.next=7;return b("regeneratorRuntime").awrap(b("VFWebBlockUserMutation")(a,!0));case 7:case"end":return f.stop()}},null,this)}function i(a){b("promiseDone")(b("VFWebBlockUserMutation")(a,!1))}e.exports={show:a}}),null);
__d("VFWebUserRow.react",["AvailableListConstants","React","VFWebListItem.react","VFWebUserProfile.react","emptyFunction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.render=function(){var a=this.props.availability===b("AvailableListConstants").ACTIVE,c=this.props,d=c.expandedContent,e=c.handleContextMenu,f=c.onClick,g=c.primaryButton,h=c.showButtonOnlyOnHover,i=c.userName,j=c.userProfileUri;c=c.userSubtitle;return b("React").createElement(b("VFWebListItem.react"),{onContextMenu:e,expandedContent:d,onClick:f,icon:b("React").createElement(b("VFWebUserProfile.react"),{isOnline:a,userProfileUri:j,userName:i}),title:i,subtitle:c,aux:g,showAuxOnlyOnHover:h})};function a(){g.apply(this,arguments)}a.defaultProps={handleContextMenu:b("emptyFunction")};e.exports=a}),null);
__d("VFWebMessengerContact.react",["AvailableList","AvailableListConstants","ContactCards","FluxContainer","React","RelayModern","VFRTCCallStore","VFWebCallUtils","VFWebListItemCallControls.react","VFWebRingButton.react","VFWebStrings","VFWebSupportUtils","VFWebUserContextMenu","VFWebUserRow.react","immutable","VFWebMessengerContact_messagingActor.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("ContactCards").IndividualContactCard;c=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;d=babelHelpers.inherits(a,b("React").Component);g=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.$1=null,this.$2=!1,this.$4=function(){var a=this.props.messagingActor.id,c=this.props.messagingActor.name,d=!!this.props.messagingActor.is_message_blocked_by_viewer;a!=null&&c!=null&&b("VFWebUserContextMenu").show({fbid:a,name:c,isBlocked:d})}.bind(this),c}a.getStores=function(){return[b("VFRTCCallStore")]};a.calculateState=function(a,c){a=b("VFRTCCallStore").getState();a=a.remoteUsers;return{availability:b("AvailableList").get(c.messagingActor.id),remoteUsers:a}};a.prototype.componentDidMount=function(){this.$2=!0,this.$1=b("AvailableList").subscribe([b("AvailableListConstants").ON_AVAILABILITY_CHANGED],function(){if(!this.$2)return;var a=this.props.messagingActor.id;a=b("AvailableList").get(a);this.state.availability!==a&&this.setState({availability:a})}.bind(this))};a.prototype.componentWillUnmount=function(){this.$2=!1,this.$1&&(b("AvailableList").unsubscribe(this.$1),this.$1=null)};a.prototype.render=function(){var a,c=this.props,d=c.buttonMode,e=c.messagingActor,f=c.onClick;c=c.selected;var g=e.name;a=(a=e.profile_picture)==null?void 0:a.uri;d=this.$3(d);var i=Boolean(e.is_message_blocked_by_viewer);return b("React").createElement(b("VFWebUserRow.react"),{availability:this.state.availability,expandedContent:c&&!i&&b("VFWebSupportUtils").showContactCards()?b("React").createElement(h,{userId:e.id,userProfileUrl:e.url}):null,onClick:f,primaryButton:i?null:d,showButtonOnlyOnHover:!0,userProfileUri:a,userName:g,userSubtitle:i?b("VFWebStrings").blocked_user:null,handleContextMenu:this.$4})};a.prototype.$3=function(a){var c=this.props.messagingActor.id,d=b("VFWebCallUtils").canStartOneOnOneCallWithUser(c,this.state.remoteUsers),e={usersToRing:[c?c:""],surface:this.props.surface,threadId:null};return c&&d?a==="create"?b("React").createElement(b("VFWebListItemCallControls.react"),e):b("React").createElement(b("VFWebRingButton.react"),babelHelpers["extends"]({mode:a},e)):null};a.defaultProps={selected:!1};e.exports=c(b("FluxContainer").create(a,{withProps:!0}),{messagingActor:function(){return b("VFWebMessengerContact_messagingActor.graphql")}})}),null);
__d("VFWebPeopleInCall.react",["FBRTCParticipantCallState","FluxContainer","React","VFRTCCallStore","VFWebAppFluxStore","VFWebButton.react","VFWebCallUtils","VFWebIcon.react","VFWebLogger","VFWebRingButton.react","VFWebStrings","VFWebUserRow.react","immutable","stylex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b("stylex").inject(".mr-87742{margin-right:4px}",1);g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.getStores=function(){return[b("VFRTCCallStore"),b("VFWebAppFluxStore")]};a.calculateState=function(a){a=b("VFRTCCallStore").getState();var c=a.localUser;a=a.remoteUsers;var d=b("VFWebAppFluxStore").getState();d=d.locallyMutedUsers;return{locallyMutedUsers:d,localUser:c,remoteUsers:a}};a.prototype.render=function(){var a=this.state,c=a.localUser;a=a.remoteUsers;return b("immutable").List(a).filter(Boolean).sort(j).unshift(c).map(function(a,c){return b("React").createElement(b("VFWebUserRow.react"),{key:a.FBID,userProfileUri:a.profilePictureUrl,userName:a.userShortName,userSubtitle:b("VFWebStrings").call_state((c=a.participantState)==null?void 0:c.state),primaryButton:this.$1(a),showButtonOnlyOnHover:!1})}.bind(this))};a.prototype.$1=function(a){var c=this.state.localUser;if(a.FBID===c.FBID)return a.isAudioMuted()?b("React").createElement(b("VFWebIcon.react"),{glyph:"microphone-cross",size:24,className:"mr-87742"}):null;if(b("VFWebCallUtils").isConnected(a))return a.isAudioMuted()?b("React").createElement(b("VFWebIcon.react"),{glyph:"microphone-cross",size:24,className:"mr-87742"}):b("React").createElement(h,{user:a,surface:this.props.surface,isLocallyMuted:this.state.locallyMutedUsers.contains(a.FBID)});return b("VFWebCallUtils").isDisconnected(a)?b("React").createElement(b("VFWebRingButton.react"),{mode:"redial",usersToRing:[a.FBID],surface:"vfweb_list_tray"}):null};function a(){g.apply(this,arguments)}function h(a){return b("React").createElement(b("VFWebButton.react"),{size:32,use:a.isLocallyMuted?"inverted":"transparent",icon:a.isLocallyMuted?"audio-off":"audio-on",onClick:function(){b("VFWebLogger").logClick(a.surface,a.isLocallyMuted?"vfweb_call_audio_remote_un_mute":"vfweb_call_audio_remote_mute"),b("VFWebAppFluxStore").toggleMuteRemoteAudio(!a.isLocallyMuted,a.user.FBID)},label:"Toggle mute"})}function i(a){switch(a){case b("FBRTCParticipantCallState").CONNECTED:return 1;case b("FBRTCParticipantCallState").UNKNOWN:case b("FBRTCParticipantCallState").CONTACTING:case b("FBRTCParticipantCallState").RINGING:case b("FBRTCParticipantCallState").CONNECTING:return 2;default:return 3}}function j(a,b){var c;c=i((c=a.participantState)==null?void 0:c.state)-i((c=b.participantState)==null?void 0:c.state);return c!==0?c:a.userName.localeCompare(b.userName)}e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VFWebSwitchCallDialog.react",["FBRTCParticipantCallState","React","VFRTCCallStore","VFWebAppFluxStore","VFWebButton.react","VFWebModal.react","VFWebStrings","VFWebText.react","stylex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VFWebModal.react").Body,h=b("VFWebModal.react").Button,i=b("VFWebModal.react").Dialog,j=b("VFWebModal.react").Footer,k=b("VFWebModal.react").Header;b("stylex").inject(".d-17516{display:flex}",1);b("stylex").inject(".fd-7e677{flex-direction:row}",1);b("stylex").inject(".jc-223e1{justify-content:flex-end}",1);b("stylex").inject(".f-20298{flex:1}",.1);b("stylex").inject(".mt-f129f{margin-top:20px}",1);b("stylex").inject(".w-2145b{width:413px}",1);b("stylex").inject(".h-7d7b3{height:265px}",1);function a(a){var c=a.mode==="create"?b("VFWebStrings").switch_to_start_new_video_chat_title:b("VFWebStrings").switch_to_join_another_video_chat_title,d=a.mode==="create"?"Start New Video Chat":"Join Video Chat",e=b("VFRTCCallStore").getState();e=e.remoteUsers;e=e.filter(function(a){return a.getParticipantState()===b("FBRTCParticipantCallState").CONNECTED}).size;var f;a.mode==="create"?f=e<2?b("VFWebStrings").end_call_to_start_new_video_chat:b("VFWebStrings").leave_call_to_start_new_video_chat:f=e<2?b("VFWebStrings").end_call_to_join_another_video_chat:b("VFWebStrings").leave_call_to_join_another_video_chat;return b("React").createElement("div",{className:"h-7d7b3 w-2145b"},b("React").createElement(i,null,b("React").createElement(k,null,b("React").createElement(b("VFWebText.react"),{style:"title-large"},c),b("React").createElement("div",{className:"f-20298 jc-223e1 fd-7e677 d-17516"},b("React").createElement(b("VFWebButton.react"),{icon:"cross",size:32,use:"transparent",label:"cross-out",onClick:b("VFWebAppFluxStore").removeOverlayModal}))),b("React").createElement(g,null,b("React").createElement(b("VFWebText.react"),{style:"body-small"},b("VFWebStrings").current_video_chat_status),b("React").createElement("div",{className:"mt-f129f"},b("React").createElement(b("VFWebText.react"),{style:"body-small"},f))),b("React").createElement(j,null,b("React").createElement(h,{use:"button",label:"Cancel",onClick:b("VFWebAppFluxStore").removeOverlayModal}),b("React").createElement(h,{use:"confirm",label:d,onClick:l}))));function l(){b("VFWebAppFluxStore").removeOverlayModal(),a.onConfirm()}}e.exports=a}),null);
__d("VFWebIncomingCallDialogUtils",["regeneratorRuntime","RelayFBEnvironment","RelayModern","VFWebIncomingCallDialogUtils_actorQuery.graphql"],(function(a,b,c,d,e,f){__p&&__p();var g=b("RelayModern").fetchQuery;b("RelayModern").graphql;var h=function(){return b("VFWebIncomingCallDialogUtils_actorQuery.graphql")};function a(a,c,d,e){__p&&__p();var f;return b("regeneratorRuntime").async(function(j){__p&&__p();while(1)switch(j.prev=j.next){case 0:return j.abrupt("return",g(b("RelayFBEnvironment"),h,{actor_ids:c?[a].concat(c):[a],thread_id:(f=d)!=null?f:0,should_fetch_thread:!!d,picture_width:e.width,picture_height:e.height}).then(function(b){var c=b.message_thread;c=c?{name:c.thread_name,imageUri:(c=c.image)==null?void 0:c.uri}:null;b=b.messaging_actors;var d=b.find(function(b){return b.id===a});b=b.filter(function(b){return b.id!==a});d=[d].concat(b).map(i);return{participants:d,messageThread:c}}));case 1:case"end":return j.stop()}},null,this)}function i(a){return{id:a.id,shortName:a.short_name,profilePictureUri:a.profile_picture.uri,name:a.name}}e.exports={fetchIncomingCallData:a}}),null);
__d("VFWebMissedCallDialogController",["regeneratorRuntime","VFDesktopHelper","VFWebCallUtils","VFWebIncomingCallDialogUtils","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$1=null}a.prototype.onCallMissed=function(a){this.$1=a};a.prototype.showDialog=function(){if(this.$1==null)return;b("promiseDone")(this.$2(this.$1))};a.prototype.$2=function(a){__p&&__p();var c,d,e,f;return b("regeneratorRuntime").async(function(g){__p&&__p();while(1)switch(g.prev=g.next){case 0:g.next=2;return b("regeneratorRuntime").awrap(b("VFWebIncomingCallDialogUtils").fetchIncomingCallData(a,null,null,{width:120,height:120}));case 2:c=g.sent;d=c.participants;g.next=6;return b("regeneratorRuntime").awrap(b("VFDesktopHelper").showMissedCallDialog(d[0]));case 6:e=g.sent;f=e.response;g.t0=f;g.next=g.t0==="call-back"?11:g.t0==="close"?14:16;break;case 11:this.hideDialog();b("VFWebCallUtils").placeOutgoingCall({usersToRing:[a],threadId:null,trigger:"dvc_missed_call_dialog"});return g.abrupt("break",17);case 14:this.hideDialog();return g.abrupt("break",17);case 16:return g.abrupt("break",17);case 17:case"end":return g.stop()}},null,this)};a.prototype.hideDialog=function(){b("VFDesktopHelper").dismissMissedCallDialog()};e.exports=a}),null);
__d("VFWebCallLogger",["FBRTCParticipantCallState","VFRTCAppDispatcher","VFRTCCallActionTypes","VFRTCCallStore","VFWebLogger","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("immutable").List,h=b("immutable").Map,i=h();function a(a,c){b("VFRTCAppDispatcher").waitFor([b("VFRTCCallStore").getDispatchToken()]);s.logRTCCallAction(b("VFRTCCallStore").getState(),c);return a}function c(a,c){__p&&__p();var d=a.callInfo.conferenceName;if(d){var e=k(a.callInfo.conferenceName),f=c.type;switch(f){case b("VFRTCCallActionTypes").CALL:o(a,c,d,e);break;case b("VFRTCCallActionTypes").CALL_ERROR:p(a,c,d,e);break;case b("VFRTCCallActionTypes").ON_CONFERENCE_STATE:q(a,c,d,e);break;case b("VFRTCCallActionTypes").DISMISS:case b("VFRTCCallActionTypes").HANGUP:case b("VFRTCCallActionTypes").END_CALL:r(a,c,d,e)}}}function d(a,b){a=k(a);a.expectedParticipantCount=b}function f(){i=i.clear()}function j(a,b){b===void 0&&(b=0);b={expectedParticipantCount:b,callState:"init",lastStateChange:Date.now()};i=i.set(a,b);return b}function k(a){return i.has(a)?i.get(a):j(a)}function l(a,b){b!==a.callState&&(m(a.callState,b,a),a.lastStateChange=Date.now()),a.callState=b}function m(a,b,c){switch(a){case"init":}}function n(a){if(!a)return g();a=h(a.participantStates||{}).filter(function(a){return a.state===b("FBRTCParticipantCallState").CONNECTED});return g(a.keys())}function o(a,c,d,e){l(e,"connecting"),b("VFWebLogger").startTimer("vfweb_timer_call_join"),b("VFWebLogger").logCheckpoint(null,"vfweb_call_join_start",{conference_name:d,expected_participant_count:e.expectedParticipantCount}),i=i.withMutations(function(a){a.forEach(function(b,c){b!==e&&a.remove(c)})})}function p(a,c,d,e){l(e,"terminated"),b("VFWebLogger").logError(null,"VFWebJoinCallError",c.endCallReason+": "+c.endCallSubreason,{conference_name:d,duration:b("VFWebLogger").stopTimer("vfweb_timer_call_join"),expected_participant_count:e.expectedParticipantCount})}function q(a,c,d,e){a=n(c.request.conferenceStateRequest());c=a.size;e.callState==="connecting"&&b("VFWebLogger").logCheckpoint(null,"vfweb_call_join_success",{conference_name:d,duration:b("VFWebLogger").stopTimer("vfweb_timer_call_join"),participant_count:c,expected_participant_count:e.expectedParticipantCount});c>1&&e.callState!=="partying"?(b("VFWebLogger").startTimer("vfweb_timer_call_party"),b("VFWebLogger").logCheckpoint(null,"vfweb_party_start",{conference_name:d,participant_count:c})):c<2&&e.callState==="partying"&&b("VFWebLogger").logCheckpoint(null,"vfweb_party_end",{duration:b("VFWebLogger").stopTimer("vfweb_timer_call_party"),conference_name:d});l(e,c>1?"partying":"connected")}function r(a,c,d,e){e.callState==="partying"?b("VFWebLogger").logCheckpoint(null,"vfweb_party_end",{duration:b("VFWebLogger").stopTimer("vfweb_timer_call_party"),conference_name:d}):e.callState==="connecting"?b("VFWebLogger").logCheckpoint(null,"vfweb_call_join_cancel",{duration:b("VFWebLogger").stopTimer("vfweb_timer_call_join"),conference_name:d,expected_participant_count:e.expectedParticipantCount}):c.type===b("VFRTCCallActionTypes").DISMISS&&b("VFWebLogger").logCheckpoint(null,"vfweb_call_join_remote_cancel",{duration:b("VFWebLogger").stopTimer("vfweb_timer_call_join"),conference_name:d,expected_participant_count:e.expectedParticipantCount}),l(e,"terminated")}var s={reduce:a,logRTCCallAction:c,setExpectedParticipantCount:d,clearCallLogs:f};e.exports=s}),null);
__d("VFWebAppFluxStore",["FluxReduceStore","React","VFRTCAppDispatcher","VFWebAppState","VFWebAppStateReducer","VFWebCallLogger","VFWebSupportUtils","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=[b("VFWebAppStateReducer").reduce,b("VFWebCallLogger").reduce];g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return new(b("VFWebAppState"))()};a.prototype.reduce=function(a,b){return h.reduce(function(a,c){return c(a,b)},a)};a.prototype.toggleFullScreenUser=function(a){b("VFRTCAppDispatcher").dispatch({type:"toggle_full_screen_user",user:a})};a.prototype.closeListTray=function(){b("VFRTCAppDispatcher").dispatch({type:"close_list_tray"})};a.prototype.openListTray=function(){b("VFRTCAppDispatcher").dispatch({type:"open_list_tray"})};a.prototype.setLinkUrl=function(a){b("VFRTCAppDispatcher").dispatch({type:"link_url",linkUrl:a})};a.prototype.toggleListTray=function(){b("VFRTCAppDispatcher").dispatch({type:"toggle_list_tray"})};a.prototype.closeAddPeopleTray=function(){b("VFRTCAppDispatcher").dispatch({type:"close_add_people_tray"})};a.prototype.openAddPeopleTray=function(){b("VFRTCAppDispatcher").dispatch({type:"open_add_people_tray"})};a.prototype.openSettings=function(){b("VFRTCAppDispatcher").dispatch({type:"open_settings"})};a.prototype.closeSettings=function(){b("VFRTCAppDispatcher").dispatch({type:"close_settings"})};a.prototype.setMiniViewStatus=function(a){b("VFRTCAppDispatcher").dispatch({type:"set_mini_view_status",isActive:a})};a.prototype.addNotification=function(a,c){b("VFRTCAppDispatcher").dispatch({type:"add_notification",key:a,notificationHTML:c})};a.prototype.removeNotification=function(a){b("VFRTCAppDispatcher").dispatch({type:"remove_notification",key:a})};a.prototype.saveAudioSettings=function(a){b("VFRTCAppDispatcher").dispatch({type:"save_audio_settings",audioSettings:a})};a.prototype.addOverlayModal=function(a){b("VFRTCAppDispatcher").dispatch({type:"add_overlay_modal",modal:a})};a.prototype.removeOverlayModal=function(){b("VFRTCAppDispatcher").dispatch({type:"remove_overlay_modal"})};a.prototype.changeUserSettings=function(a){b("VFWebSupportUtils").saveUserSettings(a),b("VFRTCAppDispatcher").dispatch({type:"CHANGE_USER_SETTINGS",settings:a})};a.prototype.joinedCall=function(a){b("VFRTCAppDispatcher").dispatch({type:"JOINED_CALL",protocolHandler:a})};a.prototype.leftCall=function(){b("VFRTCAppDispatcher").dispatch({type:"LEFT_CALL"})};a.prototype.startCallingUsers=function(a){b("VFRTCAppDispatcher").dispatch({type:"STARTED_CALLING_USERS",users:a})};a.prototype.setPromotionData=function(a){b("VFRTCAppDispatcher").dispatch({type:"SET_PROMOTION_DATA",promotionData:a})};a.prototype.toggleMuteRemoteAudio=function(a,c){b("VFRTCAppDispatcher").dispatch({type:a?"locally_mute_remote_audio":"locally_unmute_remote_audio",userID:c})};a.prototype.setNetworkConnectionStatus=function(a){b("VFRTCAppDispatcher").dispatch({type:"set_network_connection_status",isNetworkConnected:a})};a.prototype.setPreviousCallData=function(a){b("VFRTCAppDispatcher").dispatch({type:"set_previous_call_data",previousCallData:a})};a.prototype.updateVideoInputDevices=function(a){b("VFRTCAppDispatcher").dispatch({type:"update_media_devices",newVideoInput:a})};a.prototype.setAppVersion=function(a){b("VFRTCAppDispatcher").dispatch({type:"set_app_version",appVersion:a})};a.prototype.showCallSwitchDialog=function(a,c){b("VFRTCAppDispatcher").dispatch({type:"show_switch_call_dialog",onConfirm:a,mode:c})};a.prototype.setCameraError=function(a){b("VFRTCAppDispatcher").dispatch({type:"set_camera_error",cameraError:a})};a.prototype.setIsNativeDialogShown=function(a){b("VFRTCAppDispatcher").dispatch({type:"set_native_dialog_shown",isShown:a})};a.prototype.showCallSettingsNUX=function(a){b("VFRTCAppDispatcher").dispatch({type:"set_call_settings_nux_shown",isShown:a})};a.prototype.setApplicationMenu=function(a){b("VFRTCAppDispatcher").dispatch({type:"set_application_menu",menuItems:a})};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("VFRTCAppDispatcher"))}),null);
__d("VFWebAppState",["React","SimpleNUXMessage","SimpleNUXMessageTypes","VFWebSupportUtils","immutable"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("immutable").Record({showListTray:!0,miniViewActive:!1,audioSettings:b("immutable").Map(),callGridLayout:{fullScreenUserID:null},overlayModal:null,userSettings:b("VFWebSupportUtils").getUserSettings(),linkUrl:null,locallyMutedUsers:b("immutable").Set(),protocolHandler:null,promotionData:null,isNetworkConnected:!0,previousCallData:null,appVersion:null,cameraError:null,isNativeDialogShown:!1,isCallSettingsNUXShown:!b("SimpleNUXMessage").hasUserSeenMessage(b("SimpleNUXMessageTypes").DVC_CALL_SETTINGS),applicationMenu:null}));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("VFWebAppStateReducer",["CurrentUser","React","VFRTCCallActionTypes","VFRTCCallStore","VFRTCConstants","VFWebAddPeopleTray.react","VFWebCallErrorModal.react","VFWebLogger","VFWebSettingsDialog.react","VFWebSwitchCallDialog.react","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VFRTCConstants").CallEndReason;function a(a,c){__p&&__p();switch(c.type){case b("VFRTCCallActionTypes").CALL_ERROR:return i(a,c);case"toggle_list_tray":return a.set("showListTray",!a.showListTray);case"close_list_tray":return a.set("showListTray",!1);case"open_list_tray":return j(a);case"open_add_people_tray":return a.set("overlayModal",b("React").createElement(b("VFWebAddPeopleTray.react"),null));case"close_add_people_tray":return a.set("overlayModal",null);case"open_settings":b("VFWebLogger").logCheckpoint("vfweb_settings_dialog","vfweb_settings_open");return a.set("overlayModal",b("React").createElement(b("VFWebSettingsDialog.react"),null));case"close_settings":b("VFWebLogger").logCheckpoint("vfweb_settings_dialog","vfweb_settings_close");return a.set("overlayModal",null);case"set_mini_view_status":return a.set("miniViewActive",c.isActive);case"save_audio_settings":return a.set("audioSettings",c.audioSettings);case"add_overlay_modal":return a.set("overlayModal",c.modal);case"remove_overlay_modal":return a.set("overlayModal",null);case"link_url":return a.set("linkUrl",c.linkUrl);case"CHANGE_USER_SETTINGS":k(a.userSettings,c.settings);return a.set("userSettings",c.settings);case"JOINED_CALL":return a.set("protocolHandler",c.protocolHandler).set("showListTray",!1).set("previousCallData",null);case"STARTED_CALLING_USERS":return a.set("showListTray",!1);case"LEFT_CALL":return j(a).set("protocolHandler",null).set("locallyMutedUsers",b("immutable").Set()).set("callGridLayout",{fullScreenUserID:null}).set("overlayModal",null);case"SET_PROMOTION_DATA":return a.set("promotionData",c.promotionData);case"set_previous_call_data":return a.set("previousCallData",c.previousCallData);case"toggle_full_screen_user":var d=c.user==null||c.user.FBID===a.callGridLayout.fullScreenUserID?null:c.user;return h(a,d);case"locally_mute_remote_audio":return a.set("locallyMutedUsers",a.locallyMutedUsers.add(c.userID));case"locally_unmute_remote_audio":return a.set("locallyMutedUsers",a.locallyMutedUsers["delete"](c.userID));case"set_network_connection_status":return a.set("isNetworkConnected",c.isNetworkConnected);default:return a;case"update_media_devices":d=a.userSettings;return a.set("userSettings",babelHelpers["extends"]({},d,{videoInput:c.newVideoInput}));case"set_app_version":return a.set("appVersion",c.appVersion);case"show_switch_call_dialog":return a.set("overlayModal",b("React").createElement(b("VFWebSwitchCallDialog.react"),{onConfirm:c.onConfirm,mode:c.mode}));case"set_camera_error":return a.set("cameraError",c.cameraError);case"set_native_dialog_shown":return a.set("isNativeDialogShown",c.isShown);case"set_call_settings_nux_shown":return a.set("isCallSettingsNUXShown",c.isShown);case"set_application_menu":return a.set("applicationMenu",c.menuItems)}}function h(a,b){return b===null?a.set("callGridLayout",{fullScreenUserID:null}):b?a.set("callGridLayout",{fullScreenUserID:b==null?void 0:b.FBID}):a}function i(a,c){return c.endCallReason!==g.HANGUP_CALL?a.set("overlayModal",b("React").createElement(b("VFWebCallErrorModal.react"),null)):a}function j(a){return a.set("showListTray",!0)}function k(a,c){var d=b("VFRTCCallStore").isInCall()?"1":"0";c.videoInput!==a.videoInput&&c.videoInput!=null&&b("VFWebLogger").logCheckpoint("vfweb_settings_dialog","vfweb_settings_video_input_change",{event_extra:{inCall:d,deviceChanged:c.videoInput}});c.audioOutput!==a.audioOutput&&c.audioOutput!=null&&b("VFWebLogger").logCheckpoint("vfweb_settings_dialog","vfweb_settings_audio_output_change",{event_extra:{inCall:d,deviceChanged:c.audioOutput}});c.audioInput!==a.audioInput&&c.audioInput!=null&&b("VFWebLogger").logCheckpoint("vfweb_settings_dialog","vfweb_settings_audio_input_change",{event_extra:{inCall:d,deviceChanged:c.audioInput}})}e.exports={reduce:a}}),null);
__d("VFRTCMessengerRTCMissedCallDialog.react",["cx","fbt","ImageBlock.react","MercuryIDs","MessengerContactImageReact.bs","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeaderReact.re","MessengerDialogTitleReact.re","MessengerParticipants.bs","MessengerSpinner.react","React","Timestamp.react","VFWebCallUtils"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerContactImageReact.bs").jsComponent,j=b("MessengerDialogBodyReact.bs").jsComponent,k=b("MessengerDialogHeaderReact.re").component,l=b("MessengerDialogTitleReact.re").component;a=b("React").PropTypes;var m=50;c=b("React").createClass({displayName:"MessengerRTCMissedCallDialog",_subscription:null,propTypes:{peerID:a.string.isRequired,removeDialog:a.func.isRequired,timeMissed:a.number.isRequired},getInitialState:function(){return{calleeParticipant:null}},componentDidMount:function(){this._computeParticipant()},componentDidUpdate:function(){this._subscription&&b("MessengerParticipants.bs").removeCallback(this._subscription);var a=b("MercuryIDs").getParticipantIDFromUserID(this.props.peerID);if(this.state.calleeParticipant&&this.state.calleeParticipant.id===a)return;this._computeParticipant()},componentWillUnmount:function(){this._subscription&&b("MessengerParticipants.bs").removeCallback(this._subscription)},_computeParticipant:function(){var a=b("MercuryIDs").getParticipantIDFromUserID(this.props.peerID),c=b("MessengerParticipants.bs").getNow(a);c?this.setState({calleeParticipant:c}):this._subscription=b("MessengerParticipants.bs").getMulti([a],function(b){this._subscription=null,this.setState({calleeParticipant:b[a]})}.bind(this))},render:function(){return b("React").createElement(b("MessengerDialog.react"),{layerHideOnBlur:!0,onToggle:this._handleToggle,shown:!0,width:400},b("React").createElement(k,null,b("React").createElement(l,null,h._("Missed Call"))),b("React").createElement(j,null,this._renderBody()),b("React").createElement(b("MessengerDialogFooter.react"),null,b("React").createElement(b("MessengerDialogButton.react"),{label:h._("Close"),onClick:this._handleClose,type:"secondary",use:"default"}),b("React").createElement(b("MessengerDialogButton.react"),{label:h._("Call Back"),onClick:this._handleCallBack,type:"primary",use:"default"})))},_renderBody:function(){var a=this.state.calleeParticipant;return!a?b("React").createElement(b("MessengerSpinner.react"),null):b("React").createElement(b("ImageBlock.react"),null,b("React").createElement(i,{isMessengerUser:a.is_messenger_user,size:m,src:a.big_image_src||a.image_src}),b("React").createElement("div",{className:"_2r2t"},b("React").createElement("div",{className:"_2r2u"},h._("You missed a call from {caller name}",[h._param("caller name",a.name)])),b("React").createElement("div",{className:"_2r2v"},b("React").createElement(b("Timestamp.react"),{time:this.props.timeMissed,autoUpdate:!0}))))},_handleCallBack:function(a){a.preventDefault();this.props.removeDialog();a=this.state.calleeParticipant;a=a&&a.fbid;if(!a)return;b("VFWebCallUtils").placeOutgoingCall({usersToRing:[a],threadId:null,trigger:"vfweb_missed_call_dialog"})},_handleClose:function(a){a.preventDefault(),this.props.removeDialog()},_handleToggle:function(a){a||this.props.removeDialog()}});e.exports=c}),null);
__d("VFRTCMessengerRTCMissedCallDialogController",["MessengerDialogs.bs","React","VFRTCClientFeatureGating","VFRTCMessengerRTCMissedCallDialog.react","VFRTCMissedCallDialog.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$1=null,this.$2=null,this.hideDialog=function(){b("MessengerDialogs.bs").removeDialog(this.$3)}.bind(this),this.$3=function(){return this.$1}.bind(this)}a.prototype.onCallMissed=function(a){this.$2=a};a.prototype.showDialog=function(){var a=this.$2;if(a==null)return;this.$1=b("VFRTCClientFeatureGating").useNewIncomingCallDialog()?b("React").createElement(b("VFRTCMissedCallDialog.react"),{peerID:a.toString(),removeDialog:this.hideDialog,timeMissed:Date.now()}):b("React").createElement(b("VFRTCMessengerRTCMissedCallDialog.react"),{peerID:a.toString(),removeDialog:this.hideDialog,timeMissed:Date.now()});b("MessengerDialogs.bs").showDialog(this.$3)};e.exports=new a()}),null);
__d("VFRTCSVGIcon.react",["React"],(function(a,b,c,d,e,f){"use strict";var g=b("React").Children;a=function(a){var c=a.children;a=babelHelpers.objectWithoutPropertiesLoose(a,["children"]);return b("React").cloneElement(g.only(c),babelHelpers["extends"]({preserveAspectRatio:"xMidYMid meet"},a))};e.exports=a}),null);
__d("VFRTCAbstractButton.react",["cx","AbstractButton.react","React","VFRTCSVGIcon.react","joinClasses","throttle"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$1=function(a){var b=this.props.disabled;if(b){a.preventDefault();return}this.props.shouldThrottle?this.$2():this.props.onClick()}.bind(this),this.$2=b("throttle")(function(){this.props.onClick()}.bind(this),500),c}a.prototype.render=function(){var a=this.props,c=a.children,d=a.className,e=a.disabled,f=a.highlighted,g=a.title;a=babelHelpers.objectWithoutPropertiesLoose(a,["children","className","disabled","highlighted","title"]);c=b("React").createElement(b("VFRTCSVGIcon.react"),{className:"_4uwr"},c);return b("React").createElement(b("AbstractButton.react"),babelHelpers["extends"]({"aria-disabled":e,className:b("joinClasses")(d,"_4uwq"+(!e&&f?" highlighted":"")),"data-hover":e?"none":"tooltip",image:c,label:g},a,{onClick:this.$1}))};a.defaultProps={highlighted:!1,disabled:!1,labelIsHidden:!0,shouldThrottle:!0};e.exports=a}),null);
__d("VFRTCCallControlsButtonWithLabel.react",["cx","React","VFRTCAbstractButton.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){var a=babelHelpers["extends"]({},this.props);return b("React").createElement("div",{className:"_6-lr"},b("React").createElement(b("VFRTCAbstractButton.react"),babelHelpers["extends"]({"data-hover":"none",labelIsHidden:!0},a)),b("React").createElement("div",{className:"_6-ls"},this.props.title))};function a(){h.apply(this,arguments)}a.defaultProps={highlighted:!1,disabled:!1,labelIsHidden:!0,shouldThrottle:!0};e.exports=a}),null);
__d("VFRTCCallTriggerMapping",["RTWebLoggingComponent","RTWebLoggingSurface","deepFreezeValue"],(function(a,b,c,d,e,f){"use strict";a={chat_sidebar:{surface:b("RTWebLoggingSurface").CHAT_SIDEBAR,component:b("RTWebLoggingComponent").RECENT_CALLS},chattab_audio_button:{surface:b("RTWebLoggingSurface").CHAT_TAB,component:b("RTWebLoggingComponent").AUDIO_CALL},chattab_video_button:{surface:b("RTWebLoggingSurface").CHAT_TAB,component:b("RTWebLoggingComponent").VIDEO_CALL},messenger_bubble_free_call:{surface:b("RTWebLoggingSurface").MESSENGER_BUBBLE,component:b("RTWebLoggingComponent").FREE_CALL},messenger_dot_com_missed_call_dialog:{surface:b("RTWebLoggingSurface").MISSED_CALL_DIALOG,component:b("RTWebLoggingComponent").START_CALL},messenger_dot_com_video_call:{surface:b("RTWebLoggingSurface").MESSENGER_HEADER,component:b("RTWebLoggingComponent").VIDEO_CALL},messenger_dot_com_audio_call:{surface:b("RTWebLoggingSurface").MESSENGER_HEADER,component:b("RTWebLoggingComponent").AUDIO_CALL},timeline:{surface:b("RTWebLoggingSurface").DROPDOWN_CALL_MENU,component:b("RTWebLoggingComponent").START_CALL},messenger_dot_com_work_hovercard:{surface:b("RTWebLoggingSurface").WORK_HOVERCARD,component:b("RTWebLoggingComponent").START_CALL},admin_message:{surface:b("RTWebLoggingSurface").ADMIN_MESSAGE,component:b("RTWebLoggingComponent").START_CALL},return_call:{surface:b("RTWebLoggingSurface").MISSED_CALL_DIALOG,component:b("RTWebLoggingComponent").START_CALL},popup_start_call_button:{surface:b("RTWebLoggingSurface").CALL_CONTAINER,component:b("RTWebLoggingComponent").START_CALL},redial_button:{surface:b("RTWebLoggingSurface").CALL_CONTAINER,component:b("RTWebLoggingComponent").REDIAL}};b("deepFreezeValue")(a);e.exports=a}),null);
__d("VFRTCUICameraIcon.react",["React","VFRTCSVGIcon.react"],(function(a,b,c,d,e,f){"use strict";a=function(a){var c=a.strikeThrough;c=c===void 0?!1:c;a=babelHelpers.objectWithoutPropertiesLoose(a,["strikeThrough"]);return b("React").createElement(b("VFRTCSVGIcon.react"),a,b("React").createElement("svg",{viewBox:"0 0 48 48"},c?b("React").createElement("path",{d:"M36 29h1V19h-1v10zm-6-2.727L35 29V19l-5 2.727v4.546zM19.344 17H26c1.126 0 2 .938 2 2v10c0 .54-.225 1.047-.595 1.415L19.345 17zm-3.5 0H15c-1.126 0-2 .938-2 2v10c0 1.062.874 2 2 2h9.257l-8.413-14zm11.408 17.044l.857-.516-12.362-20.572-.857.516 12.362 20.572z"}):b("React").createElement("path",{d:"M26 17H15c-1.126 0-2 .938-2 2v10c0 1.062.874 2 2 2h11c1.126 0 2-.938 2-2V19c0-1.062-.874-2-2-2zm10 12h1V19h-1v10zm-6-2.727L35 29V19l-5 2.727v4.546z"})))};e.exports=a}),null);
__d("VFRTCCallBackButton.react",["cx","fbt","FBLogger","React","VFRTCCallControlsButtonWithLabel.react","VFRTCCallTriggerMapping","VFRTCUICameraIcon.react","VideoCallWebDriverIDs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.componentDidMount=function(){var a=b("VFRTCCallTriggerMapping")[this.props.trigger];(a===null||a===void 0)&&b("FBLogger")("rtweb").mustfix("Unexpected or unknown call trigger: %s",a)};a.prototype.render=function(){return b("React").createElement(b("VFRTCCallControlsButtonWithLabel.react"),{className:"_6jvj icon-40","data-testid":b("VideoCallWebDriverIDs").IGNORE_CALL_BUTTON,onClick:this.props.onCallBack,label:h._("Redial"),title:h._("Redial")},b("React").createElement(b("VFRTCUICameraIcon.react"),null))};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("VFRTCUIXIcon.react",["React","VFRTCSVGIcon.react"],(function(a,b,c,d,e,f){"use strict";a=function(a){return b("React").createElement(b("VFRTCSVGIcon.react"),a,b("React").createElement("svg",{viewBox:"0 0 48 48"},b("React").createElement("path",{d:"M24 25.4l-4.9 4.9c-.4 .4-1 .4-1.4 0c-.4-.4-.4-1 0-1.4L22.6 24L17.6 19.1c-.4-.4-.4-1 0-1.4c.4-.4 1-.4 1.4 0L24 22.6l4.9-4.9c.4-.4 1-.4 1.4 0c.4 .4 .4 1 0 1.4L25.4 24l4.9 4.9c.4 .4 .4 1 0 1.4c-.4 .4-1 .4-1.4 0L24 25.4z"})))};e.exports=a}),null);
__d("VFRTCCloseDialogButton.react",["cx","fbt","React","VFRTCCallControlsButtonWithLabel.react","VFRTCUIXIcon.react","VideoCallWebDriverIDs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.$1=function(){this.props.action()}.bind(this),b}a.prototype.render=function(){return b("React").createElement(b("VFRTCCallControlsButtonWithLabel.react"),{className:"_6jtv icon-40 icon-1","data-testid":b("VideoCallWebDriverIDs").CLOSE_CHAT_BUTTON,onClick:this.$1,label:h._("Close"),title:h._("Close")},b("React").createElement(b("VFRTCUIXIcon.react"),null))};e.exports=a}),null);
__d("VFRTCMissedCallDialog.react",["cx","fbt","MercuryIDs","MessengerContactImageReact.bs","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerParticipants.bs","MessengerSpinner.react","React","Timestamp.react","VFRTCCallBackButton.react","VFRTCCloseDialogButton.react","VFWebCallUtils"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerContactImageReact.bs").jsComponent,j=b("MessengerDialogBodyReact.bs").jsComponent;a=b("React").PropTypes;var k=50;c=b("React").createClass({displayName:"RTCMissedCallDialog",_subscription:null,propTypes:{peerID:a.string.isRequired,removeDialog:a.func.isRequired,timeMissed:a.number.isRequired},getInitialState:function(){return{calleeParticipant:null}},componentDidMount:function(){this._computeParticipant()},componentDidUpdate:function(){this._subscription&&b("MessengerParticipants.bs").removeCallback(this._subscription);var a=b("MercuryIDs").getParticipantIDFromUserID(this.props.peerID);if(this.state.calleeParticipant&&this.state.calleeParticipant.id===a)return;this._computeParticipant()},componentWillUnmount:function(){this._subscription&&b("MessengerParticipants.bs").removeCallback(this._subscription)},_computeParticipant:function(){var a=b("MercuryIDs").getParticipantIDFromUserID(this.props.peerID),c=b("MessengerParticipants.bs").getNow(a);c?this.setState({calleeParticipant:c}):this._subscription=b("MessengerParticipants.bs").getMulti([a],function(b){this._subscription=null,this.setState({calleeParticipant:b[a]})}.bind(this))},render:function(){return b("React").createElement(b("MessengerDialog.react"),{className:"_6jve",layerHideOnBlur:!0,onToggle:this._handleToggle,shown:!0,width:260},b("React").createElement(j,null,this._renderBody()),b("React").createElement("div",{className:"_6jvf"},b("React").createElement(b("VFRTCCloseDialogButton.react"),{action:this._Action,isP2P:!0}),b("React").createElement(b("VFRTCCallBackButton.react"),{onCallBack:this._handleCallBack,trigger:"messenger_dot_com_missed_call_dialog"})))},_renderBody:function(){var a=this.state.calleeParticipant;return!a?b("React").createElement(b("MessengerSpinner.react"),null):b("React").createElement("div",null,b("React").createElement(i,{className:"_6jvg",isMessengerUser:a.is_messenger_user,size:k,src:a.big_image_src||a.image_src}),b("React").createElement("div",{className:"_6jvh"},b("React").createElement("div",{className:"_6jvi"},h._("You missed a call from {caller name}",[h._param("caller name",a.name)])),b("React").createElement("div",{className:"_2r2v"},b("React").createElement(b("Timestamp.react"),{time:this.props.timeMissed,autoUpdate:!0}))))},_Action:function(){this.props.removeDialog()},_handleCallBack:function(){this.props.removeDialog();var a=this.state.calleeParticipant;a=a&&a.fbid;if(!a)return;b("VFWebCallUtils").placeOutgoingCall({usersToRing:[a],threadId:null,trigger:"dvc_missed_call_dialog"})},_handleToggle:function(a){a||this.props.removeDialog()}});e.exports=c}),null);
__d("VFRTCDispatcher",["Dispatcher_DEPRECATED"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("Dispatcher_DEPRECATED"))()}),null);
__d("VFRTCStore",["FluxStore","VFRTCDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("FluxStore"));g=c&&c.prototype;function a(){g.constructor.call(this,b("VFRTCDispatcher"))}a.prototype.__emitChange=function(){this.__emitter.emit(this.__changeEvent)};a.__moduleID=e.id;e.exports=a}),null);
__d("VFRTCCallBlockingStore",["Arbiter","AsyncRequest","ChannelConstants","VFRTCDispatcher","VFRTCStore","clearTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=!1,i=0,j=null,k="call_block_setting_changed";g=babelHelpers.inherits(a,b("VFRTCStore"));g&&g.prototype;a.prototype.init=function(a){this.$VFRTCCallBlockingStore1(a),b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("videocall_block_setting"),this.$VFRTCCallBlockingStore2.bind(this))};a.prototype.__onDispatch=function(a){if(a.type!==k)return;this.$VFRTCCallBlockingStore1(a.data)};a.prototype.$VFRTCCallBlockingStore1=function(a){switch(a){case 0:h=!1;this.$VFRTCCallBlockingStore3();break;case-1:h=!0;this.$VFRTCCallBlockingStore3();break;default:h=!0,this.$VFRTCCallBlockingStore4(a)}this.__emitChange()};a.prototype.$VFRTCCallBlockingStore4=function(a){j===null&&(j=b("setTimeoutAcrossTransitions")(this.turnOnVideoCalling.bind(this),a*1e3))};a.prototype.getBlockingStatus=function(){return h};a.prototype.turnOnVideoCalling=function(){new(b("AsyncRequest"))("/ajax/chat/settings.php").setHandler(this.$VFRTCCallBlockingStore5.bind(this)).setData({call_blocked_until:0}).send()};a.prototype.turnOffVideoCalling=function(a){i=a,new(b("AsyncRequest"))("/ajax/chat/settings.php").setHandler(this.$VFRTCCallBlockingStore6.bind(this)).setData({call_blocked_until:a}).send()};a.prototype.$VFRTCCallBlockingStore3=function(){j&&(b("clearTimeout")(j),j=null)};a.prototype.$VFRTCCallBlockingStore5=function(){b("VFRTCDispatcher").dispatch({type:k,data:0})};a.prototype.$VFRTCCallBlockingStore6=function(){b("VFRTCDispatcher").dispatch({type:k,data:i})};a.prototype.$VFRTCCallBlockingStore2=function(a,c){b("VFRTCDispatcher").dispatch({type:k,data:c.obj.value})};function a(){g.apply(this,arguments)}e.exports=new a()}),null);
__d("VFRTCCallUIWrapper",["regeneratorRuntime","Bootloader","CurrentUser","UserAgent","VFFBRTCUtils","VFRTCExperiments"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null,h={openGroupCallUI:function(a,c,d,e,f,h,i){return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:g=this._openWindow("Group Call"),b("Bootloader").loadModules(["FBRTCCallUI"],function(b){b.openGroupCallUI(a,c,d,e,f,h,g,i)},"VFRTCCallUIWrapper");case 2:case"end":return j.stop()}},null,this)},openGroupCallURI:function(a,c,d,e,f,h,i,j,k){return b("regeneratorRuntime").async(function(l){while(1)switch(l.prev=l.next){case 0:g=this._openWindow("Group Call"),b("Bootloader").loadModules(["FBRTCCallUI"],function(b){b.openGroupCallURI({conferenceName:a,callID:c,hasVideo:d,initializeVideo:e,serverInfoData:i,trigger:j,callSummary:k,callWindow:g,multiwayWwwTier:h,multiwayCoreTier:f})},"VFRTCCallUIWrapper");case 2:case"end":return l.stop()}},null,this)},openAsCaller:function(a,c,d,e){!g&&window.rtcCallChildWindow&&(g=window.rtcCallChildWindow,window.rtcCallChildWindow=null);if(this._shouldFocusCallWindow(a)){g&&g.focus();return}this._shouldCloseCallWindow()&&(g&&g.close());g=this._openWindow("Video Call",{isP2P:!0,isVCCall:b("VFFBRTCUtils").isPeerVCEndpoint(a)||b("VFFBRTCUtils").isCollabTrigger(d)});b("Bootloader").loadModules(["FBRTCCallUI"],function(b){b.openAsCaller(a,c,d,e,g)},"VFRTCCallUIWrapper")},openAsCallee:function(a,c,d,e,f){g=this._openWindow("Video Call",{isP2P:!0,isVCCall:b("VFFBRTCUtils").isPeerVCEndpoint(a)}),b("Bootloader").loadModules(["FBRTCCallUI"],function(b){b.openAsCallee(a,c,d,e,g,f)},"VFRTCCallUIWrapper")},_shouldFocusCallWindow:function(a){return!!g&&!g.closed&&g.rtcCallInProgessWith===a},_shouldCloseCallWindow:function(){return!!g&&!g.closed&&!g.rtcCallInProgessWith},_openWindow:function(a,b){__p&&__p();b=b===void 0?{isP2P:!1,isVCCall:!1}:b;var c=b.isP2P;c=c===void 0?!1:c;b=b.isVCCall;b=b===void 0?!1:b;c=this._windowPosition({isP2P:c,isVCCall:b});b=["menubar=no","location=no","scrollbars=no","status=no","personalbar=no",c.height,c.width,c.top,c.left].join(",");this._isSparkBrowser()&&(b="");c=window.open("",a,b);window.callWindow=c;return c},_windowDimension:function(a){__p&&__p();var c=a.isP2P;a=a.isVCCall;var d=960,e=540;if(screen&&screen.width>1280){var f=!1,g=!1;c&&(f=b("VFRTCExperiments").forceSmallWindow(a,b("CurrentUser").isWorkUser()));!c&&!f&&(g=b("VFRTCExperiments").fixedHeightGridView(a,b("CurrentUser").isWorkUser()));g?(d=b("VFRTCExperiments").fixedHeightGridViewOuterWindowWidth(),e=b("VFRTCExperiments").fixedHeightGridViewOuterWindowHeight()):f||(d=1280,e=720)}return{height:e,width:d}},_windowPosition:function(a){__p&&__p();var b=a.isP2P;b=b===void 0?!1:b;a=a.isVCCall;a=a===void 0?!1:a;var c,d,e,f;b=h._windowDimension({isP2P:b,isVCCall:a});a=b.height;b=b.width;window.innerWidth!==void 0?(d=window.innerWidth,c=window.innerHeight):(d=screen.width,c=screen.height);window.screenLeft!==void 0?(e=window.screenLeft,f=window.screenTop):(e=window.screenX,f=window.screenY);d=Math.floor(d/2-b/2+e);e=Math.floor(c/2-a/2+f);return{height:"height="+a.toString(),width:"width="+b.toString(),top:"top="+e.toString(),left:"left="+d.toString()}},_isSparkBrowser:function(){return b("UserAgent").isBrowser("Chrome < 34")&&b("UserAgent").isBrowser("Chrome > 33")}};e.exports=h}),null);
__d("VFRTCCallActions",["invariant","RTCGroupCallEscalationActionTypes","RTWebLoggingCallType","VFRTCAppDispatcher","VFRTCCallActionTypes","VFRTCUtils","VFWebLogger","emptyFunction","mixInEventEmitter"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h={addListener:b("emptyFunction"),emit:b("emptyFunction"),initialize:function(a){b("VFWebLogger").logRTCCheckpoint({checkpoint:"RTCCallActions_initialize",callID:String(a.callID),conferenceName:a.conferenceName,callType:a.protocol==="p2p"?b("RTWebLoggingCallType").P2P:b("RTWebLoggingCallType").MW}),b("VFRTCAppDispatcher").dispatch(babelHelpers["extends"]({type:b("VFRTCCallActionTypes").INIT},a))},reset:function(){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").RESET})},resetForRedial:function(a,c){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").RESET_FOR_REDIAL,conferenceName:a,callID:c})},callCollision:function(a,c){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").CALL_COLLISION,conferenceName:a,peerID:c})},setCallSummary:function(a){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").SET_CALL_SUMMARY,callSummary:a})},call:function(a,c){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").CALL,usersToRing:a,peerConnection:c})},callSuccess:function(a){a===void 0&&(a=!1),b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").CALL_SUCCESS,connected:a})},incomingCallSuccess:function(){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").INCOMING_CALL_SUCCESS})},callError:function(a){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").CALL_ERROR,endCallReason:b("VFRTCUtils").endCallReasonFromResponseStatusCode(a),endCallSubreason:"Call error: "+(a||0)})},completeTransitionToMultiway:function(){b("VFRTCAppDispatcher").dispatch({type:b("RTCGroupCallEscalationActionTypes").GROUP_ESCALATION_CLEAR_P2P_CONNECTION})},hangupSuccess:function(a){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").HANGUP_SUCCESS,callID:a})},hangupError:function(a){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").HANGUP_ERROR,callID:a})},join:function(a){h.call([],a)},hangup:function(a,c){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").HANGUP,hangupReason:a,detailedReasonString:c,endCallReason:a})},initLocalUser:function(a){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").INIT_LOCAL_USER,localUser:a})},initRemoteUsers:function(a){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").INIT_REMOTE_USERS,remoteUsers:a})},updateRemoteUsers:function(a){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").UPDATE_REMOTE_USERS,remoteUsers:a})},updateLocalUserInfo:function(a){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").UPDATE_LOCAL_USER_INFO,info:a})},addLocalStream:function(a){a!=null||g(0,11208),b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").ADD_LOCAL_STREAM,stream:a})},removeLocalStream:function(a){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").REMOVE_LOCAL_STREAM,stream:a})},replaceLocalStream:function(a,c){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").REPLACE_LOCAL_STREAM,oldStream:a,newStream:c})},removeAllLocalStreams:function(a){a===void 0&&(a=!1),b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").REMOVE_ALL_LOCAL_STREAMS,stopStreams:a})},removeAllLocalScreenStreams:function(a){a===void 0&&(a=!1),b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").REMOVE_ALL_LOCAL_SCREEN_STREAMS,stopStreams:a})},addRemoteStream:function(a,c){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").ADD_REMOTE_STREAM,stream:a,userID:c})},removeRemoteStream:function(a,c){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").REMOVE_REMOTE_STREAM,stream:a,userID:c})},removeAllRemoteStreams:function(a){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").REMOVE_ALL_REMOTE_STREAMS,userID:a})},addRemoteTrack:function(a,c){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").ADD_REMOTE_TRACK,stream:a,track:c})},removeRemoteTrack:function(a,c){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").REMOVE_REMOTE_TRACK,stream:a,track:c})},addLocalScreenStream:function(a){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").ADD_LOCAL_SCREEN_STREAM,stream:a})},removeLocalScreenStream:function(a){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").REMOVE_LOCAL_SCREEN_STREAM,stream:a})},replaceLocalScreenStream:function(a,c){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").REPLACE_LOCAL_SCREEN_STREAM,oldStream:a,newStream:c})},addRemoteScreenStream:function(a,c){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").ADD_REMOTE_SCREEN_STREAM,stream:a,userID:c})},removeRemoteScreenStream:function(a,c){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").REMOVE_REMOTE_SCREEN_STREAM,stream:a,userID:c})},endCall:function(a,c){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").END_CALL,endCallReason:a,endCallSubreason:c})},waitForUserInput:function(){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").WAIT_FOR_USER_INPUT})},toggleMuteAudio:function(a){b("VFRTCAppDispatcher").dispatch({type:a?b("VFRTCCallActionTypes").AUDIO_UNMUTED:b("VFRTCCallActionTypes").AUDIO_MUTED})},toggleMuteVideo:function(a){b("VFRTCAppDispatcher").dispatch({type:a?b("VFRTCCallActionTypes").VIDEO_UNMUTED:b("VFRTCCallActionTypes").VIDEO_MUTED})},stopLocalVideo:function(){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").STOP_LOCAL_STREAM})},toggleMuteRemoteAudio:function(a,c){b("VFRTCAppDispatcher").dispatch({type:a?b("VFRTCCallActionTypes").REMOTE_AUDIO_MUTED:b("VFRTCCallActionTypes").REMOTE_AUDIO_UNMUTED,userID:c})},toggleMuteRemoteVideo:function(a,c){b("VFRTCAppDispatcher").dispatch({type:a?b("VFRTCCallActionTypes").REMOTE_VIDEO_MUTED:b("VFRTCCallActionTypes").REMOTE_VIDEO_UNMUTED,userID:c})},toggleSelfView:function(a){b("VFRTCAppDispatcher").dispatch({type:a?b("VFRTCCallActionTypes").SELF_VIEW_COLLAPSED:b("VFRTCCallActionTypes").SELF_VIEW_UNCOLLAPSED})},submitRating:function(a){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").SUBMIT_RATING,rating:a})},submitFeedback:function(a){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").SUBMIT_FEEDBACK,feedback:a})},submitFeedbackOptions:function(a){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").SUBMIT_FEEDBACK_OPTIONS,feedbackOptions:a})},submitSurveyChoice:function(a){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").SUBMIT_SURVEY_CHOICE,surveyChoice:a})},ratingShown:function(){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").RATING_SHOWN})},feedbackShown:function(){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").FEEDBACK_SHOWN})},setEndCallReason:function(a){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").SET_END_CALL_REASON,endCallReason:a})},setConferenceState:function(a){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").SET_CONFERENCE_STATE,conferenceState:a})},setFloorStatus:function(a){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").FLOOR_STATUS,status:a})}};b("mixInEventEmitter")(h,{onIceConnectionStateChange:!0});e.exports=h}),null);
__d("VFRTCGroupCallActions",["VFRTCAppDispatcher","VFRTCCallActionTypes","VFRTCUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={setLayout:function(a){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").SET_LAYOUT,layout:a})},setDominantSpeaker:function(a){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").SET_DOMINANT_SPEAKER,dominantSpeakerFBID:a})},setPinnedSpeaker:function(a){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").SET_PINNED_SPEAKER,pinnedSpeakerFBID:a})},initThread:function(a,c){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").INIT_THREAD,thread:a,participants:c})},onParticipantLeft:function(a){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").ON_PARTICIPANT_LEFT,participantFBID:a})},onParticipantsAdded:function(a,c){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").ON_PARTICIPANTS_ADDED,participants:a,images:c})},addParticipantsToRing:function(a){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").ADD_PARTICIPANTS_TO_RING,participantFBIDs:a})},toggleRemoteStream:function(a){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").TOGGLE_REMOTE_STREAM,mediaStatus:a})},handleDismissRequest:function(a,c){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").DISMISS,transaction:a,request:c,endCallReason:b("VFRTCUtils").endCallReasonFromDismissRequest(c.dismissRequest())})},handleConferenceStateRequest:function(a,c,d,e){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").ON_CONFERENCE_STATE,transaction:a,request:c,conferenceStateVersion:d,resolve:e})},onJoinRequestSent:function(){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").ON_JOIN_REQUEST_SENT})},onReceivedJoinResponse:function(){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").ON_RECEIVED_JOIN_RESPONSE})},onJoinResponse:function(a){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").ON_JOIN_RESPONSE,serverInfoData:a})},onProcessedJoinResponse:function(){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").ON_PROCESSED_JOIN_RESPONSE})},onServerMediaUpdateSuccess:function(){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").ON_SERVER_MEDIA_UPDATE_SUCCESS})},onClientMediaUpdateResponse:function(a,c){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").ON_CLIENT_MEDIA_UPDATE_RESPONSE,responseStatusCode:a,currentVersion:c})}};e.exports=a}),null);
__d("VFRTCMWSessionDescription",["Promise","VFRTCCallStore","VFRTCConsoleLogger","VFRTCConstants","VFRTCGroupCallActions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VFRTCConstants").SignalingProtocol;a={_videoEnabled:{},serverMediaUpdate:function(a,c){__p&&__p();var d=a.fromVersion,e=a.toVersion,f=a.mediaUpdates;a=b("VFRTCCallStore").getConnection(g.MULTIWAY);if(!a)return;var h=a.getLocalDescription(),i=a.getRemoteDescription(),j=i.sessionDescription.getVersion();if(j!==d){c(j);return}f.forEach(function(a){i.processServerMediaUpdate(a)});i.sessionDescription.setVersion(e);b("Promise").all([a.setLocalDescription(h),a.setRemoteDescription(i)]).then(function(){var a;b("VFRTCGroupCallActions").toggleRemoteStream((a=[]).concat.apply(a,f.map(function(a){a=a.media;return a})).reduce(function(a,b){var c=b.id;b=b.enabled;a[c]=b;return a},{}));c(e)},function(){return c(j)})["catch"](function(a){})}};e.exports=a}),null);
__d("VFRTCAppData",["FacebookAppIDs","URI","VFDesktopHelper","VFRTCClientFeatureGating","WorkplaceChatHelper","gkx","isBonfireURI","isFacebookURI","isMessengerDotComURI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={getAppID:function(){if(b("WorkplaceChatHelper").isDesktopChatApp())return this._getWorkplaceChatDesktopAppID();else if(b("VFDesktopHelper").isDesktopApp()&&b("gkx")("794738"))return Number(b("VFDesktopHelper").getAppID());return b("FacebookAppIDs").WWW},getChannelManagerAppName:function(){switch(g.getMWAppID()){case b("FacebookAppIDs").MESSENGERDOTCOM.toString():return"messenger_dot_com";case b("FacebookAppIDs").WWW.toString():return"www";case b("FacebookAppIDs").BONFIRE_FOR_WWW.toString():return"bonfire_for_www";case b("FacebookAppIDs").WORKPLACE_DESKTOP.toString():return"workplace";case b("FacebookAppIDs").DESKTOP_VIDEO_CHAT.toString():return"desktop_video_chat";case b("FacebookAppIDs").DESKTOP_VIDEO_CHAT_WINDOWS.toString():return"desktop_video_chat_for_windows";default:return"desktop"}},_getWorkplaceChatDesktopAppID:function(){return b("WorkplaceChatHelper").getAppID()||b("FacebookAppIDs").WORKPLACE_DESKTOP},getMWAppID:function(){__p&&__p();if(b("VFDesktopHelper").isDesktopApp()&&b("gkx")("794738"))return b("VFDesktopHelper").getAppID();if(!b("VFRTCClientFeatureGating").shouldUseRealMultiwayAppID())return b("FacebookAppIDs").CHATPROXY_WEB.toString();var a=new(b("URI"))(window.location.href),c=new(b("URI"))(window.location.href).domain;if(!c)return b("FacebookAppIDs").CHATPROXY_WEB.toString();if(b("WorkplaceChatHelper").isDesktopChatApp())return this._getWorkplaceChatDesktopAppID().toString();else if(b("isFacebookURI")(a)&&(c.startsWith("www")||c.startsWith("m")))return b("FacebookAppIDs").WWW.toString();else if(b("isBonfireURI")(a))return b("FacebookAppIDs").BONFIRE_FOR_WWW.toString();else if(b("isMessengerDotComURI")(a))return b("FacebookAppIDs").MESSENGERDOTCOM.toString();else return b("FacebookAppIDs").CHATPROXY_WEB.toString()}};e.exports=g}),null);
__d("VFRTCMultiwayMessage",["ChannelManager","CurrentUser","FBRTCMessageType","VFRTCAppData","VFRTCUtils"],(function(a,b,c,d,e,f){__p&&__p();b("ChannelManager").startChannelManager();function g(a){"use strict";this.$1=a}g.prototype.isRequest=function(){"use strict";return this.$1.jsonPayload.header.responseStatusCode==null};g.prototype.isType=function(a){"use strict";return this.type()==a};g.prototype.transactionId=function(){"use strict";return this.$1.jsonPayload.header.transactionId};g.prototype.conferenceName=function(){"use strict";return this.$1.jsonPayload.header.conferenceName};g.prototype.serverInfoData=function(){"use strict";return this.$1.jsonPayload.header.serverInfoData};g.prototype.message=function(){"use strict";return this.$1};g.prototype.type=function(){"use strict";return this.header().type};g.prototype.endpoint=function(){"use strict";return this.$1.endpoint};g.prototype.header=function(){"use strict";return this.$1.jsonPayload.header};g.prototype.body=function(){"use strict";return this.$1.jsonPayload.body};g.prototype.incrementRetryCount=function(){"use strict";this.$1.jsonPayload.header.retryCount++};g.prototype.ringRequest=function(){"use strict";return this.isRequest()&&this.isType(b("FBRTCMessageType").RING)?this.body().ringRequest:null};g.prototype.dismissRequest=function(){"use strict";return this.isRequest()&&this.isType(b("FBRTCMessageType").DISMISS)?this.body().dismissRequest:null};g.prototype.serverMediaUpdateRequest=function(){"use strict";return this.isRequest()&&this.isType(b("FBRTCMessageType").SERVER_MEDIA_UPDATE)?this.body().serverMediaUpdateRequest:null};g.prototype.conferenceStateRequest=function(){"use strict";return this.isRequest()&&this.isType(b("FBRTCMessageType").CONFERENCE_STATE)?this.body().conferenceStateRequest:null};g.prototype.createResponse=function(a,c){"use strict";var d=c.body;c=c.callID;a={endpoint:{appId:b("VFRTCAppData").getMWAppID(),deviceId:b("ChannelManager").getCompleteConfig().sessionID,userId:b("CurrentUser").getID()},jsonPayload:{header:b("VFRTCUtils").createResponseHeader(this.header(),a,c?c:""),body:d||{}}};return new g(a)};e.exports=g}),null);
__d("VFRTCProxyUserActions",["RTCProxyUserActionTypes","VFRTCAppDispatcher"],(function(a,b,c,d,e,f){"use strict";a={setProxyUsers:function(a,c){b("VFRTCAppDispatcher").dispatch({type:b("RTCProxyUserActionTypes").SET_PROXY_USER_MAP,proxyUserID:a,proxyingAsUserID:c})}};e.exports=a}),null);
__d("VFRTCProxyUserReducer",["RTCProxyUserActionTypes"],(function(a,b,c,d,e,f){"use strict";function a(a,c){switch(c.type){case b("RTCProxyUserActionTypes").SET_PROXY_USER_MAP:var d=c.proxyUserID;c=c.proxyingAsUserID;if(!a.proxyUserToProxyingAs.has(d))return a.set("proxyingAsToProxyUser",a.proxyingAsToProxyUser.set(c,d)).set("proxyUserToProxyingAs",a.proxyUserToProxyingAs.set(d,c))}return a}e.exports={setProxyUsers:a}}),null);
__d("VFRTCProxyUserStoreState",["immutable"],(function(a,b,c,d,e,f){var g;g=babelHelpers.inherits(a,b("immutable").Record({proxyingAsToProxyUser:b("immutable").Map(),proxyUserToProxyingAs:b("immutable").Map()}));g&&g.prototype;function a(){"use strict";g.apply(this,arguments)}e.exports=a}),null);
__d("VFRTCProxyUserStore",["FluxReduceStore","VFRTCAppDispatcher","VFRTCProxyUserReducer","VFRTCProxyUserStoreState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=[b("VFRTCProxyUserReducer").setProxyUsers];g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return new(b("VFRTCProxyUserStoreState"))()};a.prototype.reduce=function(a,b){return h.reduce(function(a,c){return c(a,b)},a)};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("VFRTCAppDispatcher"))}),null);
__d("VFRTCProxyUserUtils",["ImmutableObject","MercuryIDs","VFRTCProxyUserActions","VFRTCProxyUserStore","VFWebLogger","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={setProxyingAsUsersFromMessage:function(a){__p&&__p();a=a.appMessages;if(a){var c=new Map();a.forEach(function(a){__p&&__p();var d;d=(d=a)!=null?(d=d.body)!=null?(d=d.genericMessage)!=null?d.topic:d:d:d;a=(a=a)!=null?(a=a.body)!=null?(a=a.genericMessage)!=null?a.data:a:a:a;if(d==="aloha_proxying_as_users"&&a!=null){b("VFWebLogger").logRTCCheckpoint({checkpoint:"Initializing_AlohaProxyingAsUsers"});d=JSON.parse(a);for(var e in d){a=d[e][0].id.toString();a&&(b("VFRTCProxyUserActions").setProxyUsers(e,a),c.set(e,a))}}});return c}return null},transformProxyUserParticipantsToProxyingAs:function(a,c){__p&&__p();for(var d in a){var e=a[d].fbid;if(c.has(e)){var f=a[d];delete a[d];e=c.get(e);var g=b("MercuryIDs").getParticipantIDFromUserID(e);f=b("ImmutableObject").setProperty(f,"fbid",e);f=b("ImmutableObject").setProperty(f,"id",g);a[g]=f}}return a},getUserIDToFetch:function(a){var c=b("VFRTCProxyUserStore").getState();c=c.proxyUserToProxyingAs;return c.has(a)?c.get(a):a}};e.exports=a}),null);
__d("VFRTCMultiwayParticipantFetcher",["Promise","regeneratorRuntime","BonfireUserFetcher","ImmutableObject","MercuryIDs","MercuryParticipantsConstants","MessengerParticipants.bs","VFRTCProxyUserUtils","VFRTCUtils","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("immutable").Map;b("immutable").Set;function g(a,c){var d=a.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a)});return new(b("Promise"))(function(a,e){try{b("MessengerParticipants.bs").getBigImageMultiWithSize(d.toArray(),function(c){a(b("immutable").fromJS(c))},c)}catch(a){e(a)}})}function h(a,c){var d=a.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a)});return new(b("Promise"))(function(a,e){try{b("MessengerParticipants.bs").getMulti(d.toArray(),function(d){c&&c.proxyingAsToProxyUser!=null&&c.proxyingAsToProxyUser!==void 0&&c.proxyingAsToProxyUser.size>0&&(d=b("VFRTCProxyUserUtils").transformProxyUserParticipantsToProxyingAs(d,c.proxyingAsToProxyUser)),a(b("immutable").fromJS(d))})}catch(a){e(a)}})}function i(a,c){__p&&__p();var d,e;return b("regeneratorRuntime").async(function(f){__p&&__p();while(1)switch(f.prev=f.next){case 0:f.next=2;return b("regeneratorRuntime").awrap(h(a,c));case 2:d=f.sent;if(!c.profileImageSize){f.next=8;break}f.next=6;return b("regeneratorRuntime").awrap(g(a,c.profileImageSize));case 6:e=f.sent;return f.abrupt("return",d.withMutations(function(a){e.forEach(function(c,d){var e=a.get(d);if(e){e=b("ImmutableObject").setProperty(e,"big_image_src",c);a.set(d,e)}})}));case 8:return f.abrupt("return",d);case 9:case"end":return f.stop()}},null,this)}function j(a){__p&&__p();var c,d,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:c=b("immutable").Set([a]);d=b("MercuryIDs").getParticipantIDFromUserID(a);f.next=4;return b("regeneratorRuntime").awrap(i(c,{profileImageSize:b("MercuryParticipantsConstants").WWW_INCALL_THUMBNAIL_SIZE}));case 4:e=f.sent;return f.abrupt("return",e.get(d));case 6:case"end":return f.stop()}},null,this)}a={fetchParticipant:function(a,c){__p&&__p();return b("regeneratorRuntime").async(function(d){__p&&__p();while(1)switch(d.prev=d.next){case 0:if(!b("VFRTCUtils").isBonfireCall(a)){d.next=6;break}d.next=3;return b("regeneratorRuntime").awrap(b("BonfireUserFetcher").fetchParticipant(c));case 3:return d.abrupt("return",d.sent);case 6:d.next=8;return b("regeneratorRuntime").awrap(j(c));case 8:return d.abrupt("return",d.sent);case 9:case"end":return d.stop()}},null,this)},fetchAllParticipants:function(a,c,d){__p&&__p();return b("regeneratorRuntime").async(function(e){__p&&__p();while(1)switch(e.prev=e.next){case 0:d===void 0&&(d={});if(!b("VFRTCUtils").isBonfireCall(a)){e.next=7;break}e.next=4;return b("regeneratorRuntime").awrap(b("BonfireUserFetcher").fetchAllParticipants(c));case 4:return e.abrupt("return",e.sent);case 7:e.next=9;return b("regeneratorRuntime").awrap(i(c,d));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},null,this)}};e.exports=a}),null);
__d("VFRTCMultiwayMessageSender",["Promise","AsyncRequest","CurrentUser","Fbtrace","SiteData","VFRTCAppData","XGroupCallSendMessageController"],(function(a,b,c,d,e,f){__p&&__p();var g=6e3;a.prototype.send=function(a){"use strict";__p&&__p();return new(b("Promise"))(function(c,d){__p&&__p();var e=a.jsonPayload.header.conferenceName;e={conference_name:e,user_id:b("CurrentUser").getID(),message:a,app_id:b("VFRTCAppData").getAppID(),app_version:String(b("SiteData").client_revision||"dev"),op:"VFRTCMultiwayMessageSender.send",policy:"WebRTC"};e=b("Fbtrace").requestReceive("browser",String(b("SiteData").client_revision||"dev"),e);var f=b("XGroupCallSendMessageController").getURIBuilder().setInt("webrtc_fbtrace",e.isOn()?1:0).getURI();b("Fbtrace").withDefaultNode(e,function(){var e=new(b("AsyncRequest"))(f).setMethod("POST").setData({message:JSON.stringify(a)}).setAllowCrossPageTransition(!0).setHandler(function(a){c(a)}).setErrorHandler(function(a){a=a.getErrorDescription();a=Error(a!=null?a.toString():"AsyncRequest error");d(a)}).setTimeoutHandler(g,function(){d("Timeout")});e.send()})})};function a(){"use strict"}e.exports=a}),null);
__d("VFRTCTransactions",["Promise","VFRTCConsoleLogger","VFRTCMultiwayMessageSender","clearTimeout","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=6e4,h=Object.freeze({INIT:0,PROCESSING:1,COMPLETED:2,TERMINATED:3});function a(){this.$1=new Map()}a.prototype.findTransaction=function(a){return this.$1.get(a)};a.prototype.addTransaction=function(a){this.$1.set(a.id,a)};a.prototype.removeTransaction=function(a){this.$1["delete"](a.id)};a.prototype.getTransaction=function(a){return this.findTransaction(a.transactionId())||new i(this,a)};function i(a,c){this.id=c.transactionId(),this.$1=h.INIT,this.$2=c,this.$3=null,this.$4=a,this.$5=new Error("Unknown"),this.$6=null,this.$7=new(b("VFRTCMultiwayMessageSender"))(),this.$8(),this.$4.addTransaction(this)}i.prototype.start=function(){__p&&__p();if(this.$1==h.INIT){this.$9(h.PROCESSING);return b("Promise").resolve(this.$2)}else if(this.$1==h.PROCESSING)return b("Promise").resolve(null);else if(this.$1==h.COMPLETED){this.$10();return b("Promise").resolve(null)}return b("Promise").reject(this.$5)};i.prototype.sendResponse=function(a){this.$3=a;this.$9(h.COMPLETED);return this.$7.send(a.message()).then(function(a){},function(a){this.$5=a,this.$9(h.TERMINATED)}.bind(this))};i.prototype.$10=function(){if(this.$3!=null){var a=this.$3;a.incrementRetryCount();this.sendResponse(a)}};i.prototype.$9=function(a){a!=this.$1&&(this.$1=a,this.$1!=h.TERMINATED&&this.$8(),this.$1==h.TERMINATED&&(this.$5=new Error("Terminated"),this.$4.removeTransaction(this)))};i.prototype.$8=function(){this.$6&&(b("clearTimeout")(this.$6),this.$6=null),this.$6=b("setTimeout")(function(){this.$9(h.TERMINATED)}.bind(this),g)};e.exports={FBRTCTransactionOwner:a,FBRTCServerTransaction:i}}),null);
__d("VFRTCgenerateRTCCallID",["randomInt"],(function(a,b,c,d,e,f){"use strict";function a(){return b("randomInt")(0,4294967294)+1}e.exports=a}),null);
__d("VFRTCMultiwayMessageHandler",["Arbiter","ChannelConstants","CurrentUser","FBRTCCapability","FBRTCDeviceStatus","FBRTCHangupReason","FBRTCRtcResponseStatusCode","VFRTCCallActions","VFRTCCallStore","VFRTCgenerateRTCCallID","VFRTCGroupCallActions","VFRTCLogger","VFRTCMultiwayMessage","VFRTCMultiwayParticipantFetcher","VFRTCMWProtocolHandler","VFRTCMWSessionDescription","VFRTCProxyUserStore","VFRTCProxyUserUtils","VFRTCTransactions","immutable","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VFRTCTransactions").FBRTCServerTransaction,h=b("VFRTCTransactions").FBRTCTransactionOwner;function i(){this.$3=-1,this.$7()}i.prototype.initialize=function(a,b,c,d){this.$1=a,this.$2=b,this.$4=c,this.$5=d};i.initHandler=function(a,b,c,d){c===void 0&&(c=!1),d===void 0&&(d=!1),new i().initialize(a,b,c,d)};i.close=function(){i.$6&&(b("Arbiter").unsubscribe(i.$6),i.$6=null)};i.prototype.$7=function(){i.$6=b("Arbiter").subscribe([b("ChannelConstants").getArbiterType("rtc_live_json"),b("ChannelConstants").getArbiterType("rtc_multi_json")],function(a,b){this.$8(b.obj)}.bind(this))};i.prototype.$8=function(a){__p&&__p();var c=new(b("VFRTCMultiwayMessage"))(a);a=b("VFRTCCallStore").getState().callID;b("VFRTCLogger").getInstance().logMultiwayMessageReceived(c,a);if(!c.isRequest())return;if(this.$1===c.conferenceName())this.$9(c);else if(c.ringRequest()&&!this.$4){var d=new g(new h(),c);b("promiseDone")(d.start(),function(a){var e=b("VFRTCgenerateRTCCallID")();b("promiseDone")(d.sendResponse(this.$10(a,e)),function(){return b("VFRTCMWProtocolHandler").otherUserInAnotherCall(c.conferenceName(),c.serverInfoData(),b("FBRTCHangupReason").IN_ANOTHER_CALL,e.toString(),"InAnotherCall")})}.bind(this))}};i.prototype.$10=function(a,c){var d=a.ringRequest(),e=a.serverInfoData();if(d==null||e==null)return a.createResponse(b("FBRTCRtcResponseStatusCode").BAD_REQUEST,{});d={deviceCapabilities:[b("FBRTCCapability").SUPPORT_AUDIO_DEPRECATED,b("FBRTCCapability").SUPPORT_VIDEO_DEPRECATED],deviceStatus:b("FBRTCDeviceStatus").OK};return a.createResponse(b("FBRTCRtcResponseStatusCode").OK,{body:{ringResponse:d},callID:c.toString()})};i.prototype.$9=function(a){__p&&__p();var c=new g(new h(),a);b("promiseDone")(c.start().then(function(a){__p&&__p();if(a!=null){var d=b("VFRTCCallStore").getState(),e=d.callInfo;if(a.dismissRequest()!=null)a.serverInfoData()===e.serverInfoData&&(b("VFRTCGroupCallActions").handleDismissRequest(c,a),i.close(),d.connections.forEach(function(a){return a.close()}),this.$5||b("VFRTCCallActions").removeAllLocalStreams(!0));else if(a.serverMediaUpdateRequest()!=null)b("VFRTCProxyUserUtils").setProxyingAsUsersFromMessage(a.serverMediaUpdateRequest()),b("VFRTCMWSessionDescription").serverMediaUpdate(a.serverMediaUpdateRequest(),function(d){b("VFRTCGroupCallActions").onServerMediaUpdateSuccess(),c.sendResponse(a.createResponse(b("FBRTCRtcResponseStatusCode").OK,{body:{serverMediaUpdateResponse:{currentVersion:d}},callID:e.callID}))});else if(a.conferenceStateRequest()!=null){d=b("VFRTCCallStore").getState();d=d.remoteUsers;var f=d.map(function(a){return a.FBID});d=Object.keys(a.conferenceStateRequest().participantStates);d=d.filter(function(a){return a!==b("CurrentUser").getID()&&!f.has(a)});if(d.length>0){var g=b("VFRTCProxyUserUtils").setProxyingAsUsersFromMessage(a.conferenceStateRequest()),h=new Set(d);g!=null&&g.forEach(function(a,b){h["delete"](b),a!==null&&!h.has(a)&&h.add(a)});d=b("VFRTCProxyUserStore").getState();g=d.proxyingAsToProxyUser;b("promiseDone")(b("VFRTCMultiwayParticipantFetcher").fetchAllParticipants(this.$1,b("immutable").Set(h),{profileImageSize:100,proxyingAsToProxyUser:g}),function(d){b("VFRTCGroupCallActions").onParticipantsAdded(d.toJS()),b("VFRTCGroupCallActions").handleConferenceStateRequest(c,a,this.$3,function(a){this.$3=a}.bind(this))}.bind(this))}else b("VFRTCGroupCallActions").handleConferenceStateRequest(c,a,this.$3,function(a){this.$3=a}.bind(this))}}}.bind(this)))};e.exports=i}),null);
__d("VFMultiwayRequests",["Promise","AsyncRequest","FBRTCCapability","FBRTCMessageType","VFRTCUtils","XGroupCallSendRequestController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=15e3;a.prototype.sendJoinRequest=function(a,c,d,e,f,g,h,i){__p&&__p();var j=h.callID,k=h.numParticipants;h=h.callTrigger;var l=i.userToEscalate,m=i.isEscalator;i=i.escP2PCallID;c=b("VFRTCUtils").createRequestHeader(b("FBRTCMessageType").JOIN,c,d,j,i);d={offer:{sdpString:e.toSdp()},deviceCapabilities:[b("FBRTCCapability").SUPPORT_AUDIO_DEPRECATED,b("FBRTCCapability").SUPPORT_VIDEO_DEPRECATED]};j=b("VFRTCUtils").createClientContextMessage(k,h?h:"");d.appMessages=[j];f&&f.length>0&&!l&&(d.usersToCall=f);l&&m&&(d.userToEscalate=l);g&&(d.mediaStatus=g);i={joinRequest:d};e=this.$1(a,c,i);return this.$2(e)};a.prototype.sendHangupRequest=function(a,c,d,e,f,g){c=b("VFRTCUtils").createRequestHeader(b("FBRTCMessageType").HANGUP,c,d,g);d={reason:e,detailedReasonString:f};g={hangupRequest:d};e=this.$1(a,c,g);return this.$2(e)};a.prototype.sendAddParticipantsRequest=function(a,c,d,e,f){c=b("VFRTCUtils").createRequestHeader(b("FBRTCMessageType").ADD_PARTICIPANTS,c,d,f);d={usersToInvite:e};f={addParticipantsRequest:d};e=this.$1(a,c,f);return this.$2(e)};a.prototype.sendRemoveParticipantsRequest=function(a,c,d,e,f){c=b("VFRTCUtils").createRequestHeader(b("FBRTCMessageType").REMOVE_PARTICIPANTS,c,d,f);d={usersToRemove:e};f={removeParticipantsRequest:d};e=this.$1(a,c,f);return this.$2(e)};a.prototype.sendSubscriptionRequest=function(a,c,d,e,f){c=b("VFRTCUtils").createRequestHeader(b("FBRTCMessageType").SUBSCRIPTION,c,d,f);d={subscriptions:e};f={subscriptionRequest:d};e=this.$1(a,c,f);return this.$2(e)};a.prototype.sendClientMediaUpdateRequest=function(a,c,d,e,f,g,h){c=b("VFRTCUtils").createRequestHeader(b("FBRTCMessageType").CLIENT_MEDIA_UPDATE,c,d,h);d={fromVersion:e,toVersion:f,mediaUpdates:g};h={clientMediaUpdateRequest:d};e=this.$1(a,c,h);return this.$2(e)};a.prototype.$2=function(a){return new(b("Promise"))(function(c,d){var e=b("XGroupCallSendRequestController").getURIBuilder().getURI();e=new(b("AsyncRequest"))(e).setMethod("POST").setData({request:JSON.stringify(a)}).setAllowCrossPageTransition(!0).setHandler(function(a){c(a.payload)}).setErrorHandler(function(a){a=a.getErrorDescription();a=Error(a!=null?a.toString():"AsyncRequest error");d(a)}).setTimeoutHandler(g,function(){d("Timeout")});e.send()})};a.prototype.$1=function(a,b,c){return{endpoint:a,jsonPayload:{header:b,body:c}}};function a(){}e.exports=new a()}),null);
__d("VFRTCSdpUtils",["FBLogger","UserAgent","VFRTCClientFeatureGating"],(function(a,b,c,d,e,f){__p&&__p();var g="a=x-fb-feature:",h="\r\n",i="m=video 0";f=["audio","video"].map(function(a){return new RegExp("m="+a+"\\s+\\d+\\s+(\\w+\\/?)+(\\s+\\d+)+")});var j=f[0],k=f[1],l=["http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01","http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time","urn:3gpp:video-orientation","urn:ietf:params:rtp-hdrext:ssrc-audio-level","urn:ietf:params:rtp-hdrext:toffset"],m=function(a){return a.match(/^a=rtpmap:(\d+)\s/)[1]},n=function(a,b,c){var d=m(a[b]);o(a,c,[d]);a.splice(b,1)},o=function(a,b,c){var d=a[b].split("RTP/SAVPF"),e=d[1].split(/\s+/);for(var f=0;f<c.length;f++){var g=e.indexOf(c[f]);g>=0&&e.splice(g,1)}d[1]=e.join(" ");a[b]=d.join("RTP/SAVPF")},p=function(a,b,c){__p&&__p();var d=m(a[b]);n(a,b,c);var e=new RegExp("^a=(rtcp-fb|fmtp):"+d+" ");a=a.filter(function(a,b){return!(e.test(a)&&b>=c)});var f=new RegExp("^a=fmtp:(\\d+)\\s+apt="+d+"($|;)");b=a.reduce(function(a,b,c){c=b.match(f);return c?[].concat(a,[c[1]]):a},[]);d=b.join("|");o(a,c,b);var g=new RegExp("^a=rtpmap:("+d+")\\s+rtx/|^a=fmtp:("+d+")\\s+apt=");return a.filter(function(a){return!g.test(a)})};f={RX_SDP_MEDIA_AUDIO:j,RX_SDP_MEDIA_VIDEO:k,replaceRTPSAVPFProfile:function(a){var b="UDP/TLS/RTP/SAVPF",c="RTP/SAVPF";while(a.indexOf(b)>=0)a=a.replace(b,c);return a},addIceOptionToSdp:function(a,b){"use strict";__p&&__p();var c="a=ice-options:",d=a.indexOf(c);if(d>=0)return a.split(h).map(function(a){return a.startsWith(c)?a+" "+b:a}).join(h);d=c+b;var e=a.split(h),f=!1,g=-1;for(var i=0;i<e.length;i++){var j=e[i].slice(0,2);if(j=="s="){f=!0;continue}if(f&&j=="a="){g=i;break}}if(g>=0){e.splice(g,0,d);return e.join(h)}return[a,d,h].join("")},preferIsac:function(a){__p&&__p();a=a.split(h);var b=-1,c=-1,d=-1;for(var e=0;e<a.length;e++){var f=a[e];f.match(j)&&(b=e);d===-1&&b>-1&&f.match(/^a=rtpmap:/)&&(d=e);f.match(/^a=rtpmap:\d+\s+ISAC\/16000/)&&(c=e)}if(b===-1||c===-1||d===-1||a[b].indexOf("RTP/SAVPF")===-1)return a.join(h);f=a[c];n(a,c,b);a.splice(d,0,f);a[b]=a[b].replace("RTP/SAVPF","RTP/SAVPF "+m(f));return a.join(h)},preferCodec:function(a,b,c){__p&&__p();a=a.split(h);var d=c?k:j,e=a.findIndex(function(a){return d.test(a)});if(e!==-1&&a[e].indexOf("RTP/SAVPF")!==-1){var f=new RegExp("^a=rtpmap:\\d+\\s+"+b);c=a.findIndex(function(a){return f.test(a)});var g=/^a=rtpmap:/;b=a.findIndex(function(a,b){return b>e&&g.test(a)});if(c!==-1&&b!==-1){var i=a[c];n(a,c,e);a.splice(b,0,i);a[e]=a[e].replace("RTP/SAVPF","RTP/SAVPF "+m(i))}}return a.join(h)},disableVideo:function(a){var c=/m=video\s+\S+/;a=a.replace(c,i);b("UserAgent").isBrowser("Firefox <= 37")&&(a=this._makeDisabledVideoReceiveOnly(a));return a},_makeDisabledVideoReceiveOnly:function(a){if(a.indexOf(i)>-1){var b=a.split(i);b[1]=b[1].replace(/send(recv|only)/,"recvonly");a=b.join(i)}return a},fixMobileIceSdp:function(a){__p&&__p();a=a.replace(/^a=/,"");a=a.split(/\s+username\s+.+password.+/)[0];var b=a.match(/\s+relay\s+|\s+srflx\s+/),c=a.match(/raddr.+rport.+/);if(b&&!c){b=b[0];c=a.split(b);var d=c[1].match(/^(\d+\.\d+\.\d+\.\d+)\s+(\d+)\s+/),e,f;d?(e=d[1],f=d[2],c[1]=c[1].replace(d[0],"")):(d=c[0].split(/\s+/),e=d[4],f=d[5]);a=""+c[0]+b+"raddr "+e+" rport "+f+" "+c[1]}return a},addAudioNack:function(a){var b=[];a=a.split(h).map(function(a){var c="";b.length>0&&(/^a=rtpmap:(\d+)/.test(a)||/^a=ssrc/.test(a)||/^m=/.test(a))&&(c+=this._getrtcpFeedbackLinesFromAudioFMTs(b)+h,b=[]);/^m=audio/.test(a)&&(b=a.match(/^m=audio\s+[\d\/]+\s+[\w\/]+([\s+\d+]+)/)[1].trim().split(" "));return c+a}.bind(this)).join(h);b.length>0&&(a+=h+this._getrtcpFeedbackLinesFromAudioFMTs(b));return a},addSetup:function(a){if(a.indexOf("a=setup:")>=0)return a;a=a.split(h);var b=a.findIndex(function(a){return a.startsWith("s=")}),c=a.findIndex(function(a,c){return c>b&&a.startsWith("a=")});a.splice(c,0,"a=setup:actpass");return a.join(h)},_replaceFmtp:function(a,b,c,d){a=a==b?[]:a.substr(b.length).split(";");var e=a.findIndex(function(a){return a.startsWith(c+"=")});d=c+"="+d;e<0?a.push(d):a[e]=d;return""+b+a.join(";")},_addFmtpToMediaSection:function(a,b,c,d){__p&&__p();var e=new RegExp("^a=rtpmap:(\\d+)\\s"+b);b=a.findIndex(function(a){return a.match(e)});if(b<0)return a;var f=a[b].match(e);f=f[1];var g="a=fmtp:"+f+" ";f=a.findIndex(function(a){return a.startsWith(g)});f===-1&&(f=b+1,a.splice(f,0,g));a[f]=this._replaceFmtp(a[f],g,c,d);return a},addFmtp:function(a,b,c,d){__p&&__p();a=a.split(h);var e=-1;for(var f=0;f<=a.length;f++)if(f===a.length||a[f].startsWith("m=")){if(e!==-1){var g=a.splice(e,f-e);g=this._addFmtpToMediaSection(g,b,c,d);a.splice.apply(a,[e,0].concat(g));f=e+1+g.length}e=f}return a.join(h)},_getrtcpFeedbackLinesFromAudioFMTs:function(a){return a.map(function(a){return"a=rtcp-fb:"+a+" nack"}).join(h)},_removeCodec:function(a,b){__p&&__p();var c=a;a=function(){var a=c.split(h),d=new RegExp("^a=rtpmap:\\d+\\s+"+b+"\\/"),e=a.findIndex(function(a){return d.test(a)}),f=a.findIndex(function(a){return/^m=video/.test(a)});if(e==-1||f==-1)return"break";c=p(a,e,f).join(h)};do{var d=a();if(d==="break")break}while(!0);return c},removeRED:function(a){return this._removeCodec(a,"red")},removeH264:function(a){return this._removeCodec(a,"H264")},removeVP9:function(a){return this._removeCodec(a,"VP9")},removeUnknownRtpHeaderExtensions:function(a){a=a.split(h);a=a.filter(function(a){return!a.match(/^a=extmap:/)||l.some(function(b){return a.includes(b)})});return a.join(h)},isVideoSupported:function(a){return!!a&&a.indexOf("m=video")!==-1&&a.indexOf(i)===-1},setDtlsRole:function(a,b){if(!a.match(/setup:(active|passive|actpass)/))return a.replace(/(a=fingerprint:.+)/g,"$1"+h+"a=setup:"+b);else return a.replace(/setup:actpass/g,"setup:"+b)},setVideoBitrateConstraint:function(a){var c=b("UserAgent").isBrowser("Firefox"),d=c?"TIAS":"AS";c=c?72e4:720;var e=new RegExp("^b="+d+":","m");if(a.match(e))return a;a=a.replace(/^a=mid:video\r\n/m,"a=mid:video"+h+"b="+d+":"+c+h);return a},removeSdparta:function(a){__p&&__p();if(b("VFRTCClientFeatureGating").shouldApplySdpMidTranslation())return a;a=a.split(h);var c="audio",d=!1,e=-1;for(var f=0;f<a.length;f++){var g=a[f];g.indexOf("m=audio")===0&&(c="audio");g.indexOf("m=video")===0&&(d=!0,c="video");g.indexOf("a=mid:sdparta_")===0&&(a[f]="a=mid:"+c);g.indexOf("a=group:BUNDLE sdparta_")===0&&(e=f);g.indexOf("a=group:BUNDLE audio sdparta_")===0&&(e=f);g.indexOf("a=group:BUNDLE audio video sdparta_")===0&&b("FBLogger")("rtc_www").mustfix("content_name rewriting will not work anymore, fix sdparta_# in Firefox.")}e>-1&&(d?a[e]="a=group:BUNDLE audio video":a[e]="a=group:BUNDLE audio");return a.join(h)},constructMidMap:function(a){if(!b("VFRTCClientFeatureGating").shouldApplySdpMidTranslation())return{answerSdpMap:null,offerSdpMap:null};a=a.split(h);var c={},d={},e=null;a.forEach(function(b){b.startsWith("m=audio")?e="audio":b.startsWith("m=video")?e="video":b.startsWith("m=")?e=null:b.startsWith("a=mid:")&&e&&(a=b.split("a=mid:")[1],a!==e&&(c[a]=e,d[e]||(d[e]=a)))});return{offerSdpMap:Object.keys(c).length?c:null,answerSdpMap:Object.keys(d).length?d:null}},transformSdpMids:function(a,c){__p&&__p();if(c==null||!b("VFRTCClientFeatureGating").shouldApplySdpMidTranslation())return a;var d=c,e=a.split(h);c=-1;e.forEach(function(b,f){if(b.startsWith("a=group:BUNDLE"))c=f;else if(b.startsWith("a=mid:")){a=b.split("a=mid:")[1];b=d[a]||a;e[f]="a=mid:"+b}});if(c>-1){var f=e[c].split("a=group:BUNDLE ")[1].split(" ");f=f.map(function(a){return d[a]||a});e[c]="a=group:BUNDLE "+f.join(" ")}return e.join(h)},useDTLSOverCrypto:function(a){if(!(b("UserAgent").isBrowser("Chrome >= 57")||b("UserAgent").isBrowser("Opera >= 44")))return a;return!/^a=fingerprint:/m.test(a)?a:a.split(h).filter(function(a){return a.indexOf("a=crypto:")!==0}).join(h)},validateOfferSdp:function(a,b){__p&&__p();if(a.split(":")[0]==="LIVE"){a=/^m=/;var c=/^m=audio/,d=/^m=video/,e=/^a=ssrc:/;b=b.split(h);var f=[];for(var g=b.length-1;g>=0;g--)a.test(b[g])&&f.push(b.splice(g));var i=!1,j=!1;f.forEach(function(a){c.test(a[0])&&!i?i=a.some(function(a){return e.test(a)}):d.test(a[0])&&!j&&(j=a.some(function(a){return e.test(a)}))});return i&&j}return!0},_removeCodecID:function(a,b){var c=a.findIndex(function(a){a=a.match(/^a=rtpmap:(\S+)\s/);return a&&a[1]===b?!0:!1}),d=a.findIndex(function(a){return/^m=video/.test(a)});return c===-1||d===-1?a:p(a,c,d)},_getAllCodecIds:function(a,b){__p&&__p();var c=a.findIndex(function(a){return/^m=video/.test(a)});if(c===-1)return[];var d=new RegExp("^a=rtpmap:\\S+\\s+"+b+"\\/"),e=[];a.forEach(function(b,f){if(d.test(b)){b=m(a[f]);a[c].indexOf(b)>0&&e.push(b)}});return e},_getCodecIDMatchingH264Profile:function(a,b){var c=b.levelAsymmetryAllowed?"1":"0",d=b.packetizationMode?"1":"0";c=new RegExp("^a=fmtp:(\\S+)\\s+level-asymmetry-allowed="+c+";packetization-mode="+d+";profile-level-id="+b.profileLevelId);for(var d=0;d<a.length;d++){b=a[d].match(c);if(b)return b[1]}return null},pickSpecificH264ProfileIfExists:function(a,b){var c=a.split(h),d=this._getCodecIDMatchingH264Profile(c,b);if(!d)return a;b=this._getAllCodecIds(c,"H264");return b.reduce(function(a,b){return b!==d?this._removeCodecID(a,b):a}.bind(this),c).join(h)},clearFirefoxInactiveDataChannelBlock:function(a){__p&&__p();if(!b("UserAgent").isBrowser("Firefox")||b("VFRTCClientFeatureGating").preserveFirefoxInactiveDataChannelBlock())return a;var c=a.split(h),d=c.findIndex(function(a){return a.startsWith("m=application")});if(d===-1)return a;var e=c.slice(d),f=e.findIndex(function(a,b){return b>0&&a.startsWith("m=")});f!==-1&&(e=e.slice(0,f));if(e[0]!=null&&e[0].endsWith("0")&&e.some(function(a){return a.startsWith("a=inactive")})){f=e.findIndex(function(a){return a.startsWith("c=")});return[].concat(c.slice(0,d+1+(f!==-1?f:0)),c.slice(d+e.length),[""]).join(h)}return a},addFBFeatures:a,getFBFeatures:c,addSSRCContentType:d};function a(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];if(c.length<1)return a;var e=q(a),f=e[0],i=e[1],j=f.split(h),k=r(j),l=j.filter(function(a){return!a.startsWith(g)}),m=1+l.map(function(a){return a?a.substr(0,2):""}).lastIndexOf("a=")||l.length;return[].concat(l.slice(0),s([].concat(k,c)).map(function(a){return""+g+a}),l.slice(m),[i?[i.trim(),""].join(h):""]).join(h)}function c(a){a=q(a);a=a[0];return r(a.split(h))}function q(a){if(!a)return["",""];var b=a.trim().split(h),c=0;while(c<b.length){if(b[c].startsWith("m="))break;c++}return c===b.length?[a.trim(),""]:[b.slice(0,c).join(h).trim(),b.slice(c).join(h).trim()]}function r(a){return s(a.filter(function(a){return a.startsWith(g)}).map(function(a){return a.substr(g.length)}))}function s(a){__p&&__p();var b=Object.create(null);for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e&&(b[e]=!0)}return Object.keys(b).sort()}function d(a,b){__p&&__p();var c=a.split(h);b.forEach(function(a,b){__p&&__p();var d=new RegExp("^a=ssrc:\\d+ label:"+b);b=c.findIndex(function(a){return d.test(a)});if(b!==-1){var e=c[b].trim().split(" ")[0];if(/^a=ssrc:\d+$/.test(e)){e=e+" x-fb-content:"+a;c.splice(b+1,0,e)}}});return c.join(h)}e.exports=f}),null);
__d("VFRTCSignalingExperiments",["CurrentUser","FBRTCExperimentName","UserAgent","VFRTCConfig","VFRTCExperiment","VFRTCScreenSharingUtils","VFRTCSupport","VFRTCVersionDetection","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){this.$2=new Set(),this.$1=new Set(g.getLocal()),a&&(this.$2=new Set(a))}g.prototype.getLocal=function(){return Array.from(this.$1)};g.prototype.setRemote=function(a){return!a?this:new g(a)};g.prototype.getRemote=function(){return Array.from(this.$2)};g.prototype.support=function(a){return this.localSupport(a)&&this.remoteSupport(a)};g.prototype.localSupport=function(a){return this.$1.has(a)};g.prototype.remoteSupport=function(a){return this.$2.has(a)};g.getLocal=function(){var a=[];(b("UserAgent").isBrowser("Chrome")||b("UserAgent").isBrowser("Opera")||b("UserAgent").isBrowser("Firefox >= 38"))&&a.push("sdp_update");h()&&a.push("multiple_streams_plan_b");b("VFRTCScreenSharingUtils").canUserReceiveScreenSharing()&&a.push("screen_sharing");i()&&a.push("multiple_streams_unified");b("VFRTCSupport").isMobileDevice()?a.push("mweb"):a.push("www");b("VFRTCSupport").videoEscalationByUnmuteWorkaround()&&a.push("video_escalation_by_unmute");return a};g.shouldCapMWBitrate=function(){return b("VFRTCExperiment").gen(b("FBRTCExperimentName").MW_VIDEO_QUALITY).getBool("cap_bitrate",!1)};g.shouldCapAudioBitrate=function(){return b("VFRTCConfig").isVCEndpointCall()||b("CurrentUser").isWorkUser()?!1:b("VFRTCExperiment").getMediaQualityExperiments().getBool("use_audio_bitrate_cap",!1)};g.shouldPreferIsac=function(){return b("VFRTCConfig").isVCEndpointCall()||b("CurrentUser").isWorkUser()?!0:b("VFRTCExperiment").getMediaQualityExperiments().getBool("prefer_isac",!0)};g.shouldEnableAudioNack=function(){return b("VFRTCConfig").isVCEndpointCall()||b("CurrentUser").isWorkUser()?!1:b("VFRTCExperiment").getMediaQualityExperiments().getBool("enable_audio_nack",!1)};function h(){return(b("UserAgent").isBrowser("Chrome")||b("UserAgent").isBrowser("Opera"))&&b("VFRTCVersionDetection").webrtcVersion()>=34}function i(){return b("UserAgent").isBrowser("Firefox")&&b("VFRTCVersionDetection").webrtcVersion()>=40}e.exports=g}),null);
__d("VFRTCSessionDescription",["invariant","FBRTCMediaType","VFRTCConfig","VFRTCConstants","VFRTCSdpUtils","VFRTCSignalingExperiments"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("VFRTCConstants").SignalingProtocol,i=window.RTCSessionDescription||window.mozRTCSessionDescription,j=2,k="o",l="m",m="a",n="rtpmap",o="ssrc-group",p="ssrc",q="cname",r="msid",s="mslabel",t="label",u="sendonly",v="recvonly",w="sendrecv",x="inactive",y="offer",z="answer",A="=",B=" ",C=":",D="\r\n",E="audio",F="video",G="application",H=function(a,b){return a.startsWith(b+A)},I=function(a){return a.substr(j)},J=function(a,b){return a.startsWith(b+D)||a.startsWith(b+C)},K=function(a,b){return a.substr(b.length+1)};function L(a){this.$1=[],this.$2="-",this.$3="multiway",this.$4=1,this.$5="IN",this.$6="IP4",this.$7="127.0.0.1",a.forEach(function(a){if(H(a,k)){var b=I(a).split(B);b.length==6&&(this.$2=b[0],this.$3=b[1],this.$4=parseInt(b[2],10),this.$5=b[3],this.$6=b[4],this.$7=b[5])}this.$1.push(a)}.bind(this))}L.prototype.setVersion=function(a){this.$4=a};L.prototype.getVersion=function(){return this.$4};L.prototype.toSdp=function(){return this.$1.map(function(a){if(H(a,k))return k+A+this.$2+B+this.$3+B+this.$4+B+this.$5+B+this.$6+B+this.$7;else return a}.bind(this)).join(D)};function M(a,b,c){__p&&__p();c===void 0&&(c={});this.$1=[];var d={},e=[],f=[];a.forEach(function(a){__p&&__p();var b=I(a);H(a,l)&&(this.$4=b.split(B)[0]);if(H(a,m)&&J(b,n)){var c=K(b,n);c=c.split(B);var g=c[0];c=c[1];d[c]=g}H(a,m)&&J(b,p)?this.$6(b,e):H(a,m)&&J(b,o)?this.$7(b,f):H(a,m)&&(b===u||b===v||b===w||b===x)?this.$5=b:this.$1.push(a)}.bind(this));Object.keys(c).forEach(function(a){if(d[a]){var b=Object.keys(c[a]).map(function(b){return b+"="+c[a][b]}).join(";");this.$1.push("a=fmtp:"+d[a]+" "+b)}}.bind(this));this.$3={};this.$2={};e.forEach(function(a){if(Object.prototype.hasOwnProperty.call(a,q)){var b=a.cname;!this.$3[b]?this.$3[b]=[a]:this.$3[b].push(a);a=this.findSsrcGroupForSsrc(f,a.ssrc);a&&(!this.$2[b]?this.$2[b]=[a]:this.$2[b].push(a),this.removeSsrcGroup(a,f))}}.bind(this));this.$4!==G&&(b===y?e.length===0?this.$5=v:this.$5=w:b===z&&(this.$5=w))}M.prototype.getMediaType=function(){return this.$4};M.prototype.findSsrcGroupForSsrc=function(a,b){return a.find(function(a){a=a.ssrcs;return a.some(function(a){return a===b})})};M.prototype.addStreamsForEndpoint=function(a,b){this.$3[a]=b};M.prototype.addSsrcGroupsForEndpoint=function(a,b){this.$3[a].forEach(function(c){c=c.ssrc;c=this.findSsrcGroupForSsrc(b,c);c&&(!this.$2[a]?this.$2[a]=[c]:this.$2[a].push(c),this.removeSsrcGroup(c,b))}.bind(this))};M.prototype.removeSsrcGroup=function(a,b){a=b.indexOf(a);a!==-1&&b.splice(a,1)};M.prototype.$7=function(a,b){a=K(a,o);if(a){a=a.split(B);var c=a[0];a=a.slice(1);b.push({semantics:c,ssrcs:a.map(function(a){return parseInt(a,10)})})}};M.prototype.$6=function(a,b){__p&&__p();var c=a.indexOf(B),d=a.substr(0,c),e=parseInt(K(d,p),10);d=a.substr(c+1);a=b.find(function(a){return a.ssrc===e});a||(a={},a.ssrc=e,b.push(a));if(J(d,q))a.cname=K(d,q);else if(J(d,r)){c=K(d,r).split(B);a.msid={id:c[0],appdata:c[1]}}else J(d,s)?a.mslabel=K(d,s):J(d,t)&&(a.label=K(d,t))};M.prototype.toSdp=function(){__p&&__p();var a=[];this.$1.forEach(function(b){a.push(b)});for(var b in this.$2)this.$2[b].forEach(function(b){a.push(m+A+o+C+b.semantics+B+b.ssrcs.join(B))});a.push(m+A+this.$5);for(var c in this.$3)this.$3[c].forEach(function(b){b.cname&&a.push(m+A+p+C+b.ssrc+B+q+C+b.cname),b.msid&&a.push(m+A+p+C+b.ssrc+B+r+C+b.msid.id+(b.msid.appdata?B+b.msid.appdata:"")),b.mslabel&&a.push(m+A+p+C+b.ssrc+B+s+C+b.mslabel),b.label&&a.push(m+A+p+C+b.ssrc+B+t+C+b.label)});return a.join(D)};function a(a,b,c){__p&&__p();b===void 0&&(b={});c===void 0&&(c={});b=b;var d=b.type;d=d===void 0?"offer":d;b=b.sdp;b=b===void 0?"":b;this.$2=a;this.type=d;switch(a){case h.CUSTOM:this.$1=b;return;case h.MULTIWAY:this.$3(b,c);return;case h.P2P:this.$4(b,c);return}}a.prototype.$3=function(a,c){__p&&__p();this.type==="offer"&&(a=b("VFRTCSdpUtils").removeUnknownRtpHeaderExtensions(a),c.OFFER_SDP_TRANSFORM&&(a=c.OFFER_SDP_TRANSFORM.reduce(function(a,b){return b(a)},a)));c.DISABLE_OPUS_STEREO&&(a=b("VFRTCSdpUtils").addFmtp(a,"opus","stereo","0"));a=a.trim().split(D);var d=[],e=0;while(e<a.length&&!H(a[e],l))d.push(a[e]),e++;this.sessionDescription=new L(d);this.mediaDescriptions=[];while(e<a.length){d=[];d.push(a[e]);e++;while(e<a.length&&!H(a[e],l))d.push(a[e]),e++;this.mediaDescriptions.push(new M(d,this.type,c.FORMAT_PARAMETERS))}};a.prototype.$4=function(a,c){__p&&__p();var d=[function(a){return b("VFRTCSdpUtils").addIceOptionToSdp(a,"fb-force-5245")},function(a){return b("VFRTCSdpUtils").useDTLSOverCrypto(a)}];if(this.type==="offer"){c.DISABLE_VIDEO&&d.push(function(a){return b("VFRTCSdpUtils").disableVideo(a)});var e=b("VFRTCSignalingExperiments").shouldPreferIsac();e&&d.push(function(a){return b("VFRTCSdpUtils").preferIsac(a)});d.push(function(a){return b("VFRTCSdpUtils").replaceRTPSAVPFProfile(a)},function(a){return b("VFRTCSdpUtils").addSetup(a)},function(a){return b("VFRTCSdpUtils").removeUnknownRtpHeaderExtensions(a)});b("VFRTCConfig").isVCEndpointCall()||d.push(function(a){return b("VFRTCSdpUtils").removeSdparta(a)});if(c.FORMAT_PARAMETERS){var f=Object.entries(c.FORMAT_PARAMETERS);e=function(){__p&&__p();var a=f[h],c=a[0];a=a[1];var e=Object.entries(a);a=function(){var a=e[i],f=a[0],h=a[1];typeof h==="string"||g(0,4169);d.push(function(a){return b("VFRTCSdpUtils").addFmtp(a,c,f,h)})};for(var i=0;i<e.length;i++)a()};for(var h=0;h<f.length;h++)e()}d.push(function(a){return b("VFRTCSdpUtils").clearFirefoxInactiveDataChannelBlock(a)})}c.ADD_FB_FEATURES!=null&&d.push(function(a){Array.isArray(c.ADD_FB_FEATURES)||g(0,4170);return b("VFRTCSdpUtils").addFBFeatures.apply(b("VFRTCSdpUtils"),[a].concat(c.ADD_FB_FEATURES))});c.ADD_AUDIO_NACK&&d.push(function(a){return b("VFRTCSdpUtils").addAudioNack(a)});c.DISABLE_OPUS_STEREO&&d.push(function(a){return b("VFRTCSdpUtils").addFmtp(a,"opus","stereo","0")});var i=c.SSRC_CONTENT_TYPE;i&&d.push(function(a){return b("VFRTCSdpUtils").addSSRCContentType(a,i)});this.$1=d.reduce(function(a,b){return b(a)},a)};a.prototype.processServerMediaUpdate=function(a){var c=a.sourceKey,d=a.media,e=a.ssrcGroups,f=[],g=[];d.forEach(function(a){a.ssrcs.forEach(function(d){d={ssrc:d,cname:c,msid:{id:c,appdata:a.id},label:a.id,mslabel:c};b("FBRTCMediaType").AUDIO===a.type?f.push(d):b("FBRTCMediaType").VIDEO===a.type&&g.push(d)})});this.mediaDescriptions.forEach(function(a){a.getMediaType()===E?(a.addStreamsForEndpoint(c,f),a.addSsrcGroupsForEndpoint(c,e)):a.getMediaType()===F&&(a.addStreamsForEndpoint(c,g),a.addSsrcGroupsForEndpoint(c,e))})};a.prototype.toDesc=function(){return new i({type:this.type,sdp:this.toSdp()})};a.prototype.toSdp=function(){var a=this.$2;switch(a){case h.MULTIWAY:return[this.sessionDescription.toSdp(),this.mediaDescriptions.map(function(a){return a.toSdp()}).join(D),""].join(D);case h.CUSTOM:case h.P2P:default:return this.$1}};a.prototype.strongDiff=function(a){var b=this.toSdp();a=a.toSdp();return b!==a&&this.$5(b)!==this.$5(a)};a.prototype.$5=function(a){return this.$6(a).split("\r\n").filter(function(a){return!/^a=(candidate|setup):/.test(a)}).join("\r\n")};a.prototype.$6=function(a){return a.replace(/(o=\S+\s\S+)\s\S+\s/,"$1 - ")};e.exports=a}),null);
__d("VFRTCPeerConnection",["Promise","regeneratorRuntime","FBRTCExperimentName","RTCConfig","RTCIceCandidate","RTCPeerConnection","UserAgent","VFRTCConfig","VFRTCConsoleLogger","VFRTCExperiment","VFRTCSdpUtils","VFRTCSessionDescription"],(function(a,b,c,d,e,f){"use strict";__p&&__p();g.isGetSendersSupported=function(){return q("getSenders")};g.isReplaceTrackSupported=function(){return typeof window.RTCRtpSender==="function"&&typeof window.RTCRtpSender.prototype.replaceTrack==="function"};function g(a,b,c){__p&&__p();b===void 0&&(b={}),c===void 0&&(c={}),this.$3=[],this.$4=[],this.$7=new Map(),this.addEventListener=function(a,b){var c=this.$7.get(a);Array.isArray(c)||(c=[],this.$7.set(a,c));c.push(b);this.$5.addEventListener(a,b)},this.removeEventListener=function(a,b){var c=this.$7.get(a);Array.isArray(c)&&(c=c.filter(function(a){return a!==b}),c.length<1?this.$7["delete"](a):this.$7.set(a,c));this.$5.removeEventListener(a,b)},this.$11=function(a){a=a.candidate;a&&this.$4.push(a)}.bind(this),this.$12=function(a){a=a.channel;this.$14(a)}.bind(this),this.$6=a,this.$1=b,this.$2=c,this.$5=this.$10()}g.prototype.$10=function(){__p&&__p();var a=new(b("RTCPeerConnection"))(babelHelpers["extends"]({},this.$1,{sdpSemantics:"plan-b"}),this.$2);a.addEventListener("icecandidate",this.$11);a.addEventListener("datachannel",this.$12);for(var c=this.$7.entries(),d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;var g=f[0];f=f[1];for(var f=f,h=Array.isArray(f),i=0,f=h?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(h){if(i>=f.length)break;j=f[i++]}else{i=f.next();if(i.done)break;j=i.value}j=j;a.addEventListener(g,j)}}return a};g.prototype.removeAllListeners=function(){__p&&__p();for(var a=this.$7.entries(),b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;var e=d[0];d=d[1];for(var d=d,f=Array.isArray(d),g=0,d=f?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=d.length)break;h=d[g++]}else{g=d.next();if(g.done)break;h=g.value}h=h;this.$5.removeEventListener(e,h)}}this.$5.removeEventListener("datachannel",this.$12);this.$5.removeEventListener("icecandidate",this.$11)};g.prototype.reset=function(){__p&&__p();var a=this.getSenders(),c=this.$5;for(var d=this.$7.entries(),e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;var h=g[0];g=g[1];for(var g=g,i=Array.isArray(g),j=0,g=i?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var k;if(i){if(j>=g.length)break;k=g[j++]}else{j=g.next();if(j.done)break;k=j.value}k=k;c.removeEventListener(h,k)}}c.removeEventListener("datachannel",this.$12);c.removeEventListener("icecandidate",this.$11);this.$3=[];this.$4=[];this.$5=this.$10();for(var k=c.getLocalStreams(),j=Array.isArray(k),i=0,k=j?k:k[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(j){if(i>=k.length)break;g=k[i++]}else{i=k.next();if(i.done)break;g=i.value}h=g;this.$13(h,a)&&this.addStream(h)}return b("Promise").race([new(b("Promise"))(function(a){var b=this.$5,d=function d(e){e=e.target;e.iceConnectionState!=="checking"&&e.iceConnectionState!=="new"&&(a(),b.removeEventListener("iceconnectionstatechange",d),p(c))};b.addEventListener("iceconnectionstatechange",d)}.bind(this)),new(b("Promise"))(function(a){return window.setTimeout(a,5e3)})])["catch"](function(a){return b("Promise").resolve()}).then(function(){p(c)})};g.prototype.$13=function(a,c){return!b("VFRTCConfig").isVCEndpointCall()||!b("RTCConfig").CollabWhitelistedBrowserGK?!0:g.isFirefoxSupportAddTrack()?a.getTracks().some(function(a){return c!=null?c.some(function(b){return b.track===a}):!1}):a.active};g.prototype.close=function(){p(this.$5)};g.prototype.getCreatedIceCandidates=function(){return this.$4};g.prototype.$14=function(a){a.addEventListener("close",function(){this.$3=this.$3.filter(function(b){return b!==a})}.bind(this)),this.$3.push(a)};g.prototype.transformRemoteIceCandidateMid=function(a){return this.$9&&this.$9[a]||a};g.prototype.transformLocalIceCandidateMid=function(a){return this.$8&&this.$8[a]||a};g.prototype.transformOfferSdp=function(a){return b("VFRTCSdpUtils").transformSdpMids(a,this.$8)};g.prototype.transformAnswerSdp=function(a){return b("VFRTCSdpUtils").transformSdpMids(a,this.$9)};g.prototype.onReceivedRemoteIceCandidate=function(a){var c=a.sdp,d=a.label;a=a.sdp_mid;a=this.transformRemoteIceCandidateMid(a);d=new(b("RTCIceCandidate"))({sdpMLineIndex:d,candidate:b("VFRTCSdpUtils").fixMobileIceSdp(c),sdpMid:a});return b("Promise").resolve(this.$5.addIceCandidate(d))};g.prototype.getSignalingProtocol=function(){return this.$6};g.prototype.getLocalStreams=function(){return this.$5.getLocalStreams()};g.prototype.getRemoteStreams=function(){return this.$5.getRemoteStreams()};g.isFirefoxSupportAddTrack=function(){return b("UserAgent").isBrowser("Firefox")&&q("addTrack")&&g.isGetSendersSupported()};g.isFirefoxSupporRemoveTrack=function(){return b("UserAgent").isBrowser("Firefox")&&q("removeTrack")&&g.isGetSendersSupported()};g.isTrackAPISupported=function(){return q("removeTrack")&&q("addTrack")&&g.isReplaceTrackSupported()&&g.isGetSendersSupported()};g.prototype.addStream=function(a,b){__p&&__p();var c=this;if(g.isFirefoxSupportAddTrack()){var d=this.getSenders(),e=function(){__p&&__p();if(h){if(i>=f.length)return"break";j=f[i++]}else{i=f.next();if(i.done)return"break";j=i.value}var e=j,g=d.find(function(a){return a.track===e});g===void 0&&(g=c.$5.addTrack(e,a));b&&g&&b(g)};for(var f=a.getTracks(),h=Array.isArray(f),i=0,f=h?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j,k=e();if(k==="break")break}}else this.$5.addStream(a)};g.prototype.removeStream=function(a){__p&&__p();if(g.isFirefoxSupporRemoveTrack()){var b=a.getTracks(),c=this.getSenders().filter(function(a){return b.includes(a.track)});for(var c=c,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;this.$5.removeTrack(f)}}else this.$5.removeStream(a)};g.prototype.removeTrack=function(a){this.$5.removeTrack(a)};g.prototype.addTrack=function(a,b){return this.$5.addTrack(a,b)};g.prototype.createOffer=function(a,c,d){__p&&__p();return b("regeneratorRuntime").async(function(e){__p&&__p();while(1)switch(e.prev=e.next){case 0:a===void 0&&(a={});c===void 0&&(c={});d===void 0&&(d={});return e.abrupt("return",i(this.$5,a).then(function(b){return v(b,d,a)}).then(function(a){var c=b("VFRTCSdpUtils").constructMidMap(a.sdp);this.$8=c.offerSdpMap;this.$9=c.answerSdpMap;return a}.bind(this)).then(function(a){return new(b("VFRTCSessionDescription"))(this.$6,a,c)}.bind(this)));case 4:case"end":return e.stop()}},null,this)};g.prototype.createAnswer=function(a){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:a===void 0&&(a={});return c.abrupt("return",j(this.$5).then(function(c){return new(b("VFRTCSessionDescription"))(this.$6,c,a)}.bind(this)));case 2:case"end":return c.stop()}},null,this)};g.prototype.setLocalDescription=function(a){var c;return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:c=a.toDesc();return b.abrupt("return",n(this.$5,c).then(function(){return a}));case 2:case"end":return b.stop()}},null,this)};g.prototype.setRemoteDescription=function(a){return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:return b.abrupt("return",o(this.$5,a.toDesc()).then(function(){return a}));case 1:case"end":return b.stop()}},null,this)};g.prototype.getLocalDescription=function(){return new(b("VFRTCSessionDescription"))(this.$6,this.$5.localDescription||{})};g.prototype.getRemoteDescription=function(){return new(b("VFRTCSessionDescription"))(this.$6,this.$5.remoteDescription||{})};g.prototype.getSignalingState=function(){return this.$5.signalingState};g.prototype.getIceGatheringState=function(){return this.$5.iceGatheringState};g.prototype.getIceConnectionState=function(){return this.$5.iceConnectionState};g.prototype.getSenders=function(){return g.isGetSendersSupported()===!1?[]:this.$5.getSenders()};g.prototype.getStats=function(a){__p&&__p();return b("regeneratorRuntime").async(function(c){__p&&__p();while(1)switch(c.prev=c.next){case 0:if(!(a!=null)){c.next=2;break}return c.abrupt("return",b("Promise").reject(new Error("getStats() doesn't support selector (yet)")));case 2:if(!b("UserAgent").isBrowser("Edge")){c.next=4;break}return c.abrupt("return",b("Promise").resolve(new Map()));case 4:if(!b("UserAgent").isBrowser("Firefox")){c.next=6;break}return c.abrupt("return",b("Promise").resolve(this.$5.getStats()).then(function(a){return b("UserAgent").isBrowser("Firefox >= 48")?a:s(a)}).then(function(a){__p&&__p();if(b("UserAgent").isBrowser("Firefox >= 53"))return a;try{a.forEach(function(a){a.type=t(a.type)})}catch(b){if(b.name!=="TypeError")throw b;a.forEach(function(b,c){a.set(c,babelHelpers["extends"]({},b,{type:t(b.type)}))})}return a}));case 6:if(!(b("UserAgent").isBrowser("Chrome")||b("UserAgent").isBrowser("Opera"))){c.next=8;break}return c.abrupt("return",new(b("Promise"))(function(a,b){this.$5.getStats(a,b)}.bind(this)).then(function(a){__p&&__p();var b={};for(var a=a.result(),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;var f={id:e.id,timestamp:e.timestamp,type:t(e.type)};for(var g=e.names(),h=Array.isArray(g),i=0,g=h?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(h){if(i>=g.length)break;j=g[i++]}else{i=g.next();if(i.done)break;j=i.value}j=j;f[j]=e.stat(j)}b[f.id]=f}return b}).then(s));case 8:return c.abrupt("return",b("Promise").reject(new Error("getStats() not supported")));case 9:case"end":return c.stop()}},null,this)};g.prototype.createDataChannel=function(a,b){if(this.$5.createDataChannel){a=this.$5.createDataChannel(a,b);this.$14(a);return a}return null};g.prototype.getDataChannelByLabel=function(a){return this.$3.find(function(b){return b.label===a})};g.prototype.getSdpMidMaps=function(){return{offerSdpMap:this.$8,answerSdpMap:this.$9}};var h=b("UserAgent").isBrowser("Chrome < 59")||b("UserAgent").isBrowser("Opera < 46")||b("UserAgent").isBrowser("Firefox < 37");function i(a,c){return h?new(b("Promise"))(function(b,d){return a.createOffer(b,d,l(c))}):b("Promise").resolve(a.createOffer(l(c)))}function j(a){return h?new(b("Promise"))(function(b,c){return a.createAnswer(b,c)}):b("Promise").resolve(a.createAnswer())}var k=b("UserAgent").isBrowser("Chrome < 38")||b("UserAgent").isBrowser("Opera < 26");function l(a){var b=a.offerToReceiveAudio;b=b===void 0?!0:b;var c=a.offerToReceiveVideo;c=c===void 0?!0:c;a=babelHelpers.objectWithoutPropertiesLoose(a,["offerToReceiveAudio","offerToReceiveVideo"]);return k?Object.keys(a).length>0?{mandatory:{OfferToReceiveAudio:b,OfferToReceiveVideo:c},optional:babelHelpers["extends"]({},r(a))}:{mandatory:{OfferToReceiveAudio:b,OfferToReceiveVideo:c}}:babelHelpers["extends"]({offerToReceiveAudio:b,offerToReceiveVideo:c},a)}var m=b("UserAgent").isBrowser("Chrome < 51")||b("UserAgent").isBrowser("Opera < 38")||b("UserAgent").isBrowser("Firefox < 37");function n(a,c){return m?new(b("Promise"))(function(b,d){return a.setLocalDescription(c,b,d)}):b("Promise").resolve(a.setLocalDescription(c))}function o(a,c){return m?new(b("Promise"))(function(b,d){return a.setRemoteDescription(c,b,d)}):b("Promise").resolve(a.setRemoteDescription(c))}function p(a){a&&a.signalingState!=="closed"&&a.close()}function q(a){return typeof b("RTCPeerConnection").prototype[a]==="function"}function r(a){var b={},c=Object.keys(a);for(var d=0;d<c.length;d++){var e=c[d],f=""+e.substr(0,1).toUpperCase()+e.substr(1);b[f]=a[e]}return b}function s(a){return new Map(Object.keys(a).map(function(b){return[b,a[b]]}))}function t(a){switch(a){case"inbound-rtp":return"inboundrtp";case"outbound-rtp":return"outboundrtp";case"candidate-pair":return"candidatepair";case"local-candidate":return"localcandidate";case"remote-candidate":return"remotecandidate";default:return a}}function u(a,c){if(b("VFRTCConfig").isVCEndpointCall())return!1;a=a.video&&a.video.match(/H264/);if(!a&&!c.preserveH264){a=b("VFRTCExperiment").gen(b("FBRTCExperimentName").USE_H264);return a.getParam("allow_h264","no")!=="yes"}return!1}function v(a,c,d){d===void 0&&(d={});var e=c.audio,f=c.video,g=a.sdp;a=a.type;u(c,d)&&(g=b("VFRTCSdpUtils").removeH264(g));e&&(g=b("VFRTCSdpUtils").preferCodec(g,e,!1));f&&(g=b("VFRTCSdpUtils").preferCodec(g,f,!0));return b("Promise").resolve({sdp:g,type:a})}e.exports=g}),null);
__d("VFRTCMWProtocolHandler",["invariant","Promise","regeneratorRuntime","ChannelManager","CurrentUser","FBRTCExperimentName","FBRTCHangupReason","FBRTCRtcResponseStatusCode","FBRTCVideoQuality","MercuryIDs","MessengerChatLinksFunnelLogger","VFRTCMultiwayParticipantFetcher","VFMultiwayRequests","VFRTCAppData","VFRTCCallActions","VFRTCCallStore","VFRTCCallSummary","VFRTCCallSummaryStore","VFRTCClientFeatureGating","VFRTCConstants","VFRTCExperiment","VFRTCgenerateRTCCallID","VFRTCGroupCallActions","VFRTCGroupCallEscalationStore","VFRTCGroupCallStore","VFRTCLogger","VFRTCMultiwayMessageHandler","VFRTCPeerConnection","VFRTCProxyUserStore","VFRTCProxyUserUtils","VFRTCSdpUtils","VFRTCSessionDescription","VFRTCSignalingExperiments","VFRTCStatsHelpers","VFRTCUserMediaConstraints","VFRTCUtils","emptyFunction","gkx","immutable","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("VFRTCConstants").CallEndReason,i=b("VFRTCConstants").GroupVideoViewLayout,j=b("VFRTCConstants").SignalingProtocol,k=b("VFRTCConstants").VideoQuality,l=18e4,m={appId:b("VFRTCAppData").getMWAppID(),deviceId:b("ChannelManager").getCompleteConfig().sessionID,userId:b("CurrentUser").getID()};function n(a){__p&&__p();this.$5=!1;this.$6=!1;this.$7=!1;this.$8=b("VFRTCLogger").getInstance();this.$12=function(a){__p&&__p();a=a.target;a=a.iceConnectionState;b("VFRTCCallActions").emit("onIceConnectionStateChange",a);switch(a){case"connected":a=b("VFRTCCallStore").getState();a=a.callSummary;a&&(a.onNetworkReady(),a.save(b("VFRTCCallSummaryStore").getInstance()));break;case"disconnected":case"failed":this.$3||(this.$3=window.setTimeout(function(){b("VFRTCCallActions").endCall(h.CONNECTION_DROPPED,"ConnectionDropped"),this.$16()}.bind(this),l));break;default:window.clearTimeout(this.$3),this.$3=null}}.bind(this);this.$1=(a=a)!=null?a:b("VFRTCgenerateRTCCallID")();this.$2="MW_PEER_ID"}n.prototype.setKeepLocalStreamsOnClose=function(a){this.$6=a;return this};n.prototype.setAllowIncomingCalls=function(a){this.$7=a;return this};n.prototype.startCall=function(a,c,d,e){__p&&__p();var f=e.addStreamCallback;f=f===void 0?b("emptyFunction"):f;var g=e.callTrigger,h=e.formatParameters;h=h===void 0?{}:h;var i=e.preferredCodecs;i=i===void 0?{}:i;var k=e.offerSdpTransform,l=e.serverInfoData,m=e.shouldSetDescriptions;m=m===void 0?!0:m;var n=e.isEscalatedCall;n=n===void 0?!1:n;var o=e.connectedOnJoin;o=o===void 0?!1:o;e=e.escP2PCallID;e=e===void 0?"":e;b("VFRTCCallActions").initialize({protocol:j.MULTIWAY,conferenceName:d,serverInfoData:l,callID:this.$1.toString(),callTrigger:g});b("MessengerChatLinksFunnelLogger").appendAction("init_mw_call",{funnelTags:["conf_name:"+d,"call_id:"+this.$1]});var p=b("VFRTCCallSummary").restoreOrInitialize(b("VFRTCCallSummaryStore").getInstance(),this.$2,this.$1,!1);g&&p.onCallStarted(g);p.setJoinWithSID(l!=null);p.setActiveConnection("mws");p.setCallType("mws");p.onPopupOpened();p.setConferenceName(d);p.setServerInfoData(l);if(n){var q=b("VFRTCCallStore").getState().callSummary;p.setEscalationP2PCallID(q.callID)}this.$9(p);p.save(b("VFRTCCallSummaryStore").getInstance());b("VFRTCCallActions").setCallSummary(p);q={mandatory:{},optional:[{DtlsSrtpKeyAgreement:!1},{googNumUnsignalledRecvStreams:10},{RtpDataChannels:!0}]};q=new(b("VFRTCPeerConnection"))(j.MULTIWAY,{iceServers:[]},q);if(d.split(":")[0]!=="LIVE"){var r=q.createDataChannel("data");r&&(r.onmessage=function(a){a=a.data;try{a=JSON.parse(a);a=a.body;this.$10(a)}catch(a){this.$8.logError(this.$2,this.$1,a)}}.bind(this))}q.addEventListener("addstream",function(a){this.$11(d,a.stream)}.bind(this));q.addEventListener("removestream",function(a){b("VFRTCCallActions").removeRemoteStream(a.stream)});q.addEventListener("iceconnectionstatechange",this.$12);this.$13(q,c,d,l,a,f,h,i,m,n,o,e,g?g:p.getCallTrigger(),k);!l?b("VFRTCCallActions").call(a,q):b("VFRTCCallActions").join(q);return q};n.prototype.$9=function(a){b("promiseDone")(b("VFRTCStatsHelpers").getBatteryStats(),function(c){a.addExtraInfo(b("VFRTCLogger").Key.BATTERY_START,c.level)})};n.prototype.$11=function(a,c){__p&&__p();c.onaddtrack=function(a){var c=a.target;a=a.track;b("VFRTCCallActions").addRemoteTrack(c,a)};c.onremovetrack=function(a){var c=a.target;a=a.track;b("VFRTCCallActions").removeRemoteTrack(c,a)};var d=c.id.split(":")[0],e=b("MercuryIDs").getParticipantIDFromUserID(d);if(d!==b("CurrentUser").getID()){d=b("VFRTCProxyUserUtils").getUserIDToFetch(d);var f=b("VFRTCProxyUserStore").getState();f=f.proxyingAsToProxyUser;b("promiseDone")(b("VFRTCMultiwayParticipantFetcher").fetchAllParticipants(a,b("immutable").Set([d]),{proxyingAsToProxyUser:f}),function(a){a=a.get(e);this.$14(e,a,c)}.bind(this))}};n.prototype.$14=function(a,c,d){__p&&__p();var e={};e[a]=c;b("VFRTCGroupCallActions").onParticipantsAdded(e);b("VFRTCCallActions").addRemoteStream(d);a=b("VFRTCCallStore").getState();c=a.callInfo;e=b("VFRTCGroupCallStore").getState();d=e.layout;a=e.pinnedSpeakerFBID;e=b("VFRTCCallStore").getConnection(j.MULTIWAY);e&&n.subscription(c.conferenceName,c.serverInfoData,e.getRemoteStreams(),d,a)};n.prototype.$10=function(a){if(a.dominantSpeakerNotification){a=a.dominantSpeakerNotification.userId;b("VFRTCGroupCallActions").setDominantSpeaker(a)}};n.prototype.setDescriptions=function(){this.$5=!0;var a=b("VFRTCCallStore").getConnection(j.MULTIWAY);this.$4&&a&&a.setRemoteDescription(this.$4)};n.escalateLocalStream=function(a){__p&&__p();a===void 0&&(a=!0);return n.initStream(a).then(function(c){__p&&__p();var d=b("VFRTCCallStore").getState(),e=d.callInfo,f=e.conferenceName;e=e.serverInfoData;var g=d.localUser;d=b("VFRTCCallStore").getConnection(j.MULTIWAY);if(!d)return;var h=null;a&&(c.getTracks().forEach(function(a){a.kind==="audio"&&(a.enabled=!g.isAudioMuted())}),h=g.streams.first(),d.removeStream(h));return o(d,[c],f,e,[]).then(function(){h&&b("VFRTCCallActions").removeLocalStream(h),b("VFRTCCallActions").addLocalStream(c)})})};n.prototype.onStreamReady=function(a,c,d,e,f){var g={};e||b("VFRTCCallActions").addLocalStream(a);g.isEscalatedCall=e;f.p2pCallID&&(g.escP2PCallID=f.p2pCallID);f.serverInfoData&&(g.serverInfoData=f.serverInfoData);f.callTrigger&&(g.callTrigger=f.callTrigger);b("VFRTCClientFeatureGating").preferIsacForGroupCalls()&&(g.preferredCodecs={audio:"ISAC/16000"});this.startCall(c,[a],d,g)};n.initStream=function(a,c,d,e,f){d===void 0&&(d=!0);var g=b("VFRTCExperiment").gen(b("FBRTCExperimentName").MW_AUDIO_FALLBACK);g=a&&g.getBool("use_audio_fallback",!1);d={audio:d&&b("VFRTCUserMediaConstraints").audio(e),video:a?babelHelpers["extends"]({},p(b("VFRTCUserMediaConstraints").video(c?c:k.HD_VIDEO,f))):!1};e={optionalConstraintsOnly:!0,supportFilteredStreams:a&&b("VFRTCClientFeatureGating").canUseMWVideoFilters()};c=g?b("VFRTCUtils").getUserMediaWithAudioFallback:b("VFRTCUtils").getUserMedia;return c(d,e)};n.updateLocalStream=function(a){var c=b("VFRTCCallStore").getState();c=c.callInfo;var d=c.conferenceName;c=c.serverInfoData;var e=b("VFRTCCallStore").getConnection(j.MULTIWAY);return!e?b("Promise").resolve():o(e,[a],d,c,[]).then(function(){b("VFRTCCallActions").removeAllLocalStreams(!0),b("VFRTCCallActions").addLocalStream(a)})};n.startScreenStream=function(a){__p&&__p();var c=b("VFRTCCallStore").getState(),d=c.callInfo,e=d.conferenceName;d=d.serverInfoData;var f=c.localUser;c=b("VFRTCCallStore").getConnection(j.MULTIWAY);if(!c)return;for(var g=f.screenStreams,h=Array.isArray(g),i=0,g=h?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var k;if(h){if(i>=g.length)break;k=g[i++]}else{i=g.next();if(i.done)break;k=i.value}k=k;k!==a&&b("VFRTCUtils").transferAudioTracks(a,k)}for(var k=f.streams,i=Array.isArray(k),h=0,k=i?k:k[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(i){if(h>=k.length)break;g=k[h++]}else{h=k.next();if(h.done)break;g=h.value}g=g;b("VFRTCUtils").transferAudioTracks(a,g)}b("promiseDone")(o(c,[a],e,d,[]),function(){__p&&__p();for(var c=f.screenStreams,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(d){if(e>=c.length)break;g=c[e++]}else{e=c.next();if(e.done)break;g=e.value}g=g;g!==a&&(b("VFRTCCallActions").removeLocalScreenStream(g),b("VFRTCUtils").stopMediaStream(g))}b("VFRTCCallActions").addLocalScreenStream(a)})};n.updateScreenStream=function(a,b){n.startScreenStream(b)};n.stopScreenStream=function(a){__p&&__p();var c=b("VFRTCCallStore").getState(),d=c.callInfo,e=d.conferenceName,f=d.serverInfoData;d=c.localUser;var g=b("VFRTCCallStore").getConnection(j.MULTIWAY);if(!g)return;c=d.getStream();c?d=b("Promise").resolve(c):d=n.initStream(!0,void 0,!1).then(function(a){b("VFRTCCallActions").addLocalStream(a);return a});b("promiseDone")(d,function(c){b("VFRTCUtils").transferAudioTracks(c,a),b("promiseDone")(o(g,[c],e,f,[]),function(){b("VFRTCUtils").stopMediaStream(a),b("VFRTCCallActions").removeLocalScreenStream(a)})})};n.endCall=function(a,c,d,e){e===void 0&&(e=""),b("promiseDone")(n.genEndCall(a,d,{serverInfoData:c,detailedReasonString:e,keepLocalStream:!1}))};n.genEndCall=function(a,c,d){b("VFRTCMultiwayMessageHandler").close();d.keepLocalStream||b("VFRTCCallActions").removeAllLocalStreams(!0);var e=d.detailedReasonString||"Hangup by user";b("VFRTCCallActions").hangup(b("VFRTCUtils").endCallReasonFromHangupReason(c),e);var f=b("VFRTCCallStore").getState().callInfo.callID;return b("VFMultiwayRequests").sendHangupRequest(m,a,d.serverInfoData,c,e,f).then(function(){b("VFRTCCallActions").hangupSuccess(f)})["catch"](function(a){b("VFRTCCallActions").hangupError(f);throw a})};n.otherUserInAnotherCall=function(a,c,d,e,f){f===void 0&&(f=""),b("promiseDone")(b("VFMultiwayRequests").sendHangupRequest(m,a,c,d,f||"User receiving this call is in another call",e))};n.prototype.iceRestart=function(a,c){var d=b("VFRTCCallStore").getConnection(j.MULTIWAY);d&&o(d,[],a,c,[],{iceRestart:!0})};n.addParticipants=function(a,c,d){return b("VFMultiwayRequests").sendAddParticipantsRequest(m,a,c,d,b("VFRTCCallStore").getState().callInfo.callID)};n.removeParticipants=function(a,c,d){return b("VFMultiwayRequests").sendRemoveParticipantsRequest(m,a,c,d,b("VFRTCCallStore").getState().callInfo.callID)};n.subscription=function(a,c,d,e,f){var g=e===i.DOMINANT_SPEAKER?b("FBRTCVideoQuality").LOW:e===i.GRID?b("FBRTCVideoQuality").MEDIUM:b("FBRTCVideoQuality").HIGH;d=d.map(function(a){a=a.id;return{cname:a,options:{videoQuality:e===i.DOMINANT_SPEAKER&&f===a.split(":")[0]?b("FBRTCVideoQuality").HIGH:g}}});e===i.DOMINANT_SPEAKER&&!f&&d.push({cname:""});b("VFMultiwayRequests").sendSubscriptionRequest(m,a,c,d,b("VFRTCCallStore").getState().callInfo.callID)};n.clientMediaUpdate=function(a,c,d,e,f){b("VFMultiwayRequests").sendClientMediaUpdateRequest(m,a,c,d,e,f,b("VFRTCCallStore").getState().callInfo.callID).then(function(a){var c=a.header.responseStatusCode;a=a.body.clientMediaUpdateResponse.currentVersion;return b("VFRTCGroupCallActions").onClientMediaUpdateResponse(c,a)})["catch"](function(a){b("VFRTCLogger").getInstance().logError(null,b("VFRTCCallStore").getState().callInfo.callID,a)})};n.prototype.$13=function(a,c,d,e,f,g,h,i,j,k,l,m,n,p){this.$15(d,e),b("promiseDone")(o(a,c,d,e,f,{},g,h,i,j,k,m,n,p),function(a){this.$4=a,this.$5&&this.setDescriptions(),b("VFRTCCallActions").callSuccess(l)}.bind(this),function(a){b("VFRTCCallActions").callError(a),this.$16()}.bind(this))};n.prototype.$16=function(){var a=b("VFRTCCallStore").getConnection(j.MULTIWAY);b("VFRTCMultiwayMessageHandler").close();a&&a.close();this.$6||b("VFRTCCallActions").removeAllLocalStreams(!0)};n.prototype.$15=function(a,c){b("VFRTCMultiwayMessageHandler").initHandler(a,c,this.$7,this.$6)};function o(a,c,d,e,f,g,h,i,k,l,n,o,p,q){__p&&__p();var r,s,t,u,v,w,x,y,z,A,B;return b("regeneratorRuntime").async(function(C){__p&&__p();while(1)switch(C.prev=C.next){case 0:g===void 0&&(g={}),h===void 0&&(h=b("emptyFunction")),i===void 0&&(i={}),k===void 0&&(k={}),l===void 0&&(l=!0),n===void 0&&(n=!1),o===void 0&&(o=""),p===void 0&&(p=""),q===void 0&&(q=[]),r={},s=[],(t=a.getLocalStreams()||[],u=Array.isArray(t),v=0,t=u?t:t[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]());case 12:if(!u){C.next=18;break}if(!(v>=t.length)){C.next=15;break}return C.abrupt("break",26);case 15:w=t[v++];C.next=22;break;case 18:v=t.next();if(!v.done){C.next=21;break}return C.abrupt("break",26);case 21:w=v.value;case 22:x=w,a.removeStream(x);case 24:C.next=12;break;case 26:c.forEach(function(b){s=s.concat(b.getTracks()),a.addStream(b,h)});s.forEach(function(a){r[a.id]=a.enabled});C.next=30;return b("regeneratorRuntime").awrap(a.createOffer(babelHelpers["extends"]({preserveH264:b("VFRTCUtils").isWatchPartyCall(d)||b("VFRTCUtils").isBonfireCall(d)},g),{DISABLE_OPUS_STEREO:b("VFRTCClientFeatureGating").disableOpusStereo(),FORMAT_PARAMETERS:i,OFFER_SDP_TRANSFORM:q},k));case 30:y=C.sent;if(b("VFRTCSdpUtils").validateOfferSdp(d,y.toSdp())){C.next=33;break}throw b("FBRTCRtcResponseStatusCode").BAD_REQUEST;case 33:C.next=35;return b("regeneratorRuntime").awrap(a.setLocalDescription(y));case 35:b("VFRTCGroupCallActions").onJoinRequestSent();C.next=38;return b("regeneratorRuntime").awrap(b("VFMultiwayRequests").sendJoinRequest(m,d,e,y,f.length>0?f:null,s.length>0?r:null,{callID:b("VFRTCCallStore").getState().callInfo.callID,callTrigger:p,numParticipants:b("VFRTCCallStore").getState().remoteUsers.size},{userToEscalate:n&&f.length>0?f[0]:null,isEscalator:b("VFRTCGroupCallEscalationStore").getState().toRing,escP2PCallID:o}));case 38:z=C.sent;b("VFRTCGroupCallActions").onReceivedJoinResponse();A=z.header.responseStatusCode;if(!(A!==b("FBRTCRtcResponseStatusCode").OK)){C.next=43;break}return C.abrupt("return",new(b("Promise"))(function(a,b){b(A)}));case 43:b("VFRTCGroupCallActions").onJoinResponse(z.header.serverInfoData);b("VFRTCProxyUserUtils").setProxyingAsUsersFromMessage(z.body.joinResponse);B=new(b("VFRTCSessionDescription"))(j.MULTIWAY,{type:"answer",sdp:z.body.joinResponse.answer.sdpString},{FORMAT_PARAMETERS:i});if(!l){C.next=49;break}C.next=49;return b("regeneratorRuntime").awrap(a.setRemoteDescription(B));case 49:b("VFRTCGroupCallActions").toggleRemoteStream(z.body.joinResponse.mediaStatus);b("VFRTCGroupCallActions").onProcessedJoinResponse();return C.abrupt("return",B);case 52:case"end":return C.stop()}},null,this)}function p(a){a instanceof Object||g(0,444);return a}e.exports=n}),null);
__d("VFRTCCallNUXActions",["RTCCallNUXActionTypes","VFFBRTCUtils","VFRTCAppDispatcher","VFRTCLogger","XRTCCallNUXController","dangerouslyBypassDispatchError"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={refreshNUXState:function(){b("VFFBRTCUtils").sendServerRequest(b("XRTCCallNUXController").getURIBuilder().getURI(),function(a){a=a.payload;b("VFRTCAppDispatcher").dispatch({type:b("RTCCallNUXActionTypes").INIT_NUX_STATE,payload:a})},function(){})},markNUXViewed:function(a){try{b("VFRTCAppDispatcher").dispatch({type:b("RTCCallNUXActionTypes").MARK_NUX_VIEWED,nuxID:a})}catch(c){b("dangerouslyBypassDispatchError")(function(){return b("VFRTCAppDispatcher").dispatch({type:b("RTCCallNUXActionTypes").MARK_NUX_VIEWED,nuxID:a})})}},dismissNUX:function(a){b("VFRTCAppDispatcher").dispatch({type:b("RTCCallNUXActionTypes").DISMISS_NUX,nuxID:a})}};e.exports=a}),null);
__d("VFRTCCallType",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({AUDIO_ONLY:"AUDIO_ONLY",VIDEO_ONLY:"VIDEO_ONLY",AUDIO_VIDEO:"AUDIO_VIDEO",NO_AUDIO_VIDEO:"NO_AUDIO_VIDEO"});e.exports=a}),null);
__d("VFRTCIceCache",[],(function(a,b,c,d,e,f){__p&&__p();function a(){"use strict";this.$1=new Map()}a.prototype.getCache=function(){"use strict";__p&&__p();var a={};for(var b=this.$1,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;var f=e[0];e=e[1];a[f]={};for(var e=e,g=Array.isArray(e),h=0,e=g?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=e.length)break;i=e[h++]}else{h=e.next();if(h.done)break;i=h.value}i=i;var j=i[0];i=i[1];a[f][j]=i}}return a};a.prototype.reset=function(a,b){"use strict";var c=this.$1.get(a);c||(c=new Map(),this.$1.set(a,c));c.set(b,[])};a.prototype.cacheCandidate=function(a,b,c){"use strict";var d=this.$1.get(a);d||(d=new Map(),this.$1.set(a,d));a=d.get(b);a||(a=[],d.set(b,a));a.unshift(c)};a.prototype.drainCandidates=function(a,b,c){"use strict";a=this.$1.get(a);if(a){a=a.get(b)||[];while(a.length>0){b=a.pop();c(b)}}};e.exports=a}),null);
__d("VFRTCLocalMessageQueue",["CacheStorage","VFRTCConstants","VFRTCExperiments"],(function(a,b,c,d,e,f){__p&&__p();var g="localstorage",h="RTC_",i="offer",j="offer_msg",k="data_",l=30*1e3,m=new Map(),n={STORAGE_TYPE:g,PREFIX:h,OFFER_KEY:i,OFFER_SUFFIX:j,DATA_KEY_PREFIX:k,CACHE_LIFE:l,clearQueue:function(a){m.set(a,new Map())},writePeerOfferToStorage:function(a,b){a=n.getStorage(a,j);n._storeData(a,i,b)},getPeerOfferFromStorage:function(a){a=n.getStorage(a,j);return n._getData(a,i)},clearPeerOfferFromStorage:function(a){a=n.getStorage(a,j);a.remove(i)},pluckOffer:function(a){if(b("VFRTCExperiments").passOfferWithWindowMessages()){var c=m.get(a)||new Map(),d=c.get(i);c["delete"](i);return d||null}else{c=n.getPeerOfferFromStorage(a);n.clearPeerOfferFromStorage(a);return c||null}},enqueueMessage:function(a,c,d){c=k+c.toString();var e=m.get(a)||new Map();d.msg_type===b("VFRTCConstants").PayloadType.OFFER&&(c=i);e.set(c,d);m.set(a,e)},drainQueue:function(a,b){__p&&__p();var c=m.get(a)||new Map();for(var c=c,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;f[0];f=f[1];b(f)}m.set(a,new Map())},_storeData:function(a,b,c){c={__t:Date.now(),__d:c};a.set(b,c)},_getData:function(a,b){var c=a.get(b);if(c&&n._isValid(c))return c.__d;else c&&a.remove(b);return null},_getAndRemoveData:function(a,b){var c=n._getData(a,b);if(c!==null){a.remove(b);return c}return null},_isValid:function(a){return Date.now()-a.__t<l},getStorage:function(a,c){return new(b("CacheStorage"))(g,""+h+a+"_"+c+"_")}};e.exports=n}),null);
__d("VFRTCMessage",["FBRTCExperimentName","VFRTCConstants","VFRTCExperiment","VFRTCSdpUtils","VFRTCSupport"],(function(a,b,c,d,e,f){__p&&__p();var g="mobile";function a(a){"use strict";__p&&__p();if(!this.$1(a))throw new Error("invalid webrtc message");this.originalMessageData=a;this.peerID=a.from;this.callID=parseInt(a.call_id,10);this.msg=JSON.parse(a.payload);this.msg.json_payload&&(this.escalationName=this.msg.sessionName,this.msg=this.msg.json_payload);this.msgType=this.msg.type;this.msgID=this.msg.msg_id;this.ackID=this.msg.ack_id;this.source=a.source;this.peerSupportsVideoInterop=!!this.msg.supports_video_interop;this.$2();this.$3();this.$4()}a.prototype.$1=function(a){"use strict";return a.from&&a.call_id&&a.payload};a.prototype.$2=function(){"use strict";if(this.peerSupportsVideoInterop)return;this.isFromMobile()&&this.disableVideo()};a.prototype.disableVideo=function(){"use strict";this.msg.sdp&&(this.msg.sdp=b("VFRTCSdpUtils").disableVideo(this.msg.sdp)),(this.msgType===b("VFRTCConstants").PayloadType.SET_VIDEO||this.msgType===b("VFRTCConstants").PayloadType.OFFER||this.msgType===b("VFRTCConstants").PayloadType.ICERESTART_OFFER||this.msgType===b("VFRTCConstants").PayloadType.ANSWER||this.msgType===b("VFRTCConstants").PayloadType.ICERESTART_ANSWER)&&(this.msg.videoon=!1)};a.prototype.$3=function(){"use strict";this.isFromMobile()&&this.msg.sdp&&this.msgType!==b("VFRTCConstants").PayloadType.ICE_CANDIDATE&&(this.msg.sdp=b("VFRTCSdpUtils").removeRED(this.msg.sdp))};a.prototype.$4=function(){"use strict";if(this.isFromMobile()&&b("VFRTCSupport").isWebrtcSupported()&&this.msg.sdp&&this.msgType!==b("VFRTCConstants").PayloadType.ICE_CANDIDATE){var a=b("VFRTCExperiment").gen(b("FBRTCExperimentName").USE_VP9);a.getBool("allow_vp9",!1)||(this.msg.sdp=b("VFRTCSdpUtils").removeVP9(this.msg.sdp))}};a.prototype.isOffer=function(){"use strict";return this.msgType===b("VFRTCConstants").PayloadType.OFFER};a.prototype.isFromMobile=function(){"use strict";return this.source===g};a.prototype.isRemoteVideoSupported=function(){"use strict";return!this.msg.sdp||this.msgType===b("VFRTCConstants").PayloadType.ICE_CANDIDATE?!0:b("VFRTCSdpUtils").isVideoSupported(this.msg.sdp)};a.prototype.isRetry=function(){"use strict";return!!this.msg.flag};a.prototype.isForCall=function(a,c){"use strict";return this.escalationName&&(this.msgType===b("VFRTCConstants").PayloadType.HANGUP||this.msgType===b("VFRTCConstants").PayloadType.SWITCH_TO_MULTIWAY)?c===this.escalationName:!a||a===this.callID||this.msgType===b("VFRTCConstants").PayloadType.OFFER||this.msgType===b("VFRTCConstants").PayloadType.ICERESTART_OFFER||this.msgType===b("VFRTCConstants").PayloadType.PCRESTART_OFFER||this.msgType===b("VFRTCConstants").PayloadType.ICE_CANDIDATE};a.prototype.getSignalingExperiments=function(){"use strict";if(this.isFromMobile()){if(!this.msg.experiments)return["sdp_update"];this.msg.experiments.includes("sdp_update")||this.msg.experiments.push("sdp_update")}return this.msg.experiments};e.exports=a}),null);
__d("VFRTCMessageDedup",[],(function(a,b,c,d,e,f){var g={};a={check:function(a,b,c){g[a]||(g[a]={});g[a][b]||(g[a][b]={});if(g[a][b][c])return!1;g[a][b][c]=!0;return!0}};e.exports=a}),null);
__d("VFRTCMessageListener",["invariant","Arbiter","Bootloader","ChannelConstants","VFRTCConstants","VFRTCExperiments","VFRTCLocalMessageQueue","VFRTCSupport","guid","mixInEventEmitter"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("VFRTCConstants").ChildWindowMessageType,i=45*1e3,j=[],k=null,l=null,m,n=null,o=null,p=!1,q=!1,r=null,s=null,t=null,u=null,v=2e3,w=null,x=null,y=null;a={logCheckpoint:function(a){b("Bootloader").loadModules(["VFWebLogger"],function(b){b.logRTCCheckpoint({checkpoint:a})},"VFRTCMessageListener")},logDelayed:function(a,b){a="MQTT_"+(a?"YES":"NO")+"_CP_"+(b?"YES":"NO");this.logCheckpoint(a)},clearMQTTLogState:function(){w=null,x=null,y=null},logMessageReceived:function(a,b){if(a&&w||!a&&x)return;else a?w=b:x=b;x&&w&&y?(window.clearTimeout(y),y=null):y||(y=window.setTimeout(function(){this.logDelayed(w,x)}.bind(this),v))},init:function(a,c){__p&&__p();if(p)return;p=!0;q=a;r=c;b("Bootloader").loadModules(["FBMqttChannel"],function(a){a.subscribe("/webrtc",function(a){this.logMessageReceived(!0,a);a=JSON.parse(a);this._onMessage(a)}.bind(this))}.bind(this),"VFRTCMessageListener");b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("webrtc"),function(a,b){this.logMessageReceived(!1,JSON.stringify(b.obj)),this._onMessage(b.obj)}.bind(this));b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("webrtc_offer"),function(a,b){this._onMessage(b.obj)}.bind(this));b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("webrtc_offerack"),function(a,b){this._onMessage(b.obj)}.bind(this));b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("rtc_multi_json"),function(a,b){this._onMultiwayMessage(b.obj)}.bind(this));b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("onevc"),function(a,b){this._onOneVCMessage(b.obj)}.bind(this));if(b("VFRTCSupport").isWebrtcSupported()&&window.addEventListener){var d=a?this._handleWindowMessageToChild.bind(this):this._handleWindowMessageToParent.bind(this);window.addEventListener("message",d,!1)}a&&c&&this._connectToParentWindow(c)},setParentWindowNonce:function(a){n=a},generateNewNonce:function(){o=b("guid")();return o},setMultiwayMessageHandler:function(a){s&&g(0,1011),s=a},_emit:function(a,b){this.emit(a,b)},_onMultiwayMessage:function(a){this._emit("multiwayMessageReceived",a),s&&s(a)},setOneVCMessegeHandler:function(a){t==null&&(t=a)},_onOneVCMessage:function(a){t!=null&&t(a)},setMessageHandler:function(a){k&&g(0,1013);k=a;while(j.length)k(j.shift())},removeMessageHandler:function(){k=null},removeOneVCMessageHandler:function(){t=null},setParentWindowStartCallHandler:function(a){u=a},_onMessage:function(a){a.from&&(a.from=a.from.toString()),this._emit("messageReceived",a),k?k(a):j.push(a),q||this._passOrQueueToChildWindow(a)},_connectToParentWindow:function(a){if(window.opener&&window.opener.postMessage){a={type:h.CHILD_WINDOW_READY,nonce:n,childNonce:this.generateNewNonce(),peerID:a};window.opener.postMessage(a,window.location.origin)}},_verifyWindowMessage:function(a){return Boolean(a.origin===window.location.origin&&a.data&&o!==null&&a.data.nonce===o)},_handleWindowMessageToParent:function(a){__p&&__p();if(!this._verifyWindowMessage(a))return;if(a.data.type===h.CHILD_WINDOW_READY){var b=a.data,c=b.childNonce;b=b.peerID;this.setParentWindowNonce(c);this._setChildWindow(a.source);this._startCallInChildWindow(b);this.generateNewNonce();this._replayQueuedMessagesToChild(b,l)}},_handleWindowMessageToChild:function(a){if(!this._verifyWindowMessage(a))return;a.data.type===h.CHILD_WINDOW_MESSAGE&&this._onMessage(a.data.message);if(a.data.type===h.CHILD_WINDOW_START_CALL&&u){a=a.data.offer;!a&&r&&(a=b("VFRTCLocalMessageQueue").getPeerOfferFromStorage(r),a&&b("VFRTCExperiments").passOfferWithWindowMessages()&&this.logCheckpoint("got_offer_from_storage_while_in_experiment"));u(a)}},_replayQueuedMessagesToChild:function(a,c){b("VFRTCLocalMessageQueue").drainQueue(a,function(a){this._postToChildWindowMessage(c,a)}.bind(this))},_setChildWindow:function(a){l=a,window.clearTimeout(m),m=window.setTimeout(function(){l=null},i)},_postToChildWindowMessage:function(a,b){b={type:h.CHILD_WINDOW_MESSAGE,nonce:n,message:b};a.postMessage(b,window.location.origin)},_passOrQueueToChildWindow:function(a){l&&this._postToChildWindowMessage(l,a),b("VFRTCExperiments").enableCallCollisionFix()&&b("VFRTCLocalMessageQueue").enqueueMessage(a.from,a.id,a)},_startCallInChildWindow:function(a){if(l){a={type:h.CHILD_WINDOW_START_CALL,nonce:n,offer:b("VFRTCExperiments").passOfferWithWindowMessages()?b("VFRTCLocalMessageQueue").pluckOffer(a):null};l.postMessage(a,window.location.origin)}}};b("mixInEventEmitter")(a,{messageReceived:!0,multiwayMessageReceived:!0});e.exports=a}),null);
__d("VFRTCOneVCStoreState",["immutable"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("immutable").Record({meetingID:null,meetingPassword:null,participants:[]}));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("VFRTCOneVCStore",["invariant","FluxReduceStore","RTCOneVCActionTypes","VFRTCAppDispatcher","VFRTCConfig","VFRTCOneVCStoreState"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("FluxReduceStore"));h=c&&c.prototype;function a(){h.constructor.call(this,b("VFRTCAppDispatcher"))}a.prototype.getInitialState=function(){return new(b("VFRTCOneVCStoreState"))()};a.prototype.reduce=function(a,c){switch(c.type){case b("RTCOneVCActionTypes").SET_MEETING_ID:return a.set("meetingID",c.meetingID);case b("RTCOneVCActionTypes").SET_MEETING_PASSWORD:return a.set("meetingPassword",c.meetingPassword);case b("RTCOneVCActionTypes").STORE_PARTICIPANTS:c=i(c.participants);return a.set("participants",c);default:return a}};a.prototype.getParticipantsSummary=function(){var a=this.getState().participants;return a.length===0?{audioParticipants:0,videoParticipants:0}:a.reduce(function(a,b){b=b.video_mute.some(function(a){return a!==!1});return b?{audioParticipants:a.audioParticipants+1,videoParticipants:a.videoParticipants}:{audioParticipants:a.audioParticipants,videoParticipants:a.videoParticipants+1}},{audioParticipants:0,videoParticipants:0})};a.prototype.getParticipants=function(){return this.getState().participants};a.__moduleID=e.id;function i(a){var c=b("VFRTCConfig").getMeetingID();c!=null||g(0,11961);var d="Facebook (Meeting ID: "+c+")";return a.filter(function(a){return!a.peer_name.includes(d)})}e.exports=new a()}),null);
__d("VFRTCgenerateRTCSignalingMessageID",["randomInt"],(function(a,b,c,d,e,f){"use strict";function a(){return b("randomInt")(0,4294967294)+1}e.exports=a}),null);
__d("VFRTCMessageSender",["errorCode","CurrentUser","Fbtrace","PresenceProperties","SiteData","VFFBRTCUtils","VFRTCAppData","VFRTCConfig","VFRTCConstants","VFRTCgenerateRTCSignalingMessageID","VFRTCLocalUploadLogLevel","VFRTCLogger","VFRTCOneVCStore","VFRTCSignalingExperiments","VFRTCSupport","XCollabCallSendMessageController","XVideoCallSendMessageController"],(function(a,b,c,d,e,f,g){__p&&__p();var h=0;function a(){"use strict";this.onSendFailure=null,this.$1=b("VFRTCLogger").getInstance()}a.prototype.sendOffer=function(a,c,d,e,f,g){"use strict";return this.$2(b("VFRTCConstants").PayloadType.OFFER,a,c,d,e,f,null,g)};a.prototype.sendAnswer=function(a,c,d,e,f,g){"use strict";return this.$2(b("VFRTCConstants").PayloadType.ANSWER,a,c,d,e,f,g)};a.prototype.sendPCRestartOffer=function(a,c,d,e,f){"use strict";return this.$2(b("VFRTCConstants").PayloadType.PCRESTART_OFFER,a,c,d,e,f)};a.prototype.sendSdpUpdate=function(a,c,d,e,f){"use strict";return this.$2(b("VFRTCConstants").PayloadType.SDP_UPDATE,a,c,d,e,f)};a.prototype.resendSdpMessage=function(a,b){"use strict";b.flag=1,this.$3(a,b)};a.prototype.resendPayload=function(a,b){"use strict";b.flag=1,this.$4(a,b)};a.prototype.$2=function(a,c,d,e,f,g,h,i){"use strict";__p&&__p();d=this.$5(d,a);d.sdp=e;a===b("VFRTCConstants").PayloadType.OFFER&&(d.browser_supports_escalation=b("VFRTCSupport").isGroupCallWebtrcSupported(),d.handlescollision=!0,d.pranswer=!1,i&&(d.call_trigger=i));a===b("VFRTCConstants").PayloadType.ANSWER&&h&&(d.escalation_conference_name=h.escalationConferenceName,d.negotiated_escalation_support=h.negotiatedEscalationSupport);(a===b("VFRTCConstants").PayloadType.OFFER||a===b("VFRTCConstants").PayloadType.ANSWER||a===b("VFRTCConstants").PayloadType.PCRESTART_OFFER)&&(d.icerestart=!1,d.experiments=b("VFRTCSignalingExperiments").getLocal());d.videoon=f;d.attributes=g;d.ull=b("VFRTCConstants").convertFromUploadLogLevel(b("VFRTCLocalUploadLogLevel").getLocalUploadLogLevel());this.$3(c,d);return d};a.prototype.sendIceCandidate=function(a,c,d){"use strict";c=this.$5(c,b("VFRTCConstants").PayloadType.ICE_CANDIDATE);c.sdp_mid=d.sdpMid;c.label=d.sdpMLineIndex;c.sdp=d.candidate;this.$4(a,c)};a.prototype.sendHangup=function(a,c,d,e,f){"use strict";c=this.$5(c,b("VFRTCConstants").PayloadType.HANGUP);c.reason=b("VFRTCConstants").callEndReasonString(d);c.subreason=f||"";this.$4(a,c,e,!0)};a.prototype.sendOtherDismiss=function(a){"use strict";a=this.$5(a,b("VFRTCConstants").PayloadType.OTHER_DISMISS);this.$4(b("CurrentUser").getID(),a)};a.prototype.sendOfferAck=function(a,c,d,e){e===void 0&&(e=new Map()),this.$6(a,c,d,b("VFRTCConstants").PayloadType.OFFER_ACK,e)};a.prototype.sendOfferNack=function(a,c,d){"use strict";this.$6(a,c,d,b("VFRTCConstants").PayloadType.OFFER_NACK,new Map([["error_code",1356043]]))};a.prototype.sendAnswerAck=function(a,c,d){"use strict";this.$6(a,c,d,b("VFRTCConstants").PayloadType.ANSWER_ACK)};a.prototype.sendAck=function(a,c,d){"use strict";this.$6(a,c,d,b("VFRTCConstants").PayloadType.ACK,new Map([["ack_type",d.type]]))};a.prototype.sendMuteStateUpdate=function(a,c,d){"use strict";c=this.$5(c,b("VFRTCConstants").PayloadType.SET_VIDEO);c.videoon=d;this.$4(a,c)};a.prototype.sendVideoEscalationRequest=function(a,b,c){"use strict";return this.sendVideoRequestResponse(a,b,0,c)};a.prototype.sendVideoRequestResponse=function(a,c,d,e){"use strict";c=this.$5(c,b("VFRTCConstants").PayloadType.VIDEO_REQUEST);c.ack_id=d;c.videoon=e;c.capability=b("PresenceProperties").getProperties();this.$4(a,c);return c};a.prototype.sendMsgAck=function(){"use strict"};a.prototype.sendOk=function(){"use strict"};a.prototype.sendPranswer=function(){"use strict"};a.prototype.sendIcerestartAnswer=function(){"use strict"};a.prototype.$5=function(a,c){"use strict";var d=b("VFRTCgenerateRTCSignalingMessageID")();a={version:h,type:c,call_id:a,msg_id:d};this.$7(c)&&(a.supports_video_interop=!0);return a};a.prototype.$7=function(a){"use strict";return a===b("VFRTCConstants").PayloadType.OFFER||a===b("VFRTCConstants").PayloadType.ANSWER||a===b("VFRTCConstants").PayloadType.PRANSWER||a===b("VFRTCConstants").PayloadType.ICERESTART_OFFER||a===b("VFRTCConstants").PayloadType.ICERESTART_ANSWER||a===b("VFRTCConstants").PayloadType.PCRESTART_OFFER||a===b("VFRTCConstants").PayloadType.PCRESTART_ANSWER||a===b("VFRTCConstants").PayloadType.SDP_UPDATE||a===b("VFRTCConstants").PayloadType.SET_VIDEO||a===b("VFRTCConstants").PayloadType.VIDEO_REQUEST};a.prototype.$3=function(a,b){"use strict";this.$4(a,b,!1,!0,!0)};a.prototype.$6=function(a,c,d,e){"use strict";var f=(arguments.length<=4?void 0:arguments[4])||new Map(),g=this.$5(c,e);g.ack_id=d.msg_id;d.flag===1&&(g.flag=1);g.ull=b("VFRTCConstants").convertFromUploadLogLevel(b("VFRTCLocalUploadLogLevel").getLocalUploadLogLevel());f.forEach(function(a,b,c){g[b]=a});this.$4(a,g)};a.prototype.$4=function(a,c,d,e,f){"use strict";__p&&__p();var g=c.msg_id,h={peer_id:a,call_id:c.call_id,msg_id:g,msg_type:c.type},i={call_id:c.call_id,msg_id:g,user_id:b("CurrentUser").getID(),recipient_id:a,msg_type:c.type,app_id:b("VFRTCAppData").getAppID(),app_version:String(b("SiteData").client_revision||"dev"),op:"sendServerRequest:"+c.type,policy:"WebRTC"};i=b("Fbtrace").requestReceive("browser",String(b("SiteData").client_revision||"dev"),i);var j=b("VFFBRTCUtils").isPeerVCEndpoint(a);if(j){var k=b("VFRTCOneVCStore").getState(),l=k.meetingID;k=k.meetingPassword;l!=null&&(c.meeting_id=l);k!=null&&(c.meeting_pass=k)}var m=(j?b("XCollabCallSendMessageController"):b("XVideoCallSendMessageController")).getURIBuilder().setInt("recipient_id",a).setInt("msg_id",g).setString("message_info",JSON.stringify(c)).setInt("webrtc_fbtrace",i.isOn()?1:0).getURI();l=null;e&&(l=this.$4.bind(this,a,c,d,!1,f));var n=this.$8.bind(this,h),o=this.$9.bind(this,h,l,f);b("Fbtrace").withDefaultNode(i,function(){b("VFFBRTCUtils").sendServerRequest(m,n,o,d)});this.onMessageSent&&this.onMessageSent(a,c);this.$1.logSentMessage(a,c.call_id,c)};a.prototype.$8=function(a){"use strict";this.$1.logSentMessageSuccess(a.peer_id,a.call_id,a.msg_type,a.msg_id)};a.prototype.$9=function(a,c,d,e){"use strict";__p&&__p();var f="UNKNOWN_ERROR";e&&(f=e.getError?e.getError():e);this.$1.logSentMessageFailure(a.peer_id,a.call_id,a.msg_type,a.msg_id,f);e=null;f===1356001||f===1356049?e=b("VFRTCConstants").CallEndReason.NO_PERMISSION:f===1356046||f===1356045?e=b("VFRTCConstants").CallEndReason.CALLER_NOT_VISIBLE:(f===1356003||f===1356002||f===1356044)&&(e=b("VFRTCConstants").CallEndReason.OTHER_NOT_CAPABLE);if(!e&&c){c();return}d&&this.onSendFailure&&(e||(e=b("VFRTCConstants").CallEndReason.SIGNALING_MESSAGE_FAILED),this.onSendFailure(e,f,a.msg_type))};e.exports=a}),null);
__d("VFRTCOneVCActions",["RTCOneVCActionTypes","VFRTCAppDispatcher"],(function(a,b,c,d,e,f){"use strict";a={storeParticipants:function(a){b("VFRTCAppDispatcher").dispatch({type:b("RTCOneVCActionTypes").STORE_PARTICIPANTS,participants:a})},setMeetingID:function(a){b("VFRTCAppDispatcher").dispatch({type:b("RTCOneVCActionTypes").SET_MEETING_ID,meetingID:a})},setMeetingPassword:function(a){b("VFRTCAppDispatcher").dispatch({type:b("RTCOneVCActionTypes").SET_MEETING_PASSWORD,meetingPassword:a})}};e.exports=a}),null);
__d("VFRTCP2PCallEscalationActions",["RTCP2PCallEscalationActionTypes","VFRTCAppDispatcher","VFRTCCallActionTypes"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={start:function(){b("VFRTCAppDispatcher").dispatch({type:b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_START})},setRequest:function(a){b("VFRTCAppDispatcher").dispatch({type:b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_SET_REQUEST,request:a})},cancel:function(){b("VFRTCAppDispatcher").dispatch({type:b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_FAILURE,reason:"cancelled"})},timeout:function(){b("VFRTCAppDispatcher").dispatch({type:b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_FAILURE,reason:"timeout"})},handleACK:function(a){b("VFRTCAppDispatcher").dispatch({type:b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_ACK,token:a})},approve:function(){b("VFRTCAppDispatcher").dispatch({type:b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_SUCCESS})},decline:function(a){b("VFRTCAppDispatcher").dispatch({type:b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_FAILURE,reason:"denied",token:a,response:!1})},setResponse:function(a){b("VFRTCAppDispatcher").dispatch({type:b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_SET_RESPONSE,response:a})},parseResponse:function(a,c){a?b("VFRTCAppDispatcher").dispatch({type:b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_SUCCESS,token:c}):b("VFRTCAppDispatcher").dispatch({type:b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_FAILURE,reason:"denied",token:c,response:!1})},muteRemoteVideo:function(){b("VFRTCAppDispatcher").dispatch({type:b("VFRTCCallActionTypes").REMOTE_VIDEO_MUTED})},setEscalateToMediaStream:function(a){b("VFRTCAppDispatcher").dispatch({type:b("RTCP2PCallEscalationActionTypes").SET_P2P_CALL_ESCALATION_MEDIA,stream:a})}};e.exports=a}),null);
__d("VFRTCPCConfig",["VFRTCConfig","VFRTCVersionDetection"],(function(a,b,c,d,e,f){__p&&__p();var g="stun:stun.fbsbx.com:3478";function h(a,c,d){if(b("VFRTCVersionDetection").isChrome()&&b("VFRTCVersionDetection").webrtcVersion()>=34){var e={urls:a};c!==void 0&&d!==void 0&&(e.username=c,e.credential=d);return[e]}e=[];for(var f=0;f<a.length;f++)c!==void 0&&d!==void 0?e.push({url:a[f],username:c,credential:d}):e.push({url:a[f]});return e}function a(){"use strict";this.sslPort="",this.tcpPort="",this.turnIP="",this.turnPassword="",this.turnUsername="",this.udpPort=""}a.prototype.setTurnCredentials=function(a){"use strict";this.turnIP=a.ip,this.udpPort=a.udp_port,this.tcpPort=a.tcp_port,this.sslPort=a.ssl_tcp_port,this.turnUsername=a.username,this.turnPassword=a.password};a.prototype.getConfig=function(){"use strict";if(b("VFRTCConfig").isVCEndpointCall())return{iceServers:[]};var a=h([g]).concat(h(this.$1(),this.turnUsername,this.turnPassword));return{iceServers:a}};a.prototype.getConstraints=function(a){a===void 0&&(a=!1);var c=!0;b("VFRTCVersionDetection").isChromium()&&b("VFRTCVersionDetection").webrtcVersion()<57&&a&&(c=!1);return{mandatory:{},optional:[{DtlsSrtpKeyAgreement:c}]}};a.prototype.$2=function(a){"use strict";__p&&__p();a=function(a){switch(a){case"tcp":return{ip:this.turnIP,port:this.tcpPort,transport:a};case"udp":return{ip:this.turnIP,port:this.udpPort,transport:a};case"ssl":return{ip:this.turnIP,port:this.sslPort,transport:"tcp"};default:return{ip:this.turnIP,port:this.udpPort,transport:null}}}.bind(this)(a);var b=a.ip,c=a.port;a=a.transport;return!((b==null?void 0:b.length)&&(c==null?void 0:c.length))?null:a!=null&&a.length>0?"turn:"+b+":"+c+"?transport="+a:"turn:"+b+":"+c};a.prototype.$1=function(){"use strict";if(b("VFRTCVersionDetection").isFirefox()&&b("VFRTCVersionDetection").webrtcVersion()<27)return[this.$2()].filter(Boolean);else return[this.$2("udp"),this.$2("tcp"),this.$2("ssl")].filter(Boolean)};e.exports=new a()}),null);
__d("VFRTCPeerConnectionHelper",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={resetLocalStreams:function(a,b){var c=!1,d=a.getLocalStreams(),e=d.filter(function(a){return!b.includes(a)}),f=b.filter(function(a){return!d.includes(a)});(e.length>0||f.length>0)&&(c=!0);e.forEach(function(b){return a.removeStream(b)});f.forEach(function(b){return a.addStream(b)});return c},resetLocalStreamWithTrackAPI:function(a,b,c){__p&&__p();var d=!1,e=b.getVideoTracks().length>0?b.getVideoTracks()[0]:null,f=b.getAudioTracks().length>0?b.getAudioTracks()[0]:null,g=a.getSenders(),h=g.filter(function(a){return a.track&&a.track.kind==="video"}),i=g.filter(function(a){return a.track&&a.track.kind==="audio"});h=h.length===(e===null?0:1)&&i.length===(f===null?0:1);if(c||!h){g.filter(function(a){return a.track!==e&&a.track!==e}).forEach(function(b){d=!0,a.removeTrack(b)});f&&!g.some(function(a){return a.track===f})&&(d=!0,a.addTrack(f,b));e&&!g.some(function(a){return a.track===e})&&(d=!0,a.addTrack(e,b));return d}a.getSenders().forEach(function(a){a.track&&a.track.kind==="video"&&e!==a.track?a.replaceTrack(e):a.track&&a.track.kind==="audio"&&f!==a.track&&a.replaceTrack(f)});return d}};e.exports=a}),null);
__d("VFRTCPeerConnectionQueue",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$1=[],this.$2=[]}a.prototype.push=function(a,b){switch(a){case"add":this.$1.push(b);break;case"remove":this.$2.push(b);break}};a.prototype.drain=function(){this.$3(this.$2),this.clear("remove"),this.$3(this.$1),this.clear("add")};a.prototype.$3=function(a){__p&&__p();if(a.length<1)return;for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;try{d()}catch(a){}}};a.prototype.clear=function(a){switch(a){case"add":this.$1=[];break;case"remove":this.$2=[];break;default:this.$1=[],this.$2=[]}};e.exports=a}),null);
__d("VFRTCRetriableMessage",["VFRTCConstants","VFRTCSignalingExperiments","clearTimeout","mixInEventEmitter","setTimeout"],(function(a,b,c,d,e,f){__p&&__p();var g=1e4,h=7e3;function a(a){"use strict";this.$1=a,this.$2=g,this.$3=2,this.$6=null}a.prototype.sendMessage=function(a,c,d,e){"use strict";__p&&__p();var f=e.sdp,g=e.hasVideo,i=e.attributes,j=e.multiwayInfo;e=e.callTrigger;this.$4=c;switch(a){case b("VFRTCConstants").PayloadType.PCRESTART_OFFER:this.$5=this.$1.sendPCRestartOffer(c,d,f,g,i);break;case b("VFRTCConstants").PayloadType.OFFER:this.$5=this.$1.sendOffer(c,d,f,g,i,e);break;case b("VFRTCConstants").PayloadType.ANSWER:this.$2=h;this.$5=this.$1.sendAnswer(c,d,f,g,i,j);break}this.$7()};a.prototype.isAckMsg=function(a){"use strict";return this.$5&&this.$5.msg_id===a.ack_id};a.prototype.stopRetrying=function(){"use strict";this.$6&&(b("clearTimeout")(this.$6),this.$4=null,this.$5=null,this.$6=null)};a.prototype.$7=function(){"use strict";this.$6=b("setTimeout")(this.$8.bind(this),this.$2)};a.prototype.$8=function(){"use strict";this.$3<1?this.emit("timeoutFailure"):(this.emit("sendingRetry"),this.$1.resendSdpMessage(this.$4,this.$5),this.$7(),this.$3-=1)};b("mixInEventEmitter")(a,{sendingRetry:!0,timeoutFailure:!0});e.exports=a}),null);
__d("VFRTCStreamDurationTracker",["performanceNow"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){a===void 0&&(a="mixed"),this.$3=0,this.$4=0,this.$5=!1,this.update=function(){if(!this.$5)return;this.$6()?this.$4===0&&(this.$4=b("performanceNow")()):this.pause(this.$2)}.bind(this),this.$1=a}a.prototype.isStarted=function(){return this.$5};a.prototype.track=function(a){__p&&__p();if(a===this.$2){this.update();return}if(this.$2&&this.$5){var b=this.$2;b.removeEventListener("addtrack",this.update);b.removeEventListener("removetrack",this.update)}a?(this.$5&&this.$6()&&(this.$3=this.getDuration()),this.$2=a,this.$5&&this.start()):this.stop()};a.prototype.$6=function(){return!this.$2?!1:this.$7().some(function(a){return a.enabled})};a.prototype.$7=function(){if(!this.$2)return[];switch(this.$1){case"audio":return this.$2.getAudioTracks();case"video":return this.$2.getVideoTracks();case"screen":return this.$2.getVideoTracks();default:return this.$2.getTracks()}};a.prototype.pause=function(a){if(!this.$5)return;if(this.$2!==a)return;this.$3=this.getDuration();this.$4=0};a.prototype.getDuration=function(){return this.$4===0?this.$3:this.$3+b("performanceNow")()-this.$4};a.prototype.start=function(){this.$5=!0;this.$6()&&(this.$4=b("performanceNow")());if(this.$2){var a=this.$2;a.addEventListener("addtrack",this.update);a.addEventListener("removetrack",this.update)}};a.prototype.stop=function(){__p&&__p();if(!this.$5)return;this.$3=this.getDuration();this.$5=!1;this.$4=0;if(this.$2){var a=this.$2;a.removeEventListener("addtrack",this.update);a.removeEventListener("removetrack",this.update)}};e.exports=a}),null);
__d("VFRTCTurnDiscovery",["Promise","VFFBRTCUtils","VFRTCLogger","XVideoCallTurnDiscoveryController"],(function(a,b,c,d,e,f){__p&&__p();var g=3,h=null;a={requestTurnCreds:function(a,c,d){__p&&__p();d===void 0&&(d=g);if(h)return h;var e=1,f=b("XVideoCallTurnDiscoveryController").getURIBuilder().setInt("version",e).setString("call_id",a).getURI();h=new(b("Promise"))(function(e,g){h(d);function h(d){b("VFFBRTCUtils").sendServerRequest(f,function(a){a=a.payload;return e(a)},function(){d>0?(b("VFRTCLogger").getInstance().logError(c,a,"Failed turn; going to retry"),h(d-1)):g(new Error("failed"))})}});return h}};e.exports=a}),null);
__d("VFRTCUrlManager",["invariant","regeneratorRuntime","Promise","CurrentUser","URI","VFFBRTCUtils","VFRTCConfig","VFRTCLogger","XGroupCallController","XGroupCallSigningController","XVideoCallController","XWirelessScreenSharingController"],(function(a,b,c,d,e,f,g){__p&&__p();function h(a){b("VFRTCLogger").getInstance().logCallAction(a,void 0,b("VFRTCLogger").CallAction.OLD_URI);return b("XVideoCallController").getURIBuilder().setFBID("peer_id",a).getURI()}function i(a){if(b("CurrentUser").isEmployee()){var c=a.setSubdomain(b("CurrentUser").hasWorkUser()||b("CurrentUser").isWorkUser()?"fb":"www"),d="/intern/";return b("URI").getRequestURI().getPath().substr(0,d.length)!==d?c:c.setDomain(c.getDomain().toString().replace(/\.(intern|internmc|cstools)\./,"."))}return a}function j(a){__p&&__p();var c,d,e,f,g,h,i,j,k,l;return b("regeneratorRuntime").async(function(m){while(1)switch(m.prev=m.next){case 0:c=a.callContext,d=a.callID,e=a.usersToRing,f=a.hasVideo,g=a.initializeVideo,h=a.multiwayCoreTier,i=a.multiwayWwwTier,j=a.nonce,k=a.serverInfoData;l=b("XGroupCallSigningController").getURIBuilder().setString("call_context",c).setInt("call_id",d).setFBIDSet("users_to_ring",e).setBool("has_video",f).setBool("initialize_video",g).setString("server_info_data",k).setString("nonce",j).setString("multiway_www_tier",i).setString("multiway_core_tier",h).getURI();return m.abrupt("return",new(b("Promise"))(function(a,c){b("VFFBRTCUtils").sendServerRequest(l,function(b){a(b.payload.uri)},function(a){c(a)})}));case 3:case"end":return m.stop()}},null,this)}var k=function(a){if(b("VFRTCConfig").disableURLManager())return;window.history.replaceState({},"",a)};function l(a){var c=b("XVideoCallController").getURIBuilder().setFBID("peer_id","0").getURI().getPath();return a.getPath()===c}function m(a,b){a&&(b&&g(0,11934))}a={onCallStarted:function(a){l(new(b("URI"))(window.location))&&k(h(a))},getGroupCallUri:function(a,c,d,e,f,g,h,i,k){__p&&__p();var l;return b("regeneratorRuntime").async(function(n){__p&&__p();while(1)switch(n.prev=n.next){case 0:m(!e,f),l=0;case 2:if(!(l<3)){n.next=15;break}n.prev=3;n.next=6;return b("regeneratorRuntime").awrap(j({callContext:a,callID:c,usersToRing:d,hasVideo:e,initializeVideo:f,multiwayCoreTier:g,multiwayWwwTier:h,nonce:i,serverInfoData:k}));case 6:return n.abrupt("return",n.sent);case 9:n.prev=9,n.t0=n["catch"](3),b("VFRTCLogger").getInstance().logToConsole(n.t0);case 12:l++;n.next=2;break;case 15:return n.abrupt("return",b("XGroupCallController").getURIBuilder().setString("call_context",a).setInt("call_id",c).setFBIDSet("users_to_ring",d).setBool("has_video",e).setBool("initialize_video",f).setString("server_info_data",k).setString("nonce",i).setString("multiway_www_tier",h).setString("multiway_core_tier",g).getURI());case 16:case"end":return n.stop()}},null,this,[[3,9]])},getP2PCallUriWithNonce:function(a,c,d,e,f,g,h){h===void 0&&(h="");m(e,g);c=b("XVideoCallController").getURIBuilder().setFBID("peer_id",a).setInt("call_id",c).setBool("is_caller",d).setBool("audio_only",e).setString("nonce",f).setBool("initialize_video",g).getURI();return b("VFFBRTCUtils").isPeerVCEndpoint(a)||b("VFFBRTCUtils").isCollabTrigger(h)?i(c):c},getWirelessScreenSharingUri:function(a,c,d){c=b("XWirelessScreenSharingController").getURIBuilder().setFBID("peer_id",c).setInt("session_id",d).setString("nonce",a).getURI();return i(c)}};e.exports=a}),null);
__d("VFRTCUserSettings",["Promise","VFRTCMediaDevices","emptyFunction","mixInEventEmitter"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={audioInput:"",audioOutput:"default",videoInput:"",remoteStream:null,_audioInputLabel:null,_videoInputLabel:null,isEnabled:function(){return Boolean(b("VFRTCMediaDevices").isSupported("enumerateDevices"))},selectAudioInputByLabel:function(a){this.audioInput||(this.audioInput=this._selectByLabel(a,this._audioInputLabel));return this.audioInput},selectVideoInputByLabel:function(a){this.videoInput||(this.videoInput=this._selectByLabel(a,this._videoInputLabel));return this.videoInput},_selectByLabel:function(a,b){__p&&__p();for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;if(b&&b===e.label)return e.deviceId}return null},previewStart:function(){this.emit("previewStarted")},previewEnd:function(){this.emit("previewEnded")},save:function(a){var c=a.audioInput,d=a.audioOutput,e=a.videoInput;return new(b("Promise"))(function(a){var b=!!(c&&this.audioInput!==c||e&&this.videoInput!==e);this.audioInput=c;this.audioOutput=d;this.videoInput=e;this.emit("saved",b);a(b)}.bind(this))},updateForLocalStream:function(a){__p&&__p();if(a.videoMediaSourceId)this.videoInput=a.videoMediaSourceId;else{var b=a.getVideoTracks();b=b[0];b&&(this._videoInputLabel=b.label)}if(a.audioMediaSourceId)this.audioInput=a.audioMediaSourceId;else{b=a.getAudioTracks();a=b[0];a&&(this._audioInputLabel=a.label)}},updateForRemoteStream:function(a){this.remoteStream=a,this.emit("remoteStreamChanged")},addListener:function(){},emit:b("emptyFunction")};b("mixInEventEmitter")(a,{previewStarted:!0,previewEnded:!0,remoteStreamChanged:!0,saved:!0});e.exports=a}),null);
__d("VFRTCP2PProtocolHandler",["invariant","Promise","Banzai","Bootloader","CollabCallMessengerBrowserEventEnum","CurrentUser","DateConsts","ErrorUtils","FBLogger","RTCConferenceState","RTCConfig","RTCP2PConnectionStatus","UserAgent","VFRTCCallActions","VFRTCCallNUXActions","VFRTCCallStore","VFRTCCallSummary","VFRTCCallSummaryStore","VFRTCCallType","VFRTCClientFeatureGating","VFRTCConfig","VFRTCConsoleLogger","VFRTCConstants","VFRTCEndCallReason","VFRTCExperiment","VFRTCExperiments","VFRTCGroupCallEscalationStore","VFRTCGroupCallEscalator","VFRTCIceCache","VFRTCLocalMessageQueue","VFRTCLocalUploadLogLevel","VFRTCLogger","VFRTCMessage","VFRTCMessageDedup","VFRTCMessageListener","VFRTCMessageSender","VFRTCOneVCActions","VFRTCP2PCallActions","VFRTCP2PCallEscalationActions","VFRTCP2PCallEscalationStore","VFRTCP2PCallEscalator","VFRTCP2PCallStore","VFRTCPCConfig","VFRTCPeerConnection","VFRTCPeerConnectionHelper","VFRTCPeerConnectionQueue","VFRTCRetriableMessage","VFRTCSdpUtils","VFRTCSessionDescription","VFRTCSignalingExperiments","VFRTCStatsHelpers","VFRTCStreamDurationTracker","VFRTCSupport","VFRTCTurnDiscovery","VFRTCUrlManager","VFRTCUserMediaConstraints","VFRTCUserSettings","VFRTCUtils","VFWebLogger","clearTimeout","debounce","gkx","promiseDone","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("DateConsts").MS_PER_MIN;c=b("DateConsts").MS_PER_SEC;var h=b("VFRTCConstants").CallEndReason,i=b("VFRTCConstants").CallType,j=b("VFRTCConstants").SignalingProtocol,k=b("VFRTCConstants").VideoQuality,l=1*a,m=15*c,n=30*c;function o(){__p&&__p();this.$4={streams:{}},this.$5=b("VFRTCLogger").getInstance(),this.$6=!1,this.$7=!0,this.$8=!1,this.$9="passive",this.$10=new(b("VFRTCMessageSender"))(),this.$15=new(b("VFRTCIceCache"))(),this.$16=!1,this.$17=[],this.$18=!1,this.$21=null,this.$22=null,this.$24=new(b("VFRTCStreamDurationTracker"))("video"),this.$25=new(b("VFRTCStreamDurationTracker"))("video"),this.$26=new(b("VFRTCStreamDurationTracker"))("screen"),this.$27=!1,this.$28=new(b("VFRTCPeerConnectionQueue"))(),this.$48=function(a){a=a.candidate;a&&this.$61(a)}.bind(this),this.$49=function(a){__p&&__p();a=a.target;a=a.iceConnectionState;this.$32("RTCP2PProtocolHandler_PC_iceconnectionstatechange: "+a);(this.$22==="disconnected"||this.$22==="failed")&&a==="connected"&&this.$31(b("CollabCallMessengerBrowserEventEnum").CONNECTION_RECOVERY,this.$22);this.$31(b("CollabCallMessengerBrowserEventEnum").ICE_CONNECTION_STATE_CHANGE,a);b("clearTimeout")(this.$21);switch(a){case"checking":this.$8=!0;break;case"connected":case"completed":this.$62();this.$63();this.$64();break;case"failed":this.$21=b("setTimeout")(function(){if(b("RTCConfig").CollaborationBrowserConfig.ICE_recovery&&b("VFRTCConfig").isVCEndpointCall()){this.$65("ICE failure");return}this.$60(new Error("ICE failed"));b("VFRTCP2PCallActions").setConnectionStatus(b("RTCP2PConnectionStatus").DISCONNECTED)}.bind(this),b("RTCConfig").CollaborationBrowserConfig.ICE_failed_timeout);break;case"disconnected":this.$21=b("setTimeout")(function(){this.$35(h.CONNECTION_DROPPED,!1,!0,!1)}.bind(this),b("RTCConfig").CollaborationBrowserConfig.ICE_disconnected_timeout);break;case"closed":break}}.bind(this),this.$68=function(){var a=this.$3.getCreatedIceCandidates();for(var b=0;b<a.length;b++)this.$61(a[b])}.bind(this),this.$50=function(a){a=a.target;a=a.iceGatheringState;this.$32("RTCP2PProtocolHandler_PC_icegatheringstatechange: "+a);this.$31(b("CollabCallMessengerBrowserEventEnum").ICE_GATHERING_STATE_CHANGE,a)}.bind(this),this.$51=function(a){var c=a.errorCode,d=a.errorText,e=a.hostCandidate;a=a.url;this.$69("VFRTCP2PProtocolHandler: PC icecandidateerror "+c+": "+d+". candidate: "+e);this.$31(b("CollabCallMessengerBrowserEventEnum").ICE_CANDIDATE_ERROR,{errorCode:c,errorText:d,hostCandidate:e,url:a})}.bind(this),this.$70=function(){var a;this.$23?a=h.UNSUPPORTED_VERSION:a=h.OTHER_NOT_CAPABLE;this.$35(a,!1,!0,!1,"TimedOut")}.bind(this),this.$54=b("debounce")(function(a){__p&&__p();var c=a.target;this.$31(b("CollabCallMessengerBrowserEventEnum").RENEGOTIATION,{iceConnectionState:c.iceConnectionState,isNegotiationExpected:this.$7});if(c.iceConnectionState==="closed")return;else if(!this.$7){this.$31(b("CollabCallMessengerBrowserEventEnum").RENEGOTIATION,"ignore");return}else if(!b("VFRTCP2PCallEscalator").isNegotiationAllowed()){this.$31(b("CollabCallMessengerBrowserEventEnum").RENEGOTIATION,"not allowed - escalating");return}else if(this.$6){this.$31(b("CollabCallMessengerBrowserEventEnum").RENEGOTIATION,"retry");b("setTimeout")(function(){return this.$54(a)}.bind(this),100);return}this.$7=!1;var d=[];if(c.signalingState==="stable"){if(this.$8){c=b("VFRTCP2PCallStore").getState();c=c.signalingExperiments;if(!c.support("sdp_update"))this.internalResetConnection(),d.push("new offer");else{c=o.supportMultipleStreams();d.push("SDP update",c?"plan B":null)}this.$9="passive"}this.$31(b("CollabCallMessengerBrowserEventEnum").RENEGOTIATION,"create offer");this.$66().then(function(a){if(a.strongDiff(this.$3.getLocalDescription())){this.$31(b("CollabCallMessengerBrowserEventEnum").RENEGOTIATION,d);return a}return null}.bind(this)).then(function(a){a&&(this.$8&&b("VFRTCP2PCallActions").setConnectionStatus(b("RTCP2PConnectionStatus").RECONNECTING),this.$67(a)),this.$9="active"}.bind(this))["catch"](function(a){this.$60(new Error("Failed to create offer onNegotiationNeeded: "+a.message))}.bind(this))}}.bind(this),50),this.$55=function(a){__p&&__p();if(this.$27){this.$28.push("add",function(){return this.$55(a)}.bind(this));return}var c=a.stream,d=this.$71(c),e=this.$1;d===b("VFRTCConstants").StreamType.SCREEN_CONTENT?(b("VFRTCCallActions").addRemoteScreenStream(c,e),!o.supportMultipleStreams()&&c.getAudioTracks().length>0&&this.$25.track(c)):(b("VFRTCUserSettings").updateForRemoteStream(c),b("VFRTCCallActions").addRemoteStream(c,e),this.$25.track(c),b("VFRTCP2PCallStore").addListener(b("debounce")(function(){b("VFRTCP2PCallStore").getState().callType!==b("VFRTCCallType").AUDIO_ONLY&&this.$62()}.bind(this),50)));this.$18=!0;while(this.$17.length>0)this.$72(this.$17.shift());this.$31(b("CollabCallMessengerBrowserEventEnum").REMOTE_STREAM_ADDED,c)}.bind(this),this.$56=function(a){a=b("VFRTCCallStore").getState().remoteUsers.first();a&&!a.isVideoMuted()&&(b("VFRTCCallActions").toggleMuteRemoteVideo(!1,a.FBID),this.$31(b("CollabCallMessengerBrowserEventEnum").ON_MEDIA_TRACK_EVENT,{action:"toggleMuteRemoteVideo",muted:!1,remoteUserID:a.FBID}))}.bind(this),this.$57=function(a){__p&&__p();if(this.$27){this.$28.push("remove",function(){return this.$57(a)}.bind(this));return}var c=a.stream,d=this.$71(c),e=this.$1;if(d===b("VFRTCConstants").StreamType.SCREEN_CONTENT){b("VFRTCCallActions").removeRemoteScreenStream(c,e);d=b("VFRTCCallStore").getState().remoteUsers.first();if(d){d=d.streams.first();d&&this.$25.track(d)}}else b("VFRTCCallActions").removeRemoteStream(c,e);this.$31(b("CollabCallMessengerBrowserEventEnum").REMOTE_STREAM_REMOVED,c)}.bind(this),this.$33=function(a){this.$32("RTCP2PProtocolHandler_Received_TURN_Creds"),this.$31(b("CollabCallMessengerBrowserEventEnum").TURN_CREDENTIALS_RECEIVED,a),b("VFRTCPCConfig").setTurnCredentials(a),r(function(b){return b.setRelayIP(a.ip)})}.bind(this),this.$34=function(){this.$5.logError(this.$1,this.$2,"Failed to get turn creds"),this.$35(h.CLIENT_ERROR,!1,!b("VFRTCP2PCallStore").isCaller(),!1,"NoTurnCreds")}.bind(this),this.$41=function(a,b){this.$35(a,!1,!1,!1,b.toString())}.bind(this),this.$40=function(a,c){__p&&__p();var d=c.call_id;if(this.$80()){this.$5.logError(this.$1,this.$2,"Message sent after call ended: "+c.type);return}if(this.$1!==a||this.$2!==d)return;r(function(a){return a.onMessageSent(c)});this.$31(b("CollabCallMessengerBrowserEventEnum").MESSAGE_SENT,c)}.bind(this),this.$42=function(a){a=a.message+"; "+a.stackFrames[0].identifier;this.$5.logError(this.$1,this.$2,"JSError: "+a)}.bind(this),this.$31(b("CollabCallMessengerBrowserEventEnum").CALL_CONTROLLER_INIT),this.$32("RTCP2PProtocolHandler_constructed")}o.prototype.init=function(a,c){__p&&__p();this.$1=a;this.$2=c;this.$32("RTCP2PProtocolHandler_init_call");if(!b("VFRTCExperiments").passOfferWithWindowMessages()){a=b("VFRTCLocalMessageQueue").getPeerOfferFromStorage(this.$1);this.$31(b("CollabCallMessengerBrowserEventEnum").LOCAL_MESSAGE_QUEUE,{action:"getOffer",cachedOffer:a,callID:this.$2});if(a){this.$31(b("CollabCallMessengerBrowserEventEnum").CALL_START_TRY,"not ready");c=new(b("VFRTCMessage"))(a);b("VFRTCP2PCallActions").processMessage(c)}}return this};o.prototype.setPreserveLocalStream=function(a){this.$30=a;return this};o.prototype.fetchTURNCredentials=function(){if(b("VFRTCConfig").isVCEndpointCall()){this.$32("RTCP2PProtocolHandler_skip_TURN_discovery");return b("Promise").resolve()}this.$31(b("CollabCallMessengerBrowserEventEnum").CALL_START_TRY,"not ready");return b("VFRTCTurnDiscovery").requestTurnCreds(this.$2.toString(),this.$1).then(this.$33,this.$34)};o.prototype.endCall=function(a,c,d){a===void 0&&(a=h.HANGUP_CALL),c===void 0&&(c=""),d===void 0&&(d=!1),b("VFRTCCallActions").hangup(a,c),this.$35(a,!1,!0,d,c)};o.prototype.startCall=function(a,c){__p&&__p();var d=b("VFRTCP2PCallStore").isCaller();this.$31(b("CollabCallMessengerBrowserEventEnum").CALL_PROCESS_STARTED,{callTrigger:a,userCallType:this.$36(),isCaller:b("VFRTCP2PCallStore").isCaller()});this.$3=this.$37();this.$38();this.$28=new(b("VFRTCPeerConnectionQueue"))();this.$31(b("CollabCallMessengerBrowserEventEnum").LOCAL_MESSAGE_QUEUE,{action:"getOffer",offer:c});var e=null;c?(this.$19=new(b("VFRTCMessage"))(c),b("VFRTCMessageDedup").check(this.$1,this.$19.callID,this.$19.msgID),e=!1):(e=!0,b("VFRTCP2PCallActions").setIsCaller(e));d&&!e&&this.handleCallCollision(this.$19,!1);e!==d&&(this.$31(b("CollabCallMessengerBrowserEventEnum").SET_CALLER_MISMATCH,{initialValue:d,actualValue:e}),d?this.$32("RTCP2ProtocolHandler_offer_mismatch_caller_found_unexpected_cached_offer"):this.$32("RTCP2PProtocolHandler_offer_mismatch_callee_did_not_find_cached_offer"));this.$7=e;this.$19 instanceof b("VFRTCMessage")&&b("VFRTCP2PCallActions").processMessage(this.$19);this.$39(a,e);this.$10=new(b("VFRTCMessageSender"))();this.$10.onMessageSent=this.$40;this.$10.onSendFailure=this.$41;this.$29=new(b("VFRTCP2PCallEscalator"))(this.$1,this.$2,this.$10);b("ErrorUtils").addListener(this.$42,!0);b("VFRTCMessageListener").setMessageHandler(function(a){this.$43(a)}.bind(this));b("VFRTCConfig").isVCEndpointCall()&&b("VFRTCMessageListener").setOneVCMessegeHandler(function(a){this.$44(a)}.bind(this));this.$45();b("VFRTCP2PCallActions").setConnectionStatus(b("RTCP2PConnectionStatus").CONTACTING);b("VFRTCCallActions").call([this.$1],this.$3)};o.prototype.$39=function(a,c){c=b("VFRTCCallSummary").restoreOrInitialize(b("VFRTCCallSummaryStore").getInstance(),this.$1,this.$2,c,this.$19,a);c.setCallType(b("VFRTCP2PCallStore").getState().callType===b("VFRTCCallType").AUDIO_ONLY?i.VOIP:i.DIRECT_VIDEO);c.setActiveConnection("p2p");this.$46(c);b("VFRTCCallActions").setCallSummary(c)};o.prototype.$46=function(a){b("promiseDone")(b("VFRTCStatsHelpers").getBatteryStats(),function(c){a.addExtraInfo(b("VFRTCLogger").Key.BATTERY_START,c.level)})};o.prototype.startScreenStream=function(a){if(!o.supportMultipleStreams()){var c=b("VFRTCCallStore").getState();c=c.localUser;c=c.streams.first();b("VFRTCUtils").transferAudioTracks(a,c)}b("VFRTCCallActions").addLocalScreenStream(a)};o.prototype.stopScreenStream=function(a){__p&&__p();var c=b("VFRTCCallStore").getState();c=c.localUser;if(!c.screenStreams.includes(a))return;if(!o.supportMultipleStreams()){c=c.streams.first();b("VFRTCUtils").transferAudioTracks(c,a)}b("VFRTCCallActions").removeLocalScreenStream(a);b("VFRTCUtils").stopMediaStream(a)};o.prototype.updateScreenStream=function(a,c){b("VFRTCUtils").transferAudioTracks(c,a),b("VFRTCCallActions").replaceLocalScreenStream(a,c),b("VFRTCUtils").stopMediaStream(a)};o.prototype.$47=function(a){if(!o.supportMultipleStreams()&&a.hasScreenStream())return!0;else return!a.isVideoMuted()};o.prototype.$37=function(){__p&&__p();var a=b("VFRTCP2PCallStore").getState();a=a.isPeerOnMobile;a=new(b("VFRTCPeerConnection"))(j.P2P,b("VFRTCPCConfig").getConfig(),b("VFRTCPCConfig").getConstraints(a));var c,d,e,f;b("VFRTCCallStore").addListener(b("debounce")(function(){__p&&__p();var a=b("VFRTCCallStore").getState();a=a.localUser;if(!a||a===c)return;c=a;var g=this.$47(a);d!==g&&d!==null&&this.$10&&this.$10.sendMuteStateUpdate(this.$1,this.$2,g);d=g;g=a.streams;a=a.screenStreams;var h=a!==f,i=g!==e;i||h?(e=g,f=a,this.$38(h)):this.$24.update()}.bind(this),50));b("VFRTCConfig").isVCEndpointCall()&&a.createDataChannel("noop");a.addEventListener("icecandidate",this.$48);a.addEventListener("iceconnectionstatechange",this.$49);a.addEventListener("icegatheringstatechange",this.$50);a.addEventListener("icecandidateerror",this.$51);a.addEventListener("connectionstatechange",this.$52);a.addEventListener("signalingstatechange",this.$53);a.addEventListener("negotiationneeded",this.$54);a.addEventListener("addstream",this.$55);a.addEventListener("track",this.$56);a.addEventListener("removestream",this.$57);a.addEventListener("datachannel",this.$58);this.$59(a);return a};o.supportMultipleStreams=function(){var a=b("VFRTCP2PCallStore").getState();a=a.signalingExperiments;return a.support("multiple_streams_plan_b")||a.support("multiple_streams_unified")};o.prototype.$38=function(a){__p&&__p();a===void 0&&(a=!1);if(this.$3.getSignalingState()==="closed")return;var c=b("VFRTCCallStore").getState();c=c.localUser;if(!c)return;var d=c.getStream();c=c.getScreenStream();var e=[];o.supportMultipleStreams()?(c?(e.push(c),this.$26.track(c)):this.$26.update(),d?(e.push(d),this.$24.track(d)):this.$24.update()):c?(this.$26.track(c),this.$24.track(c),e.push(c)):(this.$26.update(),d&&(this.$24.track(d),e.push(d)));if(b("VFRTCPeerConnection").isTrackAPISupported()&&b("VFRTCClientFeatureGating").restartVideoWithTrackAPI()&&e.length===1){c=b("VFRTCPeerConnectionHelper").resetLocalStreamWithTrackAPI(this.$3,e[0],a);this.$7=this.$7||c}else{d=b("VFRTCPeerConnectionHelper").resetLocalStreams(this.$3,e);this.$7=this.$7||d}};o.prototype.updateAddedTracksForFirefoxVideoEscalation=function(a){b("VFRTCPeerConnection").isFirefoxSupportAddTrack()||b("FBLogger")("rtc_www").mustfix("This function must be called within Firefox context"),this.$7=!0,this.$3.addStream(a),o.replaceLocalStream(a)};o.prototype.$60=function(a){this.$35(h.WEBRTC_ERROR,!1,!0,!1,a.message)};o.prototype.$65=function(a){this.$6=!0,this.$7=!1,this.$9="passive",this.internalResetConnection(),this.$32("RTCP2PProtocolHandler_connection_recovery_"+a),this.$31(b("CollabCallMessengerBrowserEventEnum").CONNECTION_RECOVERY,a),this.$66().then(function(a){b("VFRTCP2PCallActions").setConnectionStatus(b("RTCP2PConnectionStatus").RECONNECTING),this.$67(a),this.$9="active"}.bind(this))["catch"](function(b){this.$60(new Error("Failed recovering from "+a))}.bind(this))};o.prototype.$66=function(){var a=!b("VFRTCP2PCallStore").isAudioOnly()||b("VFRTCP2PCallEscalator").initVideoInAudioCall(),c={ADD_AUDIO_NACK:b("VFRTCSignalingExperiments").shouldEnableAudioNack(),DISABLE_OPUS_STEREO:b("VFRTCClientFeatureGating").disableOpusStereo(),SSRC_CONTENT_TYPE:b("VFRTCClientFeatureGating").addScreenContentTypeInSDP()?b("VFRTCCallStore").getState().localUser.getMediaTypeForTracks():void 0};return this.$3.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:a},c)};o.prototype.$61=function(a){var b=a.sdpMid;if(b!=null){b=this.$3.transformLocalIceCandidateMid(b);a.sdpMid=b}this.$10.sendIceCandidate(this.$1,this.$2,a)};o.prototype.$52=function(a){a.target};o.prototype.$53=function(a){a.target};o.prototype.internalResetConnection=function(){__p&&__p();this.$7=!1;var a=this.$1,c=b("VFRTCCallStore").getState().remoteUsers.first(),d=c.streams,e=c.screenStreams;this.$27=!0;this.$28.clear("add");this.$28.push("remove",function(){__p&&__p();for(var c=d,f=Array.isArray(c),g=0,c=f?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=c.length)break;h=c[g++]}else{g=c.next();if(g.done)break;h=g.value}h=h;b("VFRTCCallActions").removeRemoteStream(h,a)}for(var h=e,g=Array.isArray(h),f=0,h=g?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(g){if(f>=h.length)break;c=h[f++]}else{f=h.next();if(f.done)break;c=f.value}c=c;b("VFRTCCallActions").removeRemoteScreenStream(c,a)}});this.$3.reset().then(function(){this.$27=!1,this.$28.drain()}.bind(this))["catch"](function(a){this.$60(new Error("Failed to reset peer connection: "+a.message))}.bind(this));b("VFRTCConfig").isVCEndpointCall()&&this.$3.createDataChannel("noop")};o.prototype.$71=function(a){var c=b("VFRTCConstants").StreamType;try{switch(this.$4.streams[a.id].type){case c.SCREEN_CONTENT:return c.SCREEN_CONTENT;case c.AUDIO_VIDEO:return c.AUDIO_VIDEO;case c.AUDIO_ONLY:return c.AUDIO_ONLY;default:throw Error("no known stream type found, detecting")}}catch(b){return a.getVideoTracks().length>0?c.AUDIO_VIDEO:c.AUDIO_ONLY}};o.prototype.$62=function(){this.$24.isStarted()?this.$24.update():this.$24.start();var a=b("VFRTCP2PCallStore").getState();a=a.callType;a!==b("VFRTCCallType").AUDIO_ONLY&&(this.$25.isStarted()?this.$25.update():this.$25.start());this.$26.isStarted()?this.$26.update():this.$26.start()};o.prototype.$63=function(){var a=b("VFRTCP2PCallStore").getState().connectionStatus;if(a===b("RTCP2PConnectionStatus").ESCALATING_TO_BJN)return;b("VFRTCP2PCallActions").setConnectionStatus(b("RTCP2PConnectionStatus").CONNECTED);r(function(a){a.onCallConnected(),a.onNetworkReady()})};o.prototype.$58=function(a){a.channel};o.prototype.startLocalVideoTracker=function(a){this.$24.track(a)};o.prototype.updateLocalVideoTracker=function(){this.$24.update()};o.initStream=function(a,c,d){b("VFWebLogger").startTimer("vfweb_timer_get_camera_stream");return o.internalInitStream(a,c,d).then(function(a){b("VFWebLogger").logRTCCheckpoint({checkpoint:"RTCP2PProtocolHandler_initStream_success",duration:b("VFWebLogger").stopTimer("vfweb_timer_get_camera_stream")});return a})["catch"](function(a){b("VFWebLogger").logRTCCheckpoint({checkpoint:"RTCP2PProtocolHandler_initStream_success",duration:b("VFWebLogger").stopTimer("vfweb_timer_get_camera_stream")});throw a})};o.internalInitStream=function(a,c,d){__p&&__p();var e=b("VFRTCP2PCallStore").getState();e=e.isPeerOnMobile;var f=o.getDefaultVideoQuality();e&&(f=k.LQ_VIDEO);e=!a&&b("VFRTCP2PCallEscalator").initVideoInAudioCall();f=b("VFRTCUserMediaConstraints").video(f,d||"");var g=a||e?babelHelpers["extends"]({aspectRatio:{ideal:Number((16/9).toFixed(10))}},q(f)):!1;return b("VFRTCUtils").getUserMediaWithAudioFallback({audio:b("VFRTCUserMediaConstraints").audio(c||""),video:g},{optionalConstraintsOnly:!1,supportFilteredStreams:a&&b("VFRTCClientFeatureGating").canUseP2PVideoFilters()}).then(function(c){__p&&__p();c.getVideoTracks().forEach(function(b){b.enabled=a});if(a)try{var d=c.getVideoTracks();d=d[0];d||p(function(a){return a.log(b("CollabCallMessengerBrowserEventEnum").AUDIO_FALLBACK,{eventDetails:{videoConstraints:g}})})}catch(a){p(function(c){return c.log(b("CollabCallMessengerBrowserEventEnum").INIT_STREAM_ERROR,{eventDetails:{error:a.name,message:a.message,videoConstraints:g}})})}return c})};o.replaceLocalStream=function(a,c){c===void 0&&(c=!1);var d=b("VFRTCCallStore").getState().localUser.streams.first();b("VFRTCCallActions").replaceLocalStream(d,a);c&&b("VFRTCUtils").stopMediaStream(d)};o.prototype.escalateToMultiway=function(){var a=b("VFRTCP2PCallStore").getState(),c=a.callType,d=a.offerEscalationSupport;a=a.escalationConferenceName;if(d&&a){r(function(a){return a.setEscalationInitiated()});d=c!==b("VFRTCCallType").AUDIO_ONLY&&(b("VFRTCCallStore").hasRemoteVideo()||b("VFRTCCallStore").hasLocalVideo());c=new(b("VFRTCGroupCallEscalator"))(a,d,this.$1,this.$2);c.startEscalationToMultiway()}};o.prototype.handleSwitchToMultiway=function(){__p&&__p();var a=b("VFRTCP2PCallStore").getState(),c=a.callType,d=a.offerEscalationSupport;a=a.escalationConferenceName;this.$6=!1;if(d&&a){r(function(a){return a.setReceivedEscalationRequest()});d=c!==b("VFRTCCallType").AUDIO_ONLY&&(b("VFRTCCallStore").hasRemoteVideo()||b("VFRTCCallStore").hasLocalVideo());c=new(b("VFRTCGroupCallEscalator"))(a,d,this.$1,this.$2);c.startEscalationToMultiway()}};o.prototype.$73=function(a,c){var d=b("gkx")("678353"),e=a&&d&&b("VFRTCSupport").isGroupCallWebtrcSupported();this.$13=e;this.$14=c;b("VFRTCP2PCallActions").setMultiwayEscalationSupport(e,c);r(function(a){a.setConferenceName(c),e&&a.setEscalationAvailable()})};o.prototype.$45=function(){__p&&__p();b("VFRTCUrlManager").onCallStarted(this.$1);if(this.$19){this.$6=!0;this.$7=!1;var a=this.$19.msg,c=a.sdp,d=a.attributes,e=a.offer_escalation_support;a=a.escalation_conference_name;b("VFRTCP2PCallActions").setRemoteSignalingExperiments(this.$19.getSignalingExperiments());this.$73(!!e,a);this.onReceivedRemoteSDP(c,"offer",d);b("VFRTCExperiments").passOfferWithWindowMessages()||b("VFRTCLocalMessageQueue").clearPeerOfferFromStorage(this.$1);this.$31(b("CollabCallMessengerBrowserEventEnum").LOCAL_MESSAGE_QUEUE,{action:"removeOffer",offer:this.$19,callID:this.$2});this.$19=null}this.$31(b("CollabCallMessengerBrowserEventEnum").CALL_START_TRY,{initialOffer:this.$19})};o.prototype.$67=function(a){__p&&__p();this.$6=!0;return this.$3.setLocalDescription(a).then(function(a){return a.toDesc()}).then(function(a){var b=a.sdp;a=a.type;a==="offer"&&(b=this.$3.transformOfferSdp(b));return{type:a,sdp:b}}.bind(this)).then(function(a){var c=a.sdp;a=a.type;switch(a){case"offer":b("VFRTCP2PCallStore").getState().signalingExperiments.support("sdp_update")&&b("VFRTCCallStore").getState().callInfo.conferenceState===b("RTCConferenceState").CONNECTED?this.$74(c):this.$75(c);this.$16=!1;break;case"answer":this.$76(c);break;default:break}}.bind(this))["catch"](function(a){this.$60(new Error("Failed to set local description: unexpected SDP type"))}.bind(this))};o.prototype.$77=function(){return{streams:this.$78()}};o.prototype.$78=function(){__p&&__p();var a={},c=b("VFRTCCallStore").getState();c=c.localUser.screenStreams;for(var d=this.$3.getLocalStreams(),e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;var h=c.includes(g)?b("VFRTCConstants").StreamType.SCREEN_CONTENT:g.getVideoTracks().length?b("VFRTCConstants").StreamType.AUDIO_VIDEO:b("VFRTCConstants").StreamType.AUDIO_ONLY;a[g.id]={type:h}}return a};o.prototype.$74=function(a){var c=b("VFRTCCallStore").getState();c=c.localUser;this.$10.sendSdpUpdate(this.$1,this.$2,a,!b("VFRTCP2PCallStore").isAudioOnly()&&!c.isVideoMuted(),this.$77())};o.prototype.$75=function(a){var c=this.$8?b("VFRTCConstants").PayloadType.PCRESTART_OFFER:b("VFRTCConstants").PayloadType.OFFER,d=b("VFRTCCallStore").getState();d=d.callSummary;d=d?d.getCallTrigger():"";this.$11=new(b("VFRTCRetriableMessage"))(this.$10);this.$11.addListener("sendingRetry",this.$68);this.$11.addListener("timeoutFailure",this.$70);this.$11.sendMessage(c,this.$1,this.$2,{sdp:a,hasVideo:!b("VFRTCP2PCallStore").isAudioOnly(),attributes:this.$77(),callTrigger:d});this.$20=b("setTimeout")(function(){this.$35(h.NO_ANSWER_TIMEOUT,!1,!0,!1,"NoAnswerTimeout")}.bind(this),l)};o.prototype.$79=function(a){__p&&__p();if(!Object.prototype.hasOwnProperty.call(a,"videoon"))return;a=!a.videoon;b("VFRTCCallActions").toggleMuteRemoteVideo(a,this.$1);for(var a=this.$3.getRemoteStreams(),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;if(e.getAudioTracks().length>0){this.$31(b("CollabCallMessengerBrowserEventEnum").REMOTE_STREAM_MUTE_TOGGLED,e);return}}this.$25.update()};o.prototype.$76=function(a){this.$12=new(b("VFRTCRetriableMessage"))(this.$10);this.$12.addListener("sendingRetry",this.$68);var c={escalationConferenceName:this.$14,negotiatedEscalationSupport:this.$13};this.$12.sendMessage(b("VFRTCConstants").PayloadType.ANSWER,this.$1,this.$2,{sdp:a,hasVideo:!b("VFRTCP2PCallStore").isAudioOnly(),attributes:this.$77(),multiwayInfo:c})};o.prototype.processQueuedMessages=function(){b("VFRTCLocalMessageQueue").drainQueue(this.$1,function(a){this.$43(a,{skipDupeCheck:!0})}.bind(this))};o.prototype.$43=function(a,c){__p&&__p();var d;try{d=new(b("VFRTCMessage"))(a)}catch(b){this.$5.logError(this.$1,this.$2,"Unknown data: "+JSON.stringify(a));return}this.$5.logReceivedMessage(d.peerID,d.callID,d.msg);this.$31(b("CollabCallMessengerBrowserEventEnum").MESSAGE_RECEIVED,d.msg);if(this.$80()){this.$69("VFRTCP2PProtocolHandler: Ignoring message (call ended): "+d.msgID);return}if(!(c==null?void 0:c.skipDupeCheck)&&!b("VFRTCMessageDedup").check(d.peerID,d.callID,d.msgID)){this.$69("VFRTCP2PProtocolHandler: Ignoring message (duplicate): "+d.msgID);return}if(b("VFRTCCallStore").getState().callInfo.conferenceState===b("RTCConferenceState").AWAITING_USER_START){this.$69("VFRTCP2PProtocolHandler: Ignoring message (awaiting user start): "+d.msgID);return}if(this.$1&&this.$1!==d.peerID){d.isOffer()&&this.$81(d);this.$69("VFRTCP2PProtocolHandler: Ignoring message (different peer): "+d.msgID);return}if(!d.isForCall(this.$2,this.$14)){this.$69("VFRTCP2PProtocolHandler: Ignoring message (different call): "+d.msgID+"(callID: "+d.callID+")");return}this.$2&&this.$2===d.callID&&r(function(a){return a.onFullMessageReceived(d)});a=b("VFRTCGroupCallEscalationStore").getState().inProgress;switch(d.msgType){case b("VFRTCConstants").PayloadType.ICERESTART_OFFER:case b("VFRTCConstants").PayloadType.PCRESTART_OFFER:this.internalResetConnection();this.$82(d);break;case b("VFRTCConstants").PayloadType.OFFER:this.$82(d);break;case b("VFRTCConstants").PayloadType.ANSWER:case b("VFRTCConstants").PayloadType.ICERESTART_ANSWER:case b("VFRTCConstants").PayloadType.PCRESTART_ANSWER:b("VFRTCP2PCallActions").setRemoteSignalingExperiments(d.getSignalingExperiments());this.$83(d);break;case b("VFRTCConstants").PayloadType.SDP_UPDATE:this.$84(d);break;case b("VFRTCConstants").PayloadType.ICE_CANDIDATE:this.$85(d);break;case b("VFRTCConstants").PayloadType.HANGUP:this.$86(d);break;case b("VFRTCConstants").PayloadType.OFFER_ACK:this.$87(d);break;case b("VFRTCConstants").PayloadType.OFFER_NACK:this.$23=!0;break;case b("VFRTCConstants").PayloadType.ANSWER_ACK:this.$88();break;case b("VFRTCConstants").PayloadType.MSG_ACK:this.$89(d);break;case b("VFRTCConstants").PayloadType.SET_VIDEO:this.$90(d);break;case b("VFRTCConstants").PayloadType.SWITCH_TO_MULTIWAY:a||this.handleSwitchToMultiway();break;case b("VFRTCConstants").PayloadType.VIDEO_REQUEST:case b("VFRTCConstants").PayloadType.ACK:case b("VFRTCConstants").PayloadType.OK:case b("VFRTCConstants").PayloadType.PING:case b("VFRTCConstants").PayloadType.PING_ACK:case b("VFRTCConstants").PayloadType.OTHER_DISMISS:case b("VFRTCConstants").PayloadType.PRANSWER:break;default:break}this.$29.parseMessage(d)};o.prototype.$44=function(a){switch(a.msg_type){case"bjn_escalating":var c=b("VFRTCP2PCallStore").getState().connectionStatus;b("VFRTCP2PCallActions").setConnectionStatus(b("RTCP2PConnectionStatus").ESCALATING_TO_BJN);b("setTimeout")(function(){b("VFRTCP2PCallActions").setConnectionStatus(c)},m);break;case"participants":b("VFRTCOneVCActions").storeParticipants(JSON.parse(a.payload).list);break;default:break}};o.prototype.$81=function(a){__p&&__p();var c=a.peerID,d=a.callID;this.$32("RTCP2PProtocolHanlder_collision_offer_from_another_peer");var e=a.msg,f=new(b("VFRTCCallSummary"))({peerID:c,callID:d,isCaller:!1});f.setActiveConnection("p2p");f.onFullMessageReceived(a);f.setCallType(b("VFRTCSdpUtils").isVideoSupported(e.sdp)?i.DIRECT_VIDEO:i.VOIP);this.$10.sendOfferAck(c,d,e);f.onOfferAckSent(e);a=new(b("VFRTCEndCallReason"))(h.IN_ANOTHER_CALL);this.$91(c,d,a,!1);f.onCallEnded(a.getReasonID(),!1);f.save(b("VFRTCCallSummaryStore").getInstance())};o.prototype.$82=function(a){__p&&__p();var c=a.msg;if(!b("VFRTCExperiments").enableCallCollisionFix()){this.$2&&c.call_id!==this.$2&&this.$32("RTCP2PProtcolHandler_call_collision");var d=this.$3.getSignalingState();if(d!=="stable")return}if(c.calltype){this.$10.sendOfferNack(this.$1,c.call_id,c);return}this.$10.sendOfferAck(this.$1,c.call_id,c);this.$10.sendOtherDismiss(c.call_id);this.$92(c)?this.$93(a):this.$94(a)};o.prototype.resetCollisionSummary=function(a,c){var d=a.msg;r(function(a){a.onCallEnded(h.OTHER_INSTANCE_HANDLED,!1,!1,"call_collision"+(c?"_resetConnection":"_atStart"))});var e=new(b("VFRTCCallSummary"))({peerID:this.$1,callID:d.call_id,isCaller:!1});b("VFRTCCallActions").setCallSummary(e);r(function(c){c.setActiveConnection("p2p"),c.onFullMessageReceived(a),c.onOfferAckSent(d),c.setCallType(b("VFRTCSdpUtils").isVideoSupported(d.sdp)?i.DIRECT_VIDEO:i.VOIP),c.setCallTrigger("call_collision")})};o.prototype.handleCallCollision=function(a,c){this.$5.logEvent(this.$1,this.$2,"Handling offer collision");this.resetCollisionSummary(a,c);if(b("VFRTCExperiments").enableCallCollisionFix()){this.$2=a.callID;a=a.msg;c?this.internalResetConnection():this.$10.sendOtherDismiss(a.call_id);b("VFRTCCallActions").callCollision(a.call_id.toString(),this.$1);this.$32("RTCP2PProtocolHandler_handling_call_collision"+(c?"_resetConnection":"_atStart"))}};o.prototype.$93=function(a){__p&&__p();var c=a.msg;this.$79(c);this.$95();this.$96();this.$97();if(this.$2!==c.call_id){c=new(b("VFRTCEndCallReason"))(h.OTHER_INSTANCE_HANDLED);this.$91(this.$1,this.$2,c,!1);this.handleCallCollision(a,!0)}else this.$5.logEvent(this.$1,this.$2,"Handling offer refresh");this.$16=!1;this.$19=a;b("VFRTCP2PCallActions").processMessage(a);this.$45();this.$31(b("CollabCallMessengerBrowserEventEnum").OFFER_ACCEPTED,a.msgID)};o.prototype.$94=function(a){this.$5.logEvent(this.$1,this.$2,"Ignoring offer"),this.$31(b("CollabCallMessengerBrowserEventEnum").OFFER_IGNORED,a.msgID)};o.prototype.$84=function(a){__p&&__p();var c=a.msg;b("VFRTCP2PCallActions").processMessage(a);this.$79(c);switch(this.$3.getSignalingState()){case"stable":this.onReceivedRemoteSDP(this.$98("offer",a),"offer",c.attributes);break;case"have-local-offer":this.onReceivedRemoteSDP(this.$98("answer",a),"answer",c.attributes).then(function(){return this.$99()}.bind(this))["catch"](function(a){this.$60(new Error("Failed to handle sdp update when signaling state is 'have-local-offer': "+a.message))}.bind(this));break;case"have-remote-offer":b("setTimeout")(function(){return this.$84(a)}.bind(this),1e3);break;case"have-local-pranswer":case"have-remote-pranswer":break;case"closed":break}this.$31(b("CollabCallMessengerBrowserEventEnum").SDP_UPDATE,[c.sdp,c.attributes])};o.prototype.$98=function(a,c){c=c.msg;var d=b("VFRTCP2PCallStore").getState();d=d.isPeerOnMobile;var e=b("VFRTCP2PCallStore").isCaller();return a==="offer"?!d&&e&&b("UserAgent").isBrowser("Firefox")?b("VFRTCSdpUtils").setDtlsRole(c.sdp,this.$9):c.sdp:b("VFRTCSdpUtils").setDtlsRole(c.sdp,d&&!e?"passive":this.$9)};o.prototype.$99=function(){this.$6=!1};o.prototype.$64=function(){__p&&__p();var a=this.$3.getSenders().find(function(a){var b;return(a==null?void 0:(b=a.track)==null?void 0:b.kind)==="audio"&&typeof a.getParameters==="function"&&typeof a.setParameters==="function"});if(a==null)return;if(b("VFRTCSignalingExperiments").shouldCapAudioBitrate()){var c=b("VFRTCExperiment").getMediaQualityExperiments().getInt("max_audio_bitrate",0);if(c>0){var d=a.getParameters();d.encodings!=null?d.encodings[0].maxBitrate=c:d.encodings=[{maxBitrate:c}];b("Promise").resolve(a.setParameters(d))}else this.$5.logError(this.$1,this.$2,"received 0 for max audio bitrate")}};o.prototype.onReceivedRemoteSDP=function(a,c,d){__p&&__p();this.$100(d);d=b("VFRTCP2PCallStore").getState();d=d.isPeerOnMobile;d&&(a=b("VFRTCSdpUtils").setVideoBitrateConstraint(a));c==="answer"&&(a=this.$3.transformAnswerSdp(a));return this.$3.setRemoteDescription(new(b("VFRTCSessionDescription"))(j.P2P,{type:c,sdp:a})).then(function(){this.$16=!0,this.$15.drainCandidates(this.$1,this.$2,function(a){return this.$3.onReceivedRemoteIceCandidate(a)}.bind(this))}.bind(this)).then(function(){this.$63();return c!=="offer"?void 0:this.$3.createAnswer({DISABLE_OPUS_STEREO:b("VFRTCClientFeatureGating").disableOpusStereo(),ADD_AUDIO_NACK:b("VFRTCSignalingExperiments").shouldEnableAudioNack()}).then(function(a){this.$67(a),this.$31(b("CollabCallMessengerBrowserEventEnum").SDP_UPDATE,{answer:a.toSdp()})}.bind(this))}.bind(this)).then(function(){this.$36()===b("VFRTCCallType").AUDIO_ONLY&&this.$10.sendMuteStateUpdate(this.$1,this.$2,!1)}.bind(this))["catch"](function(a){this.$60(a);throw a}.bind(this))};o.prototype.$100=function(a){__p&&__p();if(a){var c=a.streams;this.$4=babelHelpers["extends"]({},this.$4,a,{streams:babelHelpers["extends"]({},this.$4.streams,c)});Object.keys(c).some(function(a){if(c[a].type===b("VFRTCConstants").StreamType.SCREEN_CONTENT){b("VFRTCCallActions").removeAllLocalScreenStreams(!0);return!0}return!1})}};o.prototype.$92=function(a){return a.call_id===this.$2?!0:Boolean((this.$20||!this.$19)&&(!this.$2||a.call_id!==this.$2)&&b("VFRTCP2PCallStore").isCaller()&&(!a.handlescollision||a.call_id<this.$2))};o.prototype.$83=function(a){__p&&__p();var c=this.$3.getSignalingState();if(c!=="have-local-offer")return;c=a.msg;this.$73(!!c.negotiated_escalation_support,c.escalation_conference_name);this.$95();this.$96();this.$10.sendAnswerAck(this.$1,this.$2,c);b("VFRTCP2PCallActions").processMessage(a);b("VFRTCP2PCallActions").setConnectionStatus(b("RTCP2PConnectionStatus").CONNECTING);this.onReceivedRemoteSDP(c.sdp,"answer",c.attributes).then(function(){this.$99(),b("VFRTCCallActions").callSuccess(!0)}.bind(this))["catch"](function(a){this.$60(new Error("Failed to handle answer on receiving remote SDP"))}.bind(this));this.$79(c)};o.prototype.$89=function(a){var b=a.msg;this.$11&&this.$11.isAckMsg(b)?(r(function(b){b.onMsgAckReceived(a,!0)}),this.$87(a)):this.$12&&this.$12.isAckMsg(b)&&(r(function(b){b.onMsgAckReceived(a,!1)}),this.$88())};o.prototype.$87=function(a){b("VFRTCP2PCallActions").setConnectionStatus(b("RTCP2PConnectionStatus").RINGING),r(function(c){c.setUploadLogLevel(b("VFRTCLocalUploadLogLevel").getUploadLogLevel(b("VFRTCConstants").convertToUploadLogLevel(a.msg.ull)))}),this.$95()};o.prototype.$88=function(){this.$97(),this.$99(),b("VFRTCCallActions").incomingCallSuccess()};o.prototype.$90=function(a){this.$18?this.$72(a):(this.$69("VFRTCP2PProtocolHandler: P2P message "+a.msgType+" queued for delay handling"),this.$17.push(a))};o.prototype.$72=function(a){b("VFRTCP2PCallStore").getState().isRemoteVideoSupported&&!b("VFRTCP2PCallStore").isAudioOnly()&&this.$79(a.msg)};o.prototype.$85=function(a){var b=a.msg;b.call_id===this.$2&&this.$16?this.$3.onReceivedRemoteIceCandidate(b)["catch"](function(a){this.$101(b)}.bind(this)):this.$101(b)};o.prototype.$101=function(a){this.$15.cacheCandidate(this.$1,a.call_id,a)};o.prototype.$86=function(a){a=a.msg;var c=a.call_id,d=a.reason;a=a.subreason;c===this.$2?this.$35(d,!0,!1,!1,a):(this.$5.logError(this.$1,this.$2,"Receiving hangup for a different call: "+c.toString()),this.$31(b("CollabCallMessengerBrowserEventEnum").HANGUP_CALL_ID_MISSMATCH,c.toString()))};o.prototype.$35=function(a,c,d,e,f){__p&&__p();var g=new(b("VFRTCEndCallReason"))(a).setSubreason(f).setRemoteEnded(c);b("VFRTCCallActions").setEndCallReason(g);b("VFRTCCallNUXActions").refreshNUXState();a=b("VFRTCP2PCallEscalationStore").getState().inProgress;a&&b("VFRTCP2PCallEscalationActions").cancel();this.$95();this.$96();this.$97();if(this.$80()){this.$5.logError(this.$1,this.$2,"Ending an already-ended call");return}this.$5.logCallAction(this.$1,this.$2,b("VFRTCLogger").CallAction.END_CALL,g.toStrName());this.$31(b("CollabCallMessengerBrowserEventEnum").CALL_ENDED,{reason:g.toStrName(),reasonID:g.getReasonID(),subReason:g.getSubreason(),isRemoteEnded:c,userCallType:this.$36(),isCaller:b("VFRTCP2PCallStore").isCaller()});d&&this.$91(this.$1,this.$2,g,e);this.$24.stop();this.$25.stop();this.$26.stop();this.$3&&this.$3.close();b("VFRTCCallActions").hangupSuccess(this.$2.toString());this.$30||b("VFRTCCallActions").removeAllLocalStreams(!0);b("VFRTCCallActions").removeAllLocalScreenStreams(!0);b("VFRTCCallActions").removeAllRemoteStreams(this.$1);b("VFRTCP2PCallActions").setConnectionStatus(b("RTCP2PConnectionStatus").DISCONNECTED);r(function(a){a.setCallType(b("VFRTCP2PCallEscalationStore").getState().callType),a.setVideoDurations(this.$24.getDuration(),this.$25.getDuration()),a.setScreenDuration(this.$26.getDuration()),a.onCallEnded(g.getReasonID(),c,null,g.getSubreason())}.bind(this))};o.prototype.$36=function(){var a=b("VFRTCCallStore").getState();a=a.localUser;return a.isVideoMuted()&&a.isAudioMuted()?b("VFRTCCallType").NO_AUDIO_VIDEO:a.isVideoMuted()&&!a.isAudioMuted()?b("VFRTCCallType").AUDIO_ONLY:b("VFRTCCallType").AUDIO_VIDEO};o.prototype.shutDownP2PListenersForMultiwayEscalation=function(){this.$95(),this.$96(),this.$97(),this.$24.stop(),this.$25.stop(),this.$3&&this.$3.removeAllListeners(),b("setTimeout")(function(){b("VFRTCGroupCallEscalationStore").logToP2PCallSummary(function(a){a.setCallType(b("VFRTCP2PCallEscalationStore").getState().callType),a.setVideoDurations(this.$24.getDuration(),this.$25.getDuration()),a.setScreenDuration(this.$26.getDuration()),a.onCallEnded(h.HANGUP_CALL,!1,!1,"multiway escalation")}.bind(this)),b("VFRTCCallActions").completeTransitionToMultiway()}.bind(this),100),this.destroy()};o.prototype.$91=function(a,b,c,d){if(!this.$10)return;this.$10.sendHangup(a,b,c.getReasonID(),d,c.getSubreason());this.$10.sendOtherDismiss(b)};o.prototype.$95=function(){this.$11&&this.$11.stopRetrying()};o.prototype.$97=function(){this.$12&&this.$12.stopRetrying()};o.prototype.$96=function(){this.$20&&b("clearTimeout")(this.$20),this.$20=null};o.prototype.$80=function(){return b("VFRTCCallStore").getState().callInfo.conferenceState===b("RTCConferenceState").TERMINATED};o.prototype.$59=function(a){__p&&__p();p(function(c){__p&&__p();c=c.logConnectionStats(function(){var c=a.getSignalingState();return c!=="closed"?a.getStats():b("Promise").reject("peer connection closed")},this.$1,this.$2);var d=c.start,e=c.stop,f=function(c){c=c.target;c=c.iceConnectionState;(c==="completed"||c==="connected")&&(this.$32("RTCP2PProtocolHandler_call_connected"),this.$31(b("CollabCallMessengerBrowserEventEnum").CALL_CONNECTED),d(),a.removeEventListener("iceconnectionstatechange",f),a.addEventListener("iceconnectionstatechange",g))}.bind(this),g=function b(c){c=c.target;c=c.iceConnectionState;c==="closed"&&(e(),a.removeEventListener("iceconnectionstatechange",b))};a.addEventListener("iceconnectionstatechange",f)}.bind(this))};o.prototype.$31=function(a,b){p(function(c){return c.log(a,{peerID:this.$1,callID:this.$2,eventDetails:b})}.bind(this))};o.prototype.destroy=function(){this.$28.clear(),b("VFRTCMessageListener").removeMessageHandler(),b("VFRTCConfig").isVCEndpointCall()&&b("VFRTCMessageListener").removeOneVCMessageHandler(),(this.$10.onMessageSent=null,this.$10.onSendFailure=null)};o.prototype.generateEscalationRequestToken=function(a){return this.$29.generateRequestToken(a)};o.prototype.generateEscalationResponseToken=function(a,b){return this.$29.generateResponseToken(a,b)};o.getDefaultVideoQuality=function(){return b("VFRTCConfig").isVCEndpointCall()||b("VFRTCConfig").useHDVideoQuality()?k.HD_VIDEO:b("CurrentUser").isWorkUser()?k.SD_VIDEO:k.LQ_VIDEO};o.showRedialButton=function(){var a=b("VFRTCP2PCallStore").getState();a=a.endCallReason;var c=b("VFRTCCallStore").getState();c=c.callSummary;return a!=null&&(a.getReasonID()===h.IGNORE_CALL||a.getReasonID()===h.NO_ANSWER_TIMEOUT)||c.getCallDuration()<=n};o.showStarRating=function(){if(b("VFRTCClientFeatureGating").shouldAlwaysShowStarRating()){var a=b("VFRTCP2PCallStore").getState(),c=a.endCallReason;a=a.wasConnected;return a&&c!=null&&c.getReasonID()===h.HANGUP_CALL}else return!o.showRedialButton()};o.prototype.$69=function(a){this.$5.logInfo(this.$1,this.$2,a)};o.prototype.$32=function(a){b("VFWebLogger").logRTCCheckpoint({checkpoint:a,callId:String(this.$2),callType:"p2p",peerId:this.$1})};function p(a){if(!b("VFRTCConfig").isVCEndpointCall())return;b("Bootloader").loadModules(["CollabMessengerLogger"],a,"VFRTCP2PProtocolHandler")}function q(a){a instanceof Object||g(0,444);return a}function r(a){var c=b("VFRTCCallStore").getState();c=c.callSummary;a(c);c.save(b("VFRTCCallSummaryStore").getInstance())}e.exports=o}),null);
__d("VFRTCClientMediaUpdateReducer",["FBRTCRtcResponseStatusCode","VFRTCCallActionTypes","VFRTCCallStore","VFRTCConstants","VFRTCMWProtocolHandler","VFRTCMWProtocolStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={reset:function(a,c){switch(c.type){case b("VFRTCCallActionTypes").RESET:return b("VFRTCMWProtocolStore").getInitialState()}return a},configureAudio:function(a,c){switch(c.type){case b("VFRTCCallActionTypes").AUDIO_MUTED:return g(a,"audio",!1);case b("VFRTCCallActionTypes").AUDIO_UNMUTED:return g(a,"audio",!0)}return a},configureVideo:function(a,c){switch(c.type){case b("VFRTCCallActionTypes").VIDEO_MUTED:return g(a,"video",!1);case b("VFRTCCallActionTypes").VIDEO_UNMUTED:return g(a,"video",!0)}return a},onClientMediaUpdateResponse:function(a,c){__p&&__p();switch(c.type){case b("VFRTCCallActionTypes").ON_CLIENT_MEDIA_UPDATE_RESPONSE:if(c.responseStatusCode!==b("FBRTCRtcResponseStatusCode").OK)return a;a=a.setIn(["clientMediaUpdateInfo","lastSyncedClientVersion"],c.currentVersion);if(a.clientMediaUpdateInfo.pendingResponse){a=a.setIn(["clientMediaUpdateInfo","pendingResponse"],!1);if(a.clientMediaUpdateInfo.pendingUpdate)return h(a.setIn(["clientMediaUpdateInfo","pendingUpdate"],!1))}return a}return a}};function g(a,c,d){var e=b("VFRTCCallStore").getConnection(b("VFRTCConstants").SignalingProtocol.MULTIWAY);if(!e)return a;e=e.getLocalStreams()[0].getTracks().reduce(function(a,b){a[b.id]=b.kind===c?d:b.enabled;return a},{});return h(a.setIn(["clientMediaUpdateInfo","localMediaUpdates"],a.clientMediaUpdateInfo.localMediaUpdates.push({mediaStatus:e})))}function h(a){if(a.clientMediaUpdateInfo.pendingResponse)return a.setIn(["clientMediaUpdateInfo","pendingUpdate"],!0);var c=a.clientMediaUpdateInfo.localMediaUpdates.reduce(function(b,c,d){d>=a.clientMediaUpdateInfo.lastSyncedClientVersion&&b.push(c);return b},[]);if(c.length===0)return a;b("VFRTCMWProtocolHandler").clientMediaUpdate(b("VFRTCCallStore").getState().callInfo.conferenceName,b("VFRTCCallStore").getState().callInfo.serverInfoData,a.clientMediaUpdateInfo.lastSyncedClientVersion,a.clientMediaUpdateInfo.localMediaUpdates.size,c);return a.setIn(["clientMediaUpdateInfo","pendingResponse"],!0)}e.exports=a}),null);
__d("VFRTCGroupCallEscalationStoreState",["immutable"],(function(a,b,c,d,e,f){var g;g=babelHelpers.inherits(a,b("immutable").Record({aborted:!1,inProgress:!1,toRing:!1,p2pCallSummary:null,readyToTransition:!1,usersToRing:null}));g&&g.prototype;function a(){"use strict";g.apply(this,arguments)}e.exports=a}),null);
__d("VFRTCGroupCallEscalationStoreReducer",["FBRTCParticipantCallState","VFRTCCallActionTypes","VFRTCCallStore","RTCGroupCallEscalationActionTypes","VFRTCGroupCallEscalationStore","VFRTCGroupCallEscalationStoreState","VFRTCMWProtocolHandler","VFRTCP2PCallStore","VFWebLogger","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new Set([b("FBRTCParticipantCallState").UNKNOWN,b("FBRTCParticipantCallState").DISCONNECTED,b("FBRTCParticipantCallState").NO_ANSWER,b("FBRTCParticipantCallState").REJECTED,b("FBRTCParticipantCallState").UNREACHABLE,b("FBRTCParticipantCallState").CONNECTION_DROPPED,b("FBRTCParticipantCallState").PARTICIPANT_LIMIT_REACHED,b("FBRTCParticipantCallState").IN_ANOTHER_CALL,b("FBRTCParticipantCallState").RING_TYPE_UNSUPPORTED]);function a(a,c){switch(c.type){case b("RTCGroupCallEscalationActionTypes").GROUP_ESCALATION_CANCEL:b("VFWebLogger").logRTCCheckpoint({checkpoint:"group_escalation_cancel"});return a.withMutations(function(a){a.set("aborted",!0).set("inProgress",!1).set("toRing",!1).set("readyToTransition",!1).set("usersToRing",null)})}return a}function c(a,c){switch(c.type){case b("VFRTCCallActionTypes").HANGUP:case b("VFRTCCallActionTypes").END_CALL:case b("VFRTCCallActionTypes").HANGUP_ERROR:case b("VFRTCCallActionTypes").HANGUP_SUCCESS:return a.withMutations(function(a){a.set("aborted",!1).set("inProgress",!1).set("toRing",!1).set("usersToRing",null)});case b("VFRTCCallActionTypes").RESET:return new(b("VFRTCGroupCallEscalationStoreState"))()}return a}function d(a,c){switch(c.type){case b("RTCGroupCallEscalationActionTypes").GROUP_ESCALATION_SET_P2P_CALLSUMMARY:var d=c.p2pCallSummary;if(d)return a.withMutations(function(a){a.set("p2pCallSummary",d)})}return a}function f(a,c){switch(c.type){case b("RTCGroupCallEscalationActionTypes").GROUP_ESCALATION_START:b("VFWebLogger").logRTCCheckpoint({checkpoint:"group_escalation_start"});return a.set("inProgress",!0).set("readyToTransition",!1)}return a}function h(a,c){if(!a.readyToTransition&&a.inProgress)switch(c.type){case b("VFRTCCallActionTypes").ON_JOIN_REQUEST_SENT:b("VFRTCGroupCallEscalationStore").logToP2PCallSummary(function(a){return a.setEscalationConnectingToMultiway()});break;case b("VFRTCCallActionTypes").ON_JOIN_RESPONSE:b("VFRTCGroupCallEscalationStore").logToP2PCallSummary(function(a){a.setEscalationConnectedToMultiway(),c.serverInfoData&&a.setServerInfoData(c.serverInfoData)});break}return a}function i(a,c){__p&&__p();if(!a.readyToTransition&&a.inProgress)switch(c.type){case b("VFRTCCallActionTypes").ON_CONFERENCE_STATE:c=c.request.conferenceStateRequest();if(c){var d=c.participantStates;c=a.toRing;var e=!1,f=Object.keys(d).every(function(a){return d[a].state===b("FBRTCParticipantCallState").CONNECTED});if(f){b("VFWebLogger").logRTCCheckpoint({checkpoint:"group_escalation_success"});b("VFRTCGroupCallEscalationStore").logToP2PCallSummary(function(a){a.setEscalationPeerConnectedToMultiway(),a.setEscalationConnectedToMultiway(),a.setReadyToEscalate()});var h=b("VFRTCP2PCallStore").getState();h=h.protocolHandler;h.shutDownP2PListenersForMultiwayEscalation();if(a.usersToRing&&c){h=a.usersToRing.valueSeq().map(function(a){return a.fbid}).filter(Boolean).toArray();b("VFRTCMWProtocolHandler").addParticipants(b("VFRTCCallStore").getState().callInfo.conferenceName,b("VFRTCCallStore").getState().callInfo.serverInfoData,h);c=!1}}else e=Object.keys(d).some(function(a){return g.has(d[a].state)}),e&&b("VFRTCGroupCallEscalationStore").logToP2PCallSummary(function(a){return a.setInvalidP2PEscalationState()});return a.set("aborted",e).set("readyToTransition",f).set("inProgress",!(f||e)).set("toRing",c)}}return a}function j(a,c){switch(c.type){case b("RTCGroupCallEscalationActionTypes").GROUP_ESCALATION_SET_USERS_TO_RING:if(c.usersToRing)return a.set("usersToRing",c.usersToRing).set("toRing",!0)}return a}e.exports={abortEscalation:a,callStart:f,clearStore:c,onMultiwayConnectionSignaling:h,onParticipantsConnected:i,setP2PCallSummary:d,setUsersToRing:j}}),null);
__d("VFRTCGroupCallParticipantsReducer",["MercuryIDs","VFRTCCallActionTypes","VFRTCCallStore","VFRTCMWProtocolHandler","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={_participantsToRing:new Set(),initThread:function(a,c){switch(c.type){case b("VFRTCCallActionTypes").INIT_THREAD:return a.merge({participants:c.participants,thread:c.thread})}return a},onParticipantsChanged:function(a,c){switch(c.type){case b("VFRTCCallActionTypes").ON_PARTICIPANT_LEFT:return a.set("participants",a.participants["delete"](b("MercuryIDs").getParticipantIDFromUserID(c.participantFBID)));case b("VFRTCCallActionTypes").ON_PARTICIPANTS_ADDED:var d=Object.keys(c.participants).map(function(a){return c.participants[a].fbid}).filter(function(a){return g._participantsToRing.has(a)});d.length!==0&&(d.forEach(function(a){return g._participantsToRing["delete"](a)}),b("VFRTCMWProtocolHandler").addParticipants(b("VFRTCCallStore").getState().callInfo.conferenceName,b("VFRTCCallStore").getState().callInfo.serverInfoData,d));return a.set("participants",a.participants.merge(b("immutable").Map(c.participants)))}return a},addParticipantsToRing:function(a,c){switch(c.type){case b("VFRTCCallActionTypes").ADD_PARTICIPANTS_TO_RING:c.participantFBIDs.forEach(function(a){return g._participantsToRing.add(a)});return a}return a}};e.exports=g}),null);
__d("VFRTCGroupCallReducer",["FBRTCParticipantCallState","VFRTCCallActionTypes","VFRTCCallStore","VFRTCConstants","VFRTCEndCallReason","VFRTCMWProtocolHandler"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VFRTCConstants").SignalingProtocol;a={setDominantSpeaker:function(a,c){__p&&__p();switch(c.type){case b("VFRTCCallActionTypes").SET_DOMINANT_SPEAKER:return a.set("dominantSpeakerFBID",c.dominantSpeakerFBID);case b("VFRTCCallActionTypes").SET_PINNED_SPEAKER:var d=b("VFRTCCallStore").getState();d=d.callInfo;var e=b("VFRTCCallStore").getConnection(g.MULTIWAY);if(!e)return a;b("VFRTCMWProtocolHandler").subscription(d.conferenceName,d.serverInfoData,e.getRemoteStreams(),a.layout,c.pinnedSpeakerFBID);return a.set("pinnedSpeakerFBID",c.pinnedSpeakerFBID);case b("VFRTCCallActionTypes").ON_CONFERENCE_STATE:d=c.request.conferenceStateRequest();e=d.participantStates;c=e[a.pinnedSpeakerFBID];return c&&c.state!==b("FBRTCParticipantCallState").CONNECTED?a.set("pinnedSpeakerFBID",null):a}return a},setLayout:function(a,c){switch(c.type){case b("VFRTCCallActionTypes").SET_LAYOUT:var d=b("VFRTCCallStore").getState();d=d.callInfo;var e=b("VFRTCCallStore").getConnection(g.MULTIWAY);e&&b("VFRTCMWProtocolHandler").subscription(d.conferenceName,d.serverInfoData,e.getRemoteStreams(),c.layout,a.pinnedSpeakerFBID);return a.set("layout",c.layout)}return a},processEndCallReason:function(a,c){switch(c.type){case b("VFRTCCallActionTypes").CALL_ERROR:case b("VFRTCCallActionTypes").HANGUP:case b("VFRTCCallActionTypes").END_CALL:case b("VFRTCCallActionTypes").DISMISS:return a.set("endCallReason",a.endCallReason||new(b("VFRTCEndCallReason"))(c.endCallReason))}return a}};e.exports=a}),null);
__d("VFRTCP2PCallEscalationStoreState",["VFRTCConstants","immutable"],(function(a,b,c,d,e,f){var g;c=b("VFRTCConstants").CallType;g=babelHelpers.inherits(a,b("immutable").Record({awaitingACK:!1,callType:c.VOIP,escalated:!1,escalateMediaStream:null,failureReason:null,initiatedEscalation:!1,inProgress:!1,request:null,response:null,token:null}));g&&g.prototype;function a(){"use strict";g.apply(this,arguments)}e.exports=a}),null);
__d("VFRTCP2PCallEscalationStoreReducers",["RTCP2PCallActionTypes","RTCP2PCallEscalationActionTypes","VFRTCCallActionTypes","VFRTCCallType","VFRTCConstants","VFRTCP2PCallEscalationStoreState","VFRTCP2PCallEscalator","VFRTCP2PCallStore","VFWebLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VFRTCConstants").CallType;a=function(a,c){__p&&__p();switch(c.type){case b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_START:if(a.inProgress)return a;if(a.escalated||!b("VFRTCP2PCallStore").isAudioOnly())return a;b("VFWebLogger").logRTCCheckpoint({checkpoint:"video_escalation_start"});return a.withMutations(function(a){a.set("awaitingACK",!0).set("initiatedEscalation",!0).set("failureReason",null).set("inProgress",!0).set("token",b("VFRTCP2PCallStore").getState().protocolHandler.generateEscalationRequestToken(!0))});case b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_SUCCESS:if(!a.inProgress)return a;else if("token"in c&&c.token!==a.token)return a;b("VFRTCP2PCallEscalator").onEscalationSucceeded();b("VFWebLogger").logRTCCheckpoint({checkpoint:"video_escalation_success"});return a.withMutations(function(a){a.set("awaitingACK",!1).set("callType",g.ESCALATED).set("escalated",!0).set("inProgress",!1).set("request",null).set("response",!0).set("token",null)});case b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_FAILURE:if(!a.inProgress)return a;else if("token"in c&&c.token!==a.token)return a;b("VFRTCP2PCallEscalator").onEscalationFailed();if(c.reason==="denied"){b("VFWebLogger").logRTCCheckpoint({checkpoint:"video_escalation_denied"});return a.withMutations(function(a){a.set("awaitingACK",!1).set("initiatedEscalation",!1).set("callType",g.ESCALATION_DECLINED).set("escalated",!1).set("failureReason",c.reason||null).set("inProgress",!1).set("request",null).set("response",c.response||null).set("token",null).set("escalateMediaStream",null)})}else c.reason==="cancelled"?b("VFWebLogger").logRTCCheckpoint({checkpoint:"video_escalation_cancelled"}):c.reason==="timeout"?b("VFWebLogger").logRTCCheckpoint({checkpoint:"video_escalation_timeout"}):b("VFWebLogger").logRTCCheckpoint({checkpoint:"video_escalation_failed"});b("VFRTCP2PCallStore").getState().protocolHandler.generateEscalationRequestToken(!1);return a.withMutations(function(a){a.set("awaitingACK",!1).set("inProgress",!1).set("initiatedEscalation",!1).set("callType",g.ESCALATION_DECLINED).set("escalated",!1).set("failureReason",c.reason).set("token",null).set("escalateMediaStream",null)});case b("RTCP2PCallEscalationActionTypes").SET_P2P_CALL_ESCALATION_MEDIA:return a.set("escalateMediaStream",c.stream);default:return a}};c=function(a,c){__p&&__p();switch(c.type){case b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_SET_REQUEST:var d=c.request;if(d==null)return a;return!b("VFRTCP2PCallEscalator").requestVideoOn(d.msg)?a.withMutations(function(a){a.set("awaitingACK",!1).set("inProgress",!1).set("request",null).set("response",null).set("token",null)}):a.withMutations(function(a){a.set("inProgress",!0).set("request",c.request).set("response",null).set("token",null)});case b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_SET_RESPONSE:if(c.response==null)return a;else if(a.request==null)return a;return a.withMutations(function(a){a.set("awaitingACK",!0).set("callType",c.response?g.ESCALATED:g.ESCALATION_DECLINED).set("response",c.response).set("token",b("VFRTCP2PCallStore").getState().protocolHandler.generateEscalationResponseToken(a.request,c.response))});case b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_ACK:if(c.token==null)return a;return a.response==null||a.request==null||c.token!==a.token||!a.awaitingACK?a:a.withMutations(function(a){a.set("awaitingACK",!1).set("callType",a.response?g.ESCALATED:g.ESCALATION_DECLINED).set("escalated",a.response).set("inProgress",!1).set("request",null).set("response",null).set("token",null)});default:return a}};d=function(a,c){__p&&__p();switch(c.type){case b("VFRTCCallActionTypes").RESET:return new(b("VFRTCP2PCallEscalationStoreState"))();case b("RTCP2PCallActionTypes").SET_CALL_TYPE:switch(c.callType){case b("VFRTCCallType").AUDIO_VIDEO:case b("VFRTCCallType").VIDEO_ONLY:return a.set("callType",g.DIRECT_VIDEO)}return a;case b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_ACK:if(c.token==null)return a;if(!a.awaitingACK)return a;else if(c.token!==a.token)return a;return a.set("awaitingACK",!1);default:return a}};e.exports={Alice:a,Bob:c,common:d}}),null);
__d("VFRTCScreenSharingWindowHandler",["VFRTCP2PCallActions","VFRTCUtils","XScreenSharingController","promiseDone"],(function(a,b,c,d,e,f){__p&&__p();var g=540,h=960,i;a={open:function(a,c,d){i=window.open("about:blank","Screen Sharing",this._getWindowFeatures()),window.callInfo=d,b("promiseDone")(b("VFRTCUtils").getStreamVideoResolution(c)["catch"](function(b){this._setupScreenSharingWindow(a,c,null)}.bind(this)),function(b){this._setupScreenSharingWindow(a,c,b)}.bind(this))},_setupScreenSharingWindow:function(a,b,c){__p&&__p();window.getRemoteMediaStream=function(){return b};window.closeScreenSharingWindow=this._onUnload;if(c){c=this._getConstrainedSize(c.width,c.height);var d=c.width,e=c.height;i.resizeTo(d,e);window.setTimeout(function(){this._adjustScreenSize({width:d,height:e})}.bind(this),200)}i.location=this._getUnsignedUri(a);window.focus&&this.isWindowOpened()&&i.focus()},_adjustScreenSize:function(a){if(!i)return;i.resizeTo(a.width,a.height+(a.height-i.innerHeight))},close:function(){if(i){var a=null;i.opener&&!i.opener.closed&&(a=i.opener);i.close();i=null;a&&a.postMessage({recipient:"SC_CONTENT_SCRIPT",type:"SC_RESET_PORT",text:"reset comm port"},"*")}},isWindowOpened:function(){return!!(i&&!i.closed)},_onUnload:function(){b("VFRTCP2PCallActions").togglePopOutScreenContent()},_getWindowFeatures:function(){var a=screen.availLeft,b=screen.availTop,c=this._getConstrainedSize(Math.min(h,screen.width-a),Math.min(g,screen.height-b)),d=c.width;c=c.height;c={height:"height="+c.toString(),width:"width="+d.toString(),top:"top="+b.toString(),left:"left="+a.toString()};return["menubar=no","location=no","scrollbars=no","status=no","personalbar=no",c.height,c.width,c.top,c.left].join(",")},_getConstrainedSize:function(a,b){var c;a>h&&(c=h/a,b*=c,a*=c);b>g&&(c=g/b,a*=c,b*=c);return{width:a,height:b}},_getUnsignedUri:function(a){return b("XScreenSharingController").getURIBuilder().setFBID("peer_id",a).setInt("version",2).getURI()}};e.exports=a}),null);
__d("VFRTCP2PCallReducer",["VFRTCAppDispatcher","VFRTCCallActionTypes","VFRTCCallStore","VFRTCCallType","VFRTCConfig","VFRTCConsoleLogger","VFRTCConstants","RTCP2PCallActionTypes","RTCP2PCallEscalationActionTypes","VFRTCP2PCallEscalationStore","VFRTCP2PCallStoreState","RTCP2PConnectionStatus","VFRTCP2PProtocolHandler","VFRTCScreenSharingWindowHandler","VFRTCSignalingExperiments","VFRTCClientFeatureGating"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VFRTCConstants").SignalingProtocol;function a(a,c){__p&&__p();switch(c.type){case b("VFRTCCallActionTypes").INIT:var d=c.callType,e=c.isCaller,f=c.protocol;return f===g.P2P&&d&&e!=null?a.set("protocolHandler",a.protocolHandler||new(b("VFRTCP2PProtocolHandler"))()).set("isCaller",e).set("callType",d):a;case b("VFRTCCallActionTypes").RESET:return new(b("VFRTCP2PCallStoreState"))();case b("VFRTCCallActionTypes").RESET_FOR_REDIAL:b("VFRTCAppDispatcher").waitFor([b("VFRTCCallStore").getDispatchToken()]);f=b("VFRTCCallStore").getState().remoteUsers.first();if(f==null)return a;a.protocolHandler.destroy();return a.set("connectionStatus",b("RTCP2PConnectionStatus").INIT).set("endCallReason",null).set("protocolHandler",new(b("VFRTCP2PProtocolHandler"))().init(f.FBID,Number(c.conferenceName))).set("signalingExperiments",new(b("VFRTCSignalingExperiments"))());case b("VFRTCCallActionTypes").CALL_COLLISION:b("VFRTCAppDispatcher").waitFor([b("VFRTCCallStore").getDispatchToken()]);a.protocolHandler.init(c.peerID,Number(c.conferenceName));return a.set("connectionStatus",b("RTCP2PConnectionStatus").INIT).set("endCallReason",null).set("signalingExperiments",new(b("VFRTCSignalingExperiments"))());default:return a}}function c(a,c){switch(c.type){case b("VFRTCCallActionTypes").HANGUP:case b("VFRTCCallActionTypes").DISMISS:case b("VFRTCCallActionTypes").HANGUP_ERROR:case b("VFRTCCallActionTypes").HANGUP_SUCCESS:case b("VFRTCCallActionTypes").END_CALL:case b("VFRTCCallActionTypes").REMOVE_REMOTE_SCREEN_STREAM:case b("VFRTCCallActionTypes").RESET_FOR_REDIAL:b("VFRTCScreenSharingWindowHandler").close();return a.withMutations(function(a){return a.set("isScreenContentPoppedOut",b("VFRTCScreenSharingWindowHandler").isWindowOpened()).set("isRedialFooterButtonShown",(b("VFRTCClientFeatureGating").shouldAlwaysShowRedial()||b("VFRTCP2PProtocolHandler").showRedialButton())&&!b("VFRTCConfig").isVCEndpointCall()).set("isStarRatingShown",b("VFRTCP2PProtocolHandler").showStarRating())});default:return a}}function d(a,c){switch(c.type){case b("RTCP2PCallActionTypes").SET_CALL_TYPE:return a.set("callType",c.callType);case b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_SET_RESPONSE:b("VFRTCAppDispatcher").waitFor([b("VFRTCP2PCallEscalationStore").getDispatchToken()]);return a.set("callType",c.response?b("VFRTCCallType").AUDIO_VIDEO:b("VFRTCCallType").AUDIO_ONLY);case b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_FAILURE:return a.set("callType",b("VFRTCCallType").AUDIO_ONLY);case b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_SUCCESS:b("VFRTCAppDispatcher").waitFor([b("VFRTCP2PCallEscalationStore").getDispatchToken()]);return b("VFRTCP2PCallEscalationStore").isEscalated()?a.set("callType",b("VFRTCCallType").AUDIO_VIDEO):a;default:return a}}function f(a,c){switch(c.type){case b("RTCP2PCallActionTypes").SET_CONNECTION_STATUS:if(a.connectionStatus!==c.connectionStatus)return a.set("connectionStatus",c.connectionStatus);default:return a}}function h(a,c){switch(c.type){case b("VFRTCCallActionTypes").SET_END_CALL_REASON:return a.set("endCallReason",c.endCallReason);default:return a}}function i(a,c){switch(c.type){case b("RTCP2PCallActionTypes").SET_MULTIWAY_ESCALATION_SUPPORT:a=a.set("offerEscalationSupport",c.offerEscalationSupport);c.escalationConferenceName&&(a=a.set("escalationConferenceName",c.escalationConferenceName));return a;default:return a}}function j(a,c){switch(c.type){case b("RTCP2PCallActionTypes").POP_IN_SCREEN_CONTENT:b("VFRTCScreenSharingWindowHandler").close();return a.set("isScreenContentPoppedOut",b("VFRTCScreenSharingWindowHandler").isWindowOpened());case b("RTCP2PCallActionTypes").POP_OUT_SCREEN_CONTENT:var d=b("VFRTCCallStore").getState(),e=d.remoteUsers.first().FBID;d=d.callInfo;b("VFRTCScreenSharingWindowHandler").open(e,c.stream,d);return a.set("isScreenContentPoppedOut",b("VFRTCScreenSharingWindowHandler").isWindowOpened());default:return a}}function k(a,c){switch(c.type){case b("RTCP2PCallActionTypes").SET_REMOTE_SIGNALING_EXPERIMENTS:return a.set("signalingExperiments",a.signalingExperiments.setRemote(c.remoteSignalingExperiments));default:return a}}function l(a,c){switch(c.type){case b("RTCP2PCallActionTypes").P2P_PROCESS_MESSAGE:return a.set("isRemoteVideoSupported",c.message.isRemoteVideoSupported()).set("isPeerOnMobile",c.message.isFromMobile());default:return a}}function m(a,c){switch(c.type){case b("RTCP2PCallActionTypes").P2P_SET_IS_CALLER:return a.set("isCaller",c.isCaller);case b("VFRTCCallActionTypes").CALL_COLLISION:return a.set("isCaller",!0);default:return a}}function n(a,c){switch(c.type){case b("RTCP2PCallActionTypes").SET_CONNECTION_STATUS:return c.connectionStatus===b("RTCP2PConnectionStatus").CONNECTED?a.set("wasConnected",!0):a;case b("VFRTCCallActionTypes").RESET_FOR_REDIAL:return a.set("wasConnected",!1);case b("VFRTCCallActionTypes").CALL_COLLISION:return a.set("wasConnected",!1);default:return a}}function o(a,c){switch(c.type){case b("RTCP2PCallActionTypes").P2P_STAR_RATING_DONE:return a.set("isStarRatingShown",!1).set("wasStarRatingDone",c.done);case b("VFRTCCallActionTypes").RESET_FOR_REDIAL:return a.set("isStarRatingShown",!1).set("wasStarRatingDone",!1);default:return a}}function p(a,c){switch(c.type){case b("RTCP2PCallActionTypes").SHOW_POOR_NETWORK_QUALITY:return a.set("isPoorNetworkQualityShown",!0);case b("RTCP2PCallActionTypes").DISMISS_POOR_NETWORK_QUALITY:return a.set("isPoorNetworkQualityShown",!1);default:return a}}e.exports={callInit:a,callEnd:c,processCallType:d,processConnectionStatus:f,processEndCallReason:h,processIsCaller:m,processMessage:l,processMultiwayEscalationSupport:i,processPoorNetworkQuality:p,processPoppedOutScreenContent:j,processSignalingExperiments:k,processWasConnected:n,processWasStarRatingDone:o}}),null);
__d("VFRTCGroupCallEscalationStore",["FluxReduceStore","VFRTCAppDispatcher","VFRTCCallSummaryStore","VFRTCGroupCallEscalationStoreReducer","VFRTCGroupCallEscalationStoreState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=[b("VFRTCGroupCallEscalationStoreReducer").abortEscalation,b("VFRTCGroupCallEscalationStoreReducer").callStart,b("VFRTCGroupCallEscalationStoreReducer").clearStore,b("VFRTCGroupCallEscalationStoreReducer").onMultiwayConnectionSignaling,b("VFRTCGroupCallEscalationStoreReducer").onParticipantsConnected,b("VFRTCGroupCallEscalationStoreReducer").setP2PCallSummary,b("VFRTCGroupCallEscalationStoreReducer").setUsersToRing];g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return new(b("VFRTCGroupCallEscalationStoreState"))()};a.prototype.reduce=function(a,b){return h.reduce(function(a,c){return c(a,b)},a)};a.prototype.isInProgress=function(){return this.getState().inProgress};a.prototype.isEscalated=function(){return this.getState().readyToTransition};a.prototype.logToP2PCallSummary=function(a){var c=this.getState();c=c.p2pCallSummary;c&&(a(c),c.save(b("VFRTCCallSummaryStore").getInstance()))};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("VFRTCAppDispatcher"))}),null);
__d("VFRTCGroupCallStoreState",["VFRTCStreamDurationTracker","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h;d={localVideoDurationTracker:new(b("VFRTCStreamDurationTracker"))("video"),remoteVideoDurationTracker:new(b("VFRTCStreamDurationTracker"))("video"),localScreenDurationTracker:new(b("VFRTCStreamDurationTracker"))("screen")};g=babelHelpers.inherits(a,b("immutable").Record(d));g&&g.prototype;function a(){g.apply(this,arguments)}f={dominantSpeakerFBID:null,endCallReason:null,layout:null,participants:b("immutable").Map(),pinnedSpeakerFBID:null,thread:null,videoDurationTrackerInfo:new a()};h=babelHelpers.inherits(c,b("immutable").Record(f));h&&h.prototype;function c(){h.apply(this,arguments)}e.exports=c}),null);
__d("VFRTCVideoDurationTrackerReducer",["VFRTCCallActionTypes","VFRTCCallStore","VFRTCCallSummaryStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={track:function(a,c){__p&&__p();var d=a.videoDurationTrackerInfo,e=d.localVideoDurationTracker,f=d.remoteVideoDurationTracker;d=d.localScreenDurationTracker;switch(c.type){case b("VFRTCCallActionTypes").ADD_LOCAL_SCREEN_STREAM:d.track(c.stream),d.isStarted()||d.start();case b("VFRTCCallActionTypes").ADD_LOCAL_STREAM:e.track(c.stream);e.isStarted()||e.start();return a;case b("VFRTCCallActionTypes").REMOVE_LOCAL_SCREEN_STREAM:d.pause(c.stream);return a;case b("VFRTCCallActionTypes").REPLACE_LOCAL_SCREEN_STREAM:d.track(c.newStream);e.track(c.newStream);return a;case b("VFRTCCallActionTypes").ADD_REMOTE_STREAM:case b("VFRTCCallActionTypes").TOGGLE_REMOTE_STREAM:d=b("VFRTCCallStore").getState();e=d.remoteUsers;c=e.find(function(a){return!a.isVideoMuted()});f.stop();f.start();f.track(c&&c.streams.first());return a}return a},update:function(a,c){switch(c.type){case b("VFRTCCallActionTypes").VIDEO_MUTED:case b("VFRTCCallActionTypes").VIDEO_UNMUTED:a.videoDurationTrackerInfo.localVideoDurationTracker.update()}return a},stop:function(a,c){__p&&__p();switch(c.type){case b("VFRTCCallActionTypes").DISMISS:case b("VFRTCCallActionTypes").END_CALL:case b("VFRTCCallActionTypes").HANGUP:c=a.videoDurationTrackerInfo;var d=b("VFRTCCallStore").getState();d=d.callSummary;c.localVideoDurationTracker.stop();c.remoteVideoDurationTracker.stop();c.localScreenDurationTracker.stop();d.setVideoDurations(c.localVideoDurationTracker.getDuration(),c.remoteVideoDurationTracker.getDuration());d.setScreenDuration(c.localScreenDurationTracker.getDuration());d.save(b("VFRTCCallSummaryStore").getInstance());return a}return a}};e.exports=a}),null);
__d("VFRTCGroupCallStore",["FluxReduceStore","VFRTCAppDispatcher","VFRTCGroupCallParticipantsReducer","VFRTCGroupCallReducer","VFRTCGroupCallStoreState","VFRTCVideoDurationTrackerReducer"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=[b("VFRTCGroupCallParticipantsReducer").addParticipantsToRing,b("VFRTCGroupCallParticipantsReducer").initThread,b("VFRTCGroupCallParticipantsReducer").onParticipantsChanged,b("VFRTCGroupCallReducer").processEndCallReason,b("VFRTCGroupCallReducer").setDominantSpeaker,b("VFRTCGroupCallReducer").setLayout,b("VFRTCVideoDurationTrackerReducer").track,b("VFRTCVideoDurationTrackerReducer").update,b("VFRTCVideoDurationTrackerReducer").stop];g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return new(b("VFRTCGroupCallStoreState"))()};a.prototype.reduce=function(a,b){return h.reduce(function(a,c){return c(a,b)},a)};a.prototype.hadVideoDuration=function(){var a=this.getState().videoDurationTrackerInfo,b=a.localVideoDurationTracker;a=a.remoteVideoDurationTracker;return b.getDuration()>0||a.getDuration()>0};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("VFRTCAppDispatcher"))}),null);
__d("VFRTCMWProtocolStoreState",["immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h;d={pendingResponse:!1,pendingUpdate:!1,lastSyncedClientVersion:2,localMediaUpdates:b("immutable").List([{mediaStatus:{}},{mediaStatus:{}}])};g=babelHelpers.inherits(a,b("immutable").Record(d));g&&g.prototype;function a(){g.apply(this,arguments)}f={clientMediaUpdateInfo:new a()};h=babelHelpers.inherits(c,b("immutable").Record(f));h&&h.prototype;function c(){h.apply(this,arguments)}e.exports=c}),null);
__d("VFRTCMWProtocolStore",["FluxReduceStore","VFRTCAppDispatcher","VFRTCClientMediaUpdateReducer","VFRTCMWProtocolStoreState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=[b("VFRTCClientMediaUpdateReducer").configureAudio,b("VFRTCClientMediaUpdateReducer").configureVideo,b("VFRTCClientMediaUpdateReducer").onClientMediaUpdateResponse,b("VFRTCClientMediaUpdateReducer").reset];g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return new(b("VFRTCMWProtocolStoreState"))()};a.prototype.reduce=function(a,b){return h.reduce(function(a,c){return c(a,b)},a)};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("VFRTCAppDispatcher"))}),null);
__d("VFRTCP2PCallEscalationStore",["FluxReduceStore","VFRTCAppDispatcher","VFRTCP2PCallEscalationStoreReducers","VFRTCP2PCallEscalationStoreState","VFRTCP2PCallStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=[b("VFRTCP2PCallEscalationStoreReducers").Alice,b("VFRTCP2PCallEscalationStoreReducers").Bob,b("VFRTCP2PCallEscalationStoreReducers").common];g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return new(b("VFRTCP2PCallEscalationStoreState"))()};a.prototype.reduce=function(a,b){return h.reduce(function(a,c){return c(a,b)},a)};a.prototype.didCurrentUserInitiate=function(){return this.getState().initiatedEscalation};a.prototype.isInProgress=function(){return this.getState().inProgress};a.prototype.isEscalated=function(){return this.getState().escalated};a.prototype.getEscalateMediaStream=function(){return this.getState().escalateMediaStream};a.prototype.remoteWillNotInitSDPUpdate=function(){return b("VFRTCP2PCallStore").getState().isPeerOnMobile||b("VFRTCP2PCallStore").getState().signalingExperiments.remoteSupport("video_escalation_by_unmute")};a.prototype.isNegotiationAllowed=function(){var a=this.getState();return this.remoteWillNotInitSDPUpdate()||!a.request};a.prototype.isStarted=function(){var a=this.getState();return a.inProgress&&a.token!==null};a.prototype.getToken=function(){return this.getState().token};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("VFRTCAppDispatcher"))}),null);
__d("VFRTCAdminMessage",["FBRTCCallConstants","VFFBRTCUtils","VFRTCConstants","VFRTCLogger","VFWebLogger","XVideoCallAdminMessageController","emptyFunction","performanceNow"],(function(a,b,c,d,e,f){__p&&__p();function a(a,b){"use strict";this.$1=a,this.$2=b,this.$3=Date.now(),this.$4=null,this.$5=null}a.prototype.getPeerID=function(){"use strict";return this.$1};a.prototype.getCallID=function(){"use strict";return this.$2};a.prototype.getStartTimestamp=function(){"use strict";return this.$3};a.prototype.getConnectedTime=function(){"use strict";return this.$4};a.prototype.getEndTime=function(){"use strict";return this.$5};a.prototype.onCallConnected=function(){"use strict";this.$4||(this.$4=b("performanceNow")())};a.prototype.onCallEnded=function(){"use strict";this.$5||(this.$5=b("performanceNow")())};a.prototype.submit=function(a,c,d){"use strict";this.$5||this.onCallEnded();var e=0,f=b("FBRTCCallConstants").FBRTCCallConnectionType.MISSED_CALL;this.$4&&this.$5&&(e=Math.ceil(this.$5-this.$4),f=b("FBRTCCallConstants").FBRTCCallConnectionType.CONNECTED_CALL);c=f===b("FBRTCCallConstants").FBRTCCallConnectionType.CONNECTED_CALL||c===b("VFRTCConstants").CallEndReason.IGNORE_CALL;b("VFWebLogger").logRTCCheckpoint({checkpoint:"admin_message_"+f});this.$6({peer_id:this.$1,call_id:this.$2,start_time:this.$3,call_duration:e,message_type:f,call_category:a,call_acknowledged:c,conference_name:d})};a.prototype.$6=function(a){"use strict";var c=b("XVideoCallAdminMessageController").getURIBuilder().getURI();b("VFFBRTCUtils").sendServerRequest(c,b("emptyFunction"),this.$7.bind(this,a.peer_id,a.call_id),!1,void 0,a)};a.prototype.$7=function(a,c,d){"use strict";d?d="Fail to log admin message, error "+d.error:d="Server timed out on logging admin message";b("VFRTCLogger").getInstance().logError(a,c,d)};e.exports=a}),null);
__d("VFRTCP2PCallAdminMessageReducers",["FBRTCCallConstants","RTCP2PCallActionTypes","RTCP2PConnectionStatus","VFRTCAdminMessage","VFRTCAppDispatcher","VFRTCCallActionTypes","VFRTCCallStore","VFRTCCallType"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCCallConstants").FBRTCCallType;function a(a,c){switch(c.type){case b("VFRTCCallActionTypes").SET_CALL_SUMMARY:b("VFRTCAppDispatcher").waitFor([b("VFRTCCallStore").getDispatchToken()]);c=b("VFRTCCallStore").getState();c=c.callSummary;return a.set("adminMessage",new(b("VFRTCAdminMessage"))(c.peerID,c.callID));default:return a}}function c(a,c){switch(c.type){case b("RTCP2PCallActionTypes").SET_CONNECTION_STATUS:var d=a.adminMessage;d&&c.connectionStatus===b("RTCP2PConnectionStatus").CONNECTED&&d.onCallConnected();return a;default:return a}}function d(a,c){switch(c.type){case b("VFRTCCallActionTypes").SET_END_CALL_REASON:var d=a.adminMessage,e=a.escalationConferenceName;d&&(d.onCallEnded(),a.isCaller&&d.submit(a.callType===b("VFRTCCallType").AUDIO_ONLY?g.VOICE_CALL:g.VIDEO_CALL,c.endCallReason.getReasonID(),e));return a;default:return a}}e.exports={processCallInit:a,processCallStart:c,processCallEnd:d}}),null);
__d("VFRTCP2PCallStore",["FluxReduceStore","VFRTCAppDispatcher","VFRTCCallType","VFRTCP2PCallAdminMessageReducers","VFRTCP2PCallReducer","VFRTCP2PCallStoreState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=[b("VFRTCP2PCallReducer").callEnd,b("VFRTCP2PCallReducer").callInit,b("VFRTCP2PCallReducer").processCallType,b("VFRTCP2PCallReducer").processConnectionStatus,b("VFRTCP2PCallReducer").processEndCallReason,b("VFRTCP2PCallReducer").processPoppedOutScreenContent,b("VFRTCP2PCallReducer").processMultiwayEscalationSupport,b("VFRTCP2PCallReducer").processSignalingExperiments,b("VFRTCP2PCallReducer").processMessage,b("VFRTCP2PCallReducer").processIsCaller,b("VFRTCP2PCallReducer").processWasConnected,b("VFRTCP2PCallReducer").processWasStarRatingDone,b("VFRTCP2PCallReducer").processPoorNetworkQuality,b("VFRTCP2PCallAdminMessageReducers").processCallInit,b("VFRTCP2PCallAdminMessageReducers").processCallStart,b("VFRTCP2PCallAdminMessageReducers").processCallEnd];g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return new(b("VFRTCP2PCallStoreState"))()};a.prototype.reduce=function(a,b){return h.reduce(function(a,c){return c(a,b)},a)};a.prototype.isAudioOnly=function(){return this.getState().callType===b("VFRTCCallType").AUDIO_ONLY};a.prototype.isCaller=function(){return this.getState().isCaller};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("VFRTCAppDispatcher"))}),null);
__d("VFRTCP2PCallStoreState",["RTCP2PConnectionStatus","VFRTCCallType","VFRTCP2PProtocolHandler","VFRTCSignalingExperiments","immutable"],(function(a,b,c,d,e,f){"use strict";var g;c={adminMessage:null,callType:b("VFRTCCallType").AUDIO_ONLY,connectionStatus:b("RTCP2PConnectionStatus").INIT,endCallReason:null,escalationConferenceName:null,isCaller:!1,isPeerOnMobile:!1,isPoorNetworkQualityShown:!1,isRedialFooterButtonShown:!1,isRemoteVideoSupported:!0,isScreenContentPoppedOut:!1,isStarRatingShown:!1,offerEscalationSupport:!1,protocolHandler:new(b("VFRTCP2PProtocolHandler"))(),signalingExperiments:new(b("VFRTCSignalingExperiments"))(),wasConnected:!1,wasStarRatingDone:!1};g=babelHelpers.inherits(a,b("immutable").Record(c));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("VFRTCGroupCallEscalationActions",["RTCGroupCallEscalationActionTypes","VFRTCAppDispatcher","immutable"],(function(a,b,c,d,e,f){"use strict";a={start:function(){b("VFRTCAppDispatcher").dispatch({type:b("RTCGroupCallEscalationActionTypes").GROUP_ESCALATION_START})},cancel:function(a){b("VFRTCAppDispatcher").dispatch({type:b("RTCGroupCallEscalationActionTypes").GROUP_ESCALATION_CANCEL,p2pCallSummary:a})},approve:function(){b("VFRTCAppDispatcher").dispatch({type:b("RTCGroupCallEscalationActionTypes").GROUP_ESCALATION_SUCCESS})},setUsersToRing:function(a){b("VFRTCAppDispatcher").dispatch({type:b("RTCGroupCallEscalationActionTypes").GROUP_ESCALATION_SET_USERS_TO_RING,usersToRing:a})},setP2PCallSummary:function(a){b("VFRTCAppDispatcher").dispatch({type:b("RTCGroupCallEscalationActionTypes").GROUP_ESCALATION_SET_P2P_CALLSUMMARY,p2pCallSummary:a})}};e.exports=a}),null);
__d("VFRTCGroupCallEscalator",["CurrentUser","MercuryIDs","MessengerParticipants.bs","VFRTCAppDispatcher","VFRTCCallStore","VFRTCConsoleLogger","VFRTCConstants","VFRTCGroupCallActions","VFRTCGroupCallEscalationActions","VFRTCGroupCallEscalationStore","VFRTCGroupCallStore","VFRTCMWProtocolHandler","VFRTCMWProtocolStore","VFRTCScreenSharingUtils","VFRTCUtils","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VFRTCConstants").GroupVideoViewLayout,h=45e3;function a(a,c,d,e){this.$11=null,this.$4=a,this.$5=c,this.$9=d,this.$1=String(e),b("VFRTCGroupCallEscalationActions").setP2PCallSummary(b("VFRTCCallStore").getState().callSummary),this.$10=[d],this.$13=null}a.prototype.getParticipants=function(){return this.$13};a.prototype.$14=function(){var a=this.$4,c=this.$1;return window.setTimeout(function(){var d=b("VFRTCGroupCallEscalationStore").isEscalated(),e=b("VFRTCCallStore").getState();e=e.callInfo;!d&&(e.callID===c||e.conferenceName===a)&&(i("Group Escalation timed out"),b("VFRTCGroupCallEscalationStore").logToP2PCallSummary(function(a){a.setEscalationTimedOut(),b("VFRTCGroupCallEscalationActions").cancel(a)}))},h)};a.prototype.startEscalationToMultiway=function(){__p&&__p();i("Escalating P2P call to Multiway call %o",this.$4);var a=b("VFRTCGroupCallEscalationStore").getState().inProgress;if(a)return;b("VFRTCGroupCallEscalationActions").start();this.$3=this.$14();this.$12=new(b("VFRTCMWProtocolHandler"))();b("VFRTCAppDispatcher").explicitlyRegisterStores([b("VFRTCGroupCallStore"),b("VFRTCMWProtocolStore")]);b("VFRTCGroupCallActions").setLayout(g.GRID);var c=b("MercuryIDs").getParticipantIDFromUserID(b("CurrentUser").getID());b("MessengerParticipants.bs").get(c,function(a){var d={};d[c]=a;a=b("immutable").Map(d);this.$13=a;b("VFRTCGroupCallActions").initThread(null,a);this.$15()}.bind(this))};a.prototype.$15=function(){var a=b("VFRTCCallStore").getState().localUser.getStream(),c=b("VFRTCCallStore").getState().localUser.getScreenStream(),d=a;c&&b("VFRTCScreenSharingUtils").isGroupCallScreenSharingSupported()&&(a&&b("VFRTCUtils").transferAudioTracks(c,a),d=c);d&&this.$12.onStreamReady(d,this.$10,this.$4,!0,{callTrigger:"multiway_escalation",p2pCallID:this.$1})};a.ESCALATION_TIMEOUT=h;function i(){}e.exports=a}),null);
__d("VFRTCP2PCallEscalator",["Promise","VFRTCCallActions","VFRTCCallStore","VFRTCCallSummaryStore","VFRTCConsoleLogger","VFRTCConstants","VFRTCP2PCallEscalationActions","VFRTCP2PCallEscalationStore","VFRTCP2PCallStore","VFRTCP2PProtocolHandler","VFRTCPeerConnection","VFRTCSupport","VFRTCUtils","dangerouslyBypassDispatchError"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VFRTCConstants").PayloadType,h=25e3;i.initVideoInAudioCall=function(){return b("VFRTCSupport").videoEscalationByUnmuteWorkaround()};i.isEscalated=function(){return b("VFRTCP2PCallEscalationStore").isEscalated()};i.isNegotiationAllowed=function(){return b("VFRTCP2PCallEscalationStore").isNegotiationAllowed()};function i(a,b,c){this.$3=a,this.$1=b,this.$2=c,this.$6()}i.prototype.$6=function(){__p&&__p();var a=b("VFRTCP2PCallEscalationStore").getState();this.$4=b("VFRTCP2PCallEscalationStore").addListener(function(){__p&&__p();var c=b("VFRTCP2PCallEscalationStore").getState();if(c===a)return;!c.awaitingACK&&c.awaitingACK!==a.awaitingACK&&!c.inProgress&&window.clearTimeout(this.$5);if(c.callType!==a.callType&&c.inProgress){var d=b("VFRTCCallStore").getState();d=d.callSummary;d.setCallType(c.callType);d.save(b("VFRTCCallSummaryStore").getInstance())}a=c}.bind(this))};i.prototype.destroy=function(){j("P2P Escalator:","destroy"),this.$4.remove(),window.clearTimeout(this.$5)};i.prototype.generateRequestToken=function(a){__p&&__p();var c=b("VFRTCP2PCallEscalationStore").getState();c=c.token;if(c!=null&&a){j("P2P Escalator:","request token","reuse");return c}j("P2P Escalator:","request token");c=this.$2.sendVideoEscalationRequest(this.$3,this.$1,a);window.clearTimeout(this.$5);this.$5=this.$7();return c.msg_id.toString()};i.prototype.generateResponseToken=function(a,c){__p&&__p();var d=b("VFRTCP2PCallEscalationStore").getState();d=d.token;if(d!=null){j("P2P Escalator:","response token","reuse");return d}j("P2P Escalator:","response token",c,a);d=a.peerID;var e=a.callID;a=a.msgID;d=this.$2.sendVideoRequestResponse(d,e,a,c);window.clearTimeout(this.$5);var f=d.msg_id.toString();!c?b("dangerouslyBypassDispatchError")(function(){return b("VFRTCP2PCallEscalationActions").decline(f)}):this.$5=this.$7();return f};i.prototype.$7=function(){return window.setTimeout(b("VFRTCP2PCallEscalationActions").timeout,h)};i.prototype.parseMessage=function(a){j("P2P Escalator:","parse message",this.$3,a.msgType);switch(a.msgType){case g.VIDEO_REQUEST:a.ackID?this.$8(a):this.$9(a);break;case g.ACK:a.msg.ack_type===g.VIDEO_REQUEST&&b("VFRTCP2PCallEscalationActions").handleACK(a.ackID.toString());break}};i.prototype.$8=function(a){j("P2P Escalator:","parse response",a);var c=a.ackID.toString();b("VFRTCP2PCallEscalationStore").getToken()===c&&this.$10(a);b("VFRTCP2PCallEscalationActions").parseResponse(i.requestVideoOn(a.msg),c);window.clearTimeout(this.$5)};i.prototype.$9=function(a){__p&&__p();j("P2P Escalator:","parse request",a);if(b("VFRTCP2PCallEscalationStore").isInProgress()&&!i.requestVideoOn(a.msg)){b("VFRTCP2PCallEscalationStore").didCurrentUserInitiate()||this.$10(a);b("VFRTCP2PCallEscalationActions").cancel();return}if(b("VFRTCP2PCallEscalationStore").isInProgress()&&b("VFRTCP2PCallEscalationStore").didCurrentUserInitiate()){j("P2P Escalator:","auto-approve","mutual consent");b("VFRTCP2PCallEscalationActions").approve();this.$10(a);this.generateResponseToken(a,!0);return}if(b("VFRTCP2PCallEscalationStore").isEscalated()){i.requestVideoOn(a.msg)?(j("P2P Escalator:","auto-approve"),this.$10(a),this.generateResponseToken(a,!0),window.clearTimeout(this.$5)):(j("P2P Escalator:","mute remote video"),b("VFRTCP2PCallEscalationActions").muteRemoteVideo());return}j("P2P Escalator:","request",a);this.$10(a);b("VFRTCP2PCallEscalationActions").setRequest(a)};i.prototype.$10=function(a){var b=a.peerID,c=a.callID;a=a.msg;j("P2P Escalator:","ACK","sent");this.$2.sendAck(b,c,a)};i.requestVideoOn=function(a){var b=a.reqVideoOn;a=a.videoon;return Boolean(b||a)};i.initEscalation=function(a){__p&&__p();a===void 0&&(a=null);var c=b("VFRTCP2PCallStore").getState(),d=c.protocolHandler;c=b("VFRTCCallStore").getState();c=c.localUser;var e=b("VFRTCP2PCallStore").getState().callType==="AUDIO_ONLY",f=c.getStream();c=c.hasVideo();f&&c?(d.updateLocalVideoTracker(),c=b("Promise").resolve(f)):a!=null?(d.startLocalVideoTracker(a),c=b("Promise").resolve(a)):c=b("VFRTCP2PProtocolHandler").initStream(!0).then(function(a){d.startLocalVideoTracker(a);return a});return c.then(function(a){e?(b("VFRTCP2PCallEscalationActions").setEscalateToMediaStream(a),b("VFRTCP2PCallEscalationActions").start()):f?b("VFRTCCallActions").replaceLocalStream(f,a):b("VFRTCCallActions").addLocalStream(a);return a})};i.onEscalationSucceeded=function(){__p&&__p();var a=b("VFRTCP2PCallEscalationStore").getEscalateMediaStream(),c=b("VFRTCCallStore").getState();c=c.localUser;if(c.getStream()===a){var d=b("VFRTCCallStore").getState();d=d.remoteUsers;c.toggleMuteVideo(!1);d.first()&&d.first().toggleMuteVideo(!1)}else a&&b("dangerouslyBypassDispatchError")(function(){i.updateEscalationStream(a)})};i.onEscalationFailed=function(){__p&&__p();var a=b("VFRTCP2PCallEscalationStore").getEscalateMediaStream(),c=b("VFRTCCallStore").getState();c=c.localUser;if(c.getStream()===a){var d=b("VFRTCCallStore").getState();d=d.remoteUsers;c.toggleMuteVideo(!0);d.first()&&d.first().toggleMuteVideo(!0)}else if(a){b("VFRTCUtils").stopMediaStream(a);c=b("VFRTCP2PCallStore").getState();d=c.protocolHandler;d.updateLocalVideoTracker()}};i.acceptEscalation=function(a){__p&&__p();var c=b("VFRTCCallStore").getState(),d=c.localUser;c=c.remoteUsers;var e=Boolean(a==null?void 0:a.muteVideo);if(d.hasVideo()){d.toggleMuteVideo(e);c.first()&&c.first().toggleMuteVideo(!1);a=b("VFRTCP2PCallStore").getState();c=a.protocolHandler;c.updateLocalVideoTracker();b("VFRTCP2PCallEscalationActions").setResponse(!0);return b("Promise").resolve(d.streams.first())}else return b("VFRTCP2PProtocolHandler").initStream(!1).then(function(a){b("VFRTCP2PCallEscalationActions").setResponse(!0);i.updateEscalationStream(a);d.toggleMuteVideo(e);return a})};i.declineEscalation=function(){b("VFRTCP2PCallEscalationActions").setResponse(!1)};i.updateEscalationStream=function(a){__p&&__p();var c=b("VFRTCCallStore").getState().localUser.getStream();if(b("VFRTCPeerConnection").isFirefoxSupportAddTrack()&&c){for(var d=a.getVideoTracks(),e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;c.addTrack(g)}g=b("VFRTCP2PCallStore").getState();f=g.protocolHandler;f.updateAddedTracksForFirefoxVideoEscalation(c)}else b("VFRTCP2PProtocolHandler").replaceLocalStream(a)};i.ACK_TIMEOUT=h;function j(){}e.exports=i}),null);
__d("VFRTCGroupCallIncomingController",["invariant","BonfireFeatureGating","FBRTCCapability","FBRTCDeviceStatus","FBRTCHangupReason","FBRTCRingType","FBRTCRtcResponseStatusCode","PartiesUtils","VFRTCCallBlockingStore","VFRTCCallSummary","VFRTCCallSummaryStore","VFRTCCallUIWrapper","VFRTCClientFeatureGating","VFRTCConfig","VFRTCConstants","VFRTCgenerateRTCCallID","VFRTCLogger","VFRTCMultiwayMessage","VFRTCMWProtocolHandler","VFRTCProxyUserUtils","VFRTCTransactions","VFRTCUtils","VFWebLogger","nullthrows","promiseDone"],(function(a,b,c,d,e,f,g){__p&&__p();var h,i=b("VFRTCConstants").CallEndReason;c=b("VFRTCTransactions").FBRTCTransactionOwner;function j(a){var c=b("VFRTCUtils").parseBonfireID(a.conferenceName);c?b("PartiesUtils").joinBonfire(c,b("VFRTCConfig").isMessengerDotCom()?"messenger_ring":"facebook_ring"):b("VFRTCCallUIWrapper").openGroupCallURI(a.conferenceName,a.callID,a.hasVideo,a.initializeVideo,a.multiwayCoreTier,a.multiwayWwwTier,a.serverInfoData,"answer button",a.callSummary)}d=babelHelpers.inherits(a,c);h=d&&d.prototype;function a(a,b){"use strict";h.constructor.call(this),this.$VFRTCGroupCallIncomingController5=j,this.$VFRTCGroupCallIncomingController2=b,this.$VFRTCGroupCallIncomingController3=a,this.$VFRTCGroupCallIncomingController4=null}a.prototype.$VFRTCGroupCallIncomingController6=function(a){"use strict";this.$VFRTCGroupCallIncomingController1=new(b("VFRTCCallSummary"))({peerID:"MW_PEER_ID",callID:a,isCaller:!1}),this.$VFRTCGroupCallIncomingController1.setCallType("mws"),this.$VFRTCGroupCallIncomingController1.setActiveConnection("mws"),this.$VFRTCGroupCallIncomingController1.setRingRequestReceived()};a.prototype.$VFRTCGroupCallIncomingController7=function(){"use strict";this.$VFRTCGroupCallIncomingController1.onCallEnded(i.IGNORE_CALL,!1,!1,"calling disabled"),this.$VFRTCGroupCallIncomingController1.save(b("VFRTCCallSummaryStore").getInstance())};a.prototype.$VFRTCGroupCallIncomingController8=function(a,c){"use strict";__p&&__p();var d=b("nullthrows")(c.ringRequest()),e=b("nullthrows")(c.serverInfoData()),f=this.getParticipantsFromRingRequest(d,c.conferenceName(),a),g=f.caller;f=f.usersToRing;d=d.ringType===b("FBRTCRingType").GROUP_VIDEO_CALL||d.ringType===b("FBRTCRingType").PEER_VIDEO_CALL;var h=new this.$VFRTCGroupCallIncomingController3(c.conferenceName(),a,g,f,d,e);this.$VFRTCGroupCallIncomingController9(h,a,e,d,c,[g].concat(f));this.$VFRTCGroupCallIncomingController10(h,c,e);this.$VFRTCGroupCallIncomingController11(h,c,e);this.$VFRTCGroupCallIncomingController4=h;return this.$VFRTCGroupCallIncomingController4};a.prototype.$VFRTCGroupCallIncomingController9=function(a,c,d,e,f,g){"use strict";__p&&__p();a.addListener("answerCall",function(a,h){__p&&__p();this.$VFRTCGroupCallIncomingController1.onPressedAnswer();this.$VFRTCGroupCallIncomingController1.save(b("VFRTCCallSummaryStore").getInstance());k("MW answered ConferenceName: %o",f.conferenceName());var i="",j="";if(b("VFRTCClientFeatureGating").canUseMultiwaySandbox()){var l,m=f.header().extensions;l=(l=m)!=null?l.multiwayWwwTier:l;m=(m=m)!=null?m.multiwayCoreTier:m;j=l?l:"";i=m?m:""}this.$VFRTCGroupCallIncomingController5({callSummary:this.$VFRTCGroupCallIncomingController1,conferenceName:a,callID:c,hasVideo:e,initializeVideo:h,multiwayCoreTier:i,multiwayWwwTier:j,serverInfoData:d,participantFBIDs:g})}.bind(this))};a.prototype.$VFRTCGroupCallIncomingController10=function(a,c,d){"use strict";a.addListener("ignoreCall",function(a){this.$VFRTCGroupCallIncomingController12(c,d,a?b("FBRTCHangupReason").IN_ANOTHER_CALL:b("FBRTCHangupReason").IGNORE_CALL,a?i.IN_ANOTHER_CALL:i.IGNORE_CALL,a)}.bind(this))};a.prototype.$VFRTCGroupCallIncomingController11=function(a,c,d){"use strict";a.addListener("timeout",function(a){this.$VFRTCGroupCallIncomingController12(c,d,b("FBRTCHangupReason").NO_ANSWER_TIMEOUT,i.NO_ANSWER_TIMEOUT,a)}.bind(this))};a.prototype.$VFRTCGroupCallIncomingController12=function(a,c,d,e,f){"use strict";f?b("VFRTCMWProtocolHandler").otherUserInAnotherCall(a.conferenceName(),c,d,this.$VFRTCGroupCallIncomingController1.callID):b("VFRTCMWProtocolHandler").endCall(a.conferenceName(),c,d),this.$VFRTCGroupCallIncomingController1.onCallEnded(e,!1),this.$VFRTCGroupCallIncomingController1.save(b("VFRTCCallSummaryStore").getInstance()),this.cancelIncomingCallDialog()};a.prototype.onMessageReceived=function(a){"use strict";__p&&__p();a=new(b("VFRTCMultiwayMessage"))(a);var c=this.getTransaction(a);b("promiseDone")(c.start().then(function(a){if(a!=null)if(a.ringRequest()!=null){var d=b("VFRTCgenerateRTCCallID")();d=this.handleRingRequest(a,d);d&&b("promiseDone")(c.sendResponse(d),function(){this.$VFRTCGroupCallIncomingController1.setRingResponseSent()}.bind(this))}else a.dismissRequest()!=null?(k("MW msg.get type:%o conferenceName:%o %o",a.type(),a.conferenceName(),a.dismissRequest()),c.sendResponse(this.handleDismissRequest(a))):k("MW Incoming controller only handle ring and dismiss, dropping other message",a)}.bind(this),function(a){}))};a.prototype.setCustomAnswerHandler=function(a){"use strict";this.$VFRTCGroupCallIncomingController5=a};a.prototype.cancelIncomingCallDialog=function(){"use strict";this.$VFRTCGroupCallIncomingController4&&(this.$VFRTCGroupCallIncomingController4.cancel(),this.$VFRTCGroupCallIncomingController4=null)};a.prototype.handleDismissRequest=function(a){"use strict";if(this.$VFRTCGroupCallIncomingController4){var c=this.$VFRTCGroupCallIncomingController4.serverInfoData();c==a.serverInfoData()?this.cancelIncomingCallDialog():k("MW Received dismiss with different server info data")}return a.createResponse(b("FBRTCRtcResponseStatusCode").OK,{})};a.prototype.handleRingRequest=function(a,c){"use strict";__p&&__p();var d=b("nullthrows")(a.ringRequest());d!==null||g(0,4280);k("MW msg.get type:%o conferenceName:%o %o",a.type(),a.conferenceName(),a.ringRequest());if(!b("BonfireFeatureGating").canReceiveBonfireRingInterop()&&b("VFRTCUtils").isBonfireCall(a.conferenceName()))return null;d=this.$VFRTCGroupCallIncomingController3.getHangUpReasonForNewRequest();if(d===b("FBRTCHangupReason").IN_ANOTHER_CALL){b("VFRTCMWProtocolHandler").otherUserInAnotherCall(a.conferenceName(),a.serverInfoData(),b("FBRTCHangupReason").IN_ANOTHER_CALL,c.toString());return null}this.$VFRTCGroupCallIncomingController6(c);if(b("VFRTCCallBlockingStore").getBlockingStatus()){this.$VFRTCGroupCallIncomingController7();return null}if(a.serverInfoData()==null)return a.createResponse(b("FBRTCRtcResponseStatusCode").BAD_REQUEST,{callID:c.toString()});d=this.$VFRTCGroupCallIncomingController8(c,a);d.showIncomingDialog();d={deviceCapabilities:[b("FBRTCCapability").SUPPORT_AUDIO_DEPRECATED,b("FBRTCCapability").SUPPORT_VIDEO_DEPRECATED],deviceStatus:b("FBRTCDeviceStatus").OK};return a.createResponse(b("FBRTCRtcResponseStatusCode").OK,{body:{ringResponse:d},callID:c.toString()})};a.prototype.getParticipantsFromRingRequest=function(a,c,d){"use strict";c=a.caller;var e=a.otherParticipants,f=b("VFRTCProxyUserUtils").setProxyingAsUsersFromMessage(a);f!=null&&(b("VFWebLogger").logRTCCheckpoint({checkpoint:"Aloha: Incoming call with proxyingAs users"}),f.forEach(function(a,c){e.includes(a)||(b("VFWebLogger").logRTCCheckpoint({checkpoint:"Incoming call proxyingAsUsers not in usersToRing"}),e.push(a))}),e=e.filter(function(a){return f.get(a)==null}));return{caller:c,usersToRing:e}};function k(){}e.exports=a}),null);
__d("VFRTCIncomingCallController",["fbt","Cache","DocumentTitle","MercuryIDs","MessengerParticipants.bs","UserActivity","VFRTCCallBlockingStore","VFRTCCallSummary","VFRTCCallSummaryStore","VFRTCCallUIWrapper","VFRTCConstants","VFRTCExperiments","VFRTCLocalMessageQueue","VFRTCLocalUploadLogLevel","VFRTCLogger","VFRTCMessage","VFRTCMessageDedup","VFRTCMessageSender","VFRTCSignalingExperiments","VFRTCSupport"],(function(a,b,c,d,e,f,g){__p&&__p();var h=30;function a(a,c,d){"use strict";this.$11=null,this.$1=a,this.$2=c,this.$3=d,this.$4=null,this.$5=null,this.$6=new(b("VFRTCMessageSender"))(),this.$7=b("VFRTCCallSummaryStore").getInstance(),this.$8=b("VFRTCLogger").getInstance(),this.$9=null,this.$10=new(b("Cache"))()}a.prototype.setCustomAnswerHandler=function(a){"use strict";this.$11=a};a.prototype.onMessageReceived=function(a){"use strict";__p&&__p();var c;try{c=new(b("VFRTCMessage"))(a)}catch(b){this.$8.logErrorWithoutID("Unknown data: "+JSON.stringify(a));return}if(!b("VFRTCMessageDedup").check(c.peerID,c.callID,c.msgID)){c.isOffer()&&this.$12()&&this.$6.sendOfferAck(c.peerID,c.callID,c.msg);this.$8.logInfo(c.peerID,c.callID,"Ignoring message (duplicate): "+c.msgID);return}this.$8.logReceivedMessage(c.peerID,c.callID,c.msg);!b("VFRTCExperiments").enableCallCollisionFix()&&b("VFRTCSupport").isWebrtcSupported()&&c.msgType!==b("VFRTCConstants").PayloadType.OFFER&&b("VFRTCLocalMessageQueue").enqueueMessage(c.peerID,c.msgID,a);switch(c.msgType){case b("VFRTCConstants").PayloadType.OFFER:this.$13(c);break;case b("VFRTCConstants").PayloadType.HANGUP:this.$14(c);break;case b("VFRTCConstants").PayloadType.OTHER_DISMISS:this.$15(c);break;case b("VFRTCConstants").PayloadType.ICE_CANDIDATE:case b("VFRTCConstants").PayloadType.OFFER_ACK:case b("VFRTCConstants").PayloadType.ANSWER:case b("VFRTCConstants").PayloadType.MSG_ACK:case b("VFRTCConstants").PayloadType.OK:case b("VFRTCConstants").PayloadType.PING:case b("VFRTCConstants").PayloadType.PRANSWER:case b("VFRTCConstants").PayloadType.ICERESTART_OFFER:case b("VFRTCConstants").PayloadType.ICERESTART_ANSWER:case b("VFRTCConstants").PayloadType.PCRESTART_ANSWER:case b("VFRTCConstants").PayloadType.PCRESTART_OFFER:case b("VFRTCConstants").PayloadType.SDP_UPDATE:case b("VFRTCConstants").PayloadType.ANSWER_ACK:case b("VFRTCConstants").PayloadType.SET_VIDEO:case b("VFRTCConstants").PayloadType.OFFER_NACK:case b("VFRTCConstants").PayloadType.VIDEO_REQUEST:case b("VFRTCConstants").PayloadType.ACK:break;default:break}};a.prototype.$13=function(a){"use strict";__p&&__p();var c=a.callID,d=a.msg,e=a.peerID;if(this.$16(c))return;if(d.calltype){this.$6.sendOfferNack(e,c,d);return}this.$12()?this.$6.sendOfferAck(e,c,d):this.$6.sendOfferNack(e,c,d);this.$8.logCallAction(e,c,b("VFRTCLogger").CallAction.RECEIVED_CALL);var f=this.$17(e,c,a);f.setUploadLogLevel(b("VFRTCLocalUploadLogLevel").getUploadLogLevel(b("VFRTCConstants").convertToUploadLogLevel(d.ull)));if(b("VFRTCCallBlockingStore").getBlockingStatus()){this.$18(e,c,f,b("VFRTCConstants").CallEndReason.IGNORE_CALL,!1,!1,!1,"calling disabled");return}var g=this.$1.getCallEndReasonForNewRequest();if(this.$4&&!this.$4.isForPeer(e)||g===b("VFRTCConstants").CallEndReason.IN_ANOTHER_CALL){this.$18(e,c,f,b("VFRTCConstants").CallEndReason.IN_ANOTHER_CALL,!1,!1,!0);this.$3.onCallMissed(e);return}if(!b("VFRTCSupport").isWebrtcSupported()){this.$18(e,c,f,b("VFRTCConstants").CallEndReason.UNSUPPORTED_VERSION,!1,!1,!1);this.$2.showForIncomingCall(c,e);return}g=new this.$1(e,c);this.$5=f;g.addListener("answerCall",function(b,d){this.$19(e,c,a,f,d)}.bind(this));g.addListener("ignoreCall",function(){this.$20(e,c,f)}.bind(this));g.addListener("timeout",function(){this.$21(e,c,f)}.bind(this));this.$3.hideDialog();d=d.videoon?b("VFRTCConstants").IncomingCallDialogTypes.VIDEO:b("VFRTCConstants").IncomingCallDialogTypes.AUDIO;g.showIncomingDialog(d);this.$4=g;this.$8.logEvent(e,c,"Incoming call dialog shown");this.$22(e)};a.prototype.$22=function(a){"use strict";document.hasFocus()||this.$23(a)};a.prototype.$24=function(){"use strict";this.$25()};a.prototype.$23=function(a){"use strict";a=b("MercuryIDs").getParticipantIDFromUserID(a);b("MessengerParticipants.bs").get(a,function(a){if(!this.$4)return;this.$9=b("DocumentTitle").blink(g._("{name} is calling",[g._param("name",a.short_name)]))}.bind(this));b("UserActivity").subscribeOnce(this.$25.bind(this))};a.prototype.$25=function(){"use strict";this.$9&&(this.$9.stop(),this.$9=null)};a.prototype.$26=function(){"use strict";this.$4&&this.$4.cancel(),this.$4=null,this.$5=null,this.$24()};a.prototype.$14=function(a){"use strict";__p&&__p();var c=a.peerID,d=a.callID;a=a.msg;this.$27(d);if(this.$4&&this.$4.isForPeerAndCall(c,d)){a=a.reason;(typeof a==="string"||a instanceof String)&&(a=b("VFRTCConstants").endCallReasonFromString(a));this.$18(c,d,this.$5,a,!0,!0,!1);this.$26();a!==b("VFRTCConstants").CallEndReason.OTHER_INSTANCE_HANDLED&&(this.$3.onCallMissed(c),this.$3.showDialog())}};a.prototype.$12=function(){"use strict";return b("VFRTCSupport").isWebrtcSupported()};a.prototype.$15=function(a){"use strict";a=a.callID;this.$27(a);b("VFRTCSupport").isWebrtcSupported()||this.$2.dismiss();this.$4&&this.$4.isForCall(a)&&this.$26()};a.prototype.$27=function(a){"use strict";this.$10.set(a,!0,null,h)};a.prototype.$16=function(a){"use strict";return this.$10.has(a)};a.prototype.$17=function(a,c,d){"use strict";a=new(b("VFRTCCallSummary"))({peerID:a,callID:c,isCaller:!1});a.setCallTrigger("incoming_p2p_ring_dialog");a.setActiveConnection("p2p");a.onFullMessageReceived(d);a.onOfferAckSent(d.msg);return a};a.prototype.$19=function(a,c,d,e,f){"use strict";__p&&__p();var g=!d.msg.videoon;e.onPressedAnswer();e.save(this.$7);this.$8.logCallAction(a,c,b("VFRTCLogger").CallAction.ANSWER_CALL);this.$6.sendOtherDismiss(c);!b("VFRTCExperiments").passOfferWithWindowMessages()?b("VFRTCLocalMessageQueue").writePeerOfferToStorage(a,d.originalMessageData):b("VFRTCExperiments").enableCallCollisionFix()||b("VFRTCLocalMessageQueue").enqueueMessage(a,d.msgID,d.originalMessageData);d=this.$11;d?d({peerID:a,callID:String(c),callSummary:e,initializeVideo:f,isAudioCall:g}):b("VFRTCCallUIWrapper").openAsCallee(a,c,e,g,f);this.$26()};a.prototype.$20=function(a,c,d){"use strict";this.$18(a,c,d,b("VFRTCConstants").CallEndReason.IGNORE_CALL,!1,!0,!0),this.$26()};a.prototype.$21=function(a,c,d){"use strict";this.$18(a,c,d,b("VFRTCConstants").CallEndReason.NO_ANSWER_TIMEOUT,!1,!1,!1),this.$26(),this.$3.onCallMissed(a),this.$3.showDialog()};a.prototype.$18=function(a,c,d,e,f,g,h,i){i===void 0&&(i=null);h&&this.$6.sendHangup(a,c,e);g&&this.$6.sendOtherDismiss(c);d&&(d.onCallEnded(e,f,null,i),d.save(this.$7));h=b("VFRTCConstants").fullCallEndReasonString(e,f);this.$8.logCallAction(a,c,b("VFRTCLogger").CallAction.END_CALL,h)};e.exports=a}),null);
__d("VFRTCUIPhoneIcon.react",["React","VFRTCSVGIcon.react"],(function(a,b,c,d,e,f){"use strict";a=function(a){var c=a.variant;c=c===void 0?"start call":c;a=babelHelpers.objectWithoutPropertiesLoose(a,["variant"]);return b("React").createElement(b("VFRTCSVGIcon.react"),a,b("React").createElement("svg",{viewBox:"0 0 48 48"},c==="start call"?b("React").createElement("path",{d:"M32.3 33.3c-4.2 3.5-12.6-4.7-12.8-4.9C19.4 28.3 10.9 20 14.5 15.9C17.2 12.8 17.9 14 18.3 14.3c.3 .3 2.9 4 3 4.7C21.5 19.7 20 21.5 20 22.1c.1 .6 1.8 2.5 2.6 3.3c.7 .7 2.7 2.4 3.3 2.5c.6 .1 2.4-1.4 3.1-1.3c.8 .1 4.5 2.7 4.8 3C34.2 29.9 35.4 30.7 32.3 33.3"}):b("React").createElement("path",{d:"M12.054 24.58C12.52 19.102 24.34 19.002 24.54 19c.202 0 12.024-.1 12.408 5.37.284 4.048-1.092 3.74-1.56 3.778-.41.033-4.823-.767-5.452-1.19-.63-.422-.785-2.703-1.293-3.094-.507-.39-3.092-.51-4.134-.502-1.043.01-3.63.174-4.143.572-.513.4-.702 2.683-1.337 3.117-.636.434-5.062 1.31-5.47 1.283-.47-.03-1.85.3-1.506-3.753"})))};e.exports=a}),null);
__d("VFRTCAcceptButton.react",["cx","fbt","MessengerDialogs.bs","React","VFRTCCallControlsButtonWithLabel.react","VFRTCUICameraIcon.react","VFRTCUIPhoneIcon.react","VideoCallWebDriverIDs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$1=function(){b("MessengerDialogs.bs").removeAllDialogs(),this.props.onAccept()}.bind(this),c}a.prototype.render=function(){return b("React").createElement(b("VFRTCCallControlsButtonWithLabel.react"),{className:"_6jvd icon-40","data-testid":b("VideoCallWebDriverIDs").ANSWER_CALL_BUTTON,onClick:this.$1,shouldThrottle:!1,isVideoCall:this.props.isVideoCall,label:h._("Accept"),title:h._("Accept")},this.props.isVideoCall?b("React").createElement(b("VFRTCUICameraIcon.react"),null):b("React").createElement(b("VFRTCUIPhoneIcon.react"),{variant:"start call"}))};e.exports=a}),null);
__d("VFRTCDeclineButton.react",["cx","fbt","MessengerDialogs.bs","React","VFRTCCallControlsButtonWithLabel.react","VFRTCUIXIcon.react","VideoCallWebDriverIDs","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$1=function(){b("MessengerDialogs.bs").removeAllDialogs(),this.props.onClick()}.bind(this),c}a.prototype.render=function(){return b("React").createElement(b("VFRTCCallControlsButtonWithLabel.react"),{className:b("joinClasses")("_6jtv icon-40 icon-1",this.props.className),"data-testid":b("VideoCallWebDriverIDs").IGNORE_CALL_BUTTON,onClick:this.$1,label:h._("Decline"),title:h._("Decline")},b("React").createElement(b("VFRTCUIXIcon.react"),null))};e.exports=a}),null);
__d("VFRTCGroupCallIncomingDialogBody.react",["cx","fbt","MessengerDialogBodyReact.bs","MessengerProfileImageWrapperReact.bs","MessengerSpinner.react","React","RelayFBEnvironment","RelayModern","SplitImage.react","VFRTCUtils","intlList","VFRTCGroupCallIncomingDialogBodyQuery.graphql"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MessengerDialogBodyReact.bs").jsComponent,k=b("MessengerProfileImageWrapperReact.bs").jsComponent,l=b("RelayModern").QueryRenderer;b("RelayModern").graphql;var m=50,n=function(){return b("VFRTCGroupCallIncomingDialogBodyQuery.graphql")},o=function(a){return h._("{names of users showed on group call incoming dialog}",[h._param("names of users showed on group call incoming dialog",a)])},p=function(a,b,c){a=b?h._("{caller name} wants you to join a group video chat.",[h._param("caller name",c.short_name)]):h._("{caller name} wants you to join a group call.",[h._param("caller name",c.short_name)]);return a},q=function(a){__p&&__p();var c=a.isGroupCall,d=a.hasVideo,e=a.caller,f=a.callees,g=a.conferenceName,h=Array.of(e.image_src).concat(Array.from(f.map(function(a){return a.image_src}))),i=b("intlList")(Array.of(e.short_name).concat(Array.from(f.map(function(a){return a.short_name}))),b("intlList").CONJUNCTIONS.AND).toString();return b("VFRTCUtils").getThreadID(g)===null?b("React").createElement(r,{isGroupCall:c,hasVideo:d,image:h,groupName:i,conferenceName:g}):b("React").createElement(l,{environment:b("RelayFBEnvironment"),query:n,variables:{id:b("VFRTCUtils").getThreadID(g)},render:function(a){__p&&__p();var e=a.error;a=a.props;if(e)return b("React").createElement("div",null,e.message);else if(a){e=a.message_thread.image!==null&&a.message_thread.image.uri!==null?Array.of(a.message_thread.image.uri):h;a=a.message_thread.thread_name===null?i:a.message_thread.thread_name;return b("React").createElement(r,{isGroupCall:c,hasVideo:d,image:e,groupName:a,conferenceName:g})}return b("React").createElement(j,null,b("React").createElement("div",{className:"_6jvn"},b("React").createElement(b("MessengerSpinner.react"),{className:"_6lgz",color:"blue"})))}})},r=function(a){a.isGroupCall;a.hasVideo;var c=a.image,d=a.groupName;a.conferenceName;return b("React").createElement("div",null,b("React").createElement("div",{className:"_6jvn"},b("React").createElement(k,{className:"_4j_j",showBadge:!1,size:m},b("React").createElement(b("SplitImage.react"),{border:!0,className:"_4j_j",srcs:c,size:m,halfView:!0}))),b("React").createElement("div",{className:"_6jvz"},o(d)))};i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){return b("React").createElement(j,{className:"autofocus"},b("React").createElement(q,{isGroupCall:this.props.isGroupCall,hasVideo:this.props.hasVideo,caller:this.props.caller,callees:this.props.callees,conferenceName:this.props.conferenceName}),b("React").createElement("div",{className:"_6jw4"},p(this.props.isGroupCall,this.props.hasVideo,this.props.caller)))};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("VFRTCGroupCallIncomingDialog.react",["cx","MercuryIDs","MessengerDialog.react","MessengerDialogs.bs","MessengerParticipants.bs","React","RungParticipantsAddedSubscription","VFRTCAcceptButton.react","VFRTCClientFeatureGating","VFRTCDeclineButton.react","VFRTCGroupCallIncomingDialogBody.react","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=260,j=function(a,c){a||(b("MessengerDialogs.bs").removeAllDialogs(),c())};c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(a){h.constructor.call(this,a),this.$2=null,this.$3()}a.prototype.componentDidMount=function(){b("MessengerParticipants.bs").getMulti(this.props.participantIDs.map(b("MercuryIDs").getParticipantIDFromUserID),function(a){var c=b("immutable").Map(a).filter(function(a){return a.id!=this.props.callerID}.bind(this));this.$1=a[this.props.callerID];this.setState({rungParticipants:c})}.bind(this))};a.prototype.$3=function(){__p&&__p();var a=this.props.conferenceName.split(":")[1];this.$2=b("RungParticipantsAddedSubscription").subscribe(a,function(a){__p&&__p();a=a.rung_participants_added_subscribe.call.rung_participants.edges;if(a.length>this.state.rungParticipants.size){a=a.map(function(a){a=a.node.id;return b("MercuryIDs").getParticipantIDFromUserID(a)}).filter(function(a){return!this.state.rungParticipants.has(a)}.bind(this));b("MessengerParticipants.bs").getMulti(a,function(a){a=this.state.rungParticipants.concat(a);this.setState({rungParticipants:a})}.bind(this))}}.bind(this))};a.prototype.componentWillUnmount=function(){if(!this.$2)return;this.$2.unsubscribe();this.$2=null};a.prototype.render=function(){return!this.$1?null:b("React").createElement(b("MessengerDialog.react"),{className:"_6jvl",layerHideOnBlur:!1,shown:!0,onToggle:function(a){return j(a,this.props.onIgnore)}.bind(this),width:i},b("React").createElement(b("VFRTCGroupCallIncomingDialogBody.react"),{isGroupCall:this.props.isGroupCall,hasVideo:this.props.hasVideo,caller:this.$1,callees:this.state.rungParticipants.valueSeq().toArray(),conferenceName:this.props.conferenceName}),b("React").createElement("div",{className:(this.props.hasVideo&&b("VFRTCClientFeatureGating").answerCallWithThreeButtons()?"_6nqr":"")+(!b("VFRTCClientFeatureGating").answerCallWithThreeButtons()||!this.props.hasVideo?" _6jvm":"")},b("React").createElement(b("VFRTCDeclineButton.react"),{isP2P:!1,onClick:this.props.onIgnore}),b("VFRTCClientFeatureGating").answerCallWithThreeButtons()||!this.props.hasVideo?b("React").createElement(b("VFRTCAcceptButton.react"),{onAccept:function(){this.props.onAnswer(!1)}.bind(this),isVideoCall:!1,isP2P:!1}):null,this.props.hasVideo?b("React").createElement(b("VFRTCAcceptButton.react"),{onAccept:function(){this.props.onAnswer(!0)}.bind(this),isVideoCall:!0,isP2P:!1}):null))};e.exports=a}),null);
__d("VFRTCMessengerRTCGroupCallIncomingDialog.react",["cx","fbt","Facepile.react","ImageBlock.react","MercuryIDs","MessengerContactImageReact.bs","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeaderReact.re","MessengerDialogs.bs","MessengerParticipants.bs","React","RTWebLoggingCallType","RTWebLoggingComponent","RTWebLoggingSurface","RungParticipantsAddedSubscription","VideoCallWebDriverIDs","gkx","immutable"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MessengerContactImageReact.bs").jsComponent,k=b("MessengerDialogBodyReact.bs").jsComponent,l=b("MessengerDialogHeaderReact.re").component,m=400,n=5,o=50,p=function(a,b){a?a=b?h._("Incoming Group Video Chat"):h._("Incoming Group Call"):a=b?h._("Incoming Video Chat"):h._("Incoming Call");return a},q=function(a,b,c,d){d<=1?d=b?h._("{caller name} invited you to a video chat.",[h._param("caller name",c.name)]):h._("{caller name} invited you to a call.",[h._param("caller name",c.name)]):a?d=b?h._("{caller name} started a group video chat in a group you're a member of.",[h._param("caller name",c.name)]):h._("{caller name} started a group call in a group you're a member of.",[h._param("caller name",c.name)]):d=b?h._("{caller name} invited you to a group video chat.",[h._param("caller name",c.name)]):h._("{caller name} invited you to a group call.",[h._param("caller name",c.name)]);return d},r=function(a){var c=a.isGroupCall;a=a.hasVideo;return b("React").createElement(l,{autofocus:!0},p(c,a))},s=function(a){var c=a.isGroupCall,d=a.hasVideo,e=a.caller;a=a.callees;return b("React").createElement(k,null,b("React").createElement(b("ImageBlock.react"),null,b("React").createElement(j,{isMessengerUser:e.is_messenger_user,size:o,src:e.big_image_src||e.image_src}),b("React").createElement("div",{className:"_2n1r"},b("React").createElement("div",{className:"_2n1s"},q(c,d,e,a.length)),b("React").createElement(b("Facepile.react"),{moreCount:Math.max(0,a.length-n),profiles:a.map(function(a){var b=a.name,c=a.fbid;a=a.big_image_src;return{name:b,uniqueID:c,profilePicURI:a}}).slice(0,n),size:"medium"}),b("React").createElement("div",{className:"_2n1t"},b("gkx")("678352")&&t(a)?h._("This group includes people you've blocked."):d?h._("Your video will be shared as soon as you answer"):h._("The call will start as soon as you answer.")))))},t=function(a){return a.some(function(a){return a.is_messenger_blocked||a.is_facebook_blocked})},u=function(a,c,d,e){b("MessengerDialogs.bs").removeAllDialogs(),a()},v=function(a,c,d,e){b("MessengerDialogs.bs").removeAllDialogs(),a()},w=function(a,c){a||(b("MessengerDialogs.bs").removeAllDialogs(),c())};c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(a){i.constructor.call(this,a),this.$2=null,this.$3()}a.prototype.componentDidMount=function(){b("MessengerParticipants.bs").getMulti(this.props.participantIDs.map(b("MercuryIDs").getParticipantIDFromUserID),function(a){var c=b("immutable").Map(a).filter(function(a){return a.id!=this.props.callerID&&!a.is_aloha_proxy_confirmed}.bind(this));this.$1=a[this.props.callerID];this.setState({rungParticipants:c})}.bind(this))};a.prototype.$3=function(){__p&&__p();var a=this.props.conferenceName.split(":")[1];this.$2=b("RungParticipantsAddedSubscription").subscribe(a,function(a){__p&&__p();a=a.rung_participants_added_subscribe.call.rung_participants.edges;if(a.length>this.state.rungParticipants.size){a=a.map(function(a){a=a.node.id;return b("MercuryIDs").getParticipantIDFromUserID(a)}).filter(function(a){return!this.state.rungParticipants.has(a)}.bind(this));b("MessengerParticipants.bs").getMulti(a,function(a){a=this.state.rungParticipants.concat(a);this.setState({rungParticipants:a})}.bind(this))}}.bind(this))};a.prototype.componentWillUnmount=function(){if(!this.$2)return;this.$2.unsubscribe();this.$2=null};a.prototype.render=function(){if(!this.$1)return null;var a=this.props,c=a.hasVideo,d=a.isGroupCall,e=a.onIgnore,f=a.onAnswer,g=a.callID,i=a.conferenceName;return b("React").createElement(b("MessengerDialog.react"),{layerHideOnBlur:!1,shown:!0,onToggle:function(a){return w(a,e)},width:m},b("React").createElement(r,{hasVideo:c,isGroupCall:d&&this.state.rungParticipants.size>1}),b("React").createElement(s,{isGroupCall:d,hasVideo:c,caller:this.$1,callees:this.state.rungParticipants.valueSeq().toArray()}),b("React").createElement(b("MessengerDialogFooter.react"),null,b("React").createElement(b("MessengerDialogButton.react"),{label:h._("Ignore"),onClick:function(){return u(e,c,g,i)},dataTestID:b("VideoCallWebDriverIDs").IGNORE_CALL_BUTTON,type:"secondary"}),b("React").createElement(b("MessengerDialogButton.react"),{label:h._("Answer Call"),onClick:function(){return v(function(){return f(c)},c,g,i)},dataTestID:b("VideoCallWebDriverIDs").ANSWER_CALL_BUTTON,type:"primary"})))};e.exports=a}),null);
__d("VFRTCMessengerRTCIncomingDialog.react",["cx","fbt","ImageBlock.react","MessengerContactImageReact.bs","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeaderReact.re","MessengerDialogs.bs","MessengerSpinner.react","React","RTWebLoggingCallType","RTWebLoggingComponent","RTWebLoggingSurface","VFRTCStrings","VideoCallWebDriverIDs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerContactImageReact.bs").jsComponent,j=b("MessengerDialogBodyReact.bs").jsComponent,k=b("MessengerDialogHeaderReact.re").component;a=b("React").PropTypes;var l=50;c=b("React").createClass({displayName:"MessengerRTCIncomingDialog",propTypes:{callID:a.string.isRequired,callerParticipant:a.object.isRequired,onAccept:a.func.isRequired,onDecline:a.func.isRequired,isVideoCall:a.bool.isRequired},render:function(){return b("React").createElement(b("MessengerDialog.react"),{layerHideOnBlur:!1,shown:!0,onToggle:this._handleToggle,width:400},b("React").createElement(k,{autofocus:!0},this._dialogTitle()),b("React").createElement(j,null,this._renderDialogBody()),b("React").createElement(b("MessengerDialogFooter.react"),null,b("React").createElement(b("MessengerDialogButton.react"),{label:h._("Decline"),onClick:this._handleDecline,dataTestID:b("VideoCallWebDriverIDs").IGNORE_CALL_BUTTON,type:"secondary"}),b("React").createElement(b("MessengerDialogButton.react"),{label:h._("Accept"),onClick:this._handleAccept,dataTestID:b("VideoCallWebDriverIDs").ANSWER_CALL_BUTTON,type:"primary"})))},_dialogTitle:function(){return this.props.isVideoCall?b("VFRTCStrings").incomingVideoChat:h._("Incoming call")},_renderDialogBody:function(){var a=this.props.callerParticipant;return!a?b("React").createElement(b("MessengerSpinner.react"),null):b("React").createElement(b("ImageBlock.react"),null,b("React").createElement(i,{isMessengerUser:a.is_messenger_user,size:l,src:a.big_image_src||a.image_src}),b("React").createElement("div",{className:"_2n1r"},b("React").createElement("div",{className:"_2n1s"},h._("{caller name} is calling you.",[h._param("caller name",a.name)])),b("React").createElement("div",{className:"_2n1t"},h._("The call will start as soon as you answer."))))},_handleDecline:function(a){a.preventDefault(),b("MessengerDialogs.bs").removeAllDialogs(),this.props.onDecline()},_handleAccept:function(a){a.preventDefault(),b("MessengerDialogs.bs").removeAllDialogs(),this.props.onAccept(this.props.isVideoCall)},_handleToggle:function(a){a||(b("MessengerDialogs.bs").removeAllDialogs(),this.props.onDecline())}});e.exports=c}),null);
__d("VFRTCSoundController",["RTCConfig","Sound"],(function(a,b,c,d,e,f){__p&&__p();var g=[b("RTCConfig").ringtone_mp3_url,b("RTCConfig").ringtone_ogg_url],h=[b("RTCConfig").ringback_mp3_url,b("RTCConfig").ringback_ogg_url],i=[b("RTCConfig").leave_mp3_url,b("RTCConfig").leave_ogg_url];a={playIncomingRingtone:function(a,c,d){var e=d.loop;d.isP2P;d=d.isUnsupportedDialog;d===void 0?!1:d;d=["incoming_ringtone",a.toString(),c].join("_");b("Sound").play(g,d,e)},stopIncomingRingtone:function(){b("Sound").stop(g)},playRingbackTone:function(){b("Sound").play(h,null,!0)},stopRingbackTone:function(){b("Sound").stop(h)},playLeaveCallSound:function(){b("Sound").play(i,null,!1)}};e.exports=a}),null);
__d("VFRTCMessengerRTCGroupCallIncomingDialogController",["EventEmitter","MercuryIDs","MessengerBrowserAlerts","MessengerDialogs.bs","MessengerParticipants.bs","React","VFRTCClientFeatureGating","VFRTCGroupCallIncomingDialog.react","VFRTCMessengerRTCGroupCallIncomingDialog.react","VFRTCMessengerRTCIncomingDialog.react","VFRTCSoundController","VFRTCUtils","clearTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=7e4;c=babelHelpers.inherits(a,b("EventEmitter"));g=c&&c.prototype;function a(a,b,c,d,e,f){g.constructor.call(this),this.$VFRTCMessengerRTCGroupCallIncomingDialogController11=function(a){a===void 0&&(a=this.$VFRTCMessengerRTCGroupCallIncomingDialogController5),this.cancel(),this.emit("answerCall",this.$VFRTCMessengerRTCGroupCallIncomingDialogController1,a)}.bind(this),this.$VFRTCMessengerRTCGroupCallIncomingDialogController1=a,this.$VFRTCMessengerRTCGroupCallIncomingDialogController2=b,this.$VFRTCMessengerRTCGroupCallIncomingDialogController3=c,this.$VFRTCMessengerRTCGroupCallIncomingDialogController4=d,this.$VFRTCMessengerRTCGroupCallIncomingDialogController5=e,this.$VFRTCMessengerRTCGroupCallIncomingDialogController6=f,this.$VFRTCMessengerRTCGroupCallIncomingDialogController7=null,this.$VFRTCMessengerRTCGroupCallIncomingDialogController8=null,this.$VFRTCMessengerRTCGroupCallIncomingDialogController9=!1}a.getHangUpReasonForNewRequest=function(){return null};a.prototype.serverInfoData=function(){return this.$VFRTCMessengerRTCGroupCallIncomingDialogController6};a.prototype.showIncomingDialog=function(){__p&&__p();this.$VFRTCMessengerRTCGroupCallIncomingDialogController7=b("setTimeoutAcrossTransitions")(this.$VFRTCMessengerRTCGroupCallIncomingDialogController10.bind(this),h);b("VFRTCSoundController").playIncomingRingtone(this.$VFRTCMessengerRTCGroupCallIncomingDialogController2,this.$VFRTCMessengerRTCGroupCallIncomingDialogController1,{loop:!0,isP2P:!1});if(!b("VFRTCUtils").isSupportedMWCall(this.$VFRTCMessengerRTCGroupCallIncomingDialogController1))b("MessengerParticipants.bs").get(b("MercuryIDs").getParticipantIDFromUserID(this.$VFRTCMessengerRTCGroupCallIncomingDialogController3),function(a){return b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(b("VFRTCMessengerRTCIncomingDialog.react"),{callID:this.$VFRTCMessengerRTCGroupCallIncomingDialogController2.toString(),callerParticipant:a,isVideoCall:this.$VFRTCMessengerRTCGroupCallIncomingDialogController5,onAccept:function(){return this.$VFRTCMessengerRTCGroupCallIncomingDialogController11()}.bind(this),onDecline:function(){return this.$VFRTCMessengerRTCGroupCallIncomingDialogController12()}.bind(this)})}.bind(this))}.bind(this));else{var a=[this.$VFRTCMessengerRTCGroupCallIncomingDialogController3].concat(this.$VFRTCMessengerRTCGroupCallIncomingDialogController4),c=b("VFRTCClientFeatureGating").useNewIncomingCallDialog()?b("React").createElement(b("VFRTCGroupCallIncomingDialog.react"),{callID:this.$VFRTCMessengerRTCGroupCallIncomingDialogController2.toString(),callerID:b("MercuryIDs").getParticipantIDFromUserID(this.$VFRTCMessengerRTCGroupCallIncomingDialogController3),conferenceName:this.$VFRTCMessengerRTCGroupCallIncomingDialogController1,isGroupCall:b("VFRTCUtils").isGroupCall(this.$VFRTCMessengerRTCGroupCallIncomingDialogController1),hasVideo:this.$VFRTCMessengerRTCGroupCallIncomingDialogController5,onAnswer:this.$VFRTCMessengerRTCGroupCallIncomingDialogController11,onIgnore:function(){return this.$VFRTCMessengerRTCGroupCallIncomingDialogController12()}.bind(this),participantIDs:a}):b("React").createElement(b("VFRTCMessengerRTCGroupCallIncomingDialog.react"),{callID:this.$VFRTCMessengerRTCGroupCallIncomingDialogController2.toString(),callerID:b("MercuryIDs").getParticipantIDFromUserID(this.$VFRTCMessengerRTCGroupCallIncomingDialogController3),conferenceName:this.$VFRTCMessengerRTCGroupCallIncomingDialogController1,isGroupCall:b("VFRTCUtils").isGroupCall(this.$VFRTCMessengerRTCGroupCallIncomingDialogController1),hasVideo:this.$VFRTCMessengerRTCGroupCallIncomingDialogController5,onAnswer:this.$VFRTCMessengerRTCGroupCallIncomingDialogController11,onIgnore:function(){return this.$VFRTCMessengerRTCGroupCallIncomingDialogController12()}.bind(this),participantIDs:a});b("MessengerDialogs.bs").showDialog(function(){return c})}this.$VFRTCMessengerRTCGroupCallIncomingDialogController13(this.$VFRTCMessengerRTCGroupCallIncomingDialogController5)};a.prototype.$VFRTCMessengerRTCGroupCallIncomingDialogController13=function(a){a={callID:this.$VFRTCMessengerRTCGroupCallIncomingDialogController2.toString(),peerID:this.$VFRTCMessengerRTCGroupCallIncomingDialogController3,onNotificationClicked:this.$VFRTCMessengerRTCGroupCallIncomingDialogController11.bind(this),isVideoCall:a,isGroupCall:b("VFRTCUtils").isGroupCall(this.$VFRTCMessengerRTCGroupCallIncomingDialogController1)};b("MessengerBrowserAlerts").showRTCNotification(a,function(a){this.$VFRTCMessengerRTCGroupCallIncomingDialogController8=a,this.$VFRTCMessengerRTCGroupCallIncomingDialogController9&&this.$VFRTCMessengerRTCGroupCallIncomingDialogController14()}.bind(this))};a.prototype.cancel=function(){this.$VFRTCMessengerRTCGroupCallIncomingDialogController7&&b("clearTimeout")(this.$VFRTCMessengerRTCGroupCallIncomingDialogController7),b("MessengerDialogs.bs").removeAllDialogs(),b("VFRTCSoundController").stopIncomingRingtone(),this.$VFRTCMessengerRTCGroupCallIncomingDialogController8&&this.$VFRTCMessengerRTCGroupCallIncomingDialogController14(),this.$VFRTCMessengerRTCGroupCallIncomingDialogController9=!0};a.prototype.$VFRTCMessengerRTCGroupCallIncomingDialogController12=function(){this.cancel(),this.emit("ignoreCall",!1)};a.prototype.$VFRTCMessengerRTCGroupCallIncomingDialogController10=function(){this.cancel(),this.emit("timeout",!1)};a.prototype.$VFRTCMessengerRTCGroupCallIncomingDialogController14=function(){this.$VFRTCMessengerRTCGroupCallIncomingDialogController8&&(this.$VFRTCMessengerRTCGroupCallIncomingDialogController8.close(),this.$VFRTCMessengerRTCGroupCallIncomingDialogController8=null)};e.exports=a}),null);
__d("VFRTCIncomingDialog.react",["cx","fbt","MessengerContactImageReact.bs","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogs.bs","MessengerSpinner.react","React","RTWebLoggingCallType","RTWebLoggingSurface","VFRTCAcceptButton.react","VFRTCClientFeatureGating","VFRTCDeclineButton.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerContactImageReact.bs").jsComponent,j=b("MessengerDialogBodyReact.bs").jsComponent;a=b("React").PropTypes;var k=50;c=b("React").createClass({displayName:"RTCIncomingDialog",propTypes:{callID:a.string.isRequired,callerParticipant:a.object.isRequired,onAccept:a.func.isRequired,onDecline:a.func.isRequired,isVideoCall:a.bool.isRequired},render:function(){return b("React").createElement(b("MessengerDialog.react"),{className:"_6jvl",layerHideOnBlur:!1,onToggle:this._handleToggle,width:260},b("React").createElement(j,{className:"autofocus"},this._renderDialogBody()),b("React").createElement("div",{className:(this.props.isVideoCall&&b("VFRTCClientFeatureGating").answerCallWithThreeButtons()?"_6nqr":"")+(!b("VFRTCClientFeatureGating").answerCallWithThreeButtons()||!this.props.isVideoCall?" _6jvm":"")},b("React").createElement(b("VFRTCDeclineButton.react"),{isP2P:!0,onClick:this.props.onDecline}),b("VFRTCClientFeatureGating").answerCallWithThreeButtons()||!this.props.isVideoCall?b("React").createElement(b("VFRTCAcceptButton.react"),{onAccept:function(){return this.props.onAccept(!1)}.bind(this),isVideoCall:!1,isP2P:!0}):null,this.props.isVideoCall?b("React").createElement(b("VFRTCAcceptButton.react"),{onAccept:function(){return this.props.onAccept(!0)}.bind(this),isVideoCall:!0,isP2P:!0}):null))},_dialogTitle:function(){return this.props.isVideoCall?h._("Incoming Video Chat"):h._("Incoming Call")},_renderDialogBody:function(){var a=this.props.callerParticipant;return!a?b("React").createElement(b("MessengerSpinner.react"),null):b("React").createElement("div",null,b("React").createElement(i,{className:"_6jvn",isMessengerUser:a.is_messenger_user,size:k,src:a.big_image_src||a.image_src}),b("React").createElement("div",{className:"_6jvo"},b("React").createElement("div",{className:"_6jvp"},h._("{caller name}",[h._param("caller name",a.name)])),this._dialogTitle()))},_handleToggle:function(a){a||(b("MessengerDialogs.bs").removeAllDialogs(),this.props.onDecline())}});e.exports=c}),null);
__d("VFRTCMessengerRTCIncomingDialogController",["EventEmitter","MercuryIDs","MessengerBrowserAlerts","MessengerDialogs.bs","MessengerParticipants.bs","React","VFRTCClientFeatureGating","VFRTCConstants","VFRTCExperiment","VFRTCIncomingDialog.react","VFRTCMessengerRTCIncomingDialog.react","VFRTCSoundController","clearTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=7e4;c=babelHelpers.inherits(a,b("EventEmitter"));g=c&&c.prototype;function a(a,b){g.constructor.call(this),this.$VFRTCMessengerRTCIncomingDialogController1=a,this.$VFRTCMessengerRTCIncomingDialogController2=b,this.$VFRTCMessengerRTCIncomingDialogController3=null,this.$VFRTCMessengerRTCIncomingDialogController4=!1}a.getCallEndReasonForNewRequest=function(){return null};a.prototype.showIncomingDialog=function(a){this.$VFRTCMessengerRTCIncomingDialogController5=b("setTimeoutAcrossTransitions")(this.$VFRTCMessengerRTCIncomingDialogController6.bind(this),h);var c=a===b("VFRTCConstants").IncomingCallDialogTypes.VIDEO;b("VFRTCSoundController").playIncomingRingtone(this.$VFRTCMessengerRTCIncomingDialogController2,this.$VFRTCMessengerRTCIncomingDialogController1.toString(),{loop:!0,isP2P:!0});b("MessengerParticipants.bs").get(b("MercuryIDs").getParticipantIDFromUserID(this.$VFRTCMessengerRTCIncomingDialogController1.toString()),function(a){var d=b("VFRTCClientFeatureGating").useNewIncomingCallDialog()?b("React").createElement(b("VFRTCIncomingDialog.react"),{callID:this.$VFRTCMessengerRTCIncomingDialogController2.toString(),callerParticipant:a,onAccept:this.$VFRTCMessengerRTCIncomingDialogController7.bind(this),onDecline:this.$VFRTCMessengerRTCIncomingDialogController8.bind(this),isVideoCall:c}):b("React").createElement(b("VFRTCMessengerRTCIncomingDialog.react"),{callID:this.$VFRTCMessengerRTCIncomingDialogController2.toString(),callerParticipant:a,onAccept:this.$VFRTCMessengerRTCIncomingDialogController7.bind(this),onDecline:this.$VFRTCMessengerRTCIncomingDialogController8.bind(this),isVideoCall:c});b("MessengerDialogs.bs").showDialog(function(){return d})}.bind(this));this.$VFRTCMessengerRTCIncomingDialogController9()&&this.$VFRTCMessengerRTCIncomingDialogController10(c)};a.prototype.$VFRTCMessengerRTCIncomingDialogController9=function(){return!b("VFRTCExperiment").getIncomingCallExperiments().getBool("skip_desktop_notification",!1)};a.prototype.$VFRTCMessengerRTCIncomingDialogController10=function(a){a={callID:this.$VFRTCMessengerRTCIncomingDialogController2.toString(),peerID:this.$VFRTCMessengerRTCIncomingDialogController1,onNotificationClicked:this.$VFRTCMessengerRTCIncomingDialogController7.bind(this,a),isVideoCall:a,isGroupCall:!1};b("MessengerBrowserAlerts").showRTCNotification(a,function(a){this.$VFRTCMessengerRTCIncomingDialogController3=a,this.$VFRTCMessengerRTCIncomingDialogController4&&this.$VFRTCMessengerRTCIncomingDialogController11()}.bind(this))};a.prototype.cancel=function(){this.$VFRTCMessengerRTCIncomingDialogController5&&b("clearTimeout")(this.$VFRTCMessengerRTCIncomingDialogController5),b("MessengerDialogs.bs").removeDialog(),b("VFRTCSoundController").stopIncomingRingtone(),this.$VFRTCMessengerRTCIncomingDialogController11(),this.$VFRTCMessengerRTCIncomingDialogController4=!0};a.prototype.isForPeer=function(a){return this.$VFRTCMessengerRTCIncomingDialogController1===a};a.prototype.isForCall=function(a){return this.$VFRTCMessengerRTCIncomingDialogController2===a};a.prototype.isForPeerAndCall=function(a,b){return this.$VFRTCMessengerRTCIncomingDialogController1===a&&this.$VFRTCMessengerRTCIncomingDialogController2===b};a.prototype.$VFRTCMessengerRTCIncomingDialogController7=function(a){this.cancel(),this.emit("answerCall",this.$VFRTCMessengerRTCIncomingDialogController2.toString(),a)};a.prototype.$VFRTCMessengerRTCIncomingDialogController8=function(){this.cancel(),this.emit("ignoreCall",!1)};a.prototype.$VFRTCMessengerRTCIncomingDialogController6=function(){this.cancel(),this.emit("timeout",!1)};a.prototype.$VFRTCMessengerRTCIncomingDialogController11=function(){this.$VFRTCMessengerRTCIncomingDialogController3&&(this.$VFRTCMessengerRTCIncomingDialogController3.close(),this.$VFRTCMessengerRTCIncomingDialogController3=null)};e.exports=a}),null);
__d("XBrowserNotSupportedDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/videocall/browser_not_supported/",{is_group_call:{type:"Bool",defaultValue:!1},participants:{type:"StringVector"},user_id:{type:"Int"},warning:{type:"Bool",defaultValue:!1},call_type:{type:"Enum",defaultValue:2,enumType:0},__asyncDialog:{type:"Int"}})}),null);
__d("VFRTCUnsupportedBrowserMessage",["AsyncDialog","AsyncRequest","FBRTCCallConstants","VFRTCSoundController","XBrowserNotSupportedDialogController"],(function(a,b,c,d,e,f){__p&&__p();var g=b("FBRTCCallConstants").FBRTCCallType;a={_dialog:null,warnForOutgoingCall:function(a){var c=b("XBrowserNotSupportedDialogController").getURIBuilder().setBool("warning",!0).getURI();this._presentDialog(c,a)},showForOutgoingCall:function(){var a=b("XBrowserNotSupportedDialogController").getURIBuilder().getURI();this._presentDialog(a)},showForIncomingCall:function(a,c){b("VFRTCSoundController").playIncomingRingtone(a,c,{loop:!1,isP2P:!0,isUnsupportedDialog:!0});a=b("XBrowserNotSupportedDialogController").getURIBuilder().setInt("user_id",c).getURI();this._presentDialog(a)},showForIncomingGroupCall:function(a,c,d,e){b("VFRTCSoundController").playIncomingRingtone(a,e,{loop:!1,isP2P:!1,isUnsupportedDialog:!0});a=b("XBrowserNotSupportedDialogController").getURIBuilder().setBool("is_group_call",!0).setInt("user_id",d).setStringVector("participants",c).getURI();this._presentDialog(a)},showForOutgoingGroupCall:function(){var a=b("XBrowserNotSupportedDialogController").getURIBuilder().setBool("is_group_call",!0).getURI();this._presentDialog(a)},showForUnsupportedCollabCall:function(){var a=b("XBrowserNotSupportedDialogController").getURIBuilder().setEnum("call_type",g.COLLAB_VIDEO_CALL).getURI();this._presentDialog(a)},showForUnsupportedCollabScreenSharing:function(){var a=b("XBrowserNotSupportedDialogController").getURIBuilder().setEnum("call_type",g.COLLAB_SCREEN_SHARE_CALL).getURI();this._presentDialog(a)},dismiss:function(){this._dialog&&this._dialog.hide()},_presentDialog:function(a,c){if(this._dialog)return;a=new(b("AsyncRequest"))(a);b("AsyncDialog").send(a,function(a){this._dialog=a,a.subscribe("hide",function(){this._dialog=null,c&&c()}.bind(this))}.bind(this))}};e.exports=a}),null);
__d("VFWebCallStore",["FluxReduceStore","VFRTCAppDispatcher","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h;g=babelHelpers.inherits(i,b("immutable").Record({incomingCallConferenceName:null}));g&&g.prototype;function i(){g.apply(this,arguments)}h=babelHelpers.inherits(a,b("FluxReduceStore"));h&&h.prototype;a.prototype.getInitialState=function(){return new i()};a.prototype.reduce=function(a,b){switch(b.type){case"handle_incoming_call":return a.set("incomingCallConferenceName",b.conferenceName);case"resolve_incoming_call":return a.set("incomingCallConferenceName",null);default:return a}};a.prototype.isHandlingIncomingCall=function(){return this.getState().incomingCallConferenceName!==null};a.prototype.handleIncomingCall=function(a){b("VFRTCAppDispatcher").dispatch({type:"handle_incoming_call",conferenceName:a})};a.prototype.resolveIncomingCall=function(){b("VFRTCAppDispatcher").dispatch({type:"resolve_incoming_call"})};function a(){h.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("VFRTCAppDispatcher"))}),null);
__d("VFWebSoundController",["RTCConfig","SoundPlayer"],(function(a,b,c,d,e,f){"use strict";__p&&__p();d=[b("RTCConfig").ringtone_mp3_url,b("RTCConfig").ringtone_ogg_url];f=[b("RTCConfig").jirafa_searching_mp3_url,b("RTCConfig").jirafa_searching_ogg_url];var g=[b("RTCConfig").ringback_mp3_url,b("RTCConfig").ringback_ogg_url],h=[b("RTCConfig").jirafa_end_call_mp3_url,b("RTCConfig").jirafa_end_call_ogg_url],i=[b("RTCConfig").jirafa_preview_on_mp3_url,b("RTCConfig").jirafa_preview_on_ogg_url],j=[b("RTCConfig").jirafa_preview_off_mp3_url,b("RTCConfig").jirafa_preview_off_ogg_url],k=[b("RTCConfig").jirafa_join_request_mp3_url,b("RTCConfig").jirafa_join_request_ogg_url],l=[b("RTCConfig").jirafa_entry_mp3_url,b("RTCConfig").jirafa_entry_ogg_url],m=[b("RTCConfig").jirafa_exit_mp3_url,b("RTCConfig").jirafa_exit_ogg_url];function a(a,b){this.filePaths=a,this.loop=b}a.prototype.preload=function(){b("SoundPlayer").preload(this.filePaths)};a.prototype.play=function(){b("SoundPlayer").play(this.filePaths,{loop:this.loop})};a.prototype.stop=function(){b("SoundPlayer").stop(this.filePaths)};c.prototype.preload=function(){};c.prototype.play=function(){};c.prototype.stop=function(){};function c(){}var n={incomingRingTone:new a(d,!0),contactingTone:new a(f,!0),ringbackTone:new a(g,!0),leaveCallSound:new a(h,!1),previewOnSound:new a(i,!1),previewOffSound:new a(j,!1),joinRequestSound:new a(k,!1),participantEntrySound:new a(l,!1),participantExitSound:new a(m,!1),nullSound:new c(),preloadAllSounds:function(){n.incomingRingTone.preload(),n.contactingTone.preload(),n.ringbackTone.preload(),n.leaveCallSound.preload(),n.previewOnSound.preload(),n.previewOffSound.preload(),n.joinRequestSound.preload(),n.participantEntrySound.preload()}};e.exports=n}),null);
__d("VFWebGroupCallIncomingDialogController",["regeneratorRuntime","EventEmitter","FBRTCHangupReason","VFDesktopHelper","VFRTCCallStore","VFRTCUtils","VFWebCallStore","VFWebIncomingCallDialogUtils","VFWebSoundController","clearTimeout","promiseDone","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=7e4;c=babelHelpers.inherits(a,b("EventEmitter"));g=c&&c.prototype;function a(a,c,d,e,f,h){g.constructor.call(this),this.$VFWebGroupCallIncomingDialogController8=b("VFWebSoundController").nullSound,this.$VFWebGroupCallIncomingDialogController9=function(){this.$VFWebGroupCallIncomingDialogController13(),this.emit("timeout",b("VFRTCCallStore").isInCall())}.bind(this),this.$VFWebGroupCallIncomingDialogController1=a,this.$VFWebGroupCallIncomingDialogController2=c,this.$VFWebGroupCallIncomingDialogController3=d,this.$VFWebGroupCallIncomingDialogController4=e,this.$VFWebGroupCallIncomingDialogController5=f,this.$VFWebGroupCallIncomingDialogController6=h,this.$VFWebGroupCallIncomingDialogController7=null}a.prototype.serverInfoData=function(){return this.$VFWebGroupCallIncomingDialogController6};a.getHangUpReasonForNewRequest=function(){return b("VFWebCallStore").isHandlingIncomingCall()?b("FBRTCHangupReason").IN_ANOTHER_CALL:null};a.prototype.showIncomingDialog=function(){this.$VFWebGroupCallIncomingDialogController7=b("setTimeoutAcrossTransitions")(this.$VFWebGroupCallIncomingDialogController9,h),this.$VFWebGroupCallIncomingDialogController8=b("VFRTCCallStore").isInCall()?b("VFWebSoundController").joinRequestSound:b("VFWebSoundController").incomingRingTone,this.$VFWebGroupCallIncomingDialogController8.play(),b("VFWebCallStore").handleIncomingCall(this.$VFWebGroupCallIncomingDialogController1),b("promiseDone")(this.$VFWebGroupCallIncomingDialogController10())};a.prototype.$VFWebGroupCallIncomingDialogController10=function(){__p&&__p();var a,c,d,e,f,g,h,i;return b("regeneratorRuntime").async(function(j){__p&&__p();while(1)switch(j.prev=j.next){case 0:a=b("VFRTCUtils").getThreadID(this.$VFWebGroupCallIncomingDialogController1);j.next=3;return b("regeneratorRuntime").awrap(b("VFWebIncomingCallDialogUtils").fetchIncomingCallData(this.$VFWebGroupCallIncomingDialogController3,this.$VFWebGroupCallIncomingDialogController4,a,{width:60,height:60}));case 3:c=j.sent;d=c.participants;e=c.messageThread;f=d.filter(function(a){return a.id!==b("VFRTCCallStore").getState().localUser.FBID});j.next=9;return b("regeneratorRuntime").awrap(b("VFDesktopHelper").showIncomingCallDialog(f,this.$VFWebGroupCallIncomingDialogController5,e,!1));case 9:g=j.sent;h=g.response;i=g.initializeVideo;j.t0=h;j.next=j.t0==="accept"?15:j.t0==="ignore"?17:19;break;case 15:this.$VFWebGroupCallIncomingDialogController11(Boolean(i));return j.abrupt("break",20);case 17:this.$VFWebGroupCallIncomingDialogController12();return j.abrupt("break",20);case 19:throw new Error("Received unrecognized response "+h);case 20:case"end":return j.stop()}},null,this)};a.prototype.cancel=function(){this.$VFWebGroupCallIncomingDialogController13(),b("VFWebCallStore").resolveIncomingCall()};a.prototype.$VFWebGroupCallIncomingDialogController13=function(){this.$VFWebGroupCallIncomingDialogController7&&(b("clearTimeout")(this.$VFWebGroupCallIncomingDialogController7),this.$VFWebGroupCallIncomingDialogController7=null),this.$VFWebGroupCallIncomingDialogController8.stop(),this.$VFWebGroupCallIncomingDialogController8=b("VFWebSoundController").nullSound,b("VFDesktopHelper").dismissIncomingCallDialog()};a.prototype.$VFWebGroupCallIncomingDialogController11=function(a){this.$VFWebGroupCallIncomingDialogController13(),this.emit("answerCall",this.$VFWebGroupCallIncomingDialogController1,a)};a.prototype.$VFWebGroupCallIncomingDialogController12=function(){this.$VFWebGroupCallIncomingDialogController13(),this.emit("ignoreCall",b("VFRTCCallStore").isInCall())};e.exports=a}),null);
__d("VFWebP2PCallIncomingDialogController",["regeneratorRuntime","CurrentUser","EventEmitter","VFDesktopHelper","VFRTCCallStore","VFRTCConstants","VFWebCallStore","VFWebConferenceUtils","VFWebIncomingCallDialogUtils","VFWebSoundController","clearTimeout","promiseDone","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=7e4;c=babelHelpers.inherits(a,b("EventEmitter"));g=c&&c.prototype;function a(a,c){g.constructor.call(this),this.$VFWebP2PCallIncomingDialogController4=b("VFWebSoundController").nullSound,this.$VFWebP2PCallIncomingDialogController5=function(){this.$VFWebP2PCallIncomingDialogController9(),this.emit("timeout",!1)}.bind(this),this.$VFWebP2PCallIncomingDialogController1=a,this.$VFWebP2PCallIncomingDialogController2=c,this.$VFWebP2PCallIncomingDialogController3=null}a.getCallEndReasonForNewRequest=function(){return b("VFWebCallStore").isHandlingIncomingCall()?b("VFRTCConstants").CallEndReason.IN_ANOTHER_CALL:null};a.prototype.showIncomingDialog=function(a){this.$VFWebP2PCallIncomingDialogController3=b("setTimeoutAcrossTransitions")(this.$VFWebP2PCallIncomingDialogController5,h),this.$VFWebP2PCallIncomingDialogController4=b("VFRTCCallStore").isInCall()?b("VFWebSoundController").joinRequestSound:b("VFWebSoundController").incomingRingTone,this.$VFWebP2PCallIncomingDialogController4.play(),b("VFWebCallStore").handleIncomingCall(b("VFWebConferenceUtils").buildP2PConferenceName(this.$VFWebP2PCallIncomingDialogController1)),b("promiseDone")(this.$VFWebP2PCallIncomingDialogController6(a))};a.prototype.$VFWebP2PCallIncomingDialogController6=function(a){__p&&__p();var c,d,e,f,g,h;return b("regeneratorRuntime").async(function(i){__p&&__p();while(1)switch(i.prev=i.next){case 0:c=a===b("VFRTCConstants").IncomingCallDialogTypes.VIDEO;i.next=3;return b("regeneratorRuntime").awrap(b("VFWebIncomingCallDialogUtils").fetchIncomingCallData(this.$VFWebP2PCallIncomingDialogController1,[b("CurrentUser").getAccountID()],null,{width:120,height:120}));case 3:d=i.sent;e=d.participants;i.next=7;return b("regeneratorRuntime").awrap(b("VFDesktopHelper").showIncomingCallDialog(e,c,null,!0));case 7:f=i.sent;g=f.response;h=f.initializeVideo;i.t0=g;i.next=i.t0==="accept"?13:i.t0==="ignore"?15:17;break;case 13:this.$VFWebP2PCallIncomingDialogController7(Boolean(h));return i.abrupt("break",18);case 15:this.$VFWebP2PCallIncomingDialogController8();return i.abrupt("break",18);case 17:throw new Error("Received unrecognized response "+g);case 18:case"end":return i.stop()}},null,this)};a.prototype.cancel=function(){this.$VFWebP2PCallIncomingDialogController9(),b("VFWebCallStore").resolveIncomingCall()};a.prototype.$VFWebP2PCallIncomingDialogController9=function(){this.$VFWebP2PCallIncomingDialogController3&&b("clearTimeout")(this.$VFWebP2PCallIncomingDialogController3),this.$VFWebP2PCallIncomingDialogController4.stop(),this.$VFWebP2PCallIncomingDialogController4=b("VFWebSoundController").nullSound,b("VFDesktopHelper").dismissIncomingCallDialog()};a.prototype.$VFWebP2PCallIncomingDialogController7=function(a){this.$VFWebP2PCallIncomingDialogController9(),this.emit("answerCall",this.$VFWebP2PCallIncomingDialogController2.toString(),a)};a.prototype.$VFWebP2PCallIncomingDialogController8=function(){this.$VFWebP2PCallIncomingDialogController9(),this.emit("ignoreCall",!1)};a.prototype.isForPeer=function(a){return this.$VFWebP2PCallIncomingDialogController1===a};a.prototype.isForCall=function(a){return this.$VFWebP2PCallIncomingDialogController2===a};a.prototype.isForPeerAndCall=function(a,b){return this.$VFWebP2PCallIncomingDialogController1===a&&this.$VFWebP2PCallIncomingDialogController2===b};e.exports=a}),null);
__d("VFWebRingListener",["invariant","VFDesktopHelper","VFRTCCallStore","VFRTCConstants","VFRTCGroupCallIncomingController","VFRTCIncomingCallController","VFRTCMessageListener","VFRTCMessengerRTCGroupCallIncomingDialogController","VFRTCMessengerRTCIncomingDialogController","VFRTCMessengerRTCMissedCallDialogController","VFRTCUnsupportedBrowserMessage","VFWebCallUtils","VFWebConferenceUtils","VFWebGroupCallIncomingDialogController","VFWebMissedCallDialogController","VFWebP2PCallIncomingDialogController","VFWebSupportUtils"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("VFRTCConstants").SignalingProtocol,i=null,j=null,k={init:function(){__p&&__p();if(i)return;b("VFRTCMessageListener").init(!1);var a=b("VFRTCMessengerRTCGroupCallIncomingDialogController"),c=b("VFRTCMessengerRTCIncomingDialogController");b("VFWebSupportUtils").showIncomingCallDialogV2()&&(a=b("VFWebGroupCallIncomingDialogController"),c=b("VFWebP2PCallIncomingDialogController"));var d=b("VFWebSupportUtils").showP2PMissedCallDialogV2()?new(b("VFWebMissedCallDialogController"))():b("VFRTCMessengerRTCMissedCallDialogController");i=new(b("VFRTCGroupCallIncomingController"))(a,!1);i.setCustomAnswerHandler(function(a){var c=b("VFRTCCallStore").getState().localUser.FBID;a.callSummary.onCallStarted("answer button");b("VFWebCallUtils").joinOngoingCall({initializeVideo:a.initializeVideo,callID:a.callID.toString(),conferenceName:a.conferenceName,serverInfoData:a.serverInfoData,signalingProtocol:h.MULTIWAY,endCurrentCall:b("VFWebSupportUtils").canAcceptCallWhileInCall(),remoteUserFBIDs:a.participantFBIDs.filter(function(a){return a!==c}),suppressSwitchCallUI:b("VFDesktopHelper").isDesktopApp()})});b("VFRTCMessageListener").setMultiwayMessageHandler(i.onMessageReceived.bind(i));j=new(b("VFRTCIncomingCallController"))(c,b("VFRTCUnsupportedBrowserMessage"),d);j.setCustomAnswerHandler(function(a){b("VFRTCMessageListener").removeMessageHandler(),b("VFWebCallUtils").joinOngoingCall({initializeVideo:a.initializeVideo,isAudioCall:a.isAudioCall,conferenceName:b("VFWebConferenceUtils").buildP2PConferenceName(a.peerID),callID:a==null?void 0:a.callID,signalingProtocol:h.P2P,endCurrentCall:b("VFWebSupportUtils").canAcceptCallWhileInCall(),suppressSwitchCallUI:b("VFDesktopHelper").isDesktopApp()})});k.listenP2P()},listenP2P:function(){j||g(0,1836),b("VFRTCMessageListener").removeMessageHandler(),b("VFRTCMessageListener").setMessageHandler(function(a){j&&j.onMessageReceived(a)})}};e.exports=k}),null);
__d("VFWebLogHistory",["FBLogger","LogHistory"],(function(a,b,c,d,e,f){"use strict";a=Object.create(b("LogHistory").getInstance("dvc"));a.errorObject=function(a,c,d){d===void 0&&(d={});c=JSON.stringify(babelHelpers["extends"]({error:{name:c.name,message:c.message,stack:c.stack}},d));this.error(a,c);b("FBLogger")("VFWeb").mustfix(c)};e.exports=a}),null);
__d("VFWebEndCallMutation",["Promise","regeneratorRuntime","FBRTCHangupReason","VFRTCCallActions","VFRTCCallStore","VFRTCConstants","VFRTCP2PCallStore","RTCConferenceState","VFRTCMWProtocolHandler","VFWebLogHistory","VFWebRingListener","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VFRTCConstants").SignalingProtocol;function h(a){a&&a.endCall();b("VFWebRingListener").listenP2P();return b("Promise").resolve()}function i(a,c){return b("VFRTCMWProtocolHandler").genEndCall(b("nullthrows")(a),b("FBRTCHangupReason").HANGUP_CALL,{serverInfoData:c,keepLocalStream:!0})}function a(){__p&&__p();var a,c,d,e,f,j,k;return b("regeneratorRuntime").async(function(l){__p&&__p();while(1)switch(l.prev=l.next){case 0:a=b("VFRTCCallStore").getState(),c=a.callInfo,d=a.localUser;e=b("VFRTCP2PCallStore").getState().protocolHandler;f=c.conferenceState===b("RTCConferenceState").CONNECTED||c.conferenceState===b("RTCConferenceState").CONNECTING;j=Boolean(c.protocol===g.P2P&&e);l.prev=4;if(!f){l.next=13;break}if(!j){l.next=11;break}l.next=9;return b("regeneratorRuntime").awrap(h(e));case 9:l.next=13;break;case 11:l.next=13;return b("regeneratorRuntime").awrap(i(c.conferenceName,c.serverInfoData));case 13:l.next=18;break;case 15:l.prev=15,l.t0=l["catch"](4),b("VFWebLogHistory").errorObject("VFWebEndCallMutation",l.t0);case 18:l.prev=18;k=b("VFRTCCallStore").getState().callInfo.callID;k===c.callID&&(b("VFRTCCallActions").reset(),b("VFRTCCallActions").initLocalUser(d));return l.finish(18);case 22:case"end":return l.stop()}},null,this,[[4,15,18,22]])}e.exports=a}),null);
__d("FluxTrigger",["invariant"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();h.create=function(a,b,c){return new h(a,b,c)};function h(a,b,c){this.$7=null,this.$8=function(a){this.$1.waitFor(this.$4);if(this.$3.some(function(a){return a.hasChanged()})){a=this.$5();this.$6(this.$7,a);this.$7=a}}.bind(this),this.$5=b,this.$6=c,this.$1=i(a),this.$3=a,this.$4=a.map(function(a){return a.getDispatchToken()})}h.prototype.getDispatchToken=function(){return this.$2};h.prototype.attach=function(){this.$2||(this.$2=this.$1.register(this.$8),this.$1.explicitlyRegisterStore&&this.$1.explicitlyRegisterStore(this))};h.prototype.release=function(){this.$2&&this.$1.unregister(this.$2)};function i(a){a&&a.length||g(0,5119);a=a[0].getDispatcher();return a}e.exports=h}),null);
__d("VFWebCreateCallMutation",["Promise","RelayFBEnvironment","RelayModern","VFRTCCallActions","VFRTCCallSummary","VFRTCCallSummaryStore","VFRTCConstants","nullthrows","VFWebCreateCallMutation.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("RelayModern").commitMutation;b("RelayModern").graphql;var h=b("VFRTCConstants").SignalingProtocol,i=function(){return b("VFWebCreateCallMutation.graphql")};function j(a){var c=new(b("VFRTCCallSummary"))({peerID:"MW_PEER_ID",callID:b("nullthrows")(a.clientCallId),isCaller:!0});c.onCallStarted(a.trigger);c.save(b("VFRTCCallSummaryStore").getInstance())}function a(a){j(a);return new(b("Promise"))(function(c,d){g(b("RelayFBEnvironment"),{mutation:i,variables:{input:{thread_fbid:a==null?void 0:a.threadId}},onCompleted:function(e){e=(e=e.messenger_create_call_conference)==null?void 0:e.conference_name;e?(b("VFRTCCallActions").initialize({callID:a.clientCallId,protocol:h.MULTIWAY,conferenceName:e}),c()):d(new Error("Unrecognized response"))},onError:function(a){d(a)}})})}e.exports=a}),null);
__d("VFRTCCallInitUtils",["invariant","CurrentUser","MercuryIDs","MercuryParticipantTypes","MessengerParticipants.bs","URI","VFRTCCallActions","VFRTCCallStore","VFRTCCallSummary","VFRTCCallSummaryStore","VFRTCConstants","VFRTCUser","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("VFRTCConstants").CallType,i=b("VFRTCConstants").SignalingProtocol;a={initializeCallSummary:function(a){var c=b("VFRTCCallSummary").restoreOrInitialize(b("VFRTCCallSummaryStore").getInstance(),a.peerID,a.callID,a.isCaller);b("VFRTCCallActions").setCallSummary(c);b("VFRTCCallStore").mutateCallSummary(function(b){b.onPopupOpened(),b.setCallType(a.protocol===i.P2P?a.isAudio?h.VOIP:h.DIRECT_VIDEO:"mws"),b.setActiveConnection(a.protocol===i.P2P?"p2p":"mws")})},initializeRTCUsers:function(a,c){a=a.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a)});b("MessengerParticipants.bs").getMulti(a,function(a){a=b("immutable").Map(a);this.initializeParticipantsAndStartCall(a,!0,c)}.bind(this))},initializeParticipantsAndStartCall:function(a,c,d){var e=a.keySeq().toArray();b("MessengerParticipants.bs").getBigImageMultiWithSize(e,function(e){c&&b("VFRTCCallActions").initRemoteUsers(a.filter(function(a){a=a.fbid;return a!==b("CurrentUser").getID()}).map(function(a){return this._createRTCUser(a,e)}.bind(this)).toSet());var f=b("MercuryIDs").getParticipantIDFromUserID(b("CurrentUser").getID());b("VFRTCCallActions").initLocalUser(this._createRTCUser(a.get(f),e));d()}.bind(this),100)},_createRTCUser:function(a,c){var d=a.big_image_src,e=a.fbid,f=a.user_type,h=a.href,i=a.image_src,j=a.is_messenger_user,k=a.name,l=a.room_location,m=a.short_name;a=a.vanity;e||g(0,1174);if(c){var n=b("MercuryIDs").getParticipantIDFromUserID(e);d=c[n]}return new(b("VFRTCUser"))({FBID:e,isGuestUser:f===b("MercuryParticipantTypes").GUEST,isMessengerUser:!!j,profileUrl:new(b("URI"))(h),profilePictureUrl:d||i,roomLocation:l,userName:k,userShortName:m,vanity:a?a:""})}};e.exports=a}),null);
__d("VFWebStartCallMutation",["Promise","FBRTCParticipantCallState","VFRTCCallType","VFRTCClientFeatureGating","VFRTCConstants","VFRTCLocalMessageQueue","VFRTCSdpUtils","VFRTCCallActions","VFRTCCallInitUtils","VFRTCCallStore","VFRTCMWProtocolHandler","VFRTCP2PCallStore","VFWebConferenceUtils","VFRTCgenerateRTCCallID","immutable","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VFRTCConstants").SignalingProtocol;function h(a,c,d,e){__p&&__p();return new(b("Promise"))(function(f,h){__p&&__p();b("VFRTCCallActions").initialize({protocol:g.P2P,conferenceName:d,serverInfoData:null,callID:a.callID,isCaller:!1,callType:e?b("VFRTCCallType").AUDIO_ONLY:b("VFRTCCallType").AUDIO_VIDEO});b("VFRTCCallInitUtils").initializeCallSummary({peerID:d,callID:a.callID!=null?a.callID:"0",isCaller:!1,isAudio:e,protocol:b("VFRTCConstants").SignalingProtocol.P2P});var i=b("VFRTCP2PCallStore").getState().protocolHandler;i.init(d,Number(a.callID)).setPreserveLocalStream(!0);b("VFRTCCallInitUtils").initializeRTCUsers([d,c.FBID],function(){var a=c.streams.first();a!==void 0&&b("VFRTCCallActions").addLocalStream(a);b("VFRTCCallActions").updateRemoteUsers(b("immutable").Set([b("VFRTCCallStore").getState().remoteUsers.first().setParticipantState({state:b("FBRTCParticipantCallState").CONNECTED})]));var e=b("VFRTCLocalMessageQueue").pluckOffer(d);b("promiseDone")(i.fetchTURNCredentials(),function(){i.startCall(void 0,e),i.processQueuedMessages(),f(b("VFRTCP2PCallStore").getState().protocolHandler)})})})}function i(a,c,d){var e=b("VFRTCClientFeatureGating").shouldUseH264();c=c.streams.first();var f=new(b("VFRTCMWProtocolHandler"))(Number(a.callID));f.setKeepLocalStreamsOnClose(!0).setAllowIncomingCalls(!0);f.startCall([].concat(d),c!==void 0?[c]:[],a.conferenceName,{serverInfoData:a.serverInfoData,connectedOnJoin:!0,offerSdpTransform:[function(a){return e?b("VFRTCSdpUtils").pickSpecificH264ProfileIfExists(a,{levelAsymmetryAllowed:!0,packetizationMode:!0,profileLevelId:"42001f"}):a}],preferredCodecs:{video:e?"H264/9000":void 0}});return f}function a(a,c,d,e){d===void 0&&(d=[]);return b("Promise").resolve().then(function(){var f=b("VFWebConferenceUtils").parseP2PConferenceName(a.conferenceName);return f!=null?h(a,c,f,e):i(a,c,d)})}e.exports=a}),null);
__d("VFWebCallUtils",["invariant","Promise","regeneratorRuntime","EnterMessengerCallRoomMutation","FBRTCParticipantCallState","FluxTrigger","MercuryIDs","MessengerParticipants.bs","RelayFBEnvironment","VFDesktopHelper","VFRTCCallActions","VFRTCCallStore","VFRTCConstants","VFRTCgenerateRTCCallID","VFRTCGroupCallEscalationActions","VFRTCGroupCallEscalationStore","VFRTCMWProtocolHandler","VFRTCP2PCallEscalationActions","VFRTCP2PCallEscalationStore","VFRTCP2PCallEscalator","VFRTCP2PCallStore","VFRTCP2PProtocolHandler","VFRTCUser","VFWebAppFluxStore","VFWebCallStore","VFWebConferenceUtils","VFWebCreateCallMutation","VFWebEndCallMutation","VFWebLogger","VFWebLogHistory","VFWebMediaUtils","VFWebRingListener","VFWebSoundController","VFWebStartCallMutation","immutable","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("VFRTCConstants").CallEndReason,i=b("VFRTCConstants").SignalingProtocol,j={_endingCallIDs:new Set(),placeOutgoingCall:function(a){a.clientCallId||(a.clientCallId=String(b("VFRTCgenerateRTCCallID")()));var c=b("VFRTCCallStore").isInCall();c&&!Boolean(a.suppressSwitchCallUI)?b("VFWebAppFluxStore").showCallSwitchDialog(function(){return j.placeOutgoingCall(babelHelpers["extends"]({},a,{suppressSwitchCallUI:!0}))},"create"):b("promiseDone")(b("Promise").resolve().then(function(){return c?j._endAndCleanupCall({keepLocalStreams:!0,resetP2PListener:!0}):null}).then(function(){return j._placeOutgoingCall(a)})["catch"](function(c){return b("VFWebLogHistory").errorObject("placeOutgoingCall",c,a)}))},joinOngoingCall:function(a){var c=b("VFRTCCallStore").isInCall();c&&!Boolean(a.suppressSwitchCallUI)?b("VFWebAppFluxStore").showCallSwitchDialog(function(){return j.joinOngoingCall(babelHelpers["extends"]({},a,{suppressSwitchCallUI:!0}))},"join"):b("promiseDone")(j._joinOngoingCall(a))},joinConference:function(a){var c=b("VFRTCCallStore").isInCall();c&&!Boolean(a.suppressSwitchCallUI)?b("VFWebAppFluxStore").showCallSwitchDialog(function(){return j.joinConference(babelHelpers["extends"]({},a,{suppressSwitchCallUI:!0}))},"join"):b("promiseDone")(b("Promise").resolve().then(function(){return b("EnterMessengerCallRoomMutation")(a.linkUrl)}).then(function(a){a=a.conferenceName;return j._joinOngoingCall({conferenceName:a,initializeVideo:!0,signalingProtocol:i.MULTIWAY,endCurrentCall:!0,suppressSwitchCallUI:!0})})["catch"](function(c){return b("VFWebLogHistory").errorObject("joinConference",c,{linkUrl:a.linkUrl})}))},inviteToCall:function(a){b("promiseDone")(j._inviteToCall(a))},cancelRing:function(a){var c=b("VFRTCCallStore").getState().callInfo,d=c.conferenceName;c=c.serverInfoData;b("promiseDone")(b("VFRTCMWProtocolHandler").removeParticipants(d,c,a))},ignoreIncomingCall:function(){b("promiseDone")(j._ignoreIncomingCall())},updateMediaStreams:function(){b("promiseDone")(j._updateLocalMediaStreams(),null,function(a){b("VFWebLogger").logError(null,"update_media_stream_failed",a)})},endAndCleanupCall:function(){b("promiseDone")(j._endAndCleanupCall({resetP2PListener:!0}))},reInviteToCall:function(a){b("promiseDone")(j._reInviteToCall(a))},isNotPortalShadowUser:function(a){return a.FBID!==((a=b("VFRTCCallStore").getState().localUser)==null?void 0:a.FBID)},isConnectedOrRinging:function(a){return j.isRinging(a)||j.isConnected(a)||((a=a.participantState)==null?void 0:a.state)===b("FBRTCParticipantCallState").UNKNOWN},isRinging:function(a){var c;return((c=a.participantState)==null?void 0:c.state)===b("FBRTCParticipantCallState").CONTACTING||((c=a.participantState)==null?void 0:c.state)===b("FBRTCParticipantCallState").RINGING},isConnected:function(a){var c;return((c=a.participantState)==null?void 0:c.state)===b("FBRTCParticipantCallState").CONNECTING||((c=a.participantState)==null?void 0:c.state)===b("FBRTCParticipantCallState").CONNECTED},isDisconnected:function(a){var c;return((c=a.participantState)==null?void 0:c.state)===b("FBRTCParticipantCallState").DISCONNECTED||((c=a.participantState)==null?void 0:c.state)===b("FBRTCParticipantCallState").NO_ANSWER||((c=a.participantState)==null?void 0:c.state)===b("FBRTCParticipantCallState").REJECTED||((c=a.participantState)==null?void 0:c.state)===b("FBRTCParticipantCallState").UNREACHABLE||((c=a.participantState)==null?void 0:c.state)===b("FBRTCParticipantCallState").CONNECTION_DROPPED||((c=a.participantState)==null?void 0:c.state)===b("FBRTCParticipantCallState").IN_ANOTHER_CALL},canRedial:function(a){var c;return((c=a.participantState)==null?void 0:c.state)===b("FBRTCParticipantCallState").REJECTED||((c=a.participantState)==null?void 0:c.state)===b("FBRTCParticipantCallState").NO_ANSWER||((c=a.participantState)==null?void 0:c.state)===b("FBRTCParticipantCallState").UNREACHABLE||((c=a.participantState)==null?void 0:c.state)===b("FBRTCParticipantCallState").IN_ANOTHER_CALL},redialPreviousCall:function(){var a=b("VFWebAppFluxStore").getState(),c=a.previousCallData;if(!c||!c.remoteUsers)throw new Error("Redial attempt with no previous call data!");b("promiseDone")(b("VFWebConferenceUtils").queryThreadId(c.conferenceName).then(function(a){j.placeOutgoingCall({usersToRing:c.remoteUsers.map(function(a){return a.FBID}).toArray(),threadId:a})}))},dismissPreviousCall:function(){b("VFWebAppFluxStore").setPreviousCallData(null)},toggleLocalUserVideoInCall:function(){__p&&__p();var a=b("VFRTCCallStore").getState(),c=a.localUser;a=a.callInfo;var d=a.protocol==="p2p"&&b("VFRTCP2PCallStore").getState().callType==="AUDIO_ONLY"&&b("VFRTCCallStore").isInCall();if(c.hasVideo()&&!d){b("VFRTCCallActions").toggleMuteVideo(c.isVideoMuted());return}d=c.getStream();d&&(a.protocol===i.MULTIWAY?b("VFRTCMWProtocolHandler").escalateLocalStream():a.protocol===i.P2P&&(b("VFRTCP2PCallEscalationStore").isInProgress()?b("VFRTCP2PCallEscalationActions").cancel():b("promiseDone")(b("VFWebMediaUtils").fetchLocalStreams(!0).then(function(a){return b("VFRTCP2PCallEscalator").initEscalation(a)}))))},canStartOneOnOneCallWithUser:function(a,b){return Boolean(a)&&(b.size!==1||a!==b.first().FBID)},_ensureCameraEnabled:function(){var a=b("VFRTCCallStore").getState();a=a.localUser;if(a.hasVideo()){a.isVideoMuted()&&b("VFRTCCallActions").toggleMuteVideo(!0);return b("Promise").resolve()}return b("VFWebMediaUtils").fetchAndAddLocalStreams()},_ensureAudioOnlyStream:function(){__p&&__p();var a=b("VFRTCCallStore").getState();a=a.localUser;var c=a.getStream();if(c)if(a.hasVideo()){a.stopVideo();return b("VFWebMediaUtils").fetchLocalStreams(!1).then(function(a){a&&b("VFRTCCallActions").replaceLocalStream(c,a)})}else if(a.hasAudio())return b("Promise").resolve();return b("VFWebMediaUtils").fetchAndAddLocalStreams(!1)},_placeOutgoingCall:function(a){var c=a.usersToRing,d=a.isAudioCall;return b("Promise").resolve().then(Boolean(d)?j._ensureAudioOnlyStream:j._ensureCameraEnabled).then(function(){return j._updateRemoteUsers(c)}).then(function(){return b("VFWebAppFluxStore").startCallingUsers(c)}).then(function(){return b("VFWebCreateCallMutation")(a)}).then(function(){return j._joinExistingCall({usersToRing:a.usersToRing})})["catch"](function(c){b("VFWebLogHistory").errorObject("_placeOutgoingCall",c,a);return b("VFWebAppFluxStore").leftCall()})},_joinExistingCall:function(a){__p&&__p();var c,d,e,f,g,h;return b("regeneratorRuntime").async(function(i){__p&&__p();while(1)switch(i.prev=i.next){case 0:c=Boolean(a.isAudio);d=a.usersToRing||[];e=b("VFRTCCallStore").getState(),f=e.callInfo,g=e.localUser;i.prev=3;i.next=6;return b("regeneratorRuntime").awrap(b("VFWebStartCallMutation")(f,g,d,c));case 6:h=i.sent;b("VFWebAppFluxStore").joinedCall(h);i.next=13;break;case 10:i.prev=10,i.t0=i["catch"](3),b("VFWebLogHistory").errorObject("_joinExistingCall",i.t0,{usersToRing:d});case 13:case"end":return i.stop()}},null,this,[[3,10]])},_inviteToCall:function(a){var c=b("VFRTCCallStore").getState().callInfo,d=c.conferenceName,e=c.serverInfoData;return b("Promise").resolve().then(function(){return j._addRemoteUsers(a)}).then(function(){return j._escalateIfNecessary(a)}).then(function(){return b("VFRTCMWProtocolHandler").addParticipants(d,e,a)})},_reInviteToCall:function(a){var c=b("VFRTCCallStore").getState().callInfo,d=c.conferenceName,e=c.serverInfoData;return b("Promise").resolve().then(function(){return b("VFRTCMWProtocolHandler").addParticipants(d,e,a)})},_escalateIfNecessary:function(a){__p&&__p();var c=b("VFWebAppFluxStore").getState().protocolHandler;if(c instanceof b("VFRTCP2PProtocolHandler")){b("VFRTCCallStore").getState().callInfo.protocol===i.P2P||g(0,3148);var d=a.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a)});return new(b("Promise"))(function(a,e){b("MessengerParticipants.bs").getMulti(d,function(d){b("VFRTCGroupCallEscalationActions").setUsersToRing(b("immutable").Map(d)),c.escalateToMultiway(),b("promiseDone")(j._waitForEscalation(),a,e)})})}return b("Promise").resolve()},_waitForEscalation:function(){return new(b("Promise"))(function(a,c){b("FluxTrigger").create([b("VFRTCGroupCallEscalationStore")],function(){var a=b("VFRTCGroupCallEscalationStore").getState();return{isComplete:a.readyToTransition||a.aborted,isSuccess:a.readyToTransition}},function(b,d){!(b==null?void 0:b.isComplete)&&d.isComplete&&(d.isSuccess?a():c())})})},_joinOngoingCall:function(a){__p&&__p();return b("regeneratorRuntime").async(function(c){__p&&__p();while(1)switch(c.prev=c.next){case 0:if(!b("VFRTCCallStore").isInCall()){c.next=5;break}if(a.endCurrentCall){c.next=3;break}return c.abrupt("return",b("Promise").reject(new Error("in-call switching not supported yet.")));case 3:c.next=5;return b("regeneratorRuntime").awrap(j._endAndCleanupCall({keepLocalStreams:!0,resetP2PListener:a.signalingProtocol!==i.P2P}));case 5:b("VFRTCCallActions").initialize({protocol:a.signalingProtocol,conferenceName:a.conferenceName,serverInfoData:a.serverInfoData,callID:a.callID});return c.abrupt("return",(a.initializeVideo?j._ensureCameraEnabled():j._ensureAudioOnlyStream()).then(function(){return j._updateRemoteUsers(a.remoteUserFBIDs||[])}).then(function(){return j._joinExistingCall({isAudio:a.isAudioCall})})["finally"](function(){return b("VFWebCallStore").resolveIncomingCall()}));case 7:case"end":return c.stop()}},null,this)},_ignoreIncomingCall:function(){return b("Promise").reject(new Error("Ignore in unsupported."))},_setPreviousCallData:function(){__p&&__p();var a=b("VFRTCCallStore").getState(),c=a.callSummary;a=a.callInfo;var d=b("VFRTCCallStore").getState();d=d.remoteUsers;if(d.size===0)return;c=b("VFRTCConstants").endCallReasonFromString(c.getEndCallReason());if(d.size===1){c=this._participantStateForCallEndReason(c);c!=null&&(d=b("immutable").Set([d.first().setParticipantState({state:c})]))}b("VFWebAppFluxStore").setPreviousCallData({remoteUsers:d,conferenceName:d.size>1?a.conferenceName:null})},_participantStateForCallEndReason:function(a){switch(a){case h.IGNORE_CALL:return b("FBRTCParticipantCallState").REJECTED;case h.IN_ANOTHER_CALL:return b("FBRTCParticipantCallState").IN_ANOTHER_CALL;default:return null}},_endAndCleanupCall:function(a){__p&&__p();var c,d,e,f;return b("regeneratorRuntime").async(function(g){__p&&__p();while(1)switch(g.prev=g.next){case 0:c=b("VFWebAppFluxStore").getState(),d=c.miniViewActive;e=b("VFRTCCallStore").getState(),f=e.callInfo;if(!j._endingCallIDs.has(f.callID)){g.next=4;break}return g.abrupt("return",b("Promise").resolve());case 4:j._endingCallIDs.add(f.callID);b("VFWebSoundController").leaveCallSound.play();d&&b("VFDesktopHelper").restoreFromMiniView();return g.abrupt("return",b("Promise").resolve().then(function(){return j._setPreviousCallData()}).then(function(){a.keepLocalStreams||b("VFRTCCallActions").removeAllLocalStreams(!0)}).then(b("VFWebAppFluxStore").leftCall).then(b("VFWebEndCallMutation"))["catch"](function(a){return b("VFWebLogHistory").errorObject("_endAndCleanupCall",a)})["finally"](function(){a.resetP2PListener&&b("VFWebRingListener").listenP2P(),j._endingCallIDs["delete"](f.callID)}));case 8:case"end":return g.stop()}},null,this)},_addRemoteUsers:function(a){a=a.map(k).filter(Boolean).reduce(function(a,b){return a.add(b)},b("VFRTCCallStore").getState().remoteUsers);b("VFRTCCallActions").updateRemoteUsers(a)},_updateRemoteUsers:function(a){a=b("immutable").Set(a.map(k).filter(Boolean));b("VFRTCCallActions").updateRemoteUsers(a)},_updateLocalMediaStreams:function(){__p&&__p();return b("VFWebMediaUtils").fetchLocalStreams().then(function(a){if(!a)return;var c=b("VFRTCCallStore").getState(),d=c.callInfo,e=c.localUser;c=e.getStream();a.getAudioTracks().forEach(function(a){a.enabled=!e.isAudioMuted()});if(d.protocol===i.P2P&&c)b("VFRTCCallActions").replaceLocalStream(c,a);else return b("VFRTCMWProtocolHandler").updateLocalStream(a)})}};function k(a){var c=b("RelayFBEnvironment").getStore().getSource();a=c.get(a);if(!a)return null;c=a.profile_picture&&c.get(a.profile_picture.__ref);c=c?c.uri:null;return new(b("VFRTCUser"))({FBID:a.id,isGuestUser:!1,isMessengerUser:!1,isPartiesUser:!1,lastConnectedAt:0,meetingID:null,meetingPassword:null,participantState:{state:b("FBRTCParticipantCallState").CONTACTING},profilePictureUrl:c,profileUrl:null,roomLocation:null,screenStreams:b("immutable").Set(),streams:b("immutable").Set(),userName:a.name,userShortName:a.short_name,vanity:""})}e.exports=j}),null);
__d("VFWebMediaUtils",["VFRTCCallActions","VFRTCCallStore","VFRTCConstants","VFRTCGroupCallStore","VFRTCMediaDevices","VFRTCUserMediaConstraints","VFRTCUtils","VFWebAppFluxStore","VFWebSoundController","immutable","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VFRTCConstants").VideoQuality,h={enableCamera:function(){b("VFWebSoundController").previewOnSound.play(),b("promiseDone")(h.fetchAndAddLocalStreams())},disableCamera:function(){b("VFWebSoundController").previewOffSound.play(),b("VFRTCCallActions").removeAllLocalStreams(!0)},fetchLocalStreams:function(a){__p&&__p();a===void 0&&(a=!0);var c=b("VFWebAppFluxStore").getState();c=c.userSettings;var d=c.audioInput;c=c.videoInput;return b("VFRTCUtils").getUserMedia({audio:{deviceId:d},video:a?b("VFRTCUserMediaConstraints").video(g.FHD_IDEAL_LQ_REQUIRED_VIDEO,c):!1},{supportFilteredStreams:!1}).then(function(a){b("VFWebAppFluxStore").setCameraError(null);return a},function(a){b("VFWebAppFluxStore").setCameraError(a);return null})},fetchAndAddLocalStreams:function(a){a===void 0&&(a=!0);return h.fetchLocalStreams(a).then(function(a){a&&b("VFRTCCallActions").addLocalStream(a)})},getAvailableVideoInput:function(a,b){if(a.length===0)return null;a=a.map(h.getDeviceID).filter(Boolean);return a.includes(b)?b:a.length>0?a.pop():null},ensureValidCameraSelected:function(){var a=b("VFWebAppFluxStore").getState().userSettings.videoInput;b("promiseDone")(b("VFRTCMediaDevices").enumerateDevices().then(function(a){return a.filter(function(a){return a.kind==="videoinput"})}).then(function(b){return h.getAvailableVideoInput(b,a)}).then(function(c){c!=a&&b("VFWebAppFluxStore").updateVideoInputDevices(c)}))},getUserInView:function(a,b,c){var d;a.size===1||b==null?d=a.first():d=a.find(function(a){return a.FBID===b});d==null&&(d=c);return d},getUserInViewVideoResolution:function(){__p&&__p();var a=b("VFRTCCallStore").getState(),c=a.localUser;a=a.remoteUsers;a=h.getUserInView(b("immutable").List(a),b("VFRTCGroupCallStore").getState().dominantSpeakerFBID,c);c=a.getStream();if(!c||c.getVideoTracks().length===0)return null;var d=c.getVideoTracks()[0].id;a=Array.from(document.getElementsByTagName("video")).find(function(a){a=a.srcObject?a.srcObject.getVideoTracks():null;return a&&(a==null?void 0:a.length)>0&&a[0].id===d});return a!=null?{width:a.videoWidth,height:a.videoHeight}:null},getUserInViewVideoOrientation:function(){var a=h.getUserInViewVideoResolution();return a&&(a==null?void 0:a.width)<(a==null?void 0:a.height)?"portrait":"landscape"},getDeviceID:function(a){return a?a.deviceId:null}};e.exports=h}),null);
__d("VFWebSupportUtils",["invariant","VFWebMediaUtils","WebStorage","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("WebStorage").getLocalStorage(),i={showAudioSettings:function(){return b("gkx")("678794")},showRecentCallsInSystemTray:function(){return b("gkx")("811027")},showShareCallLink:function(){return b("gkx")("678795")},showIncomingCallDialogV2:function(){return b("gkx")("678796")},showP2PMissedCallDialogV2:function(){return b("gkx")("699260")},showCallGridViewV2:function(){return b("gkx")("810420")},showStarRating:function(){return b("gkx")("812454")},showStarRatingFeedback:function(){return b("gkx")("822145")},showAspectRatioAwareMiniView:function(){return b("gkx")("814975")},acceptVideoChatLinks:function(){return b("gkx")("684302")},canAcceptCallWhileInCall:function(){return b("gkx")("691876")},canAccessDevTools:function(){return b("gkx")("698237")},enableScreenSharing:function(){return b("gkx")("680437")},isMiniViewSupported:function(){return b("gkx")("709734")},eligibleForCallSettingsNUX:function(){return b("gkx")("814872")},canReceiveMacRemoteNotifications:function(){return b("gkx")("825372")},isOnMacOSMojave:function(){return b("gkx")("843391")},showContactCards:function(){return b("gkx")("851924")},getUserSettings:function(){return h&&h.getItem?{audioInput:h.getItem("audioInput"),audioOutput:h.getItem("audioOutput"),videoInput:h.getItem("videoInput")}:{audioInput:null,audioOutput:null,videoInput:null}},setSelfViewLocation:function(a){h||g(0,13765),h.setItem("selfViewLocation",a.toString())},getSelfViewLocation:function(){h||g(0,13765);var a=parseInt(h.getItem("selfViewLocation"),10);return isNaN(a)?-1:a},saveUserSettings:function(a){h&&h.setItem&&(a.videoInput!=null&&(h.setItem("videoInput",a.videoInput),b("VFWebMediaUtils").fetchLocalStreams(!1)),a.audioInput!=null&&h.setItem("audioInput",a.audioInput),a.audioOutput!=null&&h.setItem("audioOutput",a.audioOutput))},isOldVersion:function(a){if(a==null)return!0;else if(a==="0.0.0")return!1;var b=201811061932;i.isOnMacOSMojave()&&(b=201902201851);a=parseInt(a.split(".").pop(),10);return a<b}};e.exports=i}),null);
__d("VFWebCallErrorModal.react",["React","VFWebAppFluxStore","VFWebModal.react","VFWebStrings","VFWebText.react"],(function(a,b,c,d,e,f){"use strict";var g=b("VFWebModal.react").Body,h=b("VFWebModal.react").Button,i=b("VFWebModal.react").Dialog,j=b("VFWebModal.react").Footer,k=b("VFWebModal.react").Header;function a(){return b("React").createElement(i,null,b("React").createElement(k,null,b("React").createElement(b("VFWebText.react"),{style:"title-large"},b("VFWebStrings").joining_generic_error_title)),b("React").createElement(g,null,b("React").createElement(b("VFWebText.react"),{style:"body-small"},b("VFWebStrings").joining_generic_error_message)),b("React").createElement(j,null,b("React").createElement(h,{use:"confirm",label:b("VFWebStrings").okay,onClick:b("VFWebAppFluxStore").removeOverlayModal})))}e.exports=a}),null);
__d("VFWebRingButton.react",["invariant","React","VFRTCConstants","VFWebButton.react","VFWebCallUtils","VFWebLogger","VFWebStrings","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("VFRTCConstants").SignalingProtocol;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$1=function(){var a=this.props,c=a.isAudioCall,d=a.surface,e=a.usersToRing;a=a.threadId;Boolean(c)?b("VFWebLogger").logClick(d,"vfweb_call_place_audio"):b("VFWebLogger").logClick(d,"vfweb_call_place");b("VFWebCallUtils").placeOutgoingCall({usersToRing:e,threadId:a,isAudioCall:c,trigger:"dvc_ring_button"})}.bind(this),this.$2=function(){b("VFWebLogger").logClick(this.props.surface,"vfweb_call_join"),b("VFWebCallUtils").joinOngoingCall({conferenceName:b("nullthrows")(this.props.conferenceName),serverInfoData:this.props.serverInfoData,initializeVideo:!0,signalingProtocol:i.MULTIWAY,endCurrentCall:!0,remoteUserFBIDs:this.props.usersToRing})}.bind(this),this.$3=function(){b("VFWebLogger").logClick(this.props.surface,"vfweb_call_invite"),b("VFWebCallUtils").inviteToCall(this.props.usersToRing)}.bind(this),this.$4=function(){b("VFWebLogger").logClick(this.props.surface,"vfweb_ring_cancel"),b("VFWebCallUtils").cancelRing(this.props.usersToRing)}.bind(this),this.$5=function(){b("VFWebLogger").logClick(this.props.surface,"vfweb_ring_redial"),b("VFWebCallUtils").reInviteToCall(this.props.usersToRing)}.bind(this),c}a.prototype.validateProps=function(){var a=this.props,b=a.mode,c=a.conferenceName,d=a.serverInfoData;a=a.threadId;c=c!=null&&d!==void 0;d=a!=void 0;b=="create"&&d||b=="join"&&c||!c&&!d||g(0,13181)};a.prototype.render=function(){this.validateProps();switch(this.props.mode){case"create":return b("React").createElement(b("VFWebButton.react"),{size:32,icon:Boolean(this.props.isAudioCall)?"phone":"camcorder",label:b("VFWebStrings").ring_friend_button,onClick:this.$1});case"join":return b("React").createElement(b("VFWebButton.react"),{size:28,icon:"camcorder",use:"green",label:b("VFWebStrings").join_button_label,labelIsHidden:!1,onClick:this.$2});case"invite":return b("React").createElement(b("VFWebButton.react"),{size:28,label:b("VFWebStrings").invite_friend_button,labelIsHidden:!1,onClick:this.$3});case"cancel":return b("React").createElement(b("VFWebButton.react"),{size:28,use:"clear",label:b("VFWebStrings").cancel_ring_button,labelIsHidden:!1,onClick:this.$4});case"redial":return b("React").createElement(b("VFWebButton.react"),{size:28,label:b("VFWebStrings").redial_remote_user,labelIsHidden:!1,onClick:this.$5});default:return null}};e.exports=a}),null);
__d("VFRTCSettingsAudioInputPreview.react",["cx","fbt","AudioContextSingleton","React","cancelAnimationFrame","joinClasses","requestAnimationFrame"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PureComponent;var j={fftSize:32,minDecibels:-90,maxDecibels:-10,smoothingTimeConstant:1},k=Math.log2(128+1);d=babelHelpers.inherits(a,c);i=d&&d.prototype;function a(a){i.constructor.call(this,a),this.state={noAudioTrack:!1},this.$2=b("AudioContextSingleton").get(),this.$3=this.$2.createGain(),this.$3.gain.value=a.gain,this.$4=this.$2.createAnalyser(),Object.assign(this.$4,j)}a.prototype.$7=function(a){__p&&__p();this.$8();if(!(a&&this.$1))return;if(a.getAudioTracks().length<1){this.setState({noAudioTrack:!0});return}var c=this.$1.getContext("2d");if(!c)return;this.$5&&this.$5.disconnect();this.$5=this.$2.createMediaStreamSource(a);this.$5.connect(this.$3);this.$3.connect(this.$4);a=this.$4.frequencyBinCount;var d=new Uint8Array(a);a=this.props;var e=a.width,f=a.height,g,h=function(){this.$4.getByteTimeDomainData(d);var a=l(d,e,f,g);g=a;c.clearRect(0,0,e,f);c.fillStyle=this.props.fillStyle;c.fill(n(a,e,f));this.$6=b("requestAnimationFrame")(h)}.bind(this);this.$6=b("requestAnimationFrame")(h)};a.prototype.$8=function(){b("cancelAnimationFrame")(this.$6)};a.prototype.render=function(){var a=this.props,c=a.className,d=a.gain,e=a.height,f=a.width;a=babelHelpers.objectWithoutPropertiesLoose(a,["className","gain","height","width"]);var g=this.state.noAudioTrack;this.$3.gain.value=d;return b("React").createElement("div",babelHelpers["extends"]({className:b("joinClasses")("_brl"+(g?" noAudioTrack":""),c)},a),g?b("React").createElement("span",null,this.props.noMicMessage):null,b("React").createElement("canvas",babelHelpers["extends"]({ref:function(a){return this.$1=a}.bind(this)},{width:f,height:e})))};a.prototype.componentDidUpdate=function(a){var b=this.props.mediaStream;b!==a.mediaStream&&(this.setState({noAudioTrack:!1}),this.$7(b))};a.prototype.componentDidMount=function(){this.$7(this.props.mediaStream)};a.prototype.componentWillUnmount=function(){this.$8(),this.$5&&this.$5.disconnect(),this.$3&&this.$3.disconnect()};a.defaultProps={fillStyle:"rgba(255, 255, 255, .5)",gain:3.5,height:26,noMicMessage:h._("No Mic"),width:106};function l(a,b,c,d){return[128].concat(m(a),[128]).map(function(a,e,f){a=c*(Math.log2(Math.abs(a)+1)/k);return{x:e*b/(f.length-1),y:d?Math.min(a,c-(c-d[e].y)*.95):a}})}function m(a){var b=[];for(var c=0;c*2<a.length;c++)b[c]=Math.min(a[c*2],a[c*2+1]||0);return b}function n(a,b,c){__p&&__p();var d=new Path2D();d.moveTo(0,c);a.forEach(function(b,c,a){switch(c){case 0:d.lineTo(b.x,b.y);break;case 1:break;case a.length-1:d.bezierCurveTo.apply(d,o(b,a[c-1],b));d.lineTo(b.x,b.y);break;case 2:d.lineTo((5*a[c-2].x+a[c-1].x)/6,(5*a[c-2].y+a[c-1].y)/6);default:d.bezierCurveTo.apply(d,o(b,a[c-2],a[c-1]))}});d.lineTo(b,c);d.closePath();return d}function o(a,b,c){return[(2*b.x+c.x)/3,(2*b.y+c.y)/3,(b.x+2*c.x)/3,(b.y+2*c.y)/3,(b.x+4*c.x+a.x)/6,(b.y+4*c.y+a.y)/6]}e.exports=a}),null);
__d("VFRTCSettingsAudioOutputPreview.react",["cx","Promise","MercurySoundsConfig","React","ShimButton.react","VFFBRTCUtils","VFRTCLogger","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PureComponent;d=babelHelpers.inherits(a,c);h=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.state={currentTime:0,disabled:!0,duration:0,playing:!1},this.$5=function(){var a=this.$1;if(!a||this.state.disabled)return;this.state.playing?(a.pause(),a.currentTime=0,this.$11()):(this.setState({disabled:!0}),b("promiseDone")(b("Promise").resolve(a.play()),function(){return this.setState({disabled:!1})}.bind(this)))}.bind(this),this.$12=function(a){a&&(this.$2=a)}.bind(this),this.$13=function(a){a&&(a.volume=.3,this.$1=a)}.bind(this),this.$14=function(a){a=a.target;this.setState({disabled:!1,duration:a.duration})}.bind(this),this.$15=function(){window.clearInterval(this.$3);this.setState({playing:!0,currentTime:0});var a=Date.now(),b=function(){return this.setState({currentTime:(Date.now()-a)/1e3})}.bind(this);b();this.$3=window.setInterval(b,40)}.bind(this),this.$11=function(){window.clearInterval(this.$3),this.$3=window.setTimeout(function(){return this.setState({playing:!1,currentTime:0})}.bind(this),250)}.bind(this),c}a.prototype.render=function(){return b("React").createElement(b("ShimButton.react"),{className:"_7bn0",onClick:this.$5,tabIndex:0},this.$6(),this.$7(),this.$8(),this.$9(),this.$10())};a.prototype.$6=function(){return b("React").createElement("audio",{ref:this.$12,autoPlay:!0})};a.prototype.$7=function(){return b("React").createElement("audio",{ref:this.$13,autoPlay:!1,loop:!1,preload:"auto",onDurationChange:this.$14,onPlay:this.$15,onEnded:this.$11},b("React").createElement("source",{src:b("MercurySoundsConfig").settings_preview_sound_mp3_url,type:"audio/mpeg"}),b("React").createElement("source",{src:b("MercurySoundsConfig").settings_preview_sound_ogg_url,type:"audio/ogg"}))};a.prototype.$8=function(){var a=this.state.playing?b("React").createElement("path",{d:"M7 5h2v10H7V5zm4 0h2v10H11V5z"}):b("React").createElement("path",{d:"M7 6l6 4-6 4"});return b("React").createElement("svg",{className:"_7bn1 button",viewBox:"0 0 20 20"},a)};a.prototype.$9=function(){var a=this.state,c=a.duration;a=a.currentTime;return b("React").createElement("div",{className:"_7bm4"},b("React").createElement("div",{className:"_7bm5",style:{transform:"scaleX("+(c?a/c:0)+")"}}))};a.prototype.$10=function(){var a=this.state.playing?this.state.currentTime:this.state.duration;return b("React").createElement("div",{className:"_7bn1 text"},Math.floor(a)+"s")};a.prototype.componentDidMount=function(){var a=this.props,b=a.sinkID;a=a.mediaStream;this.$16(a);this.$4=window.setTimeout(function(){return this.$17(b)}.bind(this),1e3)};a.prototype.componentDidUpdate=function(a){var b=this.props,c=b.sinkID;b=b.mediaStream;b!==a.mediaStream?(this.$16(b),this.$17(c)):c!==a.sinkID&&this.$17(c)};a.prototype.$16=function(a){this.$2&&a&&b("VFFBRTCUtils").attachMediaStream(this.$2,a)};a.prototype.$17=function(a){window.clearTimeout(this.$4);if(!this.$18()||!a)return;[this.$2,this.$1].reduce(function(b,c){return c?b.then(function(){return c.setSinkId(a)}):b},b("Promise").resolve())["catch"](function(a){})};a.prototype.$18=function(){var a=HTMLAudioElement;a=a.prototype;return"sinkId"in a&&typeof a.setSinkId==="function"};a.prototype.componentWillUnmount=function(){this.$1&&this.$1.pause(),window.clearInterval(this.$3),window.clearTimeout(this.$4),this.$2=null,this.$1=null};a.defaultProps={sinkID:null};e.exports=a}),null);
__d("VFRTCStreamWrapper",["VFFBRTCUtils","mixInEventEmitter"],(function(a,b,c,d,e,f){__p&&__p();var g=100,h=window.AudioContext||window.webkitAudioContext||window.mozAudioContext,i;function j(){"use strict";this.$1=!0,this.$2=!0,this.$3=null,this.$4=null}j.prototype.setStream=function(a,b){b===void 0&&(b=!0);var c=this.hasStream();this.stop();this.$5();this.$6();b&&(a.onaddtrack=this.$7.bind(this),a.onremovetrack=this.$7.bind(this),a.onended=this.$8.bind(this),c&&this.emit("tracksChanged"));this.$3=a};j.prototype.getStreamId=function(){"use strict";return this.$3!=null?this.$3.id:null};j.prototype.getStream=function(){"use strict";return this.$3};j.prototype.hasStream=function(){"use strict";return!!this.$3};j.prototype.stop=function(){"use strict";this.$3&&(j.stopStream(this.$3),this.$3=null)};j.prototype.hasVideoTracks=function(){"use strict";return this.$3&&this.$3.getVideoTracks?this.$3.getVideoTracks().length>0:!0};j.prototype.hasVideo=function(){"use strict";return this.$2&&this.hasVideoTracks()};j.prototype.hasAudioTracks=function(){"use strict";return this.$3&&this.$3.getAudioTracks?this.$3.getAudioTracks().length>0:!0};j.prototype.hasAudio=function(){"use strict";return this.$1&&this.hasAudioTracks()};j.prototype.attachToVideoTag=function(a){"use strict";this.$3&&(a instanceof HTMLVideoElement&&(this.$4=a,b("VFFBRTCUtils").attachMediaStream(a,this.$3),this.$9(a)))};j.prototype.getAudioAnalyser=function(){"use strict";if(this.$3){var a=this.$10(),b=a.createMediaStreamSource(this.$3);a=a.createAnalyser();a.fftSize=2048;b.connect(a);return a}return null};j.prototype.$10=function(){"use strict";i||(i=new h());return i};j.prototype.toggleMuteAudio=function(){"use strict";if(!this.hasAudioTracks())return;this.$1=!this.$1;this.$5()};j.prototype.$5=function(){"use strict";if(this.$3){var a=this.$3.getAudioTracks();for(var b=0;b<a.length;b++)a[b].enabled=this.$1}};j.prototype.toggleMuteVideo=function(){"use strict";this.$2=!this.$2,this.$2?this.$6():window.setTimeout(this.$6.bind(this),500),this.$7()};j.prototype.$6=function(){"use strict";if(this.$3){var a=this.$3.getVideoTracks();for(var b=0;b<a.length;b++)a[b].enabled=this.$2}};j.prototype.setVideoEnabled=function(a){"use strict";this.$2=a,this.$6(),this.$7()};j.prototype.$9=function(a){"use strict";!this.hasVideo()||a.currentTime>0?this.$11(a):window.setTimeout(this.$9.bind(this,a),g)};j.prototype.$11=function(a){"use strict";this.emit("streamStarted")};j.prototype.$8=function(){"use strict";this.emit("streamEnded")};j.prototype.$7=function(a){"use strict";this.$12(a)&&(this.$4!=null&&this.attachToVideoTag(this.$4)),this.emit("tracksChanged")};j.prototype.$12=function(a){"use strict";return this.$4!=null&&a!=null&&a.type==="addtrack"&&a.track.kind==="video"};j.stopStream=function(a){"use strict";a.active!=null&&a.active?a.getTracks().forEach(function(a){a.stop()}):a.stop!=null&&typeof a.stop==="function"&&a.stop()};b("mixInEventEmitter")(j,{streamStarted:!0,streamEnded:!0,tracksChanged:!0});e.exports=j}),null);
__d("VFRTCVideo.react",["cx","React","ReactDOM","VFFBRTCUtils","VFRTCStreamWrapper","joinClasses","shallowEqual"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;d=b("React").Component;f=babelHelpers.inherits(a,d);h=f&&f.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.state={currentStream:null},this.streamListener=null,b}a.prototype.UNSAFE_componentWillReceiveProps=function(a){a=a.stream;a!==this.props.stream&&(this.streamListener&&this.streamListener.remove(),this.streamListener=a?a.addListener("streamStarted",function(){return this.$1()}.bind(this)):null)};a.prototype.shouldComponentUpdate=function(a){return!b("shallowEqual")(this.props,a)||this.$2(a)};a.prototype.$2=function(a){a=a.stream;a=a?a.getStream():null;return a!==this.state.currentStream};a.prototype.render=function(){return b("React").createElement("video",{autoPlay:!0,className:b("joinClasses")(this.props.className,"_1yvx"+(this.props.mirrorVideo?" _6olb":"")),"data-testid":this.props["data-testid"],muted:this.props.muted,onContextMenu:function(a){return a.preventDefault()},onMouseDown:this.props.onMouseDown,onMouseMove:this.props.onMouseMove,onMouseUp:this.props.onMouseUp,onTouchEnd:this.props.onTouchEnd,onTouchMove:this.props.onTouchMove,onTouchStart:this.props.onTouchStart,onLoadedMetadata:this.props.onVideoLoadedMetadata})};a.prototype.componentDidMount=function(){this.$3(),this.$1(),this.$4()};a.prototype.componentDidUpdate=function(a){(this.$2(a)||a.mediaStream!==this.props.mediaStream)&&this.$3(),a.audioSinkID!==this.props.audioSinkID&&this.$1()};a.prototype.$3=function(){var a=this.props,c=a.stream;a=a.mediaStream;var d=b("ReactDOM").findDOMNode(this);d&&(c?(c.attachToVideoTag(d),this.setState({currentStream:c.getStream()})):a&&b("VFFBRTCUtils").attachMediaStream(d,a))};a.prototype.$1=function(){var a=this.props.audioSinkID,c=b("ReactDOM").findDOMNode(this);a&&c&&typeof c.setSinkId==="function"&&c.setSinkId(a)};a.prototype.$4=function(){var a=b("ReactDOM").findDOMNode(this);a&&this.props.onVideoResize&&a.addEventListener("resize",this.props.onVideoResize)};a.defaultProps={muted:!1};a.propTypes={audioSinkID:c.string,className:c.string,mediaStream:c.any,muted:c.bool,stream:c.instanceOf(b("VFRTCStreamWrapper"))};e.exports=a}),null);
__d("VFWebSettingsDialog.react",["cx","fbt","FluxContainer","Link.react","PresencePrivacy","React","SubscriptionsHandler","VFDesktopHelper","VFRTCConfig","VFRTCMediaDevices","VFRTCSettingsAudioInputPreview.react","VFRTCSettingsAudioOutputPreview.react","VFRTCUtils","VFRTCVideo.react","VFWebAppFluxStore","VFWebModal.react","VFWebText.react","nullthrows","promiseDone","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("VFWebModal.react").Body,k=b("VFWebModal.react").Button,l=b("VFWebModal.react").Footer,m=b("VFWebModal.react").Header,n=b("VFWebModal.react").Sheet;b("stylex").inject(".mb-acc9f{margin-bottom:6px}",1);b("stylex").inject(".w-94200{width:200px}",1);b("stylex").inject(".bc-04ab7{background-color:#4b4b4b}",1);b("stylex").inject(".c-136f6{color:white}",1);b("stylex").inject(".b-93424{border:none}",.1);b("stylex").inject(".h-291bb{height:26px}",1);b("stylex").inject(".h-de46b{height:80px}",1);b("stylex").inject(".mb-f1c3f{margin-bottom:10px}",1);b("stylex").inject(".p-d2b6b{position:relative}",1);b("stylex").inject(".h-3e8d9{height:100%}",1);b("stylex").inject(".bb-a71fd{border-bottom:1px solid var(--fds-white-alpha-10)}",.3);b("stylex").inject(".bt-39d31{border-top:1px solid var(--fds-white-alpha-10)}",.3);b("stylex").inject(".pt-f84c3{padding-top:20px}",1);b("stylex").inject(".pb-b7c2a{padding-bottom:20px}",1);b("stylex").inject(".h-95f8c{height:25px}",1);b("stylex").inject(".mb-3e112{margin-bottom:5px}",1);b("stylex").inject(".d-17516{display:flex}",1);b("stylex").inject(".ai-7d911{align-items:center}",1);b("stylex").inject(".jc-443f9{justify-content:space-between}",1);b("stylex").inject(".c-1dde2{color:#0099ff}",1);b("stylex").inject(".fs-f1695{font-size:0.9375rem}",1);b("stylex").inject(".b-93424{border:none}",.1);b("stylex").inject(".br-1cbea{border-radius:4px}",1);b("stylex").inject(".h-3e8d9{height:100%}",1);b("stylex").inject(".o-02b0f{overflow:hidden}",.1);b("stylex").inject(".p-5414d{position:absolute}",1);b("stylex").inject(".r-00c4b{right:0px}",1);b("stylex").inject(".t-8d3c4{top:0px}",1);b("stylex").inject(".w-3b6fd{width:106px}",1);b("stylex").inject(".bc-f08fe{background-color:var(--fds-black)}",1);c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$1=new(b("SubscriptionsHandler"))(),this.state={dirty:!1,mediaStream:null,audioInput:"",audioInputs:[],audioOutput:"",audioOutputs:[],videoInput:"",videoInputs:[],openAtLogin:b("VFDesktopHelper").isDesktopApp()&&b("VFDesktopHelper").getOpenAtLogin(),presencePrivacy:b("PresencePrivacy").getVisibility()},this.$4=function(a){this.setState({videoInput:a,dirty:!0})}.bind(this),this.$5=function(a){this.setState({audioInput:a,dirty:!0})}.bind(this),this.$6=function(a){this.setState({audioOutput:a,dirty:!0})}.bind(this),this.$7=function(a){this.setState({openAtLogin:(a=a.target)==null?void 0:a.checked,dirty:!0})}.bind(this),this.$8=function(){b("VFWebAppFluxStore").changeUserSettings({audioInput:this.state.audioInput,videoInput:this.state.videoInput,audioOutput:this.state.audioOutput}),b("VFDesktopHelper").isDesktopApp()&&b("VFDesktopHelper").setOpenAtLogin(this.state.openAtLogin),b("PresencePrivacy").setVisibility(this.state.presencePrivacy),this.$3()}.bind(this),this.$2=function(){return b("VFRTCMediaDevices").enumerateDevices().then(s).then(function(a){var b=a.audioInputs,c=a.audioOutputs;a=a.videoInputs;var d=this.state,e=d.audioInput,f=d.audioOutput;d=d.videoInput;this.setState({audioInputs:b,audioInput:r(b,e),audioOutputs:c,audioOutput:r(c,f),videoInputs:a,videoInput:r(a,d)})}.bind(this))}.bind(this),this.$14=function(){this.setState(function(a){return{presencePrivacy:a.presencePrivacy===b("PresencePrivacy").ONLINE?b("PresencePrivacy").OFFLINE:b("PresencePrivacy").ONLINE,dirty:!0}})}.bind(this),c}a.getStores=function(){return[b("VFWebAppFluxStore")]};a.calculateState=function(a){return babelHelpers["extends"]({},a,{audioInput:b("VFWebAppFluxStore").getState().userSettings.audioInput,videoInput:b("VFWebAppFluxStore").getState().userSettings.videoInput,audioOutput:b("VFWebAppFluxStore").getState().userSettings.audioOutput})};a.prototype.componentDidMount=function(){b("promiseDone")(this.$2()),b("nullthrows")(navigator.mediaDevices).addEventListener("devicechange",this.$2)};a.prototype.componentWillUnmount=function(){b("nullthrows")(navigator.mediaDevices).removeEventListener("devicechange",this.$2);this.$1&&this.$1.release();var a=this.state.mediaStream;a&&b("VFRTCUtils").stopMediaStream(a)};a.prototype.$3=function(){b("VFWebAppFluxStore").closeSettings()};a.prototype.componentDidUpdate=function(a,c){a=this.state.audioInput;var d=this.state.videoInput,e=this.state.mediaStream;(a!==c.audioInput||d!==c.videoInput||e===null)&&b("promiseDone")(b("VFRTCUtils").getUserMedia({audio:{deviceId:a},video:{deviceId:d}}).then(function(a){e&&b("VFRTCUtils").stopMediaStream(e),this.setState({mediaStream:a})}.bind(this)))};a.prototype.$9=function(){var a=this.state,c=a.videoInput,d=a.videoInputs;a=a.mediaStream;return b("React").createElement("div",{className:"p-d2b6b mb-f1c3f h-de46b"},b("React").createElement(o,null,h._("Camera")),b("React").createElement(q,{devices:d,onChange:this.$4,value:c,width:200}),b("React").createElement(b("VFRTCVideo.react"),{ref:"videoPreview",mediaStream:a,mirrorVideo:!0,muted:!0,className:"bc-f08fe w-3b6fd t-8d3c4 r-00c4b p-5414d o-02b0f h-3e8d9 br-1cbea b-93424"}))};a.prototype.$10=function(){var a=this.state,c=a.audioInput,d=a.audioInputs;a=a.mediaStream;return b("React").createElement("div",{className:"p-d2b6b mb-f1c3f h-de46b"},b("React").createElement(o,null,h._("Microphone")),b("React").createElement("div",{className:"jc-443f9 ai-7d911 d-17516"},b("React").createElement(q,{devices:d,onChange:this.$5,value:c,width:200}),b("React").createElement(b("VFRTCSettingsAudioInputPreview.react"),{mediaStream:a,fillStyle:"#0099ff"})))};a.prototype.$11=function(){var a=this.state,c=a.audioOutput;a=a.audioOutputs;return b("React").createElement("div",{className:"p-d2b6b mb-f1c3f h-de46b"},b("React").createElement(o,null,h._("Audio Output")),b("React").createElement("div",{className:"jc-443f9 ai-7d911 d-17516"},b("React").createElement(q,{devices:a,onChange:this.$6,value:c,width:200}),b("React").createElement(b("VFRTCSettingsAudioOutputPreview.react"),{mediaStream:null,sinkID:c})),b("React").createElement("audio",{autoPlay:!0,ref:"audioPreview"}))};a.prototype.$12=function(){return b("VFDesktopHelper").isDesktopApp()?b("React").createElement("div",{className:"_6t86"},b("React").createElement("input",{id:"openAtLogin",type:"checkbox",checked:this.state.openAtLogin,onChange:this.$7}),b("React").createElement("label",{htmlFor:"openAtLogin"},h._("Launch App at Login"))):null};a.prototype.$13=function(){var a=this.state.presencePrivacy===b("PresencePrivacy").ONLINE,c=a?h._("Your friends and contacts will see when you're active or recently active. You'll appear active or recently active unless you turn off the setting every place you're using Messenger or Facebook. You'll also see when your friends and contacts are active or recently active."):h._("You'll still appear active or recently active unless you turn off the setting every place you're using Messenger or Facebook. You won't see when your friends and contacts are active or recently active from here.");return b("React").createElement("div",{className:"pb-b7c2a pt-f84c3 bt-39d31 bb-a71fd h-3e8d9"},b("React").createElement("div",{className:"mb-3e112 h-95f8c"},b("React").createElement("input",{id:"presencePrivacy",type:"checkbox",checked:a,onChange:this.$14}),b("React").createElement("label",{htmlFor:"presencePrivacy",title:c},h._("Show when you're Active"))),b("React").createElement("label",null,c))};a.prototype.$15=function(){return b("React").createElement("div",{className:"_7bn2"},this.$9(),this.$10(),this.$11(),this.$12(),this.$13())};a.prototype.$16=function(){return b("React").createElement(b("VFWebText.react"),{style:"body-small"},b("React").createElement(b("Link.react"),{href:b("VFRTCConfig").userMediaErrorUrl(),target:"_blank",className:"fs-f1695 c-1dde2"},h._("Get help")))};a.prototype.render=function(){return b("React").createElement(n,null,b("React").createElement(m,null,b("React").createElement(b("VFWebText.react"),{style:"title-large"},h._("Settings"))),b("React").createElement(j,null,this.$15()),b("React").createElement(l,{leftContent:this.$16()},b("React").createElement(k,{label:"Cancel",onClick:this.$3}),b("React").createElement(k,{disabled:!this.state.dirty,use:"confirm",label:"Save",onClick:this.$8})))};var o=function(a){a=a.children;return b("React").createElement("div",{className:"mb-acc9f"},b("React").createElement(b("VFWebText.react"),{style:"title-small",color:"white-50"},a))},p={videoinput:"Camera",audioinput:"Microphone",audiooutput:"Audio Output"};function q(a){var c=0,d=a.devices.map(function(a){return b("React").createElement("option",{key:a.deviceId,value:a.deviceId},a.label?a.label:h._({"Camera":"Camera {number}","Microphone":"Microphone {number}","Audio Output":"Audio Output {number}"},[h._enum(p[a.kind],{Camera:"Camera",Microphone:"Microphone","Audio Output":"Audio Output"}),h._param("number",++c)]))}),e=!1;d.length===0&&(e=!0,d=b("React").createElement("option",{key:"not-found"},h._("No devices found")));return b("React").createElement("select",{disabled:e,onChange:function(b){return a.onChange(b.target.value)},value:a.value,className:"h-291bb b-93424 c-136f6 bc-04ab7 w-94200"},d)}function r(a,b){return b!==null&&a.some(function(a){return a.deviceId===b})?b:a.length>0?a[0].deviceId:null}function s(a){__p&&__p();var b=[],c=[],d=[];for(var a=a,e=Array.isArray(a),f=0,a=e?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=a.length)break;g=a[f++]}else{f=a.next();if(f.done)break;g=f.value}g=g;switch(g.kind){case"audioinput":b.push(g);break;case"audiooutput":c.push(g);break;case"videoinput":d.push(g);break;default:break}}return{audioInputs:b,audioOutputs:c,videoInputs:d}}e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);